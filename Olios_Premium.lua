-- Olios Obfuscated (safe loader)
-- Method: Base64 decode at runtime (no logic changed)

local __b64 = "LS0gPT09PT0gQk9PVCA9PT09PQpyZXBlYXQgdGFzay53YWl0KCkgdW50aWwgZ2FtZTpJc0xvYWRlZCgpCgpsb2NhbCBIdHRwU2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiSHR0cFNlcnZpY2UiKQpsb2NhbCBQbGF5ZXJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgTG9jYWxQbGF5ZXIgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCnJlcGVhdCB0YXNrLndhaXQoKSB1bnRpbCBMb2NhbFBsYXllcgoKLS0gPT09PT0gQ09ORklHID09PT09CmxvY2FsIEFQSV9CQVNFID0gImh0dHBzOi8vb2xpb3Nia2l0Lm9ucmVuZGVyLmNvbSIKbG9jYWwga2V5ID0gZ2V0Z2VudigpLktleQoKaWYgbm90IGtleSB0aGVuCiAgICBMb2NhbFBsYXllcjpLaWNrKCJNaXNzaW5nIEtleSIpCiAgICByZXR1cm4KZW5kCgotLSA9PT09PSBIV0lEID09PT09CmxvY2FsIGh3aWQgPSAiVU5LTk9XTiIKcGNhbGwoZnVuY3Rpb24oKQogICAgaHdpZCA9IGdhbWU6R2V0U2VydmljZSgiUmJ4QW5hbHl0aWNzU2VydmljZSIpOkdldENsaWVudElkKCkKZW5kKQoKLS0gPT09PT0gVkVSSUZZID09PT09CmxvY2FsIGZ1bmN0aW9uIHZlcmlmeUtleSgpCiAgICBsb2NhbCB1cmwgPQogICAgICAgIEFQSV9CQVNFIC4uCiAgICAgICAgIi9hcGkvdmVyaWZ5P2tleT0iIC4uCiAgICAgICAgSHR0cFNlcnZpY2U6VXJsRW5jb2RlKGtleSkgLi4KICAgICAgICAiJmh3aWQ9IiAuLgogICAgICAgIEh0dHBTZXJ2aWNlOlVybEVuY29kZShod2lkKQoKICAgIHdhcm4oIltWRVJJRlldIFVSTDoiLCB1cmwpCgogICAgZm9yIGkgPSAxLCAzIGRvCiAgICAgICAgbG9jYWwgb2ssIGJvZHkgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIHJldHVybiBnYW1lOkh0dHBHZXQodXJsKQogICAgICAgIGVuZCkKCiAgICAgICAgaWYgb2sgYW5kIGJvZHkgdGhlbgogICAgICAgICAgICBsb2NhbCBzdWNjZXNzLCByZXMgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICByZXR1cm4gSHR0cFNlcnZpY2U6SlNPTkRlY29kZShib2R5KQogICAgICAgICAgICBlbmQpCgogICAgICAgICAgICBpZiBzdWNjZXNzIGFuZCByZXMgdGhlbgogICAgICAgICAgICAgICAgaWYgcmVzLnN1Y2Nlc3MgdGhlbgogICAgICAgICAgICAgICAgICAgIHdhcm4oIltWRVJJRlldIEtFWSBPSyIpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBMb2NhbFBsYXllcjpLaWNrKHJlcy5tZXNzYWdlIG9yICJLZXkgSW52YWxpZCIpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCgogICAgICAgIHRhc2sud2FpdCgyKQogICAgZW5kCgogICAgTG9jYWxQbGF5ZXI6S2ljaygiQVBJIEVycm9yIChUaW1lb3V0KSIpCiAgICByZXR1cm4gZmFsc2UKZW5kCgotLSA9PT09PSBSVU4gPT09PT0KaWYgbm90IHZlcmlmeUtleSgpIHRoZW4KICAgIHJldHVybgplbmQKCnByaW50KCJbT2xpb3NdIFZlcmlmeSBQYXNzZWQg4oCTIExvYWQgTWVudSIpCgp0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgIC0tIE1FTlUgKyBGQVJNIOG7niDEkMOCWQpsb2NhbCB2MTQgPSBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9naXRodWIuY29tL2Rhd2lkLXNjcmlwdHMvRmx1ZW50L3JlbGVhc2VzL2xhdGVzdC9kb3dubG9hZC9tYWluLmx1YSIpKSgpOwpsb2NhbCB2MTUgPSB2MTQ6Q3JlYXRlV2luZG93KHsKICAgIFRpdGxlID0gIkZhRmEgQmV0YSBIdWItQmxveCBGcnVpdCBbIFByZW1pdW0gXSIsLS0gb2xpb3MKICAgIFN1YlRpdGxlID0gIkJ5IE9saW9zIiwtLSAKICAgIFRhYldpZHRoID0gMTYwLAogICAgVGhlbWUgPSAiRGFyayIsLS0KICAgIEFjcnlsaWMgPSBmYWxzZSwKICAgIFNpemUgPSBVRGltMi5mcm9tT2Zmc2V0KDUwMCwgMzIwKSwKICAgIE1pbmltaXplS2V5ID0gRW51bS5LZXlDb2RlLkVuZAp9KTsKbG9jYWwgdjE2ID0gewogICAgSG9tZSA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIlRhYiBJbmZvcm1hdGlvbiIKICAgIH0pLAogICAgTWFpbiA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIlRhYiBGYXJtaW5nIgogICAgfSksCiAgICBTZWEgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJUYWIgVm9sY2FubyBBbmQgU2VhIEV2ZW50IgogICAgfSksCiAgICBJVE0gPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJUYWIgRmFybWluZyBPdGhlciIKICAgIH0pLAogICAgU2V0dGluZyA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIlNldHRpbmcgRmFybSIKICAgIH0pLAogICAgU3RhdHVzID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVGFiIFN0YXR1cyBBbmQgU2VydmVyIgogICAgfSksCiAgICBTdGF0cyA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIlRhYiBTdGF0cyIKICAgIH0pLAogICAgUGxheWVyID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVGFiIExvY2FsIFBsYXllciIKICAgIH0pLAogICAgVGVsZXBvcnQgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJUYWIgVGVsZXBvcnQiCiAgICB9KSwKICAgIFZpc3VhbCA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIlRhYiBWaXN1YWwiCiAgICB9KSwKICAgIEZydWl0ID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVGFiIEVzcCBBbmQgRnJ1aXQiCiAgICB9KSwKICAgIFJhaWQgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJUYWIgUmFpZCIKICAgIH0pLAogICAgUmFjZSA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIlRhYiBVcGdyYWRlIFJhY2UiCiAgICB9KSwKICAgIFNob3AgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJUYWIgU2hvcCIKICAgIH0pLAogICAgTWlzYyA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIlRhYiBNaXNjIgogICAgfSkKfTsKbG9jYWwgdjE3ID0gdjE0Lk9wdGlvbnM7CmxvY2FsIHYxOCA9IGdhbWUuUGxhY2VJZDsKaWYgKHYxOCA9PSAyNzUzOTE1NTQ5KSB0aGVuCiAgICBTZWExID0gdHJ1ZTsKZWxzZWlmICh2MTggPT0gNDQ0MjI3MjE4MykgdGhlbgogICAgU2VhMiA9IHRydWU7CmVsc2VpZiAodjE4ID09IDc0NDk0MjM2MzUpIHRoZW4KICAgIFNlYTMgPSB0cnVlOwplbHNlCiAgICBnYW1lOlNodXRkb3duKCk7CmVuZApnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5JZGxlZDpjb25uZWN0KGZ1bmN0aW9uKCkKICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbFVzZXIiKTpCdXR0b24yRG93bihWZWN0b3IyLm5ldygwLCAwKSwgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lKTsKICAgIHdhaXQoKTsKICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbFVzZXIiKTpCdXR0b24yVXAoVmVjdG9yMi5uZXcoMCwgMCksIHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNGcmFtZSk7CmVuZCk7ClNlYTEgPSBmYWxzZTsKU2VhMiA9IGZhbHNlOwpTZWEzID0gZmFsc2U7CmxvY2FsIHYxOSA9IGdhbWUuUGxhY2VJZDsKaWYgKHYxOSA9PSAyNzUzOTE1NTQ5KSB0aGVuCiAgICBTZWExID0gdHJ1ZTsKZWxzZWlmICh2MTkgPT0gNDQ0MjI3MjE4MykgdGhlbgogICAgU2VhMiA9IHRydWU7CmVsc2VpZiAodjE5ID09IDc0NDk0MjM2MzUpIHRoZW4KICAgIFNlYTMgPSB0cnVlOwplbmQKZnVuY3Rpb24gQ2hlY2tMZXZlbCgpCiAgICBsb2NhbCB2MTk3ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZTsKICAgIGlmIFNlYTEgdGhlbgogICAgICAgIGlmICgodjE5NyA9PSAxKSBvciAodjE5NyA8PSA5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQmFuZGl0IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQmFuZGl0IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkJhbmRpdFF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkJhbmRpdCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDEwNjAuOTM4MzU0NDkyMiwgMTYuNDU1MDY2NjgwOTA4LCAxNTQ3Ljc4NDE3OTY4NzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDEwMzguNTUzMzQ0NzI2NiwgNDEuMjk2MjQ5Mzg5NjQ4LCAxNTc2LjUwOTg4NzY5NTMpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTApIG9yICh2MTk3IDw9IDE0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTW9ua2V5IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTW9ua2V5IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkp1bmdsZVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTW9ua2V5IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxNjAxLjY1NTM5NTUwNzgsIDM2Ljg1MjEzNDcwNDU5LCAxNTMuMzg4MDkyMDQxMDIpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTQ0OC4xNDQ2NTMzMjAzLCA1MC44NTE5OTM1NjA3OTEsIDYzLjYwNzE4NTM2Mzc3KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE1KSBvciAodjE5NyA8PSAyOSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkdvcmlsbGEiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJHb3JpbGxhIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkp1bmdsZVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiR29yaWxsYSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTYwMS42NTUzOTU1MDc4LCAzNi44NTIxMzQ3MDQ1OSwgMTUzLjM4ODA5MjA0MTAyKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDExNDIuNjQ4ODAzNzEwOSwgNDAuNDYyMzQ4OTM3OTg4LCAtIDUxNS4zOTIyNzI5NDkyMik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAzMCkgb3IgKHYxOTcgPD0gMzkpIG9yIChTZWxlY3RNb25zdGVyID09ICJQaXJhdGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJQaXJhdGUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQnVnZ3lRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJQaXJhdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDExNDAuMTc2MTQ3NDYwOSwgNC43NTIwNDk0NDYxMDYsIDM4MjcuNDA1NzYxNzE4OCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxMjAxLjA4ODEzNDc2NTYsIDQwLjYyODk0MDU4MjI3NSwgMzg1Ny41OTY2Nzk2ODc1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDQwKSBvciAodjE5NyA8PSA1OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkJydXRlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQnJ1dGUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQnVnZ3lRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJCcnV0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTE0MC4xNzYxNDc0NjA5LCA0Ljc1MjA0OTQ0NjEwNiwgMzgyNy40MDU3NjE3MTg4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDEzODcuNTMyNDcwNzAzMSwgMjQuNTkyMDM1MjkzNTc5LCA0MTAwLjk1NzUxOTUzMTMpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNjApIG9yICh2MTk3IDw9IDc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRGVzZXJ0IEJhbmRpdCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkRlc2VydCBCYW5kaXQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRGVzZXJ0UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJEZXNlcnQgQmFuZGl0IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoODk2LjUxNzIxMTkxNDA2LCA2LjQzODQ2MTc4MDU0ODEsIDQzOTAuMTQ5NDE0MDYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoOTg0Ljk5ODk2MjQwMjM0LCAxNi4xMDk1NTIzODM0MjMsIDQ0MTcuOTEwMTU2MjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNzUpIG9yICh2MTk3IDw9IDg5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRGVzZXJ0IE9mZmljZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJEZXNlcnQgT2ZmaWNlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEZXNlcnRRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkRlc2VydCBPZmZpY2VyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoODk2LjUxNzIxMTkxNDA2LCA2LjQzODQ2MTc4MDU0ODEsIDQzOTAuMTQ5NDE0MDYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMTU0Ny4xNTEwMDA5NzY2LCAxNC40NTIwMzg3NjQ5NTQsIDQzODEuODAwMjkyOTY4OCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA5MCkgb3IgKHYxOTcgPD0gOTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJTbm93IEJhbmRpdCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNub3cgQmFuZGl0IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNub3dRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlNub3cgQmFuZGl0IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMTM4Ni44MDczNzMwNDY5LCA4Ny4yNzI3ODkwMDE0NjUsIC0gMTI5OC4zNTc2NjYwMTU2KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxMzU2LjMwMjg1NjQ0NTMsIDEwNS43Njg2NTM4Njk2MywgLSAxMzI4LjI0MTgyMTI4OTEpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTAwKSBvciAodjE5NyA8PSAxMTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJTbm93bWFuIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU25vd21hbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTbm93UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTbm93bWFuIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMTM4Ni44MDczNzMwNDY5LCA4Ny4yNzI3ODkwMDE0NjUsIC0gMTI5OC4zNTc2NjYwMTU2KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxMjE4Ljc5NTY1NDI5NjksIDEzOC4wMTE4NDA4MjAzMSwgLSAxNDg4LjAyNjI0NTExNzIpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTIwKSBvciAodjE5NyA8PSAxNDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJDaGllZiBQZXR0eSBPZmZpY2VyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQ2hpZWYgUGV0dHkgT2ZmaWNlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJNYXJpbmVRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJDaGllZiBQZXR0eSBPZmZpY2VyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA1MDM1LjQ5NjA5Mzc1LCAyOC42Nzc4MzU0NjQ0NzgsIDQzMjQuMTg0MDgyMDMxMyk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA0OTMxLjE1NTI3MzQzNzUsIDY1Ljc5MzExMzcwODQ5NiwgNDEyMS44MzkzNTU0Njg4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE1MCkgb3IgKHYxOTcgPD0gMTc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU2t5IEJhbmRpdCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNreSBCYW5kaXQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2t5UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTa3kgQmFuZGl0IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA0ODQyLjEzNzIwNzAzMTMsIDcxNy42OTU0MzQ1NzAzMSwgLSAyNjIzLjA0ODMzOTg0MzgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNDk1NS42NDExMTMyODEzLCAzNjUuNDYzNjUzNTY0NDUsIC0gMjkwOC4xODY1MjM0Mzc1KTsKICAgICAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNzUpIG9yICh2MTk3IDw9IDE4OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkRhcmsgTWFzdGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRGFyayBNYXN0ZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2t5UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJEYXJrIE1hc3RlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNDg0Mi4xMzcyMDcwMzEzLCA3MTcuNjk1NDM0NTcwMzEsIC0gMjYyMy4wNDgzMzk4NDM4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDUxNDguMTY1MDM5MDYyNSwgNDM5LjA0NTcxNTMzMjAzLCAtIDIzMzIuOTYxMTgxNjQwNik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxOTApIG9yICh2MTk3IDw9IDIwOSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlByaXNvbmVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUHJpc29uZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiUHJpc29uZXJRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlByaXNvbmVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNTMxMC42MDU0NywgMC4zNTAwMTQ5MjUsIDQ3NC45NDY1OTQsIDAuMDE3NTAxNzExOCwgMCwgMC45OTk4NDY5MzUsIDAsIDEsIDAsIC0gMC45OTk4NDY5MzUsIDAsIDAuMDE3NTAxNzExOCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNDkzNy4zMTg4NSwgMC4zMzIwMzEzOTksIDY0OS41NzQ1MjQsIDAuNjk0NjQ5ODE2LCAwLCAtIDAuNzE5MzQ4MDczLCAwLCAxLCAwLCAwLjcxOTM0ODA3MywgMCwgMC42OTQ2NDk4MTYpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjEwKSBvciAodjE5NyA8PSAyNDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJEYW5nZXJvdXMgUHJpc29uZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJEYW5nZXJvdXMgUHJpc29uZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiUHJpc29uZXJRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkRhbmdlcm91cyBQcmlzb25lciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDUzMTAuNjA1NDcsIDAuMzUwMDE0OTI1LCA0NzQuOTQ2NTk0LCAwLjAxNzUwMTcxMTgsIDAsIDAuOTk5ODQ2OTM1LCAwLCAxLCAwLCAtIDAuOTk5ODQ2OTM1LCAwLCAwLjAxNzUwMTcxMTgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDUwOTkuNjYyNiwgMC4zNTE1NjI2NzksIDEwNTUuNzU4MywgMC44OTg5MDY4MjcsIDAsIC0gMC40MzgxMzk4NTYsIDAsIDEsIDAsIDAuNDM4MTM5ODU2LCAwLCAwLjg5ODkwNjgyNyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNTApIG9yICh2MTk3IDw9IDI3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlRvZ2EgV2FycmlvciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlRvZ2EgV2FycmlvciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDb2xvc3NldW1RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlRvZ2EgV2FycmlvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTU3Ny43ODkwNjI1LCA3LjQxNTE0MjA1OTMyNjIsIC0gMjk4NC40ODM4ODY3MTg4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE4NzIuNTE2NjAxNTYyNSwgNDkuMDgwMjE1NDU0MTAyLCAtIDI5MTMuODEwNTQ2ODc1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDI3NSkgb3IgKHYxOTcgPD0gMjk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiR2xhZGlhdG9yIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiR2xhZGlhdG9yIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNvbG9zc2V1bVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiR2xhZGlhdG9yIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxNTc3Ljc4OTA2MjUsIDcuNDE1MTQyMDU5MzI2MiwgLSAyOTg0LjQ4Mzg4NjcxODgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTUyMS4zNzQwMjM0Mzc1LCA4MS4yMDMxNzA3NzYzNjcsIC0gMzA2Ni4zMTM5NjQ4NDM4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDMwMCkgb3IgKHYxOTcgPD0gMzI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTWlsaXRhcnkgU29sZGllciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk1pbGl0YXJ5IFNvbGRpZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFnbWFRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIk1pbGl0YXJ5IFNvbGRpZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDUzMTYuMTE1NzIyNjU2MywgMTIuMjYyODMxNjg3OTI3LCA4NTE3LjAwMzkwNjI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDUzNjkuMDAwNDg4MjgxMywgNjEuMjQzNTI2NDU4NzQsIDg1NTYuNDkyMTg3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAzMjUpIG9yICh2MTk3IDw9IDM3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk1pbGl0YXJ5IFNweSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk1pbGl0YXJ5IFNweSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJNYWdtYVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTWlsaXRhcnkgU3B5IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA1MzE2LjExNTcyMjY1NjMsIDEyLjI2MjgzMTY4NzkyNywgODUxNy4wMDM5MDYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA1Nzg3LjAwMjkzLCA3NS44MjYyNjM0LCA4NjUxLjY5OTIyLCAwLjgzODU5MDU2MiwgMCwgLSAwLjU0NDc2MjE5NCwgMCwgMSwgMCwgMC41NDQ3NjIxOTQsIDAsIDAuODM4NTkwNTYyKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDM3NSkgb3IgKHYxOTcgPD0gMzk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRmlzaG1hbiBXYXJyaW9yIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRmlzaG1hbiBXYXJyaW9yIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZpc2htYW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkZpc2htYW4gV2FycmlvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDYxMTIyLjY1MjM0Mzc1LCAxOC40OTc0NDIyNDU0ODMsIDE1NjkuMzk5NzgwMjczNCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNjA4NDQuMTA1NDY4NzUsIDk4LjQ2Mjg3NTM2NjIxMSwgMTI5OC4zOTg1NTk1NzAzKTsKICAgICAgICAgICAgaWYgKF9HLkF1dG9MZXZlbCBhbmQgKChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDMwMDApKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg2MTE2My44NTE1NjI1LCAxMS42Nzk2ODc1LCAxODE5Ljc4NDE3OTY4NzUpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA0MDApIG9yICh2MTk3IDw9IDQ0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkZpc2htYW4gQ29tbWFuZG8iKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJGaXNobWFuIENvbW1hbmRvIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZpc2htYW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkZpc2htYW4gQ29tbWFuZG8iOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg2MTEyMi42NTIzNDM3NSwgMTguNDk3NDQyMjQ1NDgzLCAxNTY5LjM5OTc4MDI3MzQpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDYxNzM4LjM5ODQzNzUsIDY0LjIwNzMyMTE2Njk5MiwgMTQzMy44Mzc1MjQ0MTQxKTsKICAgICAgICAgICAgaWYgKF9HLkF1dG9MZXZlbCBhbmQgKChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDMwMDApKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg2MTE2My44NTE1NjI1LCAxMS42Nzk2ODc1LCAxODE5Ljc4NDE3OTY4NzUpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNDAwKSBvciAodjE5NyA8PSA0NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJGaXNobWFuIENvbW1hbmRvIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRmlzaG1hbiBDb21tYW5kbyI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGaXNobWFuUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJGaXNobWFuIENvbW1hbmRvIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNjExMjIuNjUyMzQzNzUsIDE4LjQ5NzQ0MjI0NTQ4MywgMTU2OS4zOTk3ODAyNzM0KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg2MTczOC4zOTg0Mzc1LCA2NC4yMDczMjExNjY5OTIsIDE0MzMuODM3NTI0NDE0MSk7CiAgICAgICAgICAgIGlmIChfRy5BdXRvTGV2ZWwgYW5kICgoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAzMDAwKSkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNjExNjMuODUxNTYyNSwgMTEuNjc5Njg3NSwgMTgxOS43ODQxNzk2ODc1KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTApIG9yICh2MTk3IDw9IDQ3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkdvZCdzIEd1YXJkIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiR29kJ3MgR3VhcmQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2t5RXhwMVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiR29kJ3MgR3VhcmQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDQ3MjEuODYwMzUxNTYyNSwgODQ1LjMwMjk3ODUxNTYzLCAtIDE5NTMuODQ4OTk5MDIzNCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA0NjI4LjA0OTgwNDY4NzUsIDg2Ni45Mjg3NzE5NzI2NiwgLSAxOTMxLjIzNTIyOTQ5MjIpOwogICAgICAgICAgICBpZiAoX0cuQXV0b0xldmVsIGFuZCAoKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMzAwMCkpIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNDYwNy44MjI3NSwgODcyLjU0MjQ4LCAtIDE2NjcuNTU2ODgpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA0NzUpIG9yICh2MTk3IDw9IDUyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNoYW5kYSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNoYW5kYSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTa3lFeHAxUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTaGFuZGEiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDc4NjMuMTU5NjY3OTY4OCwgNTU0NS41MTkwNDI5Njg4LCAtIDM3OC40MjI2Njg0NTcwMyk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA3Njg1LjE0NzQ2MDkzNzUsIDU2MDEuMDc1MTk1MzEyNSwgLSA0NDEuMzg4NzYzNDI3NzMpOwogICAgICAgICAgICBpZiAoX0cuQXV0b0xldmVsIGFuZCAoKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMzAwMCkpIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNzg5NC42MTc2NzU3ODEzLCA1NTQ3LjE0MTYwMTU2MjUsIC0gMzgwLjI5MTE5ODczMDQ3KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNTI1KSBvciAodjE5NyA8PSA1NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJSb3lhbCBTcXVhZCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlJveWFsIFNxdWFkIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNreUV4cDJRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlJveWFsIFNxdWFkIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA3OTAzLjM4MjgxMjUsIDU2MzUuOTg5NzQ2MDkzOCwgLSAxNDEwLjkyMzgyODEyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA3NjU0LjI1MTQ2NDg0MzgsIDU2MzcuMTA3OTEwMTU2MywgLSAxNDA3Ljc1NTAwNDg4MjgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNTUwKSBvciAodjE5NyA8PSA2MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJSb3lhbCBTb2xkaWVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUm95YWwgU29sZGllciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTa3lFeHAyUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJSb3lhbCBTb2xkaWVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA3OTAzLjM4MjgxMjUsIDU2MzUuOTg5NzQ2MDkzOCwgLSAxNDEwLjkyMzgyODEyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA3NzYwLjQxMDY0NDUzMTMsIDU2NzkuOTA3NzE0ODQzOCwgLSAxODg0LjgxMTI3OTI5NjkpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNjI1KSBvciAodjE5NyA8PSA2NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJHYWxsZXkgUGlyYXRlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiR2FsbGV5IFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGb3VudGFpblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiR2FsbGV5IFBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDUyNTguMjc4ODA4NTkzOCwgMzguNTI2OTMxNzYyNjk1LCA0MDUwLjA0NDkyMTg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTU1Ny4xNjg0NTcwMzEzLCAxNTIuMzI3MTc4OTU1MDgsIDM5OTguNzc1ODc4OTA2Myk7CiAgICAgICAgZWxzZWlmICgodjE5NyA+PSA2NTApIG9yIChTZWxlY3RNb25zdGVyID09ICJHYWxsZXkgQ2FwdGFpbiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkdhbGxleSBDYXB0YWluIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZvdW50YWluUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJHYWxsZXkgQ2FwdGFpbiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDUyNTguMjc4ODA4NTkzOCwgMzguNTI2OTMxNzYyNjk1LCA0MDUwLjA0NDkyMTg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTY3Ny42NzcyNDYwOTM4LCA5Mi43ODYxMDk5MjQzMTYsIDQ5NjYuNjMyMzI0MjE4OCk7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIGlmIFNlYTIgdGhlbgogICAgICAgIGlmICgodjE5NyA9PSA3MDApIG9yICh2MTk3IDw9IDcyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlJhaWRlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlJhaWRlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJBcmVhMVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUmFpZGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA0MjcuNzI1Njc3NDkwMjMsIDcyLjk5NjM0NTUyMDAyLCAxODM1Ljk0MjYyNjk1MzEpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDY4Ljg3NDU2NTEyNDUxMiwgOTMuNjM1NjQzMDA1MzcxLCAyNDI5LjY3NTI5Mjk2ODgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNzI1KSBvciAodjE5NyA8PSA3NzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJNZXJjZW5hcnkiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNZXJjZW5hcnkiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQXJlYTFRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIk1lcmNlbmFyeSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNDI3LjcyNTY3NzQ5MDIzLCA3Mi45OTYzNDU1MjAwMiwgMTgzNS45NDI2MjY5NTMxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDg2NC44NTAwOTc2NTYyNSwgMTIyLjQ3MTA0NjQ0Nzc1LCAxNDUzLjE1MDUxMjY5NTMpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNzc1KSBvciAodjE5NyA8PSA3OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJTd2FuIFBpcmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlN3YW4gUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkFyZWEyUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTd2FuIFBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDYzNS42MTE1MTEyMzA0NywgNzMuMDk2MzUxNjIzNTM1LCA5MTcuODEyOTg4MjgxMjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDEwNjUuMzY2OTQzMzU5NCwgMTM3LjY0MDEyMTQ1OTk2LCAxMzI0LjM3OTg4MjgxMjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gODAwKSBvciAodjE5NyA8PSA4NzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJGYWN0b3J5IFN0YWZmIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRmFjdG9yeSBTdGFmZiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJBcmVhMlF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRmFjdG9yeSBTdGFmZiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDYzNS42MTE1MTEyMzA0NywgNzMuMDk2MzUxNjIzNTM1LCA5MTcuODEyOTg4MjgxMjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDUzMy4yMjA0NTg5ODQzOCwgMTI4LjQ2ODc2NTI1ODc5LCAzNTUuNjI2MTU5NjY3OTcpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gODc1KSBvciAodjE5NyA8PSA4OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJNYXJpbmUgTGlldXRlbmFuIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTWFyaW5lIExpZXV0ZW5hbnQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFyaW5lUXVlc3QzIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTWFyaW5lIExpZXV0ZW5hbnQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDI0NDAuOTkzNDA4MjAzMSwgNzMuMDQxOTA4MjY0MTYsIC0gMzIxNy43MDgyNTE5NTMxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDI0ODkuMjYyMjA3MDMxMywgODQuNjEzNTk0MDU1MTc2LCAtIDMxNTEuODgzMDU2NjQwNik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA5MDApIG9yICh2MTk3IDw9IDk0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk1hcmluZSBDYXB0YWluIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTWFyaW5lIENhcHRhaW4iOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFyaW5lUXVlc3QzIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTWFyaW5lIENhcHRhaW4iOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDI0NDAuOTkzNDA4MjAzMSwgNzMuMDQxOTA4MjY0MTYsIC0gMzIxNy43MDgyNTE5NTMxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDIzMzUuMjAyNjM2NzE4OCwgNzkuNzg2NjU5MjQwNzIzLCAtIDMyNDUuODY3NDMxNjQwNik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA5NTApIG9yICh2MTk3IDw9IDk3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlpvbWJpZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlpvbWJpZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJab21iaWVRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlpvbWJpZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNTQ5NC4zNDEzMDg1OTM4LCA0OC41MDU5MzE4NTQyNDgsIC0gNzk0LjU5MDk0MjM4MjgxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDU1MzYuNDk3MDcwMzEyNSwgMTAxLjA4NTc3NzI4MjcxLCAtIDgzNS41OTA3NTkyNzczNCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA5NzUpIG9yICh2MTk3IDw9IDk5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlZhbXBpcmUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJWYW1waXJlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlpvbWJpZVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiVmFtcGlyZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNTQ5NC4zNDEzMDg1OTM4LCA0OC41MDU5MzE4NTQyNDgsIC0gNzk0LjU5MDk0MjM4MjgxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDU4MDYuMTA5ODYzMjgxMywgMTYuNzIyNTI4NDU3NjQyLCAtIDExNjQuNDM4NDc2NTYyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMDAwKSBvciAodjE5NyA8PSAxMDQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU25vdyBUcm9vcGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU25vdyBUcm9vcGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNub3dNb3VudGFpblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU25vdyBUcm9vcGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNjA3LjA1OTYzMTM0NzY2LCA0MDEuNDQ3ODE0OTQxNDEsIC0gNTM3MC41NTQ2ODc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg1MzUuMjEwNTEwMjUzOTEsIDQzMi43NDIwOTU5NDcyNywgLSA1NDg0LjkxNjUwMzkwNjMpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTA1MCkgb3IgKHYxOTcgPD0gMTA5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIldpbnRlciBXYXJyaW9yIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiV2ludGVyIFdhcnJpb3IiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU25vd01vdW50YWluUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJXaW50ZXIgV2FycmlvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDYwNy4wNTk2MzEzNDc2NiwgNDAxLjQ0NzgxNDk0MTQxLCAtIDUzNzAuNTU0Njg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMTIzNC40NDQ5NDYyODkxLCA0NTYuOTU0MTkzMTE1MjMsIC0gNTE3NC4xMzA4NTkzNzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTEwMCkgb3IgKHYxOTcgPD0gMTEyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkxhYiBTdWJvcmRpbmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkxhYiBTdWJvcmRpbmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJJY2VTaWRlUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJMYWIgU3Vib3JkaW5hdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDYwNjEuODQxNzk2ODc1LCAxNS45MjY2NzE5ODE4MTIsIC0gNDkwMi4wMzg1NzQyMTg4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDU3MjAuNTU3NjE3MTg3NSwgNjMuMzA5NDcxMTMwMzcxLCAtIDQ3ODQuNjEwMzUxNTYyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMTI1KSBvciAodjE5NyA8PSAxMTc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiSG9ybmVkIFdhcnJpb3IiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJIb3JuZWQgV2FycmlvciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJJY2VTaWRlUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJIb3JuZWQgV2FycmlvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNjA2MS44NDE3OTY4NzUsIDE1LjkyNjY3MTk4MTgxMiwgLSA0OTAyLjAzODU3NDIxODgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNjI5Mi43NTE5NTMxMjUsIDkxLjE4MTk4Mzk0Nzc1NCwgLSA1NTAyLjY0OTkwMjM0MzgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTE3NSkgb3IgKHYxOTcgPD0gMTE5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk1hZ21hIE5pbmphIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTWFnbWEgTmluamEiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRmlyZVNpZGVRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIk1hZ21hIE5pbmphIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA1NDI5LjA0NzM2MzI4MTMsIDE1Ljk3NzU2NTc2NTM4MSwgLSA1Mjk3Ljk2MTQyNTc4MTMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNTQ2MS44Mzg4NjcxODc1LCAxMzAuMzYzNDc5NjE0MjYsIC0gNTgzNi40NzAyMTQ4NDM4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEyMDApIG9yICh2MTk3IDw9IDEyNDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJMYXZhIFBpcmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkxhdmEgUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZpcmVTaWRlUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJMYXZhIFBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNTQyOS4wNDczNjMyODEzLCAxNS45Nzc1NjU3NjUzODEsIC0gNTI5Ny45NjE0MjU3ODEzKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDUyNTEuMTg4OTY0ODQzOCwgNTUuMTY0NTM1NTIyNDYxLCAtIDQ3NzQuNDA5NjY3OTY4OCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMjUwKSBvciAodjE5NyA8PSAxMjc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU2hpcCBEZWNraGFuZCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNoaXAgRGVja2hhbmQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2hpcFF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlNoaXAgRGVja2hhbmQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygxMDQwLjI5MjcyNDYwOTQsIDEyNS4wODI5MzE1MTg1NSwgMzI5MTEuMDM5MDYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoOTIxLjEyMzY1NzIyNjU2LCAxMjUuOTgzOTU1MzgzMywgMzMwODguMzI4MTI1KTsKICAgICAgICAgICAgaWYgKF9HLkF1dG9MZXZlbCBhbmQgKChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDIwMDAwKSkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoOTIzLjIxMjUyNDQxNDA2LCAxMjYuOTc2MDA1NTU0MiwgMzI4NTIuODMyMDMxMjUpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMjc1KSBvciAodjE5NyA8PSAxMjk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU2hpcCBFbmdpbmVlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNoaXAgRW5naW5lZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2hpcFF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlNoaXAgRW5naW5lZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygxMDQwLjI5MjcyNDYwOTQsIDEyNS4wODI5MzE1MTg1NSwgMzI5MTEuMDM5MDYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoODg2LjI4MTc5OTMxNjQxLCA0MC40Nzc5MDE0NTg3NCwgMzI4MDAuODMyMDMxMjUpOwogICAgICAgICAgICBpZiAoX0cuQXV0b0xldmVsIGFuZCAoKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMjAwMDApKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg5MjMuMjEyNTI0NDE0MDYsIDEyNi45NzYwMDU1NTQyLCAzMjg1Mi44MzIwMzEyNSkpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEzMDApIG9yICh2MTk3IDw9IDEzMjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJTaGlwIFN0ZXdhcmQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTaGlwIFN0ZXdhcmQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2hpcFF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlNoaXAgU3Rld2FyZCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDk3MS40MjA2NTQyOTY4OCwgMTI1LjA4MjkzMTUxODU1LCAzMzI0NS41NDI5Njg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoOTQzLjg1NTA0MTUwMzkxLCAxMjkuNTgxODMyODg1NzQsIDMzNDQ0LjM2NzE4NzUpOwogICAgICAgICAgICBpZiAoX0cuQXV0b0xldmVsIGFuZCAoKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMjAwMDApKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg5MjMuMjEyNTI0NDE0MDYsIDEyNi45NzYwMDU1NTQyLCAzMjg1Mi44MzIwMzEyNSkpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEzMjUpIG9yICh2MTk3IDw9IDEzNDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJTaGlwIE9mZmljZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTaGlwIE9mZmljZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2hpcFF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlNoaXAgT2ZmaWNlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDk3MS40MjA2NTQyOTY4OCwgMTI1LjA4MjkzMTUxODU1LCAzMzI0NS41NDI5Njg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoOTU1LjM4NDU4MjUxOTUzLCAxODEuMDgzMzU4NzY0NjUsIDMzMzMxLjg5MDYyNSk7CiAgICAgICAgICAgIGlmIChfRy5BdXRvTGV2ZWwgYW5kICgoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAyMDAwMCkpIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDkyMy4yMTI1MjQ0MTQwNiwgMTI2Ljk3NjAwNTU1NDIsIDMyODUyLjgzMjAzMTI1KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTM1MCkgb3IgKHYxOTcgPD0gMTM3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkFyY3RpYyBXYXJyaW9yIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQXJjdGljIFdhcnJpb3IiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRnJvc3RRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkFyY3RpYyBXYXJyaW9yIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNTY2OC4xMzcyMDcwMzEzLCAyOC4yMDI1MzE4MTQ1NzUsIC0gNjQ4NC42MDA1ODU5Mzc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg1OTM1LjQ1NDEwMTU2MjUsIDc3LjI2MDE2OTk4MjkxLCAtIDY0NzIuNzU2ODM1OTM3NSk7CiAgICAgICAgICAgIGlmIChfRy5BdXRvTGV2ZWwgYW5kICgoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAyMDAwMCkpIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNjUwOC41NTgxMDU0Njg4LCA4OS4wMzQ5OTYwMzI3MTUsIC0gMTMyLjgzOTUzODU3NDIyKSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTM3NSkgb3IgKHYxOTcgPD0gMTQyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNub3cgTHVya2VyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU25vdyBMdXJrZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRnJvc3RRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlNub3cgTHVya2VyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNTY2OC4xMzcyMDcwMzEzLCAyOC4yMDI1MzE4MTQ1NzUsIC0gNjQ4NC42MDA1ODU5Mzc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg1NjI4LjQ4MjQyMTg3NSwgNTcuNTc0OTk2OTQ4MjQyLCAtIDY2MTguMzQ4MTQ0NTMxMyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNDI1KSBvciAodjE5NyA8PSAxNDQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU2VhIFNvbGRpZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTZWEgU29sZGllciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGb3Jnb3R0ZW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlNlYSBTb2xkaWVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAzMDU0LjU4Mjc2MzY3MTksIDIzNi44NzIxMzEzNDc2NiwgLSAxMDE0Ny43OTAwMzkwNjMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMzE4NS4wMTUzODA4NTk0LCA1OC43ODkwODkyMDI4ODEsIC0gOTY2My42MDY0NDUzMTI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID49IDE0NTApIG9yIChTZWxlY3RNb25zdGVyID09ICJXYXRlciBGaWdodGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiV2F0ZXIgRmlnaHRlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGb3Jnb3R0ZW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIldhdGVyIEZpZ2h0ZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDMwNTQuNTgyNzYzNjcxOSwgMjM2Ljg3MjEzMTM0NzY2LCAtIDEwMTQ3Ljc5MDAzOTA2Myk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAzMjYyLjkzMDE3NTc4MTMsIDI5OC42OTAzNjg2NTIzNCwgLSAxMDU1Mi41MjkyOTY4NzUpOwogICAgICAgIGVuZAogICAgZW5kCiAgICAgICAgaWYgU2VhMyB0aGVuCiAgICAgICAgaWYgKCh2MTk3ID09IDE1MDApIG9yICh2MTk3IDw9IDE1MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJQaXJhdGUgTWlsbGlvbmFpcmUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJQaXJhdGUgTWlsbGlvbmFpcmUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiUGlyYXRlUG9ydFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUGlyYXRlIE1pbGxpb25haXJlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA0NTAuMTA0NjQ0Nzc1MzkwNiwgMTA3LjY4MTQ1NzUxOTUzMTI1LCA1OTUwLjcyNjA3NDIxODc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE5My45OTIyNzkwNTI3MzQzOCwgNTYuMTI1MDI2NzAyODgwODYsIDU3NTUuNzg4MDg1OTM3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNTI1KSBvciAodjE5NyA8PSAxNTc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiUGlzdG9sIEJpbGxpb25haXJlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUGlzdG9sIEJpbGxpb25haXJlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlBpcmF0ZVBvcnRRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlBpc3RvbCBCaWxsaW9uYWlyZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNDUwLjEwNDY0NDc3NTM5MDYsIDEwNy42ODE0NTc1MTk1MzEyNSwgNTk1MC43MjYwNzQyMTg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxODguMTQ0NjIyODAyNzM0MzgsIDg0LjQ5NjEzMTg5Njk3MjY2LCA2MzM3LjA0MTk5MjE4NzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTU3NSkgb3IgKHYxOTcgPD0gMTU5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkRyYWdvbiBDcmV3IFdhcnJpb3IiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJEcmFnb24gQ3JldyBXYXJyaW9yIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRyYWdvbkNyZXdRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkRyYWdvbiBDcmV3IFdhcnJpb3IiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg2NzM1LjExMDgzOTg0Mzc1LCAxMjYuOTkwNDYzMjU2ODM1OTQsIC0gNzExLjA5Nzk2MTQyNTc4MTIpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDY2MTUuMjMzMzk4NDM3NSwgNTAuODQ3Njc5MTM4MTgzNTk0LCAtIDk3OC45MzQwODIwMzEyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNjAwKSBvciAodjE5NyA8PSAxNjI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRHJhZ29uIENyZXcgQXJjaGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRHJhZ29uIENyZXcgQXJjaGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRyYWdvbkNyZXdRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkRyYWdvbiBDcmV3IEFyY2hlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDY3MzUuMTEwODM5ODQzNzUsIDEyNi45OTA0NjMyNTY4MzU5NCwgLSA3MTEuMDk3OTYxNDI1NzgxMik7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNjgxOC41ODkzNTU0Njg3NSwgNDgzLjcxODk5NDE0MDYyNSwgNTEyLjcyNjgwNjY0MDYyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNjI1KSBvciAodjE5NyA8PSAxNjQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiSHlkcmEgRW5mb3JjZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJIeWRyYSBFbmZvcmNlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJWZW5vbUNyZXdRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkh5ZHJhIEVuZm9yY2VyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNTQ0Ni44NzkzOTQ1MzEzLCA2MDEuNjI5NDU1NTY2NDEsIDc0OS40NTY3MjYwNzQyMik7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNDU0Ny4xMTUyMzQzNzUsIDEwMDEuNjAyMDUwNzgxMjUsIDMzNC4xOTU0NjUwODc4OTA2KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE2NTApIG9yICh2MTk3IDw9IDE2OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJWZW5vbW91cyBBc3NhaWxhbnQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJWZW5vbW91cyBBc3NhaWxhbnQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiVmVub21DcmV3UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJWZW5vbW91cyBBc3NhaWxhbnQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg1NDQ2Ljg3OTM5NDUzMTMsIDYwMS42Mjk0NTU1NjY0MSwgNzQ5LjQ1NjcyNjA3NDIyKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg0NjM3Ljg4NTI1MzkwNjI1LCAxMDc3Ljg1NTk1NzAzMTI1LCA4ODIuNDE4Mzk1OTk2MDkzOCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNzAwKSBvciAodjE5NyA8PSAxNzI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTWFyaW5lIENvbW1vZG9yZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk1hcmluZSBDb21tb2RvcmUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFyaW5lVHJlZUlzbGFuZCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIk1hcmluZSBDb21tb2RvcmUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygyMTc5Ljk4ODI4MTI1LCAyOC43MzEyMzkzMTg4NDgsIC0gNjc0MC4wNTUxNzU3ODEzKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygyMTk4LjAwNjM0NzY1NjMsIDEyOC43MTA3NTQzOTQ1MywgLSA3MTA5LjUwNDM5NDUzMTMpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTcyNSkgb3IgKHYxOTcgPD0gMTc3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk1hcmluZSBSZWFyIEFkbWlyYWwiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNYXJpbmUgUmVhciBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIk1hcmluZVRyZWVJc2xhbmQiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJNYXJpbmUgUmVhciBBZG1pcmFsIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMjE3OS45ODgyODEyNSwgMjguNzMxMjM5MzE4ODQ4LCAtIDY3NDAuMDU1MTc1NzgxMyk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMzI5NC4zMTQyMDg5ODQ0LCAzODUuNDExMjU0ODgyODEsIC0gNzA0OC42MzQyNzczNDM4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE3NzUpIG9yICh2MTk3IDw9IDE3OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJGaXNobWFuIFJhaWRlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkZpc2htYW4gUmFpZGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRlZXBGb3Jlc3RJc2xhbmQzIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRmlzaG1hbiBSYWlkZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDEwNTgyLjc1OTc2NTYyNSwgMzMxLjc4ODQ1MjE0ODQ0LCAtIDg3NTcuNjY2MDE1NjI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDEwNTUzLjI2ODU1NDY4OCwgNTIxLjM4NDM5OTQxNDA2LCAtIDgxNzYuOTQ1ODAwNzgxMyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxODAwKSBvciAodjE5NyA8PSAxODI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRmlzaG1hbiBDYXB0YWluIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRmlzaG1hbiBDYXB0YWluIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRlZXBGb3Jlc3RJc2xhbmQzIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRmlzaG1hbiBDYXB0YWluIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxMDU4My4wOTk2MDkzNzUsIDMzMS43ODg0NTIxNDg0NCwgLSA4NzU5LjQ2Mzg2NzE4NzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTA3ODkuNDAxMzY3MTg4LCA0MjcuMTg2MzcwODQ5NjEsIC0gOTEzMS40NDIzODI4MTI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE4MjUpIG9yICh2MTk3IDw9IDE4NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJGb3Jlc3QgUGlyYXRlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRm9yZXN0IFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEZWVwRm9yZXN0SXNsYW5kIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRm9yZXN0IFBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTMyMzIuNjYyMTA5Mzc1LCAzMzIuNDAzOTYxMTgxNjQsIC0gNzYyNi40ODE5MzM1OTM4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDEzNDg5LjM5NzQ2MDkzOCwgNDAwLjMwMzQ5NzMxNDQ1LCAtIDc3NzAuMjUxOTUzMTI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE4NTApIG9yICh2MTk3IDw9IDE4OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJNeXRob2xvZ2ljYWwgUGlyYXRlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTXl0aG9sb2dpY2FsIFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEZWVwRm9yZXN0SXNsYW5kIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTXl0aG9sb2dpY2FsIFBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTMyMzIuNjYyMTA5Mzc1LCAzMzIuNDAzOTYxMTgxNjQsIC0gNzYyNi40ODE5MzM1OTM4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDEzNTA4LjYxNjIxMDkzOCwgNTgyLjQ2MjI4MDI3MzQ0LCAtIDY5ODUuMzAzNzEwOTM3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxOTAwKSBvciAodjE5NyA8PSAxOTI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiSnVuZ2xlIFBpcmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkp1bmdsZSBQaXJhdGUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRGVlcEZvcmVzdElzbGFuZDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJKdW5nbGUgUGlyYXRlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxMjY4Mi4wOTY2Nzk2ODgsIDM5MC44ODY1MzU2NDQ1MywgLSA5OTAyLjEyNDAyMzQzNzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTIyNjcuMTAzNTE1NjI1LCA0NTkuNzUyNjI0NTExNzIsIC0gMTAyNzcuMjAwMTk1MzEzKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE5MjUpIG9yICh2MTk3IDw9IDE5NzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJNdXNrZXRlZXIgUGlyYXRlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTXVza2V0ZWVyIFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEZWVwRm9yZXN0SXNsYW5kMiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIk11c2tldGVlciBQaXJhdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDEyNjgyLjA5NjY3OTY4OCwgMzkwLjg4NjUzNTY0NDUzLCAtIDk5MDIuMTI0MDIzNDM3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxMzI5MS41MDc4MTI1LCA1MjAuNDczMzg4NjcxODgsIC0gOTkwNC42Mzg2NzE4NzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTk3NSkgb3IgKHYxOTcgPD0gMTk5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlJlYm9ybiBTa2VsZXRvbiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlJlYm9ybiBTa2VsZXRvbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJIYXVudGVkUXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUmVib3JuIFNrZWxldG9uIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA5NDgwLjgwNzYyLCAxNDIuMTMwNjYxLCA1NTY2LjM3MzA1LCAtIDAuMDA2NTU1MDMwNTksIDQuNTI5NTQyM2UtOCwgLSAwLjk5OTk3ODU0MiwgMi4wNDkyMDQ3ZS04LCAxLCA0LjUxNjIwNjhlLTgsIDAuOTk5OTc4NTQyLCAtIDIuMDE5NTU2OGUtOCwgLSAwLjAwNjU1NTAzMDU5KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDg3NjEuNzcxNDgsIDE4My40MzE3NDcsIDYxNjguMzMzMDEsIDAuOTc4MDczNTk3LCAtIDAuMDAwMDEzOTUwNzMyLCAtIDAuMjA4MjU5MDE2LCAtIDAuMDAwMDAxMDgwNzM5MywgMSwgLSAwLjAwMDA3MjA2MzAzLCAwLjIwODI1OTAxNiwgMC4wMDAwNzA3MDgwNCwgMC45NzgwNzM1OTcpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjAwMCkgb3IgKHYxOTcgPD0gMjAyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkxpdmluZyBab21iaWUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJMaXZpbmcgWm9tYmllIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkhhdW50ZWRRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJMaXZpbmcgWm9tYmllIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA5NDgwLjgwNzYyLCAxNDIuMTMwNjYxLCA1NTY2LjM3MzA1LCAtIDAuMDA2NTU1MDMwNTksIDQuNTI5NTQyM2UtOCwgLSAwLjk5OTk3ODU0MiwgMi4wNDkyMDQ3ZS04LCAxLCA0LjUxNjIwNjhlLTgsIDAuOTk5OTc4NTQyLCAtIDIuMDE5NTU2OGUtOCwgLSAwLjAwNjU1NTAzMDU5KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDEwMTAzLjc1MjksIDIzOC41NjU5NzksIDYxNzkuNzU5NzcsIDAuOTk5NDc0MjI3LCAyLjc3NTQ3MTRlLTgsIDAuMDMyNDI0MDM2NCwgLSAyLjU4MDA2MzNlLTgsIDEsIC0gNi4wNjg0ODVlLTgsIC0gMC4wMzI0MjQwMzY0LCA1Ljk4MTYzOWUtOCwgMC45OTk0NzQyMjcpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjAyNSkgb3IgKHYxOTcgPD0gMjA0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkRlbW9uaWMgU291bCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkRlbW9uaWMgU291bCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJIYXVudGVkUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRGVtb25pYyBTb3VsIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA5NTE2Ljk5MzE2NDA2MjUsIDE3OC4wMDY1MTU1MDI5MywgNjA3OC40NjUzMzIwMzEzKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDk3MTIuMDMxMjUsIDIwNC42OTU4OTIzMzM5OCwgNjE5My4zMjIyNjU2MjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjA1MCkgb3IgKHYxOTcgPD0gMjA3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlBvc2Vzc2VkIE11bW15IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUG9zZXNzZWQgTXVtbXkiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSGF1bnRlZFF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlBvc2Vzc2VkIE11bW15IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA5NTE2Ljk5MzE2NDA2MjUsIDE3OC4wMDY1MTU1MDI5MywgNjA3OC40NjUzMzIwMzEzKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDk1NDUuNzc2MzY3MTg3NSwgNjkuNjE5ODk1OTM1MDU5LCA2MzM5LjU2MTUyMzQzNzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjA3NSkgb3IgKHYxOTcgPD0gMjA5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlBlYW51dCBTY291dCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlBlYW51dCBTY291dCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJOdXRzSXNsYW5kUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJQZWFudXQgU2NvdXQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDIxMDUuNTMxOTgsIDM3LjI0OTU5OTUsIC0gMTAxOTUuNTA4OCwgLSAwLjc2NjA2MTY2NCwgMCwgLSAwLjY0Mjc2NzYwOCwgMCwgMSwgMCwgMC42NDI3Njc2MDgsIDAsIC0gMC43NjYwNjE2NjQpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMjE1MC41ODc4OTA2MjUsIDEyMi40OTc2NzMwMzQ2NywgLSAxMDM1OC45OTQxNDA2MjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjEwMCkgb3IgKHYxOTcgPD0gMjEyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlBlYW51dCBQcmVzaWRlbnQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJQZWFudXQgUHJlc2lkZW50IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIk51dHNJc2xhbmRRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlBlYW51dCBQcmVzaWRlbnQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDIxMDUuNTMxOTgsIDM3LjI0OTU5OTUsIC0gMTAxOTUuNTA4OCwgLSAwLjc2NjA2MTY2NCwgMCwgLSAwLjY0Mjc2NzYwOCwgMCwgMSwgMCwgMC42NDI3Njc2MDgsIDAsIC0gMC43NjYwNjE2NjQpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMjE1MC41ODc4OTA2MjUsIDEyMi40OTc2NzMwMzQ2NywgLSAxMDM1OC45OTQxNDA2MjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjEyNSkgb3IgKHYxOTcgPD0gMjE0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkljZSBDcmVhbSBDaGVmIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiSWNlIENyZWFtIENoZWYiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSWNlQ3JlYW1Jc2xhbmRRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkljZSBDcmVhbSBDaGVmIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA4MTkuMzc2NzA5LCA2NC45MjU5Nzk2LCAtIDEwOTY3LjI4MzIsIC0gMC43NjYwNjE2NjQsIDAsIDAuNjQyNzY3NjA4LCAwLCAxLCAwLCAtIDAuNjQyNzY3NjA4LCAwLCAtIDAuNzY2MDYxNjY0KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDc4OS45NDE1MjgsIDIwOS4zODI4ODksIC0gMTEwMDkuOTgwNSwgLSAwLjA3MDMxMDE1MzEsICItMCIsIC0gMC45OTc1MjUxNTYsICItMCIsIDEuMDAwMDAwMTIsICItMCIsIDAuOTk3NTI1Mjc1LCAwLCAtIDAuMDcwMzEwMTQ1Nik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMTUwKSBvciAodjE5NyA8PSAyMTk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiSWNlIENyZWFtIENvbW1hbmRlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkljZSBDcmVhbSBDb21tYW5kZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSWNlQ3JlYW1Jc2xhbmRRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkljZSBDcmVhbSBDb21tYW5kZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDgxOS4zNzY3MDksIDY0LjkyNTk3OTYsIC0gMTA5NjcuMjgzMiwgLSAwLjc2NjA2MTY2NCwgMCwgMC42NDI3Njc2MDgsIDAsIDEsIDAsIC0gMC42NDI3Njc2MDgsIDAsIC0gMC43NjYwNjE2NjQpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNzg5Ljk0MTUyOCwgMjA5LjM4Mjg4OSwgLSAxMTAwOS45ODA1LCAtIDAuMDcwMzEwMTUzMSwgIi0wIiwgLSAwLjk5NzUyNTE1NiwgIi0wIiwgMS4wMDAwMDAxMiwgIi0wIiwgMC45OTc1MjUyNzUsIDAsIC0gMC4wNzAzMTAxNDU2KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIyMDApIG9yICh2MTk3IDw9IDIyMjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJDb29raWUgQ3JhZnRlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkNvb2tpZSBDcmFmdGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNha2VRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJDb29raWUgQ3JhZnRlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMjAyMi4yOTg1OCwgMzYuOTI3NTg5NCwgLSAxMjAzMC45NzY2LCAtIDAuOTYxMjczOTA5LCAwLCAtIDAuMjc1NTk0NTkyLCAwLCAxLCAwLCAwLjI3NTU5NDU5MiwgMCwgLSAwLjk2MTI3MzkwOSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAyMzIxLjcxMjE2LCAzNi42OTk0ODIsIC0gMTIyMTYuNzg3MSwgLSAwLjc4MDA3NDk1NCwgMCwgMC42MjU2ODYxMDksIDAsIDEsIDAsIC0gMC42MjU2ODYxMDksIDAsIC0gMC43ODAwNzQ5NTQpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjIyNSkgb3IgKHYxOTcgPD0gMjI0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkNha2UgR3VhcmQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJDYWtlIEd1YXJkIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNha2VRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJDYWtlIEd1YXJkIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAyMDIyLjI5ODU4LCAzNi45Mjc1ODk0LCAtIDEyMDMwLjk3NjYsIC0gMC45NjEyNzM5MDksIDAsIC0gMC4yNzU1OTQ1OTIsIDAsIDEsIDAsIDAuMjc1NTk0NTkyLCAwLCAtIDAuOTYxMjczOTA5KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE0MTguMTEwMTEsIDM2LjY3MTg5NDEsIC0gMTIyNTUuNzMyNCwgMC4wNjc3ODQ0ODgyLCAwLCAwLjk5NzcwMDAzNiwgMCwgMSwgMCwgLSAwLjk5NzcwMDAzNiwgMCwgMC4wNjc3ODQ0ODgyKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIyNTApIG9yICh2MTk3IDw9IDIyNzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJCYWtpbmcgU3RhZmYiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJCYWtpbmcgU3RhZmYiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2FrZVF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkJha2luZyBTdGFmZiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTkyOC4zMTc2MywgMzcuNzI5NjYzOCwgLSAxMjg0MC42MjYsIDAuOTUxMDY4NDAxLCAiLTAiLCAtIDAuMzA4OTgwNDY1LCAwLCAxLCAiLTAiLCAwLjMwODk4MDQ2NSwgMCwgMC45NTEwNjg0MDEpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTk4MC40Mzg0OCwgMzYuNjcxNjc2NiwgLSAxMjk4My44NDE4LCAtIDAuMjU0NDQzNzY1LCAwLCAtIDAuOTY3MDg3NTY3LCAwLCAxLCAwLCAwLjk2NzA4NzU2NywgMCwgLSAwLjI1NDQ0Mzc2NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMjc1KSBvciAodjE5NyA8PSAyMjk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiSGVhZCBCYWtlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkhlYWQgQmFrZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2FrZVF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkhlYWQgQmFrZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE5MjguMzE3NjMsIDM3LjcyOTY2MzgsIC0gMTI4NDAuNjI2LCAwLjk1MTA2ODQwMSwgIi0wIiwgLSAwLjMwODk4MDQ2NSwgMCwgMSwgIi0wIiwgMC4zMDg5ODA0NjUsIDAsIDAuOTUxMDY4NDAxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDIyNTEuNTc5MSwgNTIuMjcxNDYxNSwgLSAxMzAzMy4zOTY1LCAtIDAuOTkxOTcxMDE2LCAwLCAtIDAuMTI2NDY2MDk1LCAwLCAxLCAwLCAwLjEyNjQ2NjA5NSwgMCwgLSAwLjk5MTk3MTAxNik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMzAwKSBvciAodjE5NyA8PSAyMzI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQ29jb2EgV2FycmlvciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkNvY29hIFdhcnJpb3IiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2hvY1F1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkNvY29hIFdhcnJpb3IiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygyMzEuNzUsIDIzLjkwMDMwMjksIC0gMTIyMDAuMjkyLCAtIDEsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIC0gMSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMTY3Ljk3ODUxNiwgMjYuMjI1NDY1OCwgLSAxMjIzOC44NzQsIC0gMC45Mzk3MDA5NjEsIDAsIDAuMzQxOTk4MzY5LCAwLCAxLCAwLCAtIDAuMzQxOTk4MzY5LCAwLCAtIDAuOTM5NzAwOTYxKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIzMjUpIG9yICh2MTk3IDw9IDIzNDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJDaG9jb2xhdGUgQmFyIEJhdHRsZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJDaG9jb2xhdGUgQmFyIEJhdHRsZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2hvY1F1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkNob2NvbGF0ZSBCYXIgQmF0dGxlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDIzMS43NSwgMjMuOTAwMzAyOSwgLSAxMjIwMC4yOTIsIC0gMSwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgLSAxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg3MDEuMzEyMDczLCAyNS41ODI0OTg2LCAtIDEyNzA4LjIxNDgsIC0gMC4zNDIwNDI2ODUsIDAsIC0gMC45Mzk2ODQzOTEsIDAsIDEsIDAsIDAuOTM5Njg0MzkxLCAwLCAtIDAuMzQyMDQyNjg1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIzNTApIG9yICh2MTk3IDw9IDIzNzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJTd2VldCBUaGllZiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlN3ZWV0IFRoaWVmIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNob2NRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTd2VldCBUaGllZiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDE1MS4xOTgyNDIsIDIzLjg5MDcxNDYsIC0gMTI3NzQuNjE3MiwgMC40MjI1OTI5OTgsIDAsIDAuOTA2MzE5NjE4LCAwLCAxLCAwLCAtIDAuOTA2MzE5NjE4LCAwLCAwLjQyMjU5Mjk5OCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNDAuMjU4MzAxLCAyNS41ODI0OTg2LCAtIDEyNjUyLjMxMTUsIDAuMTczNjI0MzM3LCAiLTAiLCAtIDAuOTg0ODExOTAyLCAwLCAxLCAiLTAiLCAwLjk4NDgxMTkwMiwgMCwgMC4xNzM2MjQzMzcpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjM3NSkgb3IgKHYxOTcgPD0gMjQwMCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkNhbmR5IFJlYmVsIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQ2FuZHkgUmViZWwiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2hvY1F1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkNhbmR5IFJlYmVsIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMTUxLjE5ODI0MiwgMjMuODkwNzE0NiwgLSAxMjc3NC42MTcyLCAwLjQyMjU5Mjk5OCwgMCwgMC45MDYzMTk2MTgsIDAsIDEsIDAsIC0gMC45MDYzMTk2MTgsIDAsIDAuNDIyNTkyOTk4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg0Ny45MjMxNDUzLCAyNS41ODI0OTg2LCAtIDEzMDI5LjI0MDIsIC0gMC44MTkxNTYwNTEsIDAsIC0gMC41NzM1NzEyNjUsIDAsIDEsIDAsIDAuNTczNTcxMjY1LCAwLCAtIDAuODE5MTU2MDUxKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDI0MDApIG9yICh2MTk3IDw9IDI0MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJDYW5keSBQaXJhdGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJDYW5keSBQaXJhdGUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2FuZHlRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJDYW5keSBQaXJhdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDExNDkuMzI4LCAxMy41NzU5MDM5LCAtIDE0NDQ1LjYxNDMsIC0gMC4xNTY0NDYwOTksIDAsIC0gMC45ODc2ODY1NzQsIDAsIDEsIDAsIDAuOTg3Njg2NTc0LCAwLCAtIDAuMTU2NDQ2MDk5KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE0MzcuNTYzNDgsIDE3LjE0ODEyODUsIC0gMTQzODUuNjkzNCwgMC4xNzM2MjQzMzcsICItMCIsIC0gMC45ODQ4MTE5MDIsIDAsIDEsICItMCIsIDAuOTg0ODExOTAyLCAwLCAwLjE3MzYyNDMzNyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNDI1KSBvciAodjE5NyA8PSAyNDQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU25vdyBEZW1vbiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNub3cgRGVtb24iOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ2FuZHlRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTbm93IERlbW9uIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxMTQ5LjMyOCwgMTMuNTc1OTAzOSwgLSAxNDQ0NS42MTQzLCAtIDAuMTU2NDQ2MDk5LCAwLCAtIDAuOTg3Njg2NTc0LCAwLCAxLCAwLCAwLjk4NzY4NjU3NCwgMCwgLSAwLjE1NjQ0NjA5OSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA5MTYuMjIyNjU2LCAxNy4xNDgxMjg1LCAtIDE0NjM4LjgxMjUsIDAuODY2MDA3MjY4LCAwLCAwLjUwMDAzMTQxMiwgMCwgMSwgMCwgLSAwLjUwMDAzMTQxMiwgMCwgMC44NjYwMDcyNjgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjQ1MCkgb3IgKHYxOTcgPD0gMjQ3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIklzbGUgT3V0bGF3IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiSXNsZSBPdXRsYXciOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiVGlraVF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIklzbGUgT3V0bGF3IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxNjU0OS44OTA2MjUsIDU1LjY4NjM1NTU5MDgyMDMxLCAtIDE3OS45MTM2MDQ3MzYzMjgxMik7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNjE2Mi44MTkzMzU5Mzc1LCAxMS42ODYzMzc0NzEwMDgzLCAtIDk2LjQ1NDgxODcyNTU4NTk0KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDI0NzUpIG9yICh2MTk3IDw9IDI0OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJJc2xhbmQgQm95IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiSXNsYW5kIEJveSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJUaWtpUXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiSXNsYW5kIEJveSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTY1NDkuODkwNjI1LCA1NS42ODYzNTU1OTA4MjAzMSwgLSAxNzkuOTEzNjA0NzM2MzI4MTIpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTYzNTcuMzEyNSwgMjAuNjMyODIyMDM2NzQzMTY0LCAxMDA1LjY0ODkyNTc4MTI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDI1MDApIG9yICh2MTk3IDw9IDI1MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJTdW4ta2lzc2VkIFdhcnJpb3IiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTdW4ta2lzc2VkIFdhcnJpb3IiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiVGlraVF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlN1bi1raXNzZWQgV2FycmlvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTY1NDEuMDIxNDg0Mzc1LCA1NC43NzA4MTI5ODgyODEyNSwgMTA1MS40NjExODE2NDA2MjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTYzNTcuMzEyNSwgMjAuNjMyODIyMDM2NzQzMTY0LCAxMDA1LjY0ODkyNTc4MTI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDI1MjUpIG9yICh2MTk3IDw9IDI1NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJJc2xlIENoYW1waW9uIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiSXNsZSBDaGFtcGlvbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJUaWtpUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiSXNsZSBDaGFtcGlvbiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTY1NDEuMDIxNDg0Mzc1LCA1NC43NzA4MTI5ODgyODEyNSwgMTA1MS40NjExODE2NDA2MjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTY4NDguOTQxNDA2MjUsIDIxLjY4NjMzNDYwOTk4NTM1LCAxMDQxLjQ0OTA5NjY3OTY4NzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjU1MCkgb3IgKHYxOTcgPD0gMjU3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNlcnBlbnQgSHVudGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU2VycGVudCBIdW50ZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiVGlraVF1ZXN0MyI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlNlcnBlbnQgSHVudGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxNjY2NS4xOTE0MDYyNSwgMTA0LjU5NjQwNTAyOTI5Njg4LCAxNTc5LjY5NDMzNTkzNzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTY2MjEuNDE0MDYyNSwgMTIxLjQwNjMxMTAzNTE1NjI1LCAxMjkwLjY4ODExMDM1MTU2MjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjU3NSkgb3IgKHYxOTcgPD0gMjU5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNrdWxsIFNsYXllciIpIG9yICh2MTk3ID09IDI2MDApKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNrdWxsIFNsYXllciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJUaWtpUXVlc3QzIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU2t1bGwgU2xheWVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxNjY2NS4xOTE0MDYyNSwgMTA0LjU5NjQwNTAyOTI5Njg4LCAxNTc5LjY5NDMzNTkzNzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTY4MTEuNTcwMzEyNSwgODQuNjI1MjQ0MTQwNjI1LCAxNTQyLjIzNTEwNzQyMTg3NSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kCmlmIFNlYTEgdGhlbgogICAgdGFibGVNb24gPSB7CiAgICAgICAgIkJhbmRpdCIsCiAgICAgICAgIk1vbmtleSIsCiAgICAgICAgIkdvcmlsbGEiLAogICAgICAgICJQaXJhdGUiLAogICAgICAgICJCcnV0ZSIsCiAgICAgICAgIkRlc2VydCBCYW5kaXQiLAogICAgICAgICJEZXNlcnQgT2ZmaWNlciIsCiAgICAgICAgIlNub3cgQmFuZGl0IiwKICAgICAgICAiU25vd21hbiIsCiAgICAgICAgIkNoaWVmIFBldHR5IE9mZmljZXIiLAogICAgICAgICJTa3kgQmFuZGl0IiwKICAgICAgICAiRGFyayBNYXN0ZXIiLAogICAgICAgICJQcmlzb25lciIsCiAgICAgICAgIkRhbmdlcm91cyBQcmlzb25lciIsCiAgICAgICAgIlRvZ2EgV2FycmlvciIsCiAgICAgICAgIkdsYWRpYXRvciIsCiAgICAgICAgIk1pbGl0YXJ5IFNvbGRpZXIiLAogICAgICAgICJNaWxpdGFyeSBTcHkiLAogICAgICAgICJGaXNobWFuIFdhcnJpb3IiLAogICAgICAgICJGaXNobWFuIENvbW1hbmRvIiwKICAgICAgICAiR29kJ3MgR3VhcmQiLAogICAgICAgICJTaGFuZGEiLAogICAgICAgICJSb3lhbCBTcXVhZCIsCiAgICAgICAgIlJveWFsIFNvbGRpZXIiLAogICAgICAgICJHYWxsZXkgUGlyYXRlIiwKICAgICAgICAiR2FsbGV5IENhcHRhaW4iCiAgICB9OwplbHNlaWYgU2VhMiB0aGVuCiAgICB0YWJsZU1vbiA9IHsKICAgICAgICAiUmFpZGVyIiwKICAgICAgICAiTWVyY2VuYXJ5IiwKICAgICAgICAiU3dhbiBQaXJhdGUiLAogICAgICAgICJGYWN0b3J5IFN0YWZmIiwKICAgICAgICAiTWFyaW5lIExpZXV0ZW5hbnQiLAogICAgICAgICJNYXJpbmUgQ2FwdGFpbiIsCiAgICAgICAgIlpvbWJpZSIsCiAgICAgICAgIlZhbXBpcmUiLAogICAgICAgICJTbm93IFRyb29wZXIiLAogICAgICAgICJXaW50ZXIgV2FycmlvciIsCiAgICAgICAgIkxhYiBTdWJvcmRpbmF0ZSIsCiAgICAgICAgIkhvcm5lZCBXYXJyaW9yIiwKICAgICAgICAiTWFnbWEgTmluamEiLAogICAgICAgICJMYXZhIFBpcmF0ZSIsCiAgICAgICAgIlNoaXAgRGVja2hhbmQiLAogICAgICAgICJTaGlwIEVuZ2luZWVyIiwKICAgICAgICAiU2hpcCBTdGV3YXJkIiwKICAgICAgICAiU2hpcCBPZmZpY2VyIiwKICAgICAgICAiQXJjdGljIFdhcnJpb3IiLAogICAgICAgICJTbm93IEx1cmtlciIsCiAgICAgICAgIlNlYSBTb2xkaWVyIiwKICAgICAgICAiV2F0ZXIgRmlnaHRlciIKICAgIH07CmVsc2VpZiBTZWEzIHRoZW4KICAgIHRhYmxlTW9uID0gewogICAgICAgICJQaXJhdGUgTWlsbGlvbmFpcmUiLAogICAgICAgICJEcmFnb24gQ3JldyBXYXJyaW9yIiwKICAgICAgICAiRHJhZ29uIENyZXcgQXJjaGVyIiwKICAgICAgICAiSHlkcmEgRW5mb3JjZXIiLAogICAgICAgICJWZW5vbW91cyBBc3NhaWxhbnQiLAogICAgICAgICJNYXJpbmUgQ29tbW9kb3JlIiwKICAgICAgICAiTWFyaW5lIFJlYXIgQWRtaXJhbCIsCiAgICAgICAgIkZpc2htYW4gUmFpZGVyIiwKICAgICAgICAiRmlzaG1hbiBDYXB0YWluIiwKICAgICAgICAiRm9yZXN0IFBpcmF0ZSIsCiAgICAgICAgIk15dGhvbG9naWNhbCBQaXJhdGUiLAogICAgICAgICJKdW5nbGUgUGlyYXRlIiwKICAgICAgICAiTXVza2V0ZWVyIFBpcmF0ZSIsCiAgICAgICAgIlJlYm9ybiBTa2VsZXRvbiIsCiAgICAgICAgIkxpdmluZyBab21iaWUiLAogICAgICAgICJEZW1vbmljIFNvdWwiLAogICAgICAgICJQb3Nlc3NlZCBNdW1teSIsCiAgICAgICAgIlBlYW51dCBTY291dCIsCiAgICAgICAgIlBlYW51dCBQcmVzaWRlbnQiLAogICAgICAgICJJY2UgQ3JlYW0gQ2hlZiIsCiAgICAgICAgIkljZSBDcmVhbSBDb21tYW5kZXIiLAogICAgICAgICJDb29raWUgQ3JhZnRlciIsCiAgICAgICAgIkNha2UgR3VhcmQiLAogICAgICAgICJCYWtpbmcgU3RhZmYiLAogICAgICAgICJIZWFkIEJha2VyIiwKICAgICAgICAiQ29jb2EgV2FycmlvciIsCiAgICAgICAgIkNob2NvbGF0ZSBCYXIgQmF0dGxlciIsCiAgICAgICAgIlN3ZWV0IFRoaWVmIiwKICAgICAgICAiQ2FuZHkgUmViZWwiLAogICAgICAgICJDYW5keSBQaXJhdGUiLAogICAgICAgICJTbm93IERlbW9uIiwKICAgICAgICAiSXNsZSBPdXRsYXciLAogICAgICAgICJJc2xhbmQgQm95IiwKICAgICAgICAiU3VuLWtpc3NlZCBXYXJyaW9yIiwKICAgICAgICAiSXNsZSBDaGFtcGlvbiIsCiAgICAgICAgIlNlcnBlbnQgSHVudGVyIiwKICAgICAgICAiU2t1bGwgU2xheWVyIgogICAgfTsKZW5kCmlmIFNlYTEgdGhlbgogICAgQXJlYUxpc3QgPSB7CiAgICAgICAgIkp1bmdsZSIsCiAgICAgICAgIkJ1Z2d5IiwKICAgICAgICAiRGVzZXJ0IiwKICAgICAgICAiU25vdyIsCiAgICAgICAgIk1hcmluZSIsCiAgICAgICAgIlNreSIsCiAgICAgICAgIlByaXNvbiIsCiAgICAgICAgIkNvbG9zc2V1bSIsCiAgICAgICAgIk1hZ21hIiwKICAgICAgICAiRmlzaG1hbiIsCiAgICAgICAgIlNreSBJc2xhbmQiLAogICAgICAgICJGb3VudGFpbiIKICAgIH07CmVsc2VpZiBTZWEyIHRoZW4KICAgIEFyZWFMaXN0ID0gewogICAgICAgICJBcmVhIDEiLAogICAgICAgICJBcmVhIDIiLAogICAgICAgICJab21iaWUiLAogICAgICAgICJNYXJpbmUiLAogICAgICAgICJTbm93IE1vdW50YWluIiwKICAgICAgICAiSWNlIGZpcmUiLAogICAgICAgICJTaGlwIiwKICAgICAgICAiRnJvc3QiLAogICAgICAgICJGb3Jnb3R0ZW4iCiAgICB9OwplbHNlaWYgU2VhMyB0aGVuCiAgICBBcmVhTGlzdCA9IHsKICAgICAgICAiUGlyYXRlIFBvcnQiLAogICAgICAgICJBbWF6b24iLAogICAgICAgICJNYXJpbmUgVHJlZSIsCiAgICAgICAgIkRlZXAgRm9yZXN0IiwKICAgICAgICAiSGF1bnRlZCBDYXN0bGUiLAogICAgICAgICJOdXQgSXNsYW5kIiwKICAgICAgICAiSWNlIENyZWFtIElzbGFuZCIsCiAgICAgICAgIkNha2UgSXNsYW5kIiwKICAgICAgICAiQ2hvY28gSXNsYW5kIiwKICAgICAgICAiQ2FuZHkgSXNsYW5kIiwKICAgICAgICAiVGlraSBPdXRwb3N0IgogICAgfTsKZW5kCmZ1bmN0aW9uIENoZWNrQm9zc1F1ZXN0KCkKICAgIGlmIFNlYTEgdGhlbgogICAgICAgIGlmIChTZWxlY3RCb3NzID09ICJUaGUgR29yaWxsYSBLaW5nIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIlRoZSBHb3JpbGxhIEtpbmciOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJUaGUgR29ycmlsYSBLaW5nIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJKdW5nbGVRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMiwwMDBcbjcsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSAxNjAxLjY1NTM5NTUwNzgsIDM2Ljg1MjEzNDcwNDU5LCAxNTMuMzg4MDkyMDQxMDIpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDEwODguNzU5NzcsIDguMTM0NjM3ODMsIC0gNDg4LjU1OTkwNiwgLSAwLjcwNzEzNDI0NywgMCwgMC43MDcwNzkyOTEsIDAsIDEsIDAsIC0gMC43MDcwNzkyOTEsIDAsIC0gMC43MDcxMzQyNDcpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiQm9iYnkiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiQm9iYnkiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJCb2JieSI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiQnVnZ3lRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDgsMDAwXG4zNSwwMDAgRXhwLiI7CiAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gMTYwMS42NTUzOTU1MDc4LCAzNi44NTIxMzQ3MDQ1OSwgMTUzLjM4ODA5MjA0MTAyKTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAxMDg4Ljc1OTc3LCA4LjEzNDYzNzgzLCAtIDQ4OC41NTk5MDYsIC0gMC43MDcxMzQyNDcsIDAsIDAuNzA3MDc5MjkxLCAwLCAxLCAwLCAtIDAuNzA3MDc5MjkxLCAwLCAtIDAuNzA3MTM0MjQ3KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkJvYmJ5IikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkJvYmJ5IjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiQm9iYnkiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkJ1Z2d5UXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQ4LDAwMFxuMzUsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSAxMTQwLjE3NjE0NzQ2MDksIDQuNzUyMDQ5NDQ2MTA2LCAzODI3LjQwNTc2MTcxODgpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDEwODcuMzc2MDk4NjMyOCwgNDYuOTQ5NDA5NDg0ODYzLCA0MDQwLjE0NjI0MDIzNDQpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiVGhlIFNhdyIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJUaGUgU2F3IjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiVGhlIFNhdyI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gNzg0Ljg5NzE1NTc2MTcyLCA3Mi40MjczODM0MjI4NTIsIDE2MDMuNTgyMjc1MzkwNik7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJZZXRpIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIllldGkiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJZZXRpIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJTbm93UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDEwLDAwMFxuMTgwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDEzODYuODA3MzczMDQ2OSwgODcuMjcyNzg5MDAxNDY1LCAtIDEyOTguMzU3NjY2MDE1Nik7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDEyMTguNzk1NjU0Mjk2OSwgMTM4LjAxMTg0MDgyMDMxLCAtIDE0ODguMDI2MjQ1MTE3Mik7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJNb2IgTGVhZGVyIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIk1vYiBMZWFkZXIiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJNb2IgTGVhZGVyIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAyODQ0LjczMDcxMjg5MDYsIDcuNDE4MDUwMjg5MTU0MSwgNTM1Ni42NzIzNjMyODEzKTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIlZpY2UgQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJWaWNlIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJWaWNlIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIk1hcmluZVF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMjsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMTAsMDAwXG4xODAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSA1MDM2LjI0NjU4MjAzMTMsIDI4LjY3NzgzNTQ2NDQ3OCwgNDMyNC41NjY0MDYyNSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gNTAwNi41NDU0MTAxNTYzLCA4OC4wMzIwODE2MDQwMDQsIDQzNTMuMTYyMTA5Mzc1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIlNhYmVyIEV4cGVydCIpIHRoZW4KICAgICAgICAgICAgTmFtZUJvc3MgPSAiU2FiZXIgRXhwZXJ0IjsKICAgICAgICAgICAgQm9zc01vbiA9ICJTYWJlciBFeHBlcnQiOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDE0NTguODk1MDIsIDI5Ljg4NzAzMzUsIC0gNTAuNjMzNTY0KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIldhcmRlbiIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJXYXJkZW4iOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJXYXJkZW4iOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkltcGVsUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDE7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDYsMDAwXG44NTAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldyg1Mjc4LjA0OTMyLCAyLjE1MTY3NDc1LCA5NDQuMTAxOTI5LCAwLjIyMDU0Njk2MSwgLSAwLjAwMDAwNDQ5OTQ2NCwgMC45NzUzNzY0MjcsIC0gMC4wMDAwMTk1NDEyNTgsIDEsIDAuMDAwMDA5MDMxNjIxLCAtIDAuOTc1Mzc2NDI3LCAtIDAuMDAwMDIxMDUxOTc2LCAwLjIyMDU0Njk2MSk7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldyg1MTkxLjg2MTMzLCAyLjg0MDIwNjg2LCA2ODYuNDM4NzIxLCAtIDAuNzMxMzg0NjM1LCAwLCAwLjY4MTk2NTE3MiwgMCwgMSwgMCwgLSAwLjY4MTk2NTE3MiwgMCwgLSAwLjczMTM4NDYzNSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJDaGllZiBXYXJkZW4iKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiQ2hpZWYgV2FyZGVuIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiQ2hpZWYgV2FyZGVuIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJJbXBlbFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAyOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQxMCwwMDBcbjEsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoNTIwNi45MjU3OCwgMC45OTc3NTMzODIsIDgxNC45NzY3NDYsIDAuMzQyMDQxMzQzLCAtIDAuMDAwNjI5MTU2NzcsIDAuOTM5Njg0NzQ5LCAwLjAwMTkxNjQ1Mzk0LCAwLjk5OTk5ODE1MiwgLSAwLjAwMDAyODA0MjIzNCwgLSAwLjkzOTY4Mjk2MSwgMC4wMDE4MTA0NTQwNiwgMC4zNDIwNDE5MzkpOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoNTE5MS44NjEzMywgMi44NDAyMDY4NiwgNjg2LjQzODcyMSwgLSAwLjczMTM4NDYzNSwgMCwgMC42ODE5NjUxNzIsIDAsIDEsIDAsIC0gMC42ODE5NjUxNzIsIDAsIC0gMC43MzEzODQ2MzUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiU3dhbiIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJTd2FuIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiU3dhbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiSW1wZWxRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMTUsMDAwXG4xLDYwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDUzMjUuMDk2MTksIDcuMDM5MDY1ODQsIDcxOS41NzA2NzksIC0gMC4zMDkwNjA4MTIsIDAsIDAuOTUxMDQyMjM1LCAwLCAxLCAwLCAtIDAuOTUxMDQyMjM1LCAwLCAtIDAuMzA5MDYwODEyKTsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDUxOTEuODYxMzMsIDIuODQwMjA2ODYsIDY4Ni40Mzg3MjEsIC0gMC43MzEzODQ2MzUsIDAsIDAuNjgxOTY1MTcyLCAwLCAxLCAwLCAtIDAuNjgxOTY1MTcyLCAwLCAtIDAuNzMxMzg0NjM1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIk1hZ21hIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiTWFnbWEgQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIk1hZ21hIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIk1hZ21hUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDE1LDAwMFxuMiw4MDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSA1MzE0LjYyMjA3MDMxMjUsIDEyLjI2MjQyMDY1NDI5NywgODUxNy4yNzkyOTY4NzUpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDU3NjUuODk2OTcyNjU2MywgODIuOTIwNjQ2NjY3NDgsIDg3MTguMzA0Njg3NSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJGaXNobWFuIExvcmQiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiRmlzaG1hbiBMb3JkIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiRmlzaG1hbiBMb3JkIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJGaXNobWFuUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDE1LDAwMFxuNCwwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoNjExMjIuNjUyMzQzNzUsIDE4LjQ5NzQ0MjI0NTQ4MywgMTU2OS4zOTk3ODAyNzM0KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoNjEyNjAuMTUyMzQzNzUsIDMwLjk1MDg4MTk1ODAwOCwgMTE5My40MzI5ODMzOTg0KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIld5c3BlciIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJXeXNwZXIiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJXeXNwZXIiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIlNreUV4cDFRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMTUsMDAwXG40LDgwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDc4NjEuOTQ3MjY1NjI1LCA1NTQ1LjUxNzU3ODEyNSwgLSAzNzkuODU5NzQxMjEwOTQpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDc4NjYuMTMzMzAwNzgxMywgNTU3Ni40MzExNTIzNDM4LCAtIDU0Ni43NDgxNjg5NDUzMSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJUaHVuZGVyIEdvZCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJUaHVuZGVyIEdvZCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlRodW5kZXIgR29kIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJTa3lFeHAyUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDIwLDAwMFxuNSw4MDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSA3OTAzLjM4MjgxMjUsIDU2MzUuOTg5NzQ2MDkzOCwgLSAxNDEwLjkyMzgyODEyNSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gNzk5NC45ODQzNzUsIDU3NjEuMDI1MzkwNjI1LCAtIDIwODguNjQ3OTQ5MjE4OCk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJDeWJvcmciKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiQ3lib3JnIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiQ3lib3JnIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJGb3VudGFpblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyMCwwMDBcbjcsNTAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDUyNTguMjc4ODA4NTkzOCwgMzguNTI2OTMxNzYyNjk1LCA0MDUwLjA0NDkyMTg3NSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDYwOTQuMDI0OTAyMzQzOCwgNzMuNzcwMDUwMDQ4ODI4LCAzODI1LjczNDg2MzI4MTMpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiSWNlIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiSWNlIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJJY2UgQWRtaXJhbCI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDEyNjYuMDg5NDgsIDI2LjE3NTc5NDYsIC0gMTM5OS41NzY3OCwgLSAwLjU3MzU5OTIxOSwgMCwgLSAwLjgxOTEzNjU2LCAwLCAxLCAwLCAwLjgxOTEzNjU2LCAwLCAtIDAuNTczNTk5MjE5KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkdyZXliZWFyZCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJHcmV5YmVhcmQiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJHcmV5YmVhcmQiOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDUwODEuMzQ1MjE0ODQzOCwgODUuMjIxNjQxNTQwNTI3LCA0MjU3LjM1ODg4NjcxODgpOwogICAgICAgIGVuZAogICAgZW5kCiAgICBpZiBTZWEyIHRoZW4KICAgICAgICBpZiAoU2VsZWN0Qm9zcyA9PSAiRGlhbW9uZCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJEaWFtb25kIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiRGlhbW9uZCI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiQXJlYTFRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMjUsMDAwXG45LDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDQyNy41NjY2ODA5MDgyLCA3My4zMTM3ODE3MzgyODEsIDE4MzUuNDIwODk4NDM3NSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gMTU3Ni43MTY2NzQ4MDQ3LCAxOTguNTkyNjUxMzY3MTksIDEzLjcyNDI4NjA3OTQwNyk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJKZXJlbXkiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiSmVyZW15IjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiSmVyZW15IjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJBcmVhMlF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyNSwwMDBcbjExLDUwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldyg2MzYuNzk5NDM4NDc2NTYsIDczLjQxMzc4Nzg0MTc5NywgOTE4LjAwNDE1MDM5MDYzKTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoMjAwNi45MjYxNDc0NjA5LCA0NDguOTU2NjY1MDM5MDYsIDg1My45ODI4NDkxMjEwOSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJGYWppdGEiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiRmFqaXRhIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiRmFqaXRhIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJNYXJpbmVRdWVzdDMiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDI1LDAwMFxuMTUsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gMjQ0MS45ODYzMjgxMjUsIDczLjM1OTM0NDQ4MjQyMiwgLSAzMjE3LjUzMjQ3MDcwMzEpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDIxNzIuNzM5OTkwMjM0NCwgMTAzLjMyMjE2NjQ0Mjg3LCAtIDQwMTUuMDI1MzkwNjI1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkRvbiBTd2FuIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkRvbiBTd2FuIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiRG9uIFN3YW4iOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygyMjg2LjIwMDQzOTQ1MzEsIDE1LjE3NzgzOTI3OTE3NSwgODYzLjgzODg2NzE4NzUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiU21va2UgQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJTbW9rZSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiU21va2UgQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiSWNlU2lkZVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyMCwwMDBcbjI1LDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDU0MjkuMDQ3MzYzMjgxMywgMTUuOTc3NTY1NzY1MzgxLCAtIDUyOTcuOTYxNDI1NzgxMyk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gNTI3NS4xOTg3MzA0Njg4LCAyMC43NTcyNTc0NjE1NDgsIC0gNTI2MC42NjY5OTIxODc1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkF3YWtlbmVkIEljZSBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkF3YWtlbmVkIEljZSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiQXdha2VuZWQgSWNlIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkZyb3N0UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDIwLDAwMFxuMzYsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDU2NjguOTc4MDI3MzQzOCwgMjguNTE5OTg5MDEzNjcyLCAtIDY0ODMuMzUyMDUwNzgxMyk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDY0MDMuNTQzOTQ1MzEyNSwgMzQwLjI5NzY2ODQ1NzAzLCAtIDY4OTQuNTU5NTcwMzEyNSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJUaWRlIEtlZXBlciIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJUaWRlIEtlZXBlciI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlRpZGUgS2VlcGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJGb3Jnb3R0ZW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMTIsNTAwXG4zOCwwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSAzMDUzLjk4MTQ0NTMxMjUsIDIzNy4xODk1NDQ2Nzc3MywgLSAxMDE0NS4wMzkwNjI1KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAzNzk1LjY0MjMzMzk4NDQsIDEwNS44ODg3NzEwNTcxMywgLSAxMTQyMS4zMDc2MTcxODgpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiRGFya2JlYXJkIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkRhcmtiZWFyZCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkRhcmtiZWFyZCI7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMzY3Ny4wODIwMzEyNSwgNjIuNzUxOTM3ODY2MjExLCAtIDMxNDQuODMzMjUxOTUzMSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJDdXJzZWQgQ2FwdGFpbiIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJDdXJzZWQgQ2FwdGFpbiI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkN1cnNlZCBDYXB0YWluIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoOTE2LjkyODU4OSwgMTgxLjA5Mjc3MywgMzM0MjIpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiT3JkZXIiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiT3JkZXIiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJPcmRlciI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gNjIxNy4yMDIxNDg0Mzc1LCAyOC4wNDc2NDU1Njg4NDgsIC0gNTA1My4xMzU3NDIxODc1KTsKICAgICAgICBlbmQKICAgIGVuZAogICAgaWYgU2VhMyB0aGVuCiAgICAgICAgaWYgKFNlbGVjdEJvc3MgPT0gIlN0b25lIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIlN0b25lIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiU3RvbmUiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIlBpcmF0ZVBvcnRRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMjUsMDAwXG40MCwwMDAsMDAwIEV4cC4iOwogICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDU0NDUuOTU0MTAxNTYyNSwgNjAxLjYyOTQ1NTU2NjQxLCA3NTEuNDM3OTI3MjQ2MDkpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldyg1NTQzLjg2MzI4MTI1LCA2NjguOTczOTk5MDIzNDQsIDE5OS4wMzQxNzk2ODc1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIktpbG8gQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJLaWxvIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJLaWxvIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIk1hcmluZVRyZWVJc2xhbmQiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDM1LDAwMFxuNTYsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDIxNzkuMzAxMDI1MzkwNiwgMjguNzMxMjM5MzE4ODQ4LCAtIDY3MzkuOTc0MTIxMDkzOCk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDI3NjQuMjIzMzg4NjcxOSwgNDMyLjQ2MTU0Nzg1MTU2LCAtIDcxNDQuNDU4MDA3ODEyNSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJDYXB0YWluIEVsZXBoYW50IikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkNhcHRhaW4gRWxlcGhhbnQiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJDYXB0YWluIEVsZXBoYW50IjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJEZWVwRm9yZXN0SXNsYW5kIjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQ0MCwwMDBcbjY3LDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDEzMjMyLjY4MjYxNzE4OCwgMzMyLjQwMzk2MTE4MTY0LCAtIDc2MjYuMDExNzE4NzUpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDEzMzc2Ljc1NzgxMjUsIDQzMy4yODY4OTU3NTE5NSwgLSA4MDcxLjM5MjU3ODEyNSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJCZWF1dGlmdWwgUGlyYXRlIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkJlYXV0aWZ1bCBQaXJhdGUiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJCZWF1dGlmdWwgUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJEZWVwRm9yZXN0SXNsYW5kMiI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kNTAsMDAwXG43MCwwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSAxMjY4Mi4wOTY2Nzk2ODgsIDM5MC44ODY1MzU2NDQ1MywgLSA5OTAyLjEyNDAyMzQzNzUpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldyg1MjgzLjYwOTM3NSwgMjIuNTYyMjM0ODc4NTQsIC0gMTEwLjc4Mjg1MjE3Mjg1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkNha2UgUXVlZW4iKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiQ2FrZSBRdWVlbiI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkNha2UgUXVlZW4iOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkljZUNyZWFtSXNsYW5kUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDMwLDAwMFxuMTEyLDUwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDgxOS4zNzY3MDksIDY0LjkyNTk3OTYsIC0gMTA5NjcuMjgzMiwgLSAwLjc2NjA2MTY2NCwgMCwgMC42NDI3Njc2MDgsIDAsIDEsIDAsIC0gMC42NDI3Njc2MDgsIDAsIC0gMC43NjYwNjE2NjQpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDY3OC42NDg4MDQsIDM4MS4zNTM5NDMsIC0gMTExMTQuMjAxMiwgLSAwLjkwODY0MTgxNSwgMC4wMDE0OTI5NDMzOCwgMC40MTc1NzM3OCwgMC4wMDgzNzExNDkxOSwgMC45OTk4NTc4NDMsIDAuMDE0NjQwODkyOSwgLSAwLjQxNzQ5MjU2OCwgMC4wMTY3OTg4OTg2LCAtIDAuOTA4NTI0OTkpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiTG9uZ21hIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkxvbmdtYSI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkxvbmdtYSI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gMTAyMzguODc1OTc2NTYzLCAzODkuNzkxMjkwMjgzMiwgLSA5NTQ5Ljc5Mzk0NTMxMjUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiU291bCBSZWFwZXIiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiU291bCBSZWFwZXIiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJTb3VsIFJlYXBlciI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gOTUyNC43ODkwNjI1LCAzMTUuODA0MjkwNzcxNDgsIDY2NTUuNzE5MjM4MjgxMyk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJyaXBfaW5kcmEgVHJ1ZSBGb3JtIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gInJpcF9pbmRyYSBUcnVlIEZvcm0iOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJyaXBfaW5kcmEgVHJ1ZSBGb3JtIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSA1NDE1LjM5MjA4OTg0MzgsIDUwNS43NDEzMzMwMDc4MSwgLSAyODE0LjAxNjYwMTU2MjUpOwogICAgICAgIGVuZAogICAgZW5kCmVuZApmdW5jdGlvbiBNYXRlcmlhbE1vbigpCiAgICBpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIlJhZGlvYWN0aXZlIE1hdGVyaWFsIikgdGhlbgogICAgICAgIE1Nb24gPSAiRmFjdG9yeSBTdGFmZiI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoMjk1LCA3MywgLSA1Nik7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJNeXN0aWMgRHJvcGxldCIpIHRoZW4KICAgICAgICBNTW9uID0gIldhdGVyIEZpZ2h0ZXIiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gMzM4NSwgMjM5LCAtIDEwNTQyKTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIk1hZ21hIE9yZSIpIHRoZW4KICAgICAgICBpZiBTZWExIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJNaWxpdGFyeSBTcHkiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDU4MTUsIDg0LCA4ODIwKTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZWxzZWlmIFNlYTIgdGhlbgogICAgICAgICAgICBNTW9uID0gIk1hZ21hIE5pbmphIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSA1NDI4LCA3OCwgLSA1OTU5KTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZW5kCiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJBbmdlbCBXaW5ncyIpIHRoZW4KICAgICAgICBNTW9uID0gIkdvZCdzIEd1YXJkIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDQ2OTgsIDg0NSwgLSAxOTEyKTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KC0gNzg1OS4wOTgxNCwgNTU0NC4xOTA0MywgLSAzODEuNDc2MTk2KSkuTWFnbml0dWRlID49IDUwMDApIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA3ODU5LjA5ODE0LCA1NTQ0LjE5MDQzLCAtIDM4MS40NzYxOTYpKTsKICAgICAgICBlbmQKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIkxlYXRoZXIiKSB0aGVuCiAgICAgICAgaWYgU2VhMSB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiQnJ1dGUiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDExNDUsIDE1LCA0MzUwKTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZWxzZWlmIFNlYTIgdGhlbgogICAgICAgICAgICBNTW9uID0gIk1hcmluZSBDYXB0YWluIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSAyMDEwLjUwNTk4MTQ0NTMxMjUsIDczLjAwMTE1OTY2Nzk2ODc1LCAtIDMzMjYuNjIwODQ5NjA5Mzc1KTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZWxzZWlmIFNlYTMgdGhlbgogICAgICAgICAgICBNTW9uID0gIkp1bmdsZSBQaXJhdGUiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDExOTc1Ljc4NTE1NjI1LCAzMzEuNzczNDA2OTgyNDIxOSwgLSAxMDYyMC4wMzAyNzM0Mzc1KTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZW5kCiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJTY3JhcCBNZXRhbCIpIHRoZW4KICAgICAgICBpZiBTZWExIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJCcnV0ZSI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gMTE0NSwgMTUsIDQzNTApOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbHNlaWYgU2VhMiB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiU3dhbiBQaXJhdGUiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldyg4NzgsIDEyMiwgMTIzNSk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVsc2VpZiBTZWEzIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJKdW5nbGUgUGlyYXRlIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSAxMjEwNywgMzMyLCAtIDEwNTQ5KTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZW5kCiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJGaXNoIFRhaWwiKSB0aGVuCiAgICAgICAgaWYgU2VhMyB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiRmlzaG1hbiBSYWlkZXIiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDEwOTkzLCAzMzIsIC0gODk0MCk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVsc2VpZiBTZWExIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJGaXNobWFuIFdhcnJpb3IiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldyg2MTEyMywgMTksIDE1NjkpOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICAgICAgaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldyg2MTE2My44NTE1NjI1LCA1LjM0MjM0MjM3NjcwODk4NCwgMTgxOS43ODQxNzk2ODc1KSkuTWFnbml0dWRlID49IDE3MDAwKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg2MTE2My44NTE1NjI1LCA1LjM0MjM0MjM3NjcwODk4NCwgMTgxOS43ODQxNzk2ODc1KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiRGVtb25pYyBXaXNwIikgdGhlbgogICAgICAgIE1Nb24gPSAiRGVtb25pYyBTb3VsIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDk1MDcsIDE3MiwgNjE1OCk7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJWYW1waXJlIEZhbmciKSB0aGVuCiAgICAgICAgTU1vbiA9ICJWYW1waXJlIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDYwMzMsIDcsIC0gMTMxNyk7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJDb25qdXJlZCBDb2NvYSIpIHRoZW4KICAgICAgICBNTW9uID0gIkNob2NvbGF0ZSBCYXIgQmF0dGxlciI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoNjIwLjYzNDQ2MDQ0OTIxODgsIDc4LjkzNjQ0NzE0MzU1NDY5LCAtIDEyNTgxLjM2OTE0MDYyNSk7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJEcmFnb24gU2NhbGUiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJEcmFnb24gQ3JldyBBcmNoZXIiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KDY4MjcuOTE0NTUwNzgxMjUsIDYwOS40MTI3MTk3MjY1NjI1LCAyNTIuMzUzODA1NTQxOTkyMik7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJHdW5wb3dkZXIiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJQaXN0b2wgQmlsbGlvbmFpcmUiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gNDY5LCA3NCwgNTkwNCk7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7IAogICAgICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIk1hZ21hIE9yZSIpIHRoZW4KICAgICAgICBpZiBTZWExIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJNaWxpdGFyeSBTcHkiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDU4MTUsIDg0LCA4ODIwKTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZWxzZWlmIFNlYTIgdGhlbgogICAgICAgICAgICBNTW9uID0gIk1hZ21hIE5pbmphIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSA1NDI4LCA3OCwgLSA1OTU5KTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZW5kCiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJBbmdlbCBXaW5ncyIpIHRoZW4KICAgICAgICBNTW9uID0gIkdvZCdzIEd1YXJkIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDQ2OTgsIDg0NSwgLSAxOTEyKTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KC0gNzg1OS4wOTgxNCwgNTU0NC4xOTA0MywgLSAzODEuNDc2MTk2KSkuTWFnbml0dWRlID49IDUwMDApIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA3ODU5LjA5ODE0LCA1NTQ0LjE5MDQzLCAtIDM4MS40NzYxOTYpKTsKICAgICAgICBlbmQKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIkxlYXRoZXIiKSB0aGVuCiAgICAgICAgaWYgU2VhMSB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiQnJ1dGUiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDExNDUsIDE1LCA0MzUwKTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZWxzZWlmIFNlYTIgdGhlbgogICAgICAgICAgICBNTW9uID0gIk1hcmluZSBDYXB0YWluIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSAyMDEwLjUwNTk4MTQ0NTMxMjUsIDczLjAwMTE1OTY2Nzk2ODc1LCAtIDMzMjYuNjIwODQ5NjA5Mzc1KTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZWxzZWlmIFNlYTMgdGhlbgogICAgICAgICAgICBNTW9uID0gIkp1bmdsZSBQaXJhdGUiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDExOTc1Ljc4NTE1NjI1LCAzMzEuNzczNDA2OTgyNDIxOSwgLSAxMDYyMC4wMzAyNzM0Mzc1KTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZW5kCiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJTY3JhcCBNZXRhbCIpIHRoZW4KICAgICAgICBpZiBTZWExIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJCcnV0ZSI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gMTE0NSwgMTUsIDQzNTApOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbHNlaWYgU2VhMiB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiU3dhbiBQaXJhdGUiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldyg4NzgsIDEyMiwgMTIzNSk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVsc2VpZiBTZWEzIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJKdW5nbGUgUGlyYXRlIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSAxMjEwNywgMzMyLCAtIDEwNTQ5KTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZW5kCiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJGaXNoIFRhaWwiKSB0aGVuCiAgICAgICAgaWYgU2VhMyB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiRmlzaG1hbiBSYWlkZXIiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDEwOTkzLCAzMzIsIC0gODk0MCk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVsc2VpZiBTZWExIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJGaXNobWFuIFdhcnJpb3IiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldyg2MTEyMywgMTksIDE1NjkpOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICAgICAgaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldyg2MTE2My44NTE1NjI1LCA1LjM0MjM0MjM3NjcwODk4NCwgMTgxOS43ODQxNzk2ODc1KSkuTWFnbml0dWRlID49IDE3MDAwKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg2MTE2My44NTE1NjI1LCA1LjM0MjM0MjM3NjcwODk4NCwgMTgxOS43ODQxNzk2ODc1KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiRGVtb25pYyBXaXNwIikgdGhlbgogICAgICAgIE1Nb24gPSAiRGVtb25pYyBTb3VsIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDk1MDcsIDE3MiwgNjE1OCk7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJWYW1waXJlIEZhbmciKSB0aGVuCiAgICAgICAgTU1vbiA9ICJWYW1waXJlIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDYwMzMsIDcsIC0gMTMxNyk7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJDb25qdXJlZCBDb2NvYSIpIHRoZW4KICAgICAgICBNTW9uID0gIkNob2NvbGF0ZSBCYXIgQmF0dGxlciI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoNjIwLjYzNDQ2MDQ0OTIxODgsIDc4LjkzNjQ0NzE0MzU1NDY5LCAtIDEyNTgxLjM2OTE0MDYyNSk7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJEcmFnb24gU2NhbGUiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJEcmFnb24gQ3JldyBBcmNoZXIiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KDY4MjcuOTE0NTUwNzgxMjUsIDYwOS40MTI3MTk3MjY1NjI1LCAyNTIuMzUzODA1NTQxOTkyMik7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJHdW5wb3dkZXIiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJQaXN0b2wgQmlsbGlvbmFpcmUiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gNDY5LCA3NCwgNTkwNCk7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJIeWRyYSBFbmZvcmNlciIpIHRoZW4KICAgICAgICBNTW9uID0gIkh5ZHJhIEVuZm9yY2VyIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldyg0NTgxLjUxNzU3ODEyNSwgMTAwMS41NTkwODIwMzEyNSwgNzA0LjkzNzg2NjIxMDkzNzUpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiVmVub21vdXMgQXNzYWlsYW50IikgdGhlbgogICAgICAgIE1Nb24gPSAiVmVub21vdXMgQXNzYWlsYW50IjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldyg0ODc5LjkyMDQxMDE1NjI1LCAxMDg5LjQ2MTQyNTc4MTI1LCAxMTA0LjAwODMwMDc4MTI1KTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIk1pbmkgVHVzayIpIHRoZW4KICAgICAgICBNTW9uID0gIk15dGhvbG9naWNhbCBQaXJhdGUiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KCk7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZUlzbGFuZEVTUCgpCiAgICBmb3IgdjQyNSwgdjQyNiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWydfV29ybGRPcmlnaW4nXS5Mb2NhdGlvbnM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIElzbGFuZEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjQyNi5OYW1lIH49ICJTZWEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0MjY6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTMwID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDI2KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzAuTmFtZSA9ICJOYW1lRXNwIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzAuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzMC5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzMC5BZG9ybmVlID0gdjQyNjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzAuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEzNiA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjExMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzNi5Gb250ID0gIkdvdGhhbUJvbGQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzNi5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzNi5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTM2LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTM2LlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTM2LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzNi5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzNi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoOCwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDI2WydOYW1lRXNwJ10uVGV4dExhYmVsLlRleHQgPSB2NDI2Lk5hbWUgLi4gIiAgIFxuIiAuLiByb3VuZCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDI2LlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0MjY6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICB2NDI2OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBpc25pbCh2MTk4KQogICAgcmV0dXJuIHYxOTggPT0gbmlsIDsKZW5kCmxvY2FsIGZ1bmN0aW9uIHYyMCh2MTk5KQogICAgcmV0dXJuIG1hdGguZmxvb3IodG9udW1iZXIodjE5OSkgKyAwLjUpOwplbmQKTnVtYmVyID0gbWF0aC5yYW5kb20oMSwgMTAwMDAwMCk7CmZ1bmN0aW9uIFVwZGF0ZVBsYXllckNoYW1zKCkKICAgIGZvciB2NDI3LCB2NDI4IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBub3QgaXNuaWwodjQyOC5DaGFyYWN0ZXIpIHRoZW4KICAgICAgICAgICAgICAgIGlmIEVTUFBsYXllciB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKG5vdCBpc25pbCh2NDI4LkNoYXJhY3Rlci5IZWFkKSBhbmQgbm90IHY0MjguQ2hhcmFjdGVyLkhlYWQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExNDYgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0MjguQ2hhcmFjdGVyLkhlYWQpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE0Ni5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTQ2LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNDYuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNDYuQWRvcm5lZSA9IHY0MjguQ2hhcmFjdGVyLkhlYWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTQ2LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExNTMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMTQ2KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNTMuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNTMuRm9udFNpemUgPSAiU2l6ZTEwIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNTMuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE1My5UZXh0ID0gdjQyOC5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDI4LkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTUzLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTUzLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTUzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE1My5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQyOC5UZWFtID09IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5UZWFtKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTE1My5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygwLCAwLCAyNTQpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTE1My5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICB2NDI4LkNoYXJhY3Rlci5IZWFkWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0MjguTmFtZSAuLiAiIHwgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQyOC5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZVxuSGVhbHRoIDogIiAuLiB2MjAoKHY0MjguQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCAqIDEwMCkgLyB2NDI4LkNoYXJhY3Rlci5IdW1hbm9pZC5NYXhIZWFsdGgpIC4uICIlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgdjQyOC5DaGFyYWN0ZXIuSGVhZDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjQyOC5DaGFyYWN0ZXIuSGVhZDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlQ2hlc3RDaGFtcygpCiAgICBmb3IgdjQyOSwgdjQzMCBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjQzMC5OYW1lLCAiQ2hlc3QiKSB0aGVuCiAgICAgICAgICAgICAgICBpZiBDaGVzdEVTUCB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjQzMC5OYW1lLCAiQ2hlc3QiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDMwOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNDc1ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDc1Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDc1LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDc1LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ3NS5BZG9ybmVlID0gdjQzMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDc1LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNDgxID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTQ3NSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDgxLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDgxLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0MzAuTmFtZSA9PSAiQ2hlc3QxIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDgxLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMDksIDEwOSwgMTA5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5UZXh0ID0gIkNoZXN0IDEiIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDMwLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDMwLk5hbWUgPT0gIkNoZXN0MiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTczLCAxNTgsIDIxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5UZXh0ID0gIkNoZXN0IDIiIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDMwLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDMwLk5hbWUgPT0gIkNoZXN0MyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoODUsIDI1NSwgMjU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5UZXh0ID0gIkNoZXN0IDMiIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDMwLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjQzMFsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDMwLk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzMC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiB2NDMwOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NDMwOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVEZXZpbENoYW1zKCkKICAgIGZvciB2NDMxLCB2NDMyIGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBEZXZpbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHY0MzIuTmFtZSwgIkZydWl0IikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDMyLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTY0ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDMyLkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTY0Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNjQuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE2NC5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE2NC5BZG9ybmVlID0gdjQzMi5IYW5kbGU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTY0LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExNzEgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMTY0KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE3MS5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE3MS5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE3MS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE3MS5UZXh0ID0gdjQzMi5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDMyLkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQzMi5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQzMi5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzIuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0MzIuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHY0MzIuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlRmxvd2VyQ2hhbXMoKQogICAgZm9yIHY0MzMsIHY0MzQgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmICgodjQzNC5OYW1lID09ICJGbG93ZXIyIikgb3IgKHY0MzQuTmFtZSA9PSAiRmxvd2VyMSIpKSB0aGVuCiAgICAgICAgICAgICAgICBpZiBGbG93ZXJFU1AgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDM0OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExODMgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0MzQpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4My5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTgzLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODMuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODMuQWRvcm5lZSA9IHY0MzQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTgzLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExODkgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMTgzKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4OS5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4OS5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4OS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDM0Lk5hbWUgPT0gIkZsb3dlcjEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTE4OS5UZXh0ID0gIkJsdWUgRmxvd2VyIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzNC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDI1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQzNC5OYW1lID09ICJGbG93ZXIyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuVGV4dCA9ICJSZWQgRmxvd2VyIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzNC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQzNFsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDM0Lk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzNC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHY0MzQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIHY0MzQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZVJlYWxGcnVpdENoYW1zKCkKICAgIGZvciB2NDM1LCB2NDM2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkFwcGxlU3Bhd25lcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY0MzY6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICBpZiBSZWFsRnJ1aXRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IHY0MzYuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTA3ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDM2LkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgdjkwNy5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgdjkwNy5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjkwNy5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgIHY5MDcuQWRvcm5lZSA9IHY0MzYuSGFuZGxlOwogICAgICAgICAgICAgICAgICAgIHY5MDcuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5MTQgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHY5MDcpOwogICAgICAgICAgICAgICAgICAgIHY5MTQuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICB2OTE0LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgdjkxNC5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdjkxNC5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5MTQuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICB2OTE0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgIHY5MTQuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICB2OTE0LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgIHY5MTQuVGV4dCA9IHY0MzYuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzNi5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NDM2LkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDM2Lk5hbWUgLi4gIiAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDM2LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDM2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NDM2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBmb3IgdjQzNywgdjQzOCBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5QaW5lYXBwbGVTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjQzODpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIGlmIFJlYWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgdjQzOC5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5MjYgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0MzguSGFuZGxlKTsKICAgICAgICAgICAgICAgICAgICB2OTI2Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICB2OTI2LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTI2LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgdjkyNi5BZG9ybmVlID0gdjQzOC5IYW5kbGU7CiAgICAgICAgICAgICAgICAgICAgdjkyNi5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjkzMyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjkyNik7CiAgICAgICAgICAgICAgICAgICAgdjkzMy5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgIHY5MzMuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICB2OTMzLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB2OTMzLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjkzMy5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgIHY5MzMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgdjkzMy5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgIHY5MzMuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMTc0LCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTMzLlRleHQgPSB2NDM4Lk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzguSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjQzOC5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQzOC5OYW1lIC4uICIgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzOC5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQzOC5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjQzOC5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgZm9yIHY0MzksIHY0NDAgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuQmFuYW5hU3Bhd25lcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY0NDA6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICBpZiBSZWFsRnJ1aXRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IHY0NDAuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTQ1ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDQwLkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgdjk0NS5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgdjk0NS5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjk0NS5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgIHY5NDUuQWRvcm5lZSA9IHY0NDAuSGFuZGxlOwogICAgICAgICAgICAgICAgICAgIHY5NDUuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5NTIgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHY5NDUpOwogICAgICAgICAgICAgICAgICAgIHY5NTIuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICB2OTUyLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgdjk1Mi5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdjk1Mi5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5NTIuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICB2OTUyLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgIHY5NTIuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICB2OTUyLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTEsIDI1NSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjk1Mi5UZXh0ID0gdjQ0MC5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQwLkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY0NDAuSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0NDAuTmFtZSAuLiAiICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDAuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NDAuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHY0NDAuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZUlzbGFuZEVTUCgpCiAgICBmb3IgdjQ0MSwgdjQ0MiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWydfV29ybGRPcmlnaW4nXS5Mb2NhdGlvbnM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIElzbGFuZEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjQ0Mi5OYW1lIH49ICJTZWEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0NDI6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMjAwID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDQyKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDAuTmFtZSA9ICJOYW1lRXNwIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDAuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwMC5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwMC5BZG9ybmVlID0gdjQ0MjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDAuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTIwNiA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEyMDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwNi5Gb250ID0gIkdvdGhhbUJvbGQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwNi5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwNi5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjA2LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjA2LlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjA2LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwNi5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwNi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoNywgMjM2LCAyNDApOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQ0MlsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gdjQ0Mi5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDIuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQ0MjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgIHY0NDI6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIGlzbmlsKHYyMDApCiAgICByZXR1cm4gdjIwMCA9PSBuaWwgOwplbmQKbG9jYWwgZnVuY3Rpb24gdjIwKHYyMDEpCiAgICByZXR1cm4gbWF0aC5mbG9vcih0b251bWJlcih2MjAxKSArIDAuNSk7CmVuZApOdW1iZXIgPSBtYXRoLnJhbmRvbSgxLCAxMDAwMDAwKTsKZnVuY3Rpb24gVXBkYXRlUGxheWVyQ2hhbXMoKQogICAgZm9yIHY0NDMsIHY0NDQgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIG5vdCBpc25pbCh2NDQ0LkNoYXJhY3RlcikgdGhlbgogICAgICAgICAgICAgICAgaWYgRVNQUGxheWVyIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAobm90IGlzbmlsKHY0NDQuQ2hhcmFjdGVyLkhlYWQpIGFuZCBub3QgdjQ0NC5DaGFyYWN0ZXIuSGVhZDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTIxNiA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ0NC5DaGFyYWN0ZXIuSGVhZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjE2Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMTYuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIxNi5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIxNi5BZG9ybmVlID0gdjQ0NC5DaGFyYWN0ZXIuSGVhZDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMTYuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTIyMyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEyMTYpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjIzLlRleHQgPSB2NDQ0Lk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDQuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMjMuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMjMuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMjMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjIzLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDQ0LlRlYW0gPT0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlRlYW0pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMjIzLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDAsIDI1NSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMjIzLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDI1NSwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQ0NC5DaGFyYWN0ZXIuSGVhZFsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDQ0Lk5hbWUgLi4gIiB8ICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDQuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2VcbkhlYWx0aCA6ICIgLi4gdjIwKCh2NDQ0LkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggKiAxMDApIC8gdjQ0NC5DaGFyYWN0ZXIuSHVtYW5vaWQuTWF4SGVhbHRoKSAuLiAiJSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHY0NDQuQ2hhcmFjdGVyLkhlYWQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIHY0NDQuQ2hhcmFjdGVyLkhlYWQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZUNoZXN0Q2hhbXMoKQogICAgZm9yIHY0NDUsIHY0NDYgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHY0NDYuTmFtZSwgIkNoZXN0IikgdGhlbgogICAgICAgICAgICAgICAgaWYgQ2hlc3RFU1AgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHY0NDYuTmFtZSwgIkNoZXN0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQ0NjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTQ5NyA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ0Nik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ5Ny5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ5Ny5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ5Ny5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0OTcuQWRvcm5lZSA9IHY0NDY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ5Ny5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTUwMyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjE0OTcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUwMy5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUwMy5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDQ2Lk5hbWUgPT0gIkNoZXN0MSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUwMy5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTA5LCAxMDksIDEwOSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuVGV4dCA9ICJDaGVzdCAxIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ0Ni5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQ0Ni5OYW1lID09ICJDaGVzdDIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE3MywgMTU4LCAyMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuVGV4dCA9ICJDaGVzdCAyIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ0Ni5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQ0Ni5OYW1lID09ICJDaGVzdDMiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDg1LCAyNTUsIDI1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuVGV4dCA9ICJDaGVzdCAzIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ0Ni5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY0NDZbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQ0Ni5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDYuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgdjQ0NjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjQ0NjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlRGV2aWxDaGFtcygpCiAgICBmb3IgdjQ0NywgdjQ0OCBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgRGV2aWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2NDQ4Lk5hbWUsICJGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQ0OC5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTIzNCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ0OC5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIzNC5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjM0LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMzQuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMzQuQWRvcm5lZSA9IHY0NDguSGFuZGxlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIzNC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMjQxID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTIzNCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNDEuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNDEuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNDEuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNDEuVGV4dCA9IHY0NDguTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ0OC5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0NDguSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0NDguTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQ4LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDQ4LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NDQ4LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZUZsb3dlckNoYW1zKCkKICAgIGZvciB2NDQ5LCB2NDUwIGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiAoKHY0NTAuTmFtZSA9PSAiRmxvd2VyMiIpIG9yICh2NDUwLk5hbWUgPT0gIkZsb3dlcjEiKSkgdGhlbgogICAgICAgICAgICAgICAgaWYgRmxvd2VyRVNQIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQ1MDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMjUzID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTMuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1My5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjUzLlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjUzLkFkb3JuZWUgPSB2NDUwOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1My5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMjU5ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTI1Myk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTkuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTkuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTkuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQ1MC5OYW1lID09ICJGbG93ZXIxIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTkuVGV4dCA9ICJCbHVlIEZsb3dlciIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NTAuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAyNTUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0NTAuTmFtZSA9PSAiRmxvd2VyMiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlRleHQgPSAiUmVkIEZsb3dlciIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NTAuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0NTBbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQ1MC5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NTAuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiB2NDUwOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NDUwOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVSZWFsRnJ1aXRDaGFtcygpCiAgICBmb3IgdjQ1MSwgdjQ1MiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5BcHBsZVNwYXduZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NDUyOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgUmVhbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2NDUyLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjk2NCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ1Mi5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgIHY5NjQuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHY5NjQuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5NjQuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICB2OTY0LkFkb3JuZWUgPSB2NDUyLkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2OTY0LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTcxID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2OTY0KTsKICAgICAgICAgICAgICAgICAgICB2OTcxLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgdjk3MS5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgIHY5NzEuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHY5NzEuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTcxLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgdjk3MS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2OTcxLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgdjk3MS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTcxLlRleHQgPSB2NDUyLk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NTIuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjQ1Mi5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQ1Mi5OYW1lIC4uICIgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ1Mi5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQ1Mi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjQ1Mi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgZm9yIHY0NTMsIHY0NTQgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuUGluZWFwcGxlU3Bhd25lcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY0NTQ6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICBpZiBSZWFsRnJ1aXRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IHY0NTQuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTgzID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDU0LkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgdjk4My5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgdjk4My5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjk4My5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgIHY5ODMuQWRvcm5lZSA9IHY0NTQuSGFuZGxlOwogICAgICAgICAgICAgICAgICAgIHY5ODMuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5OTAgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHY5ODMpOwogICAgICAgICAgICAgICAgICAgIHY5OTAuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICB2OTkwLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgdjk5MC5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdjk5MC5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5OTAuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICB2OTkwLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgIHY5OTAuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICB2OTkwLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDE3NCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjk5MC5UZXh0ID0gdjQ1NC5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDU0LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY0NTQuSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0NTQuTmFtZSAuLiAiICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NTQuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NTQuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHY0NTQuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGZvciB2NDU1LCB2NDU2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkJhbmFuYVNwYXduZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NDU2OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgUmVhbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2NDU2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwMDIgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NTYuSGFuZGxlKTsKICAgICAgICAgICAgICAgICAgICB2MTAwMi5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgdjEwMDIuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMDAyLlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwMDIuQWRvcm5lZSA9IHY0NTYuSGFuZGxlOwogICAgICAgICAgICAgICAgICAgIHYxMDAyLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTAwOSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEwMDIpOwogICAgICAgICAgICAgICAgICAgIHYxMDA5LkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgdjEwMDkuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICB2MTAwOS5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdjEwMDkuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTAwOS5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgIHYxMDA5LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgIHYxMDA5LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgdjEwMDkuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1MSwgMjU1LCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTAwOS5UZXh0ID0gdjQ1Ni5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDU2LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY0NTYuSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0NTYuTmFtZSAuLiAiICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NTYuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NTYuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHY0NTYuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgTW9iRVNQIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2ODIyLCB2ODIzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY4MjM6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2ODIzOkZpbmRGaXJzdENoaWxkKCJNb2JFYXAiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTM3MiA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTM3MyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3Mi5QYXJlbnQgPSB2ODIzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzIuWkluZGV4QmVoYXZpb3IgPSBFbnVtLlpJbmRleEJlaGF2aW9yLlNpYmxpbmc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3Mi5BY3RpdmUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzIuTmFtZSA9ICJNb2JFYXAiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzIuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzIuTGlnaHRJbmZsdWVuY2UgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzIuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzcyLlN0dWRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMi41LCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzczLlBhcmVudCA9IHYxMzcyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzMuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3My5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzMuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzMuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcsIDIzNiwgMjQwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzczLlRleHQuU2l6ZSA9IDM1OwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwMjEgPSBtYXRoLmZsb29yKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2ODIzLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHY4MjMuTW9iRWFwLlRleHRMYWJlbC5UZXh0ID0gdjgyMy5OYW1lIC4uICItIiAuLiB2MTAyMSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgZm9yIHY4MjQsIHY4MjUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjgyNTpGaW5kRmlyc3RDaGlsZCgiTW9iRWFwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2ODI1Lk1vYkVhcDpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIFNlYUVTUCB0aGVuCiAgICAgICAgICAgICAgICBmb3IgdjgyNiwgdjgyNyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLlNlYUJlYXN0czpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY4Mjc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2ODI3OkZpbmRGaXJzdENoaWxkKCJTZWFlc3BzIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzOTEgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzOTIgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTEuUGFyZW50ID0gdjgyNzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkxLlpJbmRleEJlaGF2aW9yID0gRW51bS5aSW5kZXhCZWhhdmlvci5TaWJsaW5nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTEuQWN0aXZlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkxLk5hbWUgPSAiU2VhZXNwcyI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5MS5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5MS5MaWdodEluZmx1ZW5jZSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5MS5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTEuU3R1ZHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAyLjUsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTIuUGFyZW50ID0gdjEzOTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5Mi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5Mi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkyLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5Mi5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5Mi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoNywgMjM2LCAyNDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTIuVGV4dC5TaXplID0gMzU7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTAyMyA9IG1hdGguZmxvb3IoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHY4MjcuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjgyNy5TZWFlc3BzLlRleHRMYWJlbC5UZXh0ID0gdjgyNy5OYW1lIC4uICItIiAuLiB2MTAyMyAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgZm9yIHY4MjgsIHY4MjkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5TZWFCZWFzdHM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODI5OkZpbmRGaXJzdENoaWxkKCJTZWFlc3BzIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2ODI5LlNlYWVzcHM6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBOcGNFU1AgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY4MzAsIHY4MzEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5OUENzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjgzMTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY4MzE6RmluZEZpcnN0Q2hpbGQoIk5wY0VzcGVzIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE0MTAgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE0MTEgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTAuUGFyZW50ID0gdjgzMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLlpJbmRleEJlaGF2aW9yID0gRW51bS5aSW5kZXhCZWhhdmlvci5TaWJsaW5nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTAuQWN0aXZlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLk5hbWUgPSAiTnBjRXNwZXMiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTAuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTAuTGlnaHRJbmZsdWVuY2UgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTAuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLlN0dWRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMi41LCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDExLlBhcmVudCA9IHYxNDEwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTEuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTEuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMS5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTEuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTEuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcsIDIzNiwgMjQwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDExLlRleHQuU2l6ZSA9IDM1OwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwMjUgPSBtYXRoLmZsb29yKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2ODMxLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHY4MzEuTnBjRXNwZXMuVGV4dExhYmVsLlRleHQgPSB2ODMxLk5hbWUgLi4gIi0iIC4uIHYxMDI1IC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBmb3IgdjgzMiwgdjgzMyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk5QQ3M6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODMzOkZpbmRGaXJzdENoaWxkKCJOcGNFc3BlcyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjgzMy5OcGNFc3BlczpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpmdW5jdGlvbiBpc25pbCh2MjAyKQogICAgcmV0dXJuIHYyMDIgPT0gbmlsIDsKZW5kCmxvY2FsIGZ1bmN0aW9uIHYyMCh2MjAzKQogICAgcmV0dXJuIG1hdGguZmxvb3IodG9udW1iZXIodjIwMykgKyAwLjUpOwplbmQKTnVtYmVyID0gbWF0aC5yYW5kb20oMSwgMTAwMDAwMCk7CmZ1bmN0aW9uIFVwZGF0ZUlzbGFuZE1pcmFnZUVTUCgpCiAgICBmb3IgdjQ1NywgdjQ1OCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWydfV29ybGRPcmlnaW4nXS5Mb2NhdGlvbnM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIE1pcmFnZUlzbGFuZEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjQ1OC5OYW1lID09ICJNaXJhZ2UgSXNsYW5kIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDU4OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTI3MCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ1OCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjcwLk5hbWUgPSAiTmFtZUVzcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjcwLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzAuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzAuQWRvcm5lZSA9IHY0NTg7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjcwLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyNzYgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMjcwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzYuRm9udCA9ICJDb2RlIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzYuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzYuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3Ni5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3Ni5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3Ni5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzYuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzYuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDgwLCAyNDUsIDI0NSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDU4WydOYW1lRXNwJ10uVGV4dExhYmVsLlRleHQgPSB2NDU4Lk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ1OC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBNIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NTg6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICB2NDU4OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVBdXJhRVNQKCkKICAgIGZvciB2NDU5LCB2NDYwIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTlBDczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgQXVyYUVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjQ2MC5OYW1lID09ICJNYXN0ZXIgb2YgRW5oYW5jZW1lbnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0NjA6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMjg2ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyODYuTmFtZSA9ICJOYW1lRXNwIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyODYuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI4Ni5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI4Ni5BZG9ybmVlID0gdjQ2MDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyODYuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTI5MiA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEyODYpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI5Mi5Gb250ID0gIkNvZGUiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI5Mi5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI5Mi5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjkyLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjkyLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjkyLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI5Mi5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICB2MTI5Mi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoODAsIDI0NSwgMjQ1KTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0NjBbJ05hbWVFc3AnXS5UZXh0TGFiZWwuVGV4dCA9IHY0NjAuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDYwLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIE0iIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQ2MDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgIHY0NjA6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZUxTREVTUCgpCiAgICBmb3IgdjQ2MSwgdjQ2MiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk5QQ3M6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIExBREVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjQ2Mi5OYW1lID09ICJMZWdlbmRhcnkgU3dvcmQgRGVhbGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDYyOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTMwMiA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ2Mik7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzAyLk5hbWUgPSAiTmFtZUVzcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzAyLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDIuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDIuQWRvcm5lZSA9IHY0NjI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzAyLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzMDggPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMzAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDguRm9udCA9ICJDb2RlIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDguRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDguVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwOC5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwOC5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwOC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDguVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDguVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDgwLCAyNDUsIDI0NSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDYyWydOYW1lRXNwJ10uVGV4dExhYmVsLlRleHQgPSB2NDYyLk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ2Mi5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBNIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NjI6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICB2NDYyOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVHZWFFU1AoKQogICAgZm9yIHY0NjMsIHY0NjQgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuTXlzdGljSXNsYW5kOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBHZWFyRVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmICh2NDY0Lk5hbWUgPT0gIk1lc2hQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDY0OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTMxOCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ2NCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzE4Lk5hbWUgPSAiTmFtZUVzcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzE4LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMTguU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMTguQWRvcm5lZSA9IHY0NjQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzE4LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzMjQgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMzE4KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMjQuRm9udCA9ICJDb2RlIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMjQuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMjQuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMyNC5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMyNC5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMyNC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMjQuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMjQuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDgwLCAyNDUsIDI0NSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDY0WydOYW1lRXNwJ10uVGV4dExhYmVsLlRleHQgPSB2NDY0Lk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ2NC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBNIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NjQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICB2NDY0OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBUd2VlbjIodjIwNCkKICAgIGxvY2FsIHYyMDUgPSAodjIwNC5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlOwogICAgbG9jYWwgdjIwNiA9IDM1MDsKICAgIGlmICh2MjA1ID49IDM1MCkgdGhlbgogICAgICAgIHYyMDYgPSAzNTA7CmVuZAogICAgbG9jYWwgdjIwNyA9IFR3ZWVuSW5mby5uZXcodjIwNSAvIHYyMDYsIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyKTsKICAgIGxvY2FsIHYyMDggPSBnYW1lOkdldFNlcnZpY2UoIlR3ZWVuU2VydmljZSIpOkNyZWF0ZShnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQsIHYyMDcsIHsKICAgICAgICBDRnJhbWUgPSB2MjA0CiAgICB9KTsKICAgIHYyMDg6UGxheSgpOwogICAgaWYgX0cuQ2FuY2VsVHdlZW4yIHRoZW4KICAgICAgICB2MjA4OkNhbmNlbCgpOwogICAgZW5kCiAgICBfRy5DbGlwMiA9IHRydWU7CiAgICB3YWl0KHYyMDUgLyB2MjA2KTsKICAgIF9HLkNsaXAyID0gZmFsc2U7CmVuZApmdW5jdGlvbiBCVFBaKHYyMDkpCiAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gdjIwOTsKICAgIHRhc2sud2FpdCgpOwogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHYyMDk7CmVuZApUd2VlblNwZWVkID0gMzUwOwpmdW5jdGlvbiBUd2Vlbih2MjExKQogICAgbG9jYWwgdjIxMiA9ICh2MjExLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGU7CiAgICBsb2NhbCB2MjEzID0gVHdlZW5TcGVlZDsKICAgIGlmICh2MjEyID49IDM1MCkgdGhlbgogICAgICAgIHYyMTMgPSBUd2VlblNwZWVkOwogICAgZW5kCiAgICBsb2NhbCB2MjE0ID0gVHdlZW5JbmZvLm5ldyh2MjEyIC8gdjIxMywgRW51bS5FYXNpbmdTdHlsZS5MaW5lYXIpOwogICAgbG9jYWwgdjIxNSA9IGdhbWU6R2V0U2VydmljZSgiVHdlZW5TZXJ2aWNlIik6Q3JlYXRlKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCwgdjIxNCwgewogICAgICAgIENGcmFtZSA9IHYyMTEKICAgIH0pOwogICAgdjIxNTpQbGF5KCk7CiAgICBpZiBfRy5TdG9wVHdlZW4gdGhlbgogICAgICAgIHYyMTU6Q2FuY2VsKCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIENhbmNlbFR3ZWVuKHYyMTYpCiAgICBpZiBub3QgdjIxNiB0aGVuCiAgICAgICAgX0cuU3RvcFR3ZWVuID0gdHJ1ZTsKICAgICAgICB3YWl0KCk7CiAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICB3YWl0KCk7CiAgICAgICAgX0cuU3RvcFR3ZWVuID0gZmFsc2U7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIEVxdWlwVG9vbCh2MjE3KQogICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHYyMTcpIHRoZW4KICAgICAgICBsb2NhbCB2NTcwID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHYyMTcpOwogICAgICAgIHdhaXQoKTsKICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbCh2NTcwKTsKICAgIGVuZAplbmQKc3Bhd24oZnVuY3Rpb24oKQogICAgbG9jYWwgdjIxOCA9IGdldHJhd21ldGF0YWJsZShnYW1lKTsKICAgIGxvY2FsIHYyMTkgPSB2MjE4Ll9fbmFtZWNhbGw7CiAgICBzZXRyZWFkb25seSh2MjE4LCBmYWxzZSk7CiAgICB2MjE4Ll9fbmFtZWNhbGwgPSBuZXdjY2xvc3VyZShmdW5jdGlvbiguLi4pCiAgICAgICAgbG9jYWwgdjQ2NSA9IGdldG5hbWVjYWxsbWV0aG9kKCk7CiAgICAgICAgbG9jYWwgdjQ2NiA9IHsKICAgICAgICAgICAgLi4uCiAgICAgICAgfTsKICAgICAgICBpZiAodG9zdHJpbmcodjQ2NSkgPT0gIkZpcmVTZXJ2ZXIiKSB0aGVuCiAgICAgICAgICAgIGlmICh0b3N0cmluZyh2NDY2WzFdKSA9PSAiUmVtb3RlRXZlbnQiKSB0aGVuCiAgICAgICAgICAgICAgICBpZiAoKHRvc3RyaW5nKHY0NjZbMl0pIH49ICJ0cnVlIikgYW5kICh0b3N0cmluZyh2NDY2WzJdKSB+PSAiZmFsc2UiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIF9HLlVzZVNraWxsIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUodjQ2NlsyXSkgPT0gInZlY3RvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY0NjZbMl0gPSBQb3NpdGlvblNraWxsTWFzdGVyeURldmlsRnJ1aXQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY0NjZbMl0gPSBDRnJhbWUubmV3KFBvc2l0aW9uU2tpbGxNYXN0ZXJ5RGV2aWxGcnVpdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdjIxOSh1bnBhY2sodjQ2NikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIHJldHVybiB2MjE5KC4uLik7CiAgICBlbmQpOwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgKF9HLkF1dG9Fdm9SYWNlIG9yIF9HLkNhc3RsZVJhaWQgb3IgX0cuQ29sbGVjdEF6dXJlIG9yIF9HLlR3ZWVuVG9LaXRzdW5lIG9yIF9HLkdob3N0U2hpcCBvciBfRy5TaGlwIG9yIF9HLkF1dG9fSG9seV9Ub3JjaCBvciBfRy5UZWxlcG9ydFBseSBvciBfRy5BdXRvX1NlYTMgb3IgX0cuQXV0b19TZWEyIG9yIF9HLlR3ZWVuZnJ1aXQgb3IgX0cuQXV0b0Zpc2hDcmV3IG9yIF9HLkF1dG9fU2FiZXIgb3IgX0cuQXV0b1NoYXJrIG9yIF9HLkF1dG9fV2FyZGVuIG9yIF9HLkF1dG9fUmFpbmJvd0hha2kgb3IgQXV0b0Zhcm1SYWNlIG9yIF9HLkF1dG9RdWVzdFJhY2Ugb3IgQXV0b19MYXcgb3IgQXV0b1R1c2hpdGEgb3IgX0cuQXV0b0hvbHlUb3JjaCBvciBfRy5BdXRvVGVycm9yc2hhcmsgb3IgX0cuZmFybXBpcmFueWEgb3IgX0cuQXV0b19NdXNrZXRlZXJIYXQgb3IgX0cuQXV0b19PYnNlcnZhdGlvblYyIG9yIF9HLkF1dG9OZWFyIG9yIF9HLkF1dG9fUG9sZVYxIG9yIF9HLkF1dG9fQnVkZHkgb3IgX0cuRWN0b3BsYXNtIG9yIEF1dG9Fdm9SYWNlIG9yIEF1dG9CYXJ0aWxvIG9yIF9HLkF1dG9fQ2FudmFuZGVyIG9yIF9HLkF1dG9MZXZlbCBvciBfRy5BdXRvX0R1YWxLYXRhbmEgb3IgQXV0b19RdWVzdF9ZYW1hXzMgb3IgQXV0b19RdWVzdF9ZYW1hXzIgb3IgQXV0b19RdWVzdF9ZYW1hXzEgb3IgQXV0b19RdWVzdF9UdXNoaXRhXzEgb3IgQXV0b19RdWVzdF9UdXNoaXRhXzIgb3IgQXV0b19RdWVzdF9UdXNoaXRhXzMgb3IgX0cuQ2xpcDIgb3IgX0cuQXV0b19SZWdva3Ugb3IgX0cuQXV0b0JvbmUgb3IgX0cuQXV0b0JvbmVOb1F1ZXN0IG9yIF9HLkF1dG9Cb3NzIG9yIEF1dG9GYXJtTWFzRGV2aWxGcnVpdCBvciBBdXRvSGFsbG93U3ljdGhlIG9yIEF1dG9UdXNoaXRhIG9yIF9HLkNha2VQcmluY2Ugb3IgX0cuQXV0b19Ta3VsbEd1aXRhciBvciBfRy5BdXRvRmFybVN3YW4gb3IgX0cuRG91Z2hLaW5nIG9yIF9HLkF1dG9FbGl0ZW9yIG9yIEF1dG9OZXh0SXNsYW5kIG9yIE11c2tldGVlciBvciBfRy5BdXRvTWF0ZXJpYWwgb3IgQXV0b0Zhcm1SYWNlUXVlc3Qgb3IgX0cuRmFjdG9yeSBvciBfRy5BdXRvX1NhdyBvciBfRy5BdXRvRnJvemVuRGltZW5zaW9uIG9yIF9HLkF1dG9LaWxsVHJpYWwgb3IgX0cuQXV0b1VwZ3JhZGUgb3IgX0cuVHdlZW5Ub0Zyb3plbkRpbWVuc2lvbikgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0OkZpbmRGaXJzdENoaWxkKCJCb2R5Q2xpcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2ODg3ID0gSW5zdGFuY2UubmV3KCJCb2R5VmVsb2NpdHkiKTsKICAgICAgICAgICAgICAgICAgICB2ODg3Lk5hbWUgPSAiQm9keUNsaXAiOwogICAgICAgICAgICAgICAgICAgIHY4ODcuUGFyZW50ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQ7CiAgICAgICAgICAgICAgICAgICAgdjg4Ny5NYXhGb3JjZSA9IFZlY3RvcjMubmV3KDEwMDAwMCwgMTAwMDAwLCAxMDAwMDApOwogICAgICAgICAgICAgICAgICAgIHY4ODcuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLCAwLCAwKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydDpGaW5kRmlyc3RDaGlsZCgiQm9keUNsaXAiKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLlN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIChfRy5BdXRvRXZvUmFjZSBvciBfRy5BdXRvX1JhaW5ib3dIYWtpIG9yIF9HLkF1dG9fU2t1bGxHdWl0YXIgb3IgX0cuQ2FzdGxlUmFpZCBvciBfRy5Db2xsZWN0QXp1cmUgb3IgX0cuVHdlZW5Ub0tpdHN1bmUgb3IgX0cuQXV0b19TZWEzIG9yIF9HLkF1dG9fU2VhMiBvciBfRy5HaG9zdFNoaXAgb3IgX0cuU2hpcCBvciBfRy5BdXRvX0hvbHlfVG9yY2ggb3IgX0cuVGVsZXBvcnRQbHkgb3IgX0cuVHdlZW5mcnVpdCBvciBfRy5BdXRvX1NhYmVyIG9yIF9HLkF1dG9fUG9sZVYxIG9yIF9HLkF1dG9fTXVza2V0ZWVySGF0IG9yIF9HLkF1dG9GaXNoQ3JldyBvciBfRy5BdXRvU2hhcmsgb3IgQXV0b0Zhcm1SYWNlIG9yIF9HLkF1dG9RdWVzdFJhY2Ugb3IgX0cuQXV0b19XYXJkZW4gb3IgQXV0b19MYXcgb3IgX0cuQXV0b19EdWFsS2F0YW5hIG9yIEF1dG9fUXVlc3RfVHVzaGl0YV8xIG9yIEF1dG9fUXVlc3RfVHVzaGl0YV8yIG9yIEF1dG9fUXVlc3RfVHVzaGl0YV8zIG9yIEF1dG9UdXNoaXRhIG9yIF9HLkF1dG9Ib2x5VG9yY2ggb3IgX0cuQXV0b19CdWRkeSBvciBfRy5BdXRvVGVycm9yc2hhcmsgb3IgX0cuZmFybXBpcmFueWEgb3IgQXV0b19RdWVzdF9ZYW1hXzMgb3IgX0cuQXV0b19PYnNlcnZhdGlvblYyIG9yIEF1dG9fUXVlc3RfWWFtYV8yIG9yIEF1dG9fUXVlc3RfWWFtYV8xIG9yIF9HLkF1dG9OZWFyIG9yIF9HLkVjdG9wbGFzbSBvciBBdXRvRXZvUmFjZSBvciBfRy5BdXRvS2lsbFRyaWFsIG9yIEF1dG9CYXJ0aWxvIG9yIF9HLkF1dG9fUmVnb2t1IG9yIF9HLkF1dG9MZXZlbCBvciBfRy5DbGlwMiBvciBfRy5BdXRvQm9uZSBvciBfRy5BdXRvX0NhbnZhbmRlciBvciBfRy5BdXRvQm9uZU5vUXVlc3Qgb3IgX0cuQXV0b0Jvc3Mgb3IgX0cuQXV0b19TYXcgb3IgQXV0b0Zhcm1NYXNEZXZpbEZydWl0IG9yIEF1dG9IYWxsb3dTeWN0aGUgb3IgQXV0b1R1c2hpdGEgb3IgX0cuQ2FrZVByaW5jZSBvciBfRy5Eb3VnaEtpbmcgb3IgX0cuQXV0b0Zhcm1Td2FuIG9yIF9HLkF1dG9FbGl0ZW9yIG9yIEF1dG9OZXh0SXNsYW5kIG9yIE11c2tldGVlciBvciBfRy5BdXRvTWF0ZXJpYWwgb3IgX0cuRmFjdG9yeSBvciBfRy5BdXRvRnJvemVuRGltZW5zaW9uIG9yIEF1dG9GYXJtUmFjZVF1ZXN0IG9yIF9HLkF1dG9VcGdyYWRlIG9yIF9HLlR3ZWVuVG9Gcm96ZW5EaW1lbnNpb24pIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2ODM0LCB2ODM1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY4MzU6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjgzNS5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZCk7CmVuZCk7CnRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU3R1biIpIHRoZW4KICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlN0dW4uQ2hhbmdlZDpjb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU3R1biIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlN0dW4uVmFsdWUgPSAwOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpmdW5jdGlvbiBDaGVja01hdGVyaWFsKHYyMjEpCiAgICBmb3IgdjQ2NywgdjQ2OCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJnZXRJbnZlbnRvcnkiKSkgZG8KICAgICAgICBpZiAodHlwZSh2NDY4KSA9PSAidGFibGUiKSB0aGVuCiAgICAgICAgICAgIGlmICh2NDY4LlR5cGUgPT0gIk1hdGVyaWFsIikgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0NjguTmFtZSA9PSB2MjIxKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHY0NjguQ291bnQ7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiAwOwplbmQKZnVuY3Rpb24gR2V0V2VhcG9uSW52ZW50b3J5KHYyMjIpCiAgICBmb3IgdjQ2OSwgdjQ3MCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJnZXRJbnZlbnRvcnkiKSkgZG8KICAgICAgICBpZiAodHlwZSh2NDcwKSA9PSAidGFibGUiKSB0aGVuCiAgICAgICAgICAgIGlmICh2NDcwLlR5cGUgPT0gIlN3b3JkIikgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0NzAuTmFtZSA9PSB2MjIyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiBmYWxzZTsKZW5kCmxvY2FsIHYyMSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjsKZnVuY3Rpb24gRmluZEVuZW1pZXNJblJhbmdlKHYyMjMsIHYyMjQpCiAgICBsb2NhbCB2MjI1ID0gKHYyMS5DaGFyYWN0ZXIgb3IgdjIxLkNoYXJhY3RlckFkZGVkOldhaXQoKSk6R2V0UGl2b3QoKS5Qb3NpdGlvbjsKICAgIGxvY2FsIHYyMjYgPSBuaWw7CiAgICBmb3IgdjQ3MSwgdjQ3MiBpbiBpcGFpcnModjIyNCkgZG8KICAgICAgICBpZiAobm90IHY0NzI6R2V0QXR0cmlidXRlKCJJc0JvYXQiKSBhbmQgdjQ3MjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikgYW5kICh2NDcyLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY2NzEgPSB2NDcyOkZpbmRGaXJzdENoaWxkKCJIZWFkIik7CiAgICAgICAgICAgIGlmICh2NjcxIGFuZCAoKHYyMjUgLSB2NjcxLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNjApKSB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjQ3MiB+PSB2MjEuQ2hhcmFjdGVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHYyMjMsIHsKICAgICAgICAgICAgICAgICAgICAgICAgdjQ3MiwKICAgICAgICAgICAgICAgICAgICAgICAgdjY3MQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHYyMjYgPSB2NjcxOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBmb3IgdjQ3MywgdjQ3NCBpbiBpcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICBpZiAodjQ3NC5DaGFyYWN0ZXIgYW5kICh2NDc0IH49IHYyMSkpIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjY3MiA9IHY0NzQuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIZWFkIik7CiAgICAgICAgICAgIGlmICh2NjcyIGFuZCAoKHYyMjUgLSB2NjcyLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNjApKSB0aGVuCiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQodjIyMywgewogICAgICAgICAgICAgICAgICAgIHY0NzQuQ2hhcmFjdGVyLAogICAgICAgICAgICAgICAgICAgIHY2NzIKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdjIyNiA9IHY2NzI7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICByZXR1cm4gdjIyNjsKZW5kCmZ1bmN0aW9uIEdldEVxdWlwcGVkVG9vbCgpCiAgICBsb2NhbCB2MjI3ID0gdjIxLkNoYXJhY3RlcjsKICAgIGlmIG5vdCB2MjI3IHRoZW4KICAgICAgICByZXR1cm4gbmlsOwogICAgZW5kCiAgICBmb3IgdjQ3NSwgdjQ3NiBpbiBpcGFpcnModjIyNzpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY0NzY6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICByZXR1cm4gdjQ3NjsKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIG5pbDsKZW5kCmZ1bmN0aW9uIEF0dGFja05vQ29vbERvd24oKQogICAgbG9jYWwgdjIyOCA9IHt9OwogICAgbG9jYWwgdjIyOSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpOwogICAgbG9jYWwgdjIzMCA9IEZpbmRFbmVtaWVzSW5SYW5nZSh2MjI4LCB2MjI5KTsKICAgIGlmIG5vdCB2MjMwIHRoZW4KICAgICAgICByZXR1cm47CiAgICBlbmQKICAgIGxvY2FsIHYyMzEgPSBHZXRFcXVpcHBlZFRvb2woKTsKICAgIGlmIG5vdCB2MjMxIHRoZW4KICAgICAgICByZXR1cm47CiAgICBlbmQKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2NDc3ID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOwogICAgICAgIGxvY2FsIHY0NzggPSB2NDc3OldhaXRGb3JDaGlsZCgiTW9kdWxlcyIpOldhaXRGb3JDaGlsZCgiTmV0Iik6V2FpdEZvckNoaWxkKCJSRS9SZWdpc3RlckF0dGFjayIpOwogICAgICAgIGxvY2FsIHY0NzkgPSB2NDc3OldhaXRGb3JDaGlsZCgiTW9kdWxlcyIpOldhaXRGb3JDaGlsZCgiTmV0Iik6V2FpdEZvckNoaWxkKCJSRS9SZWdpc3RlckhpdCIpOwogICAgICAgIGlmICgjIHYyMjggPiAwKSB0aGVuCiAgICAgICAgICAgIHY0Nzg6RmlyZVNlcnZlcigxZS05KTsKICAgICAgICAgICAgdjQ3OTpGaXJlU2VydmVyKHYyMzAsIHYyMjgpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgdGFzay53YWl0KDFlLTkpOwogICAgICAgIGVuZAogICAgZW5kKTsKZW5kClR5cGUgPSAxOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiAoVHlwZSA9PSAxKSB0aGVuCiAgICAgICAgICAgIFBvcyA9IENGcmFtZS5uZXcoMCwgNDAsIDApOwogICAgICAgIGVsc2VpZiAoVHlwZSA9PSAyKSB0aGVuCiAgICAgICAgICAgIFBvcyA9IENGcmFtZS5uZXcoLSA0MCwgNDAsIDApOwogICAgICAgIGVsc2VpZiAoVHlwZSA9PSAzKSB0aGVuCiAgICAgICAgICAgIFBvcyA9IENGcmFtZS5uZXcoNDAsIDQwLCAwKTsKICAgICAgICBlbHNlaWYgKFR5cGUgPT0gNCkgdGhlbgogICAgICAgICAgICBQb3MgPSBDRnJhbWUubmV3KDAsIDQwLCA0MCk7CiAgICAgICAgZWxzZWlmIChUeXBlID09IDUpIHRoZW4KICAgICAgICAgICAgUG9zID0gQ0ZyYW1lLm5ldygwLCA0MCwgLSA0MCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgVHlwZSA9IDE7CiAgICAgICAgd2FpdCgwLjIpOwogICAgICAgIFR5cGUgPSAyOwogICAgICAgIHdhaXQoMC4yKTsKICAgICAgICBUeXBlID0gMzsKICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgVHlwZSA9IDQ7CiAgICAgICAgd2FpdCgwLjIpOwogICAgICAgIFR5cGUgPSA1OwogICAgICAgIHdhaXQoMC4yKTsKICAgIGVuZAplbmQpOwpmdW5jdGlvbiBBdXRvSGFraSgpCiAgICBpZiBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIYXNCdXNvIikgdGhlbgogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1c28iKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gdG8odjIzMikKICAgIHJlcGVhdAogICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNSk7CiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHYyMzI7CiAgICAgICAgdGFzay53YWl0KCk7CiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHYyMzI7CiAgICB1bnRpbCAodjIzMi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDIwMDAKZW5kCmZ1bmN0aW9uIHRvKHYyMzMpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgaWYgKCgodjIzMy5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID49IDIwMDApIGFuZCBub3QgQXV0b19SYWlkIGFuZCAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICBpZiAoTmFtZU1vbiA9PSAiRmlzaG1hblF1ZXN0IikgdGhlbgogICAgICAgICAgICAgICAgVHdlZW4oZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg2MTE2My44NTE1NjI1LCAxMS42Nzk2ODc1LCAxODE5Ljc4NDE3OTY4NzUpKTsKICAgICAgICAgICAgZWxzZWlmIChNb24gPT0gIkdvZCdzIEd1YXJkIikgdGhlbgogICAgICAgICAgICAgICAgVHdlZW4oZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDQ2MDcuODIyNzUsIDg3Mi41NDI0OCwgLSAxNjY3LjU1Njg4KSk7CiAgICAgICAgICAgIGVsc2VpZiAoTmFtZU1vbiA9PSAiU2t5RXhwMVF1ZXN0IikgdGhlbgogICAgICAgICAgICAgICAgVHdlZW4oZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDc4OTQuNjE3Njc1NzgxMywgNTU0Ny4xNDE2MDE1NjI1LCAtIDM4MC4yOTExOTg3MzA0NykpOwogICAgICAgICAgICBlbHNlaWYgKE5hbWVNb24gPT0gIlNoaXBRdWVzdDEiKSB0aGVuCiAgICAgICAgICAgICAgICBUd2VlbihnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDkyMy4yMTI1MjQ0MTQwNiwgMTI2Ljk3NjAwNTU1NDIsIDMyODUyLjgzMjAzMTI1KSk7CiAgICAgICAgICAgIGVsc2VpZiAoTmFtZU1vbiA9PSAiU2hpcFF1ZXN0MiIpIHRoZW4KICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoOTIzLjIxMjUyNDQxNDA2LCAxMjYuOTc2MDA1NTU0MiwgMzI4NTIuODMyMDMxMjUpKTsKICAgICAgICAgICAgZWxzZWlmIChOYW1lTW9uID09ICJGcm9zdFF1ZXN0IikgdGhlbgogICAgICAgICAgICAgICAgVHdlZW4oZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDY1MDguNTU4MTA1NDY4OCwgODkuMDM0OTk2MDMyNzE1LCAtIDEzMi44Mzk1Mzg1NzQyMikpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSB2MjMzOwogICAgICAgICAgICAgICAgICAgIHdhaXQoMC4wNSk7CiAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gdjIzMzsKICAgICAgICAgICAgICAgIHVudGlsICgodjIzMy5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMjUwMCkgYW5kIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCA+IDApCiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kCmxvY2FsIHYyMiA9IEluc3RhbmNlLm5ldygiU2NyZWVuR3VpIik7CmxvY2FsIHYyMyA9IEluc3RhbmNlLm5ldygiSW1hZ2VCdXR0b24iKTsKbG9jYWwgdjI0ID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpOwpsb2NhbCB2MjUgPSBJbnN0YW5jZS5uZXcoIlBhcnRpY2xlRW1pdHRlciIpOwpsb2NhbCB2MjYgPSBnYW1lOkdldFNlcnZpY2UoIlR3ZWVuU2VydmljZSIpOwoKdjIyLlBhcmVudCA9IGdhbWUuQ29yZUd1aTsKdjIyLlpJbmRleEJlaGF2aW9yID0gRW51bS5aSW5kZXhCZWhhdmlvci5TaWJsaW5nOwoKdjIzLlBhcmVudCA9IHYyMjsKdjIzLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KTsKdjIzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjUKdjIzLkJvcmRlclNpemVQaXhlbCA9IDA7CnYyMy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjEyMDgzMzMzNyAtIDAuMSwgMCwgMC4wOTUyODkwODEzICsgMC4wMSwgMCk7CnYyMy5TaXplID0gVURpbTIubmV3KDAsIDUwLCAwLCA1MCk7CnYyMy5EcmFnZ2FibGUgPSB0cnVlOwp2MjMuSW1hZ2UgPSAiaHR0cDovL3d3dy5yb2Jsb3guY29tL2Fzc2V0Lz9pZD03MDY1OTcyODk2MzkyNCI7Cgp2MjQuUGFyZW50ID0gdjIzOwp2MjQuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMSwgMCk7Cgp2MjUuUGFyZW50ID0gdjIzOwp2MjUuTGlnaHRFbWlzc2lvbiA9IDE7CnYyNS5TaXplID0gTnVtYmVyU2VxdWVuY2UubmV3KHsKICAgIE51bWJlclNlcXVlbmNlS2V5cG9pbnQubmV3KDAsIDAuMSksCiAgICBOdW1iZXJTZXF1ZW5jZUtleXBvaW50Lm5ldygxLCAwKQp9KTsKdjI1LkxpZmV0aW1lID0gTnVtYmVyUmFuZ2UubmV3KDAuNSwgMSk7CnYyNS5SYXRlID0gMDsKdjI1LlNwZWVkID0gTnVtYmVyUmFuZ2UubmV3KDUsIDEwKTsKdjI1LkNvbG9yID0gQ29sb3JTZXF1ZW5jZS5uZXcoQ29sb3IzLmZyb21SR0IoMjU1LCA4NSwgMjU1KSwgQ29sb3IzLmZyb21SR0IoODUsIDI1NSwgMjU1KSk7Cgpsb2NhbCB2NDcgPSB2MjY6Q3JlYXRlKHYyMywgVHdlZW5JbmZvLm5ldygwLjUsIEVudW0uRWFzaW5nU3R5bGUuUXVhZCwgRW51bS5FYXNpbmdEaXJlY3Rpb24uT3V0KSwgewogICAgUm90YXRpb24gPSAwCn0pOwoKLS0g8J+foiBUb2dnbGUgc3RhdGUKbG9jYWwgdG9nZ2xlZCA9IHRydWUKCnYyMy5Nb3VzZUJ1dHRvbjFEb3duOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgdjI1LlJhdGUgPSAxMDA7CiAgICB0YXNrLmRlbGF5KDEsIGZ1bmN0aW9uKCkKICAgICAgICB2MjUuUmF0ZSA9IDA7CiAgICBlbmQpOwoKICAgIHY0NzpQbGF5KCk7CiAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgRW51bS5LZXlDb2RlLkVuZCwgZmFsc2UsIGdhbWUpOwoKICAgIHY0Ny5Db21wbGV0ZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgdjIzLlJvdGF0aW9uID0gMDsKICAgIGVuZCk7CgogICAgaWYgbm90IHRvZ2dsZWQgdGhlbgogICAgICAgIC0tIELhuq10IHRy4bqhbmcgdGjDoWk6IHRvICsgdHLhuq9uZyDEkeG6t2MKICAgICAgICB0b2dnbGVkID0gdHJ1ZQogICAgICAgIHYyMy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMAogICAgICAgIHYyMy5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LDI1NSwyNTUpCiAgICAgICAgbG9jYWwgdjIzNSA9IHYyNjpDcmVhdGUodjIzLCBUd2VlbkluZm8ubmV3KDAuMiwgRW51bS5FYXNpbmdTdHlsZS5Cb3VuY2UsIEVudW0uRWFzaW5nRGlyZWN0aW9uLk91dCksIHsKICAgICAgICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCA2MCwgMCwgNjApCiAgICAgICAgfSk7CiAgICAgICAgdjIzNTpQbGF5KCkKICAgIGVsc2UKICAgICAgICAtLSBU4bqvdCB0cuG6oW5nIHRow6FpOiBuaOG7jyArIHRyb25nIG5o4bq5CiAgICAgICAgdG9nZ2xlZCA9IGZhbHNlCiAgICAgICAgdjIzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjUKICAgICAgICB2MjMuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwyNTUsMjU1KQogICAgICAgIGxvY2FsIHY0ODMgPSB2MjY6Q3JlYXRlKHYyMywgVHdlZW5JbmZvLm5ldygwLjIsIEVudW0uRWFzaW5nU3R5bGUuQm91bmNlLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLCB7CiAgICAgICAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgNTAsIDAsIDUwKQogICAgICAgIH0pOwogICAgICAgIHY0ODM6UGxheSgpCiAgICBlbmQKZW5kKQoKLS0geG/DoSBlZmZlY3QgbeG6t2MgxJHhu4tuaAppZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuRWZmZWN0LkNvbnRhaW5lcjpGaW5kRmlyc3RDaGlsZCgiRGVhdGgiKSB0aGVuCiAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuRWZmZWN0LkNvbnRhaW5lci5EZWF0aDpEZXN0cm95KCk7CmVuZAppZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuRWZmZWN0LkNvbnRhaW5lcjpGaW5kRmlyc3RDaGlsZCgiUmVzcGF3biIpIHRoZW4KICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5FZmZlY3QuQ29udGFpbmVyLlJlc3Bhd246RGVzdHJveSgpOwplbmQKdjE2LkhvbWU6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlRpayBUb2siLAogICAgRGVzY3JpcHRpb24gPSAiQ2xpY2soQ29weSkiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgc2V0Y2xpcGJvYXJkKCJ0aWt0b2suY29tL0Bob2MuY29kZWRlcC5weXRob24iKTsKICAgIGVuZAp9KTsKdjE2LkhvbWU6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlphbG8gR3JvdXAiLAogICAgRGVzY3JpcHRpb24gPSAiQ2xpY2soQ29weSkiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgc2V0Y2xpcGJvYXJkKCJodHRwczovL3phbG8ubWUvZy92enVicms1MTkiKTsKICAgIGVuZAp9KTsKdjE2LkhvbWU6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlJlbWVtYmVyOiIsCiAgICBEZXNjcmlwdGlvbiA9ICJUaGlzIHJlYWwgT2xpb3MgSHViLCBidXQgYSBuZXcgdmVyc2lvbiBtYWRlIGJ5IE9saW9zIFJvYmxveC4iLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgc2V0Y2xpcGJvYXJkKCJ0aWt0b2suY29tL0Bob2MuY29kZWRlcC5weXRob24iKTsKICAgIGVuZAp9KTsKX0cuRmFzdEF0dGFja1N0cml4X01vZGUgPSAiU3VwZXIgRmFzdCBBdHRhY2siOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5GYXN0QXR0YWNrU3RyaXhfTW9kZSB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIChfRy5GYXN0QXR0YWNrU3RyaXhfTW9kZSA9PSAiU3VwZXIgRmFzdCBBdHRhY2siKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgX0cuRmFzdF9EZWxheSA9IDFlLTk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NDggPSB2MTYuTWFpbjpBZGREcm9wZG93bigiRHJvcGRvd25TZWxlY3RXZWFwb24iLCB7CiAgICBUaXRsZSA9ICJTZWxlY3Qgd2VhcG9uIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSB7CiAgICAgICAgIk1lbGVlIiwKICAgICAgICAiU3dvcmQiLAogICAgICAgICJCbG94IEZydWl0cyIKICAgIH0sCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnY0ODpTZXRWYWx1ZSgiTWVsZWUiKTsKdjQ4Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjM2KQogICAgQ2hvb3NlV2VhcG9uID0gdjIzNjsKZW5kKTsKdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIChDaG9vc2VXZWFwb24gPT0gIk1lbGVlIikgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY4MzYsIHY4MzcgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY4MzcuVG9vbFRpcCA9PSAiTWVsZWUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCh0b3N0cmluZyh2ODM3Lk5hbWUpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWxlY3RXZWFwb24gPSB2ODM3Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiAoQ2hvb3NlV2VhcG9uID09ICJTd29yZCIpIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2MTAyOCwgdjEwMjkgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDI5LlRvb2xUaXAgPT0gIlN3b3JkIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQodG9zdHJpbmcodjEwMjkuTmFtZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlbGVjdFdlYXBvbiA9IHYxMDI5Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiAoQ2hvb3NlV2VhcG9uID09ICJCbG94IEZydWl0IikgdGhlbgogICAgICAgICAgICAgICAgZm9yIHYxNDMwLCB2MTQzMSBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiAodjE0MzEuVG9vbFRpcCA9PSAiQmxveCBGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvc3RyaW5nKHYxNDMxLk5hbWUpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWxlY3RXZWFwb24gPSB2MTQzMS5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY0OSA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlTGV2ZWwiLCB7CiAgICBUaXRsZSA9ICJBdXRvIEZhcm0gTGV2ZWwiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjQ5Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjM3KQogICAgX0cuQXV0b0xldmVsID0gdjIzNzsKICAgIGlmICh2MjM3ID09IGZhbHNlKSB0aGVuCiAgICAgICAgd2FpdCgpOwogICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgd2FpdCgpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVMZXZlbDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b0xldmVsIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgQ2hlY2tMZXZlbCgpOwogICAgICAgICAgICAgICAgaWYgKG5vdCBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCBOYW1lTW9uKSBvciAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJBYmFuZG9uUXVlc3QiKTsKICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWVRKTsKICAgICAgICAgICAgICAgICAgICBpZiAoKENGcmFtZVEuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDUpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RhcnRRdWVzdCIsIE5hbWVRdWVzdCwgUXVlc3RMdik7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsIE5hbWVNb24pIG9yIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IHRydWUpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDMyLCB2MTQzMyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDMzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTQzMzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE0MzMuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQzMy5OYW1lID09IE1zKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0MzMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzMy5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzMuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzMy5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzMy5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzMy5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNDMzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE0MzMuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b0xldmVsIG9yIG5vdCB2MTQzMy5QYXJlbnQgb3IgKHYxNDMzLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHYxNDMzLk5hbWUpIG9yIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGZvciB2MTQzNCwgdjE0MzUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uRW5lbXlTcGF3bnM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjE0MzUuTmFtZSwgTmFtZU1vbikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2MTQzNS5Qb3NpdGlvbikuTWFnbml0dWRlID49IDEwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0MzUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjUwID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVNb2JBdXJhIiwgewogICAgVGl0bGUgPSAiQXV0byBGYXJtIE5lYXJlc3QiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjUwOk9uQ2hhbmdlZChmdW5jdGlvbih2MjM4KQogICAgX0cuQXV0b05lYXIgPSB2MjM4OwogICAgaWYgKHYyMzggPT0gZmFsc2UpIHRoZW4KICAgICAgICB3YWl0KCk7CiAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICB3YWl0KCk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZU1vYkF1cmE6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvTmVhciB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGZvciB2ODM4LCB2ODM5IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiAodjgzOTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjgzOTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjgzOS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiB2ODM5Lk5hbWUgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2ODM5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1MDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjgzOS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4MzkuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4MzkuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODM5Lkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4MzkuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjgzOS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHY4MzkuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2ODM5Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9OZWFyIG9yIG5vdCB2ODM5LlBhcmVudCBvciAodjgzOS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodjgzOS5OYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NTEgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZUNhc3RsZVJhaWQiLCB7CiAgICBUaXRsZSA9ICJBdXRvIEZhcm0gUGlyYXRlcyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NTE6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyMzkpCiAgICBfRy5DYXN0bGVSYWlkID0gdjIzOTsKZW5kKTsKdjE3LlRvZ2dsZUNhc3RsZVJhaWQ6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5DYXN0bGVSYWlkIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbG9jYWwgdjc2NCA9IENGcmFtZS5uZXcoLSA1NDk2LjE3NDMyLCAzMTMuNzY4OTIxLCAtIDI4NDEuNTMwMjcsIDAuOTI0ODk0NTEyLCA3LjM3MDU4ZS05LCAwLjM4MDIyMzc1MSwgMy41ODgxMDJlLTgsIDEsIC0gMS4wNjY2NTQ0NmUtNywgLSAwLjM4MDIyMzc1MSwgMS4xMjI5NzExZS03LCAwLjkyNDg5NDUxMik7CiAgICAgICAgICAgICAgICBpZiAoKENGcmFtZS5uZXcoLSA1NTM5LjMxMTUyMzQzNzUsIDMxMy44MDA1MzcxMDkzNzUsIC0gMjk3Mi4zNzIzMTQ0NTMxMjUpLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNTAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDMwLCB2MTAzMSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9HLkNhc3RsZVJhaWQgYW5kIHYxMDMxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYxMDMxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCAodjEwMzEuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjEwMzEuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMjAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzMS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzEuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDMxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAodjEwMzEuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTAzMS5QYXJlbnQgb3Igbm90IF9HLkNhc3RsZVJhaWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBUd2Vlbih2NzY0KTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY1MiA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlSGFraUZvcnRyZXNzIiwgewogICAgVGl0bGUgPSAiQWN0aXZhdGUgQ29sb3IgSGFraSAoRm9ydHJlc3MpIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY1MjpPbkNoYW5nZWQoZnVuY3Rpb24odjI0MCkKICAgIF9HLkVuYWJsZUhha2lGb3J0cmVzcyA9IHYyNDA7CmVuZCk7CnYxNy5Ub2dnbGVIYWtpRm9ydHJlc3M6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCBmdW5jdGlvbiB2NTModjI0MSwgdjI0MikKICAgIGxvY2FsIHYyNDMgPSB7CiAgICAgICAgWzFdID0gewogICAgICAgICAgICBTdG9yYWdlTmFtZSA9IHYyNDEsCiAgICAgICAgICAgIFR5cGUgPSAiQXVyYVNraW4iLAogICAgICAgICAgICBDb250ZXh0ID0gIkVxdWlwIgogICAgICAgIH0KICAgIH07CiAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuTW9kdWxlcy5OZXQ6RmluZEZpcnN0Q2hpbGQoIlJGL0ZydWl0Q3VzdG9taXplclJGIik6SW52b2tlU2VydmVyKHVucGFjayh2MjQzKSk7CiAgICBUd2VlbjIodjI0Mik7CmVuZApsb2NhbCBmdW5jdGlvbiB2NTQodjI0NCwgdjI0NSkKICAgIGxvY2FsIHYyNDYgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOwogICAgaWYgKG5vdCB2MjQ2IG9yIG5vdCB2MjQ2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikpIHRoZW4KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICBlbmQKICAgIGxvY2FsIHYyNDcgPSB2MjQ2Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb247CiAgICByZXR1cm4gKHYyNDcgLSB2MjQ0KS5NYWduaXR1ZGUgPCB2MjQ1IDsKZW5kCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRydWUgZG8KICAgICAgICBpZiBfRy5FbmFibGVIYWtpRm9ydHJlc3MgdGhlbgogICAgICAgICAgICB2NTMoIlNub3cgV2hpdGUiLCBWZWN0b3IzLm5ldygtIDQ5NzEuNzE4MjYxNzE4NzUsIDMzNS45NTgyMjE0MzU1NDY5LCAtIDM3MjAuMDU5NTcwMzEyNSkpOwogICAgICAgICAgICB3aGlsZSBub3QgdjU0KFZlY3RvcjMubmV3KC0gNDk3MS43MTgyNjE3MTg3NSwgMzM1Ljk1ODIyMTQzNTU0NjksIC0gMzcyMC4wNTk1NzAzMTI1KSwgMSkgZG8KICAgICAgICAgICAgICAgIHdhaXQoMC4xKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgdjUzKCJQdXJlIFJlZCIsIFZlY3RvcjMubmV3KC0gNTQxNC45MjA0MTAxNTYyNSwgMzE0LjI1ODIwOTIyODUxNTYsIC0gMjIxMi4yMDE2NjAxNTYyNSkpOwogICAgICAgICAgICB3aGlsZSBub3QgdjU0KFZlY3RvcjMubmV3KC0gNTQxNC45MjA0MTAxNTYyNSwgMzE0LjI1ODIwOTIyODUxNTYsIC0gMjIxMi4yMDE2NjAxNTYyNSksIDEpIGRvCiAgICAgICAgICAgICAgICB3YWl0KDAuMSk7CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgIHY1MygiV2ludGVyIFNreSIsIFZlY3RvcjMubmV3KC0gNTQyMC4yNjMxODM1OTM3NSwgMTA4OS4zNTgyNzYzNjcxODc1LCAtIDI2NjYuODE5MzM1OTM3NSkpOwogICAgICAgICAgICB3aGlsZSBub3QgdjU0KFZlY3RvcjMubmV3KC0gNTQyMC4yNjMxODM1OTM3NSwgMTA4OS4zNTgyNzYzNjcxODc1LCAtIDI2NjYuODE5MzM1OTM3NSksIDEpIGRvCiAgICAgICAgICAgICAgICB3YWl0KDAuMSk7CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgIF9HLkVuYWJsZUhha2lGb3J0cmVzcyA9IGZhbHNlOwogICAgICAgIGVuZAogICAgICAgIHdhaXQoMC41KTsKICAgIGVuZAplbmQpOwpsb2NhbCB2NTUgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZUNvbGxlY3RDaGVzdCIsIHsKICAgIFRpdGxlID0gIkF1dG8gRmFybSBDaGVzdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NDk6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyMzcpCiAgICBfRy5BdXRvTGV2ZWwgPSB2MjM3OwogICAgaWYgKHYyMzcgPT0gZmFsc2UpIHRoZW4KICAgICAgICB3YWl0KCk7CiAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICB3YWl0KCk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZUxldmVsOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvTGV2ZWwgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBDaGVja0xldmVsKCk7CiAgICAgICAgICAgICAgICBpZiAobm90IHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsIE5hbWVNb24pIG9yIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFiYW5kb25RdWVzdCIpOwogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZVEpOwogICAgICAgICAgICAgICAgICAgIGlmICgoQ0ZyYW1lUS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdGFydFF1ZXN0IiwgTmFtZVF1ZXN0LCBRdWVzdEx2KTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgTmFtZU1vbikgb3IgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gdHJ1ZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjE0MzIsIHYxNDMzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0MzM6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNDMzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTQzMy5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDMzLk5hbWUgPT0gTXMpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQzMy5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDMzLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzMy5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDMzLkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDMzLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDMzLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjE0MzMuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTQzMy5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvTGV2ZWwgb3Igbm90IHYxNDMzLlBhcmVudCBvciAodjE0MzMuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodjE0MzMuTmFtZSkgb3IgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDM0LCB2MTQzNSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWydfV29ybGRPcmlnaW4nXS5FbmVteVNwYXduczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2MTQzNS5OYW1lLCBOYW1lTW9uKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHYxNDM1LlBvc2l0aW9uKS5NYWduaXR1ZGUgPj0gMTApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQzNS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NTAgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZU1vYkF1cmEiLCB7CiAgICBUaXRsZSA9ICJBdXRvIEZhcm0gTmVhcmVzdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NTA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyMzgpCiAgICBfRy5BdXRvTmVhciA9IHYyMzg7CiAgICBpZiAodjIzOCA9PSBmYWxzZSkgdGhlbgogICAgICAgIHdhaXQoKTsKICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgIHdhaXQoKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlTW9iQXVyYTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9OZWFyIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgZm9yIHY4MzgsIHY4MzkgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2ODM5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2ODM5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2ODM5Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY4MzkuTmFtZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHY4Mzk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKS5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDUwMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2ODM5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjgzOS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjgzOS5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4MzkuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjgzOS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODM5Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjgzOS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHY4MzkuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b05lYXIgb3Igbm90IHY4MzkuUGFyZW50IG9yICh2ODM5Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2ODM5Lk5hbWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY1MSA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlQ2FzdGxlUmFpZCIsIHsKICAgIFRpdGxlID0gIkF1dG8gRmFybSBQaXJhdGVzIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY1MTpPbkNoYW5nZWQoZnVuY3Rpb24odjIzOSkKICAgIF9HLkNhc3RsZVJhaWQgPSB2MjM5OwplbmQpOwp2MTcuVG9nZ2xlQ2FzdGxlUmFpZDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkNhc3RsZVJhaWQgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCB2NzY0ID0gQ0ZyYW1lLm5ldygtIDU0OTYuMTc0MzIsIDMxMy43Njg5MjEsIC0gMjg0MS41MzAyNywgMC45MjQ4OTQ1MTIsIDcuMzcwNThlLTksIDAuMzgwMjIzNzUxLCAzLjU4ODEwMmUtOCwgMSwgLSAxLjA2NjY1NDQ2ZS03LCAtIDAuMzgwMjIzNzUxLCAxLjEyMjk3MTFlLTcsIDAuOTI0ODk0NTEyKTsKICAgICAgICAgICAgICAgIGlmICgoQ0ZyYW1lLm5ldygtIDU1MzkuMzExNTIzNDM3NSwgMzEzLjgwMDUzNzEwOTM3NSwgLSAyOTcyLjM3MjMxNDQ1MzEyNSkuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1MDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwMzAsIHYxMDMxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoX0cuQ2FzdGxlUmFpZCBhbmQgdjEwMzE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdjEwMzE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kICh2MTAzMS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTAzMS5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPCAyMDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDMxLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzMS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwMzEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICh2MTAzMS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxMDMxLlBhcmVudCBvciBub3QgX0cuQ2FzdGxlUmFpZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY3NjQpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjUyID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVIYWtpRm9ydHJlc3MiLCB7CiAgICBUaXRsZSA9ICJBY3RpdmF0ZSBDb2xvciBIYWtpIChGb3J0cmVzcykiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjUyOk9uQ2hhbmdlZChmdW5jdGlvbih2MjQwKQogICAgX0cuRW5hYmxlSGFraUZvcnRyZXNzID0gdjI0MDsKZW5kKTsKdjE3LlRvZ2dsZUhha2lGb3J0cmVzczpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIGZ1bmN0aW9uIHY1Myh2MjQxLCB2MjQyKQogICAgbG9jYWwgdjI0MyA9IHsKICAgICAgICBbMV0gPSB7CiAgICAgICAgICAgIFN0b3JhZ2VOYW1lID0gdjI0MSwKICAgICAgICAgICAgVHlwZSA9ICJBdXJhU2tpbiIsCiAgICAgICAgICAgIENvbnRleHQgPSAiRXF1aXAiCiAgICAgICAgfQogICAgfTsKICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Nb2R1bGVzLk5ldDpGaW5kRmlyc3RDaGlsZCgiUkYvRnJ1aXRDdXN0b21pemVyUkYiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKHYyNDMpKTsKICAgIFR3ZWVuMih2MjQyKTsKZW5kCmxvY2FsIGZ1bmN0aW9uIHY1NCh2MjQ0LCB2MjQ1KQogICAgbG9jYWwgdjI0NiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI7CiAgICBpZiAobm90IHYyNDYgb3Igbm90IHYyNDY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSkgdGhlbgogICAgICAgIHJldHVybiBmYWxzZTsKICAgIGVuZAogICAgbG9jYWwgdjI0NyA9IHYyNDYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbjsKICAgIHJldHVybiAodjI0NyAtIHYyNDQpLk1hZ25pdHVkZSA8IHYyNDUgOwplbmQKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdHJ1ZSBkbwogICAgICAgIGlmIF9HLkVuYWJsZUhha2lGb3J0cmVzcyB0aGVuCiAgICAgICAgICAgIHY1MygiU25vdyBXaGl0ZSIsIFZlY3RvcjMubmV3KC0gNDk3MS43MTgyNjE3MTg3NSwgMzM1Ljk1ODIyMTQzNTU0NjksIC0gMzcyMC4wNTk1NzAzMTI1KSk7CiAgICAgICAgICAgIHdoaWxlIG5vdCB2NTQoVmVjdG9yMy5uZXcoLSA0OTcxLjcxODI2MTcxODc1LCAzMzUuOTU4MjIxNDM1NTQ2OSwgLSAzNzIwLjA1OTU3MDMxMjUpLCAxKSBkbwogICAgICAgICAgICAgICAgd2FpdCgwLjEpOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICB2NTMoIlB1cmUgUmVkIiwgVmVjdG9yMy5uZXcoLSA1NDE0LjkyMDQxMDE1NjI1LCAzMTQuMjU4MjA5MjI4NTE1NiwgLSAyMjEyLjIwMTY2MDE1NjI1KSk7CiAgICAgICAgICAgIHdoaWxlIG5vdCB2NTQoVmVjdG9yMy5uZXcoLSA1NDE0LjkyMDQxMDE1NjI1LCAzMTQuMjU4MjA5MjI4NTE1NiwgLSAyMjEyLjIwMTY2MDE1NjI1KSwgMSkgZG8KICAgICAgICAgICAgICAgIHdhaXQoMC4xKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgdjUzKCJXaW50ZXIgU2t5IiwgVmVjdG9yMy5uZXcoLSA1NDIwLjI2MzE4MzU5Mzc1LCAxMDg5LjM1ODI3NjM2NzE4NzUsIC0gMjY2Ni44MTkzMzU5Mzc1KSk7CiAgICAgICAgICAgIHdoaWxlIG5vdCB2NTQoVmVjdG9yMy5uZXcoLSA1NDIwLjI2MzE4MzU5Mzc1LCAxMDg5LjM1ODI3NjM2NzE4NzUsIC0gMjY2Ni44MTkzMzU5Mzc1KSwgMSkgZG8KICAgICAgICAgICAgICAgIHdhaXQoMC4xKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgX0cuRW5hYmxlSGFraUZvcnRyZXNzID0gZmFsc2U7CiAgICAgICAgZW5kCiAgICAgICAgd2FpdCgwLjUpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY1NSA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlQ29sbGVjdENoZXN0IiwgewogICAgVGl0bGUgPSAiQXV0byBGYXJtIENoZXN0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY1NTpPbkNoYW5nZWQoZnVuY3Rpb24odjI0OCkKICAgIF9HLkF1dG9Db2xsZWN0Q2hlc3QgPSB2MjQ4OwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvQ29sbGVjdENoZXN0IHRoZW4KICAgICAgICAgICAgbG9jYWwgdjY3MyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOwogICAgICAgICAgICBsb2NhbCB2Njc0ID0gdjY3My5Mb2NhbFBsYXllcjsKICAgICAgICAgICAgbG9jYWwgdjY3NSA9IHY2NzQuQ2hhcmFjdGVyIG9yIHY2NzQuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpIDsKICAgICAgICAgICAgbG9jYWwgdjY3NiA9IHY2NzU6R2V0UGl2b3QoKS5Qb3NpdGlvbjsKICAgICAgICAgICAgbG9jYWwgdjY3NyA9IGdhbWU6R2V0U2VydmljZSgiQ29sbGVjdGlvblNlcnZpY2UiKTsKICAgICAgICAgICAgbG9jYWwgdjY3OCA9IHY2Nzc6R2V0VGFnZ2VkKCJfQ2hlc3RUYWdnZWQiKTsKICAgICAgICAgICAgbG9jYWwgdjY3OSwgdjY4MCA9IG1hdGguaHVnZTsKICAgICAgICAgICAgZm9yIHY3NjUgPSAxLCAjIHY2NzggZG8KICAgICAgICAgICAgICAgIGxvY2FsIHY3NjYgPSB2Njc4W3Y3NjVdOwogICAgICAgICAgICAgICAgbG9jYWwgdjc2NyA9ICh2NzY2OkdldFBpdm90KCkuUG9zaXRpb24gLSB2Njc2KS5NYWduaXR1ZGU7CiAgICAgICAgICAgICAgICBpZiAobm90IHY3NjY6R2V0QXR0cmlidXRlKCJJc0Rpc2FibGVkIikgYW5kICh2NzY3IDwgdjY3OSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2Njc5LCB2NjgwID0gdjc2Nywgdjc2NjsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgaWYgdjY4MCB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2ODQwID0gdjY4MDpHZXRQaXZvdCgpLlBvc2l0aW9uOwogICAgICAgICAgICAgICAgbG9jYWwgdjg0MSA9IENGcmFtZS5uZXcodjg0MCk7CiAgICAgICAgICAgICAgICBUd2VlbjIodjg0MSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY1NiA9IHYxNi5NYWluOkFkZFNlY3Rpb24oIk1hc3RlcnkiKTsKbG9jYWwgdjU3ID0gdjE2Lk1haW46QWRkRHJvcGRvd24oIkRyb3Bkb3duTWFzdGVyeSIsIHsKICAgIFRpdGxlID0gIkF1dG8gRmFybSBNYXN0ZXJ5IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSB7CiAgICAgICAgIk5lYXIgTW9icyIKICAgIH0sCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnY1NzpTZXRWYWx1ZShUeXBlTWFzdGVyeSk7CnY1NzpPbkNoYW5nZWQoZnVuY3Rpb24odjI0OSkKICAgIFR5cGVNYXN0ZXJ5ID0gdjI0OTsKZW5kKTsKbG9jYWwgdjU4ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVNYXN0ZXJ5RnJ1aXQiLCB7CiAgICBUaXRsZSA9ICJBdXRvIE1hc3RlcnkgRnJ1aXQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjU4Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjUwKQogICAgQXV0b0Zhcm1NYXNEZXZpbEZydWl0ID0gdjI1MDsKZW5kKTsKdjE3LlRvZ2dsZU1hc3RlcnlGcnVpdDpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHY1OSA9IHYxNi5NYWluOkFkZFNsaWRlcigiU2xpZGVySGVhbHQiLCB7CiAgICBUaXRsZSA9ICJNb2IgSFAiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSAyMCwKICAgIE1pbiA9IDAsCiAgICBNYXggPSAxMDAsCiAgICBSb3VuZGluZyA9IDEsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYyNTEpCiAgICAgICAgS2lsbFBlcmNlbnQgPSB2MjUxOwogICAgZW5kCn0pOwp2NTk6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNTIpCiAgICBLaWxsUGVyY2VudCA9IHYyNTI7CmVuZCk7CnY1OTpTZXRWYWx1ZSgyMCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgaWYgX0cuVXNlU2tpbGwgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBfRy5Vc2VTa2lsbCB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDMyLCB2MTAzMyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTAzMy5OYW1lID09IE1vbkZhcm0pIGFuZCB2MTAzMzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjEwMzM6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxMDMzLkh1bWFub2lkLkhlYWx0aCA8PSAoKHYxMDMzLkh1bWFub2lkLk1heEhlYWx0aCAqIEtpbGxQZXJjZW50KSAvIDEwMCkpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6d2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGF0YS5EZXZpbEZydWl0LlZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTAzMy5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9zaXRpb25Ta2lsbE1hc3RlcnlEZXZpbEZydWl0ID0gdjEwMzMuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkRhdGEuRGV2aWxGcnVpdC5WYWx1ZSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkRhdGEuRGV2aWxGcnVpdC5WYWx1ZSkuTW91c2VQb3MuVmFsdWUgPSBQb3NpdGlvblNraWxsTWFzdGVyeURldmlsRnJ1aXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNjA2ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EYXRhLkRldmlsRnJ1aXQuVmFsdWUpLkxldmVsLlZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU2tpbGxaIGFuZCAodjE2MDYgPj0gMSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiWiIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIloiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU2tpbGxYIGFuZCAodjE2MDYgPj0gMikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiWCIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIlgiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU2tpbGxDIGFuZCAodjE2MDYgPj0gMykpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiQyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIkMiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU2tpbGxWIGFuZCAodjE2MDYgPj0gNCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiViIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6c2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIlYiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU2tpbGxGIGFuZCAodjE2MDYgPj0gNSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRiIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIkYiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IEF1dG9GYXJtTWFzRGV2aWxGcnVpdCBvciBub3QgX0cuVXNlU2tpbGwgb3IgKHYxMDMzLkh1bWFub2lkLkhlYWx0aCA9PSAwKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgwLjEpIGRvCiAgICAgICAgaWYgKEF1dG9GYXJtTWFzRGV2aWxGcnVpdCBhbmQgKFR5cGVNYXN0ZXJ5ID09ICJOZWFyIE1vYnMiKSkgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBmb3Igdjg0Miwgdjg0MyBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY4NDMuTmFtZSBhbmQgdjg0MzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjg0MzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjg0MzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNTAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjg0My5IdW1hbm9pZC5IZWFsdGggPD0gKCh2ODQzLkh1bWFub2lkLk1heEhlYWx0aCAqIEtpbGxQZXJjZW50KSAvIDEwMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX0cuVXNlU2tpbGwgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX0cuVXNlU2tpbGwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjg0My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NDMuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NDMuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODQzLkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NDMuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg0My5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHY4NDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2ODQzLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBBdXRvRmFybU1hc0RldmlsRnJ1aXQgb3IgKG5vdCBNYXN0ZXJ5VHlwZSA9PSAiTmVhciBNb2JzIikgb3Igbm90IHY4NDMuUGFyZW50IG9yICh2ODQzLkh1bWFub2lkLkhlYWx0aCA9PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9HLlVzZVNraWxsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKaWYgU2VhMyB0aGVuCiAgICBsb2NhbCB2NDg0ID0gdjE2Lk1haW46QWRkU2VjdGlvbigiWMawxqFuZyIpOwogICAgbG9jYWwgdjQ4NSA9IHYxNi5NYWluOkFkZFBhcmFncmFwaCh7CiAgICAgICAgVGl0bGUgPSAiQm9uZSBTdGF0dXMiLAogICAgICAgIENvbnRlbnQgPSAiIgogICAgfSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgICAgIGxvY2FsIHY3NjggPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCb25lcyIsICJDaGVjayIpOwogICAgICAgICAgICAgICAgdjQ4NTpTZXREZXNjKCJZb3UgaGF2ZTogIiAuLiB0b3N0cmluZyh2NzY4KSAuLiAiIEJvbmVzIik7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQpOwogICAgbG9jYWwgdjQ4NiA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlQm9uZSIsIHsKICAgICAgICBUaXRsZSA9ICJBdXRvIEZhcm0gQm9uZSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjQ4NjpPbkNoYW5nZWQoZnVuY3Rpb24odjU3MSkKICAgICAgICBfRy5BdXRvQm9uZSA9IHY1NzE7CiAgICAgICAgaWYgKHY1NzEgPT0gZmFsc2UpIHRoZW4KICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUJvbmU6U2V0VmFsdWUoZmFsc2UpOwogICAgbG9jYWwgdjQ4NyA9IENGcmFtZS5uZXcoLSA5NTE1Ljc1LCAxNzQuODUyMTcyODUxNTYyNSwgNjA3OS40MDYyNSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9Cb25lIHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2ODk0ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dDsKICAgICAgICAgICAgICAgICAgICBpZiBub3Qgc3RyaW5nLmZpbmQodjg5NCwgIkRlbW9uaWMgU291bCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWJhbmRvblF1ZXN0Iik7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjQ4Nyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjQ4Ny5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMykgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RhcnRRdWVzdCIsICJIYXVudGVkUXVlc3QyIiwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSB0cnVlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlJlYm9ybiBTa2VsZXRvbiIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTGl2aW5nIFpvbWJpZSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGVtb25pYyBTb3VsIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJQb3Nlc3NlZCBNdW1teSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE2NjEsIHYxNjYyIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTY2MjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2MTY2MjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgKHYxNjYyLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE2NjIuTmFtZSA9PSAiUmVib3JuIFNrZWxldG9uIikgb3IgKHYxNjYyLk5hbWUgPT0gIkxpdmluZyBab21iaWUiKSBvciAodjE2NjIuTmFtZSA9PSAiRGVtb25pYyBTb3VsIikgb3IgKHYxNjYyLk5hbWUgPT0gIlBvc2Vzc2VkIE11bW15IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJEZW1vbmljIFNvdWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE2NjIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Mi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjIuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Mi5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Mi5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Mi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNjYyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE2NjIuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b0JvbmUgb3IgKHYxNjYyLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE2NjIuUGFyZW50IG9yIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFiYW5kb25RdWVzdCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY0ODggPSBDRnJhbWUubmV3KC0gOTUxNS43NSwgMTc0Ljg1MjE3Mjg1MTU2MjUsIDYwNzkuNDA2MjUpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvQm9uZU5vUXVlc3QgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY0ODgpOwogICAgICAgICAgICAgICAgICAgIGlmICgodjQ4OC5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMykgdGhlbgogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlJlYm9ybiBTa2VsZXRvbiIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTGl2aW5nIFpvbWJpZSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGVtb25pYyBTb3VsIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJQb3Nlc3NlZCBNdW1teSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQzNiwgdjE0MzcgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0Mzc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdjE0Mzc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kICh2MTQzNy5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE0MzcuTmFtZSA9PSAiUmVib3JuIFNrZWxldG9uIikgb3IgKHYxNDM3Lk5hbWUgPT0gIkxpdmluZyBab21iaWUiKSBvciAodjE0MzcuTmFtZSA9PSAiRGVtb25pYyBTb3VsIikgb3IgKHYxNDM3Lk5hbWUgPT0gIlBvc2Vzc2VkIE11bW15IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0MzcuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzcuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzNy5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzNy5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzcuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDM3Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNDM3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNDM3Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvQm9uZU5vUXVlc3Qgb3IgKHYxNDM3Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE0MzcuUGFyZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NDg5ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVSYW5kb21Cb25lIiwgewogICAgICAgIFRpdGxlID0gIlJhbmRvbSBCb25lcyIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjQ4OTpPbkNoYW5nZWQoZnVuY3Rpb24odjU3NCkKICAgICAgICBfRy5BdXRvUmFuZG9tQm9uZSA9IHY1NzQ7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZVJhbmRvbUJvbmU6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvUmFuZG9tQm9uZSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2ODQ0ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJCb25lcyIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkJ1eSIsCiAgICAgICAgICAgICAgICAgICAgWzNdID0gMSwKICAgICAgICAgICAgICAgICAgICBbNF0gPSAxCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjg0NCkpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZAppZiBTZWEzIHRoZW4KICAgIGxvY2FsIHY0OTAgPSB2MTYuTWFpbjpBZGRTZWN0aW9uKCJDYWtlIFByaW5jZSIpOwogICAgbG9jYWwgdjQ5MSA9IHYxNi5NYWluOkFkZFBhcmFncmFwaCh7CiAgICAgICAgVGl0bGUgPSAiU3RhdHVzIiwKICAgICAgICBDb250ZW50ID0gIiIKICAgIH0pOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoc3RyaW5nLmxlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDYWtlUHJpbmNlU3Bhd25lciIpKSA9PSA4OCkgdGhlbgogICAgICAgICAgICAgICAgICAgIHY0OTE6U2V0RGVzYygiTGVmdDogIiAuLiBzdHJpbmcuc3ViKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNha2VQcmluY2VTcGF3bmVyIiksIDM5LCA0MSkgLi4gIiIpOwogICAgICAgICAgICAgICAgZWxzZWlmIChzdHJpbmcubGVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNha2VQcmluY2VTcGF3bmVyIikpID09IDg3KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjQ5MTpTZXREZXNjKCJDw7JuOiAiIC4uIHN0cmluZy5zdWIoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2FrZVByaW5jZVNwYXduZXIiKSwgMzksIDQwKSAuLiAiIik7CiAgICAgICAgICAgICAgICBlbHNlaWYgKHN0cmluZy5sZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2FrZVByaW5jZVNwYXduZXIiKSkgPT0gODYpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NDkxOlNldERlc2MoIkPDsm46ICIgLi4gc3RyaW5nLnN1YihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDYWtlUHJpbmNlU3Bhd25lciIpLCAzOSwgMzkpIC4uICIgIik7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjQ5MTpTZXREZXNjKCJUxrAgTOG7h25oIELDoW5oIDog4pyF77iPIik7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NDkyID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVDYWtlIiwgewogICAgICAgIFRpdGxlID0gIkF1dG8gQ2FrZSBQcmluY2UiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIGxvY2FsIHY0OTMgPSB0cnVlOwogICAgdjQ5MjpPbkNoYW5nZWQoZnVuY3Rpb24odjU3NSkKICAgICAgICBfRy5DYWtlUHJpbmNlID0gdjU3NTsKICAgICAgICBpZiB2NTc1IHRoZW4KICAgICAgICAgICAgaWYgdjQ5MyB0aGVuCiAgICAgICAgICAgICAgICB2NDkzID0gZmFsc2U7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODk1ID0gQ0ZyYW1lLm5ldygtIDIwMDMuOTMyODYxMzI4MTI1LCAzODAuNDgyNDUyMzkyNTc4MSwgLSAxMjU2MS4wMTg1NTQ2ODc1KTsKICAgICAgICAgICAgICAgIFR3ZWVuKHY4OTUpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlCiAgICAgICAgICAgIHY0OTMgPSB0cnVlOwogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlQ2FrZTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkNha2VQcmluY2UgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBQcmluY2UiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQzOCwgdjE0MzkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0MzkuTmFtZSA9PSAiQ2FrZSBQcmluY2UiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDM5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTQzOTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE0MzkuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzOS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDM5Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzOS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDM5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkNha2VQcmluY2Ugb3Igbm90IHYxNDM5LlBhcmVudCBvciAodjE0MzkuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBQcmluY2UgW0x2LiAyMzAwXSBbUmFpZCBCb3NzXSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJDYWtlIFByaW5jZSBbTHYuIDIzMDBdIFtSYWlkIEJvc3NdIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5DYWtlTG9hZi5CaWdNaXJyb3IuT3RoZXIuVHJhbnNwYXJlbmN5ID09IDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ29va2llIENyYWZ0ZXIiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNha2UgR3VhcmQiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkJha2luZyBTdGFmZiIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiSGVhZCBCYWtlciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE3NTQsIHYxNzU1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE3NTUuTmFtZSA9PSAiQ29va2llIENyYWZ0ZXIiKSBvciAodjE3NTUuTmFtZSA9PSAiQ2FrZSBHdWFyZCIpIG9yICh2MTc1NS5OYW1lID09ICJCYWtpbmcgU3RhZmYiKSBvciAodjE3NTUuTmFtZSA9PSAiSGVhZCBCYWtlciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTc1NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE3NTU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxNzU1Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE3NTUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE3NTUuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc1NS5IZWFkLkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc1NS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjE3NTUuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNzU1Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE3NTUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5DYWtlUHJpbmNlIG9yIG5vdCB2MTc1NS5QYXJlbnQgb3IgKHYxNzU1Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuQ2FrZUxvYWYuQmlnTWlycm9yLk90aGVyLlRyYW5zcGFyZW5jeSA9PSAwKSBvciBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkNha2UgUHJpbmNlIFtMdi4gMjMwMF0gW1JhaWQgQm9zc10iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNha2UgUHJpbmNlIFtMdi4gMjMwMF0gW1JhaWQgQm9zc10iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NDk0ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVEb3VnaEtpbmciLCB7CiAgICAgICAgVGl0bGUgPSAiQXV0byBEb3VnaCBLaW5nIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NDk0Ok9uQ2hhbmdlZChmdW5jdGlvbih2NTc2KQogICAgICAgIF9HLkRvdWdoS2luZyA9IHY1NzY7CiAgICAgICAgaWYgKHY1NzYgPT0gZmFsc2UpIHRoZW4KICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZURvdWdoS2luZzpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkRvdWdoS2luZyB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEb3VnaCBLaW5nIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NDAsIHYxNDQxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDQxLk5hbWUgPT0gIkRvdWdoIEtpbmciKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDQxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTQ0MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE0NDEuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0MS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQxLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0MS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDQxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkRvdWdoS2luZyBvciBub3QgdjE0NDEuUGFyZW50IG9yICh2MTQ0MS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY0OTUgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZVNwYXduQ2FrZSIsIHsKICAgICAgICBUaXRsZSA9ICJTcGF3bSBDYWtlIFByaW5jZSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gdHJ1ZQogICAgfSk7CiAgICB2NDk1Ok9uQ2hhbmdlZChmdW5jdGlvbih2NTc3KQogICAgICAgIF9HLlNwYXduQ2FrZVByaW5jZSA9IHY1Nzc7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZVNwYXduQ2FrZTpTZXRWYWx1ZSh0cnVlKTsKZW5kCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLlNwYXduQ2FrZVByaW5jZSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY2ODEgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiQ2FrZVByaW5jZVNwYXduZXIiLAogICAgICAgICAgICAgICAgWzJdID0gdHJ1ZQogICAgICAgICAgICB9OwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NjgxKSk7CiAgICAgICAgICAgIGxvY2FsIHY2ODEgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiQ2FrZVByaW5jZVNwYXduZXIiCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY2ODEpKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwppZiBTZWEyIHRoZW4KICAgIGxvY2FsIHY0OTYgPSB2MTYuTWFpbjpBZGRTZWN0aW9uKCJFY3RvcGxhc20gRmFybSIpOwogICAgbG9jYWwgdjQ5NyA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlVmF0Q2hhdEtpRGkiLCB7CiAgICAgICAgVGl0bGUgPSAiQXV0byBGYXJtIEVjdG9wbGFzbSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjQ5NzpPbkNoYW5nZWQoZnVuY3Rpb24odjU3OCkKICAgICAgICBfRy5FY3RvcGxhc20gPSB2NTc4OwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVWYXRDaGF0S2lEaTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIF9HLkVjdG9wbGFzbSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU2hpcCBEZWNraGFuZCIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU2hpcCBFbmdpbmVlciIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU2hpcCBTdGV3YXJkIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJTaGlwIE9mZmljZXIiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NDIsIHYxNDQzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTQ0My5OYW1lID09ICJTaGlwIFN0ZXdhcmQiKSBvciAodjE0NDMuTmFtZSA9PSAiU2hpcCBFbmdpbmVlciIpIG9yICh2MTQ0My5OYW1lID09ICJTaGlwIERlY2toYW5kIikgb3IgKCh2MTQ0My5OYW1lID09ICJTaGlwIE9mZmljZXIiKSBhbmQgdjE0NDM6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDQzLkh1bWFub2lkLkhlYWx0aCA+IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDMuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0My5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0My5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDMuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQzLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNDQzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNDQzLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIChfRy5FY3RvcGxhc20gPT0gZmFsc2UpIG9yIG5vdCB2MTQ0My5QYXJlbnQgb3IgKHYxNDQzLkh1bWFub2lkLkhlYWx0aCA9PSAwKSBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHYxNDQzLk5hbWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTMzNCA9IChWZWN0b3IzLm5ldyg5MDQuNDA3MjI2NTYyNSwgMTgxLjA1NzY3ODIyMjY2LCAzMzM0MS4zODY3MTg3NSkgLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMzM0ID4gMjAwMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDkyMy4yMTI1MjQ0MTQwNiwgMTI2Ljk3NjAwNTU1NDIsIDMyODUyLjgzMjAzMTI1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDkwNC40MDcyMjY1NjI1LCAxODEuMDU3Njc4MjIyNjYsIDMzMzQxLjM4NjcxODc1KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZApsb2NhbCB2NjAgPSB2MTYuTWFpbjpBZGRTZWN0aW9uKCJCb3NzIik7CmlmIFNlYTEgdGhlbgogICAgdGFibGVCb3NzID0gewogICAgICAgICJUaGUgR29yaWxsYSBLaW5nIiwKICAgICAgICAiQm9iYnkiLAogICAgICAgICJZZXRpIiwKICAgICAgICAiTW9iIExlYWRlciIsCiAgICAgICAgIlZpY2UgQWRtaXJhbCIsCiAgICAgICAgIldhcmRlbiIsCiAgICAgICAgIkNoaWVmIFdhcmRlbiIsCiAgICAgICAgIlN3YW4iLAogICAgICAgICJNYWdtYSBBZG1pcmFsIiwKICAgICAgICAiRmlzaG1hbiBMb3JkIiwKICAgICAgICAiV3lzcGVyIiwKICAgICAgICAiVGh1bmRlciBHb2QiLAogICAgICAgICJDeWJvcmciLAogICAgICAgICJTYWJlciBFeHBlcnQiCiAgICB9OwplbHNlaWYgU2VhMiB0aGVuCiAgICB0YWJsZUJvc3MgPSB7CiAgICAgICAgIkRpYW1vbmQiLAogICAgICAgICJKZXJlbXkiLAogICAgICAgICJGYWppdGEiLAogICAgICAgICJEb24gU3dhbiIsCiAgICAgICAgIlNtb2tlIEFkbWlyYWwiLAogICAgICAgICJDdXJzZWQgQ2FwdGFpbiIsCiAgICAgICAgIkRhcmtiZWFyZCIsCiAgICAgICAgIk9yZGVyIiwKICAgICAgICAiQXdha2VuZWQgSWNlIEFkbWlyYWwiLAogICAgICAgICJUaWRlIEtlZXBlciIKICAgIH07CmVsc2VpZiBTZWEzIHRoZW4KICAgIHRhYmxlQm9zcyA9IHsKICAgICAgICAiU3RvbmUiLAogICAgICAgICJIeWRyYSBMZWFkZXIiLAogICAgICAgICJLaWxvIEFkbWlyYWwiLAogICAgICAgICJDYXB0YWluIEVsZXBoYW50IiwKICAgICAgICAiQmVhdXRpZnVsIFBpcmF0ZSIsCiAgICAgICAgInJpcF9pbmRyYSBUcnVlIEZvcm0iLAogICAgICAgICJMb25nbWEiLAogICAgICAgICJTb3VsIFJlYXBlciIsCiAgICAgICAgIkNha2UgUXVlZW4iCiAgICB9OwplbmQKbG9jYWwgdjYxID0gdjE2Lk1haW46QWRkRHJvcGRvd24oIkRyb3Bkb3duQm9zcyIsIHsKICAgIFRpdGxlID0gIlNlbGVjdCBCb3NzIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSB0YWJsZUJvc3MsCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnY2MTpTZXRWYWx1ZShfRy5TZWxlY3RCb3NzKTsKdjYxOk9uQ2hhbmdlZChmdW5jdGlvbih2MjUzKQogICAgX0cuU2VsZWN0Qm9zcyA9IHYyNTM7CmVuZCk7CmxvY2FsIHY2MiA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b0Zhcm1Cb3NzIiwgewogICAgVGl0bGUgPSAiQXV0byBGYXJtIEJvc3MiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjYyOk9uQ2hhbmdlZChmdW5jdGlvbih2MjU0KQogICAgX0cuQXV0b0Jvc3MgPSB2MjU0OwplbmQpOwp2MTcuVG9nZ2xlQXV0b0Zhcm1Cb3NzOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b0Jvc3MgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoX0cuU2VsZWN0Qm9zcykgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTAzNCwgdjEwMzUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTAzNS5OYW1lID09IF9HLlNlbGVjdEJvc3MpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTAzNTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjEwMzU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxMDM1Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDM1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzNS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzNS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwMzUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllciwgIlNpbXVsYXRpb25SYWRpdXMiLCBtYXRoLmh1Z2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvQm9zcyBvciBub3QgdjEwMzUuUGFyZW50IG9yICh2MTAzNS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoX0cuU2VsZWN0Qm9zcykgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZChfRy5TZWxlY3RCb3NzKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoNSwgMTAsIDcpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY2MyA9IHYxNi5NYWluOkFkZFNlY3Rpb24oIk1hdGVyaWFsIik7CmlmIFNlYTEgdGhlbgogICAgTWF0ZXJpYWxMaXN0ID0gewogICAgICAgICJTY3JhcCBNZXRhbCIsCiAgICAgICAgIkxlYXRoZXIiLAogICAgICAgICJBbmdlbCBXaW5ncyIsCiAgICAgICAgIk1hZ21hIE9yZSIsCiAgICAgICAgIkZpc2ggVGFpbCIKICAgIH07CmVsc2VpZiBTZWEyIHRoZW4KICAgIE1hdGVyaWFsTGlzdCA9IHsKICAgICAgICAiU2NyYXAgTWV0YWwiLAogICAgICAgICJMZWF0aGVyIiwKICAgICAgICAiUmFkaW9hY3RpdmUgTWF0ZXJpYWwiLAogICAgICAgICJNeXN0aWMgRHJvcGxldCIsCiAgICAgICAgIk1hZ21hIE9yZSIsCiAgICAgICAgIlZhbXBpcmUgRmFuZyIKICAgIH07CmVsc2VpZiBTZWEzIHRoZW4KICAgIE1hdGVyaWFsTGlzdCA9IHsKICAgICAgICAiU2NyYXAgTWV0YWwiLAogICAgICAgICJMZWF0aGVyIiwKICAgICAgICAiRGVtb25pYyBXaXNwIiwKICAgICAgICAiQ29uanVyZWQgQ29jb2EiLAogICAgICAgICJEcmFnb24gU2NhbGUiLAogICAgICAgICJHdW5wb3dkZXIiLAogICAgICAgICJGaXNoIFRhaWwiLAogICAgICAgICJNaW5pIFR1c2siLAogICAgICAgICJIeWRyYSBFbmZvcmNlciIsCiAgICAgICAgIlZlbm9tb3VzIEFzc2FpbGFudCIKICAgIH07CmVuZApsb2NhbCB2NjQgPSB2MTYuTWFpbjpBZGREcm9wZG93bigiRHJvcGRvd25NYXRlcmlhbCIsIHsKICAgIFRpdGxlID0gIlNlbGVjdCBNYXRlcmlhbCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgVmFsdWVzID0gTWF0ZXJpYWxMaXN0LAogICAgTXVsdGkgPSBmYWxzZSwKICAgIERlZmF1bHQgPSAxCn0pOwp2NjQ6U2V0VmFsdWUoU2VsZWN0TWF0ZXJpYWwpOwp2NjQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNTUpCiAgICBTZWxlY3RNYXRlcmlhbCA9IHYyNTU7CmVuZCk7CmxvY2FsIHY2NSA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlTWF0ZXJpYWwiLCB7CiAgICBUaXRsZSA9ICJBdXRvIEZhcm0gTWF0ZXJpYWwiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjY1Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjU2KQogICAgX0cuQXV0b01hdGVyaWFsID0gdjI1NjsKICAgIGlmICh2MjU2ID09IGZhbHNlKSB0aGVuCiAgICAgICAgd2FpdCgpOwogICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgd2FpdCgpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVNYXRlcmlhbDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b01hdGVyaWFsIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgTWF0ZXJpYWxNb24oU2VsZWN0TWF0ZXJpYWwpOwogICAgICAgICAgICAgICAgVHdlZW4oTVBvcyk7CiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoTU1vbikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTAzNiwgdjEwMzcgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwMzc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMDM3OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTAzNy5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDM3Lk5hbWUgPT0gTU1vbikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDM3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzcuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDM3Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzcuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzcuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzcuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTAzNy5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxMDM3Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9NYXRlcmlhbCBvciBub3QgdjEwMzcuUGFyZW50IG9yICh2MTAzNy5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGZvciB2MTAzOCwgdjEwMzkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uRW5lbXlTcGF3bnM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjEwMzkuTmFtZSwgTW9uKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHYxMDM5LlBvc2l0aW9uKS5NYWduaXR1ZGUgPj0gMTApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTAzOS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwppZiBTZWEzIHRoZW4KICAgIGxvY2FsIHY0OTggPSB2MTYuU2VhOkFkZFNlY3Rpb24oIktpdHN1bmUgSXNsYW5kIFN0YXR1cyIpOwogICAgbG9jYWwgdjQ5OSA9IHYxNi5TZWE6QWRkUGFyYWdyYXBoKHsKICAgICAgICBUaXRsZSA9ICIiLAogICAgICAgIENvbnRlbnQgPSAiIgogICAgfSk7CiAgICBmdW5jdGlvbiBVcGRhdGVLaXRzdW5lKCkKICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiS2l0c3VuZUlzbGFuZCIpIHRoZW4KICAgICAgICAgICAgdjQ5OTpTZXREZXNjKCJLaXRzdW5lIElzbGFuZCA6IOKche+4jyIpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgdjQ5OTpTZXREZXNjKCJLaXRzdW5lIElzbGFuZCA6IOKdjO+4jyIpOwogICAgICAgIGVuZAogICAgZW5kCiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgICAgIFVwZGF0ZUtpdHN1bmUoKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZCk7CiAgICBsb2NhbCB2NTAwID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZUVzcEtpdHN1bmUiLCB7CiAgICAgICAgVGl0bGUgPSAiRXNwIEtpdHN1bmUgaXNsYW5kIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTAwOk9uQ2hhbmdlZChmdW5jdGlvbih2NTc5KQogICAgICAgIEtpdHN1bmVJc2xhbmRFc3AgPSB2NTc5OwogICAgICAgIHdoaWxlIEtpdHN1bmVJc2xhbmRFc3AgZG8KICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBVcGRhdGVJc2xhbmRLaXN1bmVFU1AoKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlRXNwS2l0c3VuZTpTZXRWYWx1ZShmYWxzZSk7CiAgICBmdW5jdGlvbiBVcGRhdGVJc2xhbmRLaXN1bmVFU1AoKQogICAgICAgIGZvciB2NjgyLCB2ODMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uTG9jYXRpb25zOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIEtpdHN1bmVJc2xhbmRFc3AgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmICh2NjgzLk5hbWUgPT0gIktpdHN1bmUgSXNsYW5kIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjY4MzpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNTE4ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NjgzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTE4Lk5hbWUgPSAiTmFtZUVzcCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUxOC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUxOC5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MTguQWRvcm5lZSA9IHY2ODM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUxOC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTUyNCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjE1MTgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MjQuRm9udCA9ICJDb2RlIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTI0LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUyNC5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUyNC5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MjQuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTI0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MjQuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTI0LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NjgzWydOYW1lRXNwJ10uVGV4dExhYmVsLlRleHQgPSB2NjgzLk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjY4My5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBNIiA7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHY2ODM6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjY4MzpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCiAgICBsb2NhbCB2NTAxID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVRQS2l0c3VuZSIsIHsKICAgICAgICBUaXRsZSA9ICJGbHkgdG8gS2l0c3VuZSBJc2xhbmQiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MDE6T25DaGFuZ2VkKGZ1bmN0aW9uKHY1ODApCiAgICAgICAgX0cuVHdlZW5Ub0tpdHN1bmUgPSB2NTgwOwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVUUEtpdHN1bmU6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHY1ODE7CiAgICAgICAgd2hpbGUgbm90IHY1ODEgZG8KICAgICAgICAgICAgdjU4MSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJLaXRzdW5lSXNsYW5kIik7CiAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICBlbmQKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuVHdlZW5Ub0tpdHN1bmUgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjg0NSA9IHY1ODE6RmluZEZpcnN0Q2hpbGQoIlNocmluZUFjdGl2ZSIpOwogICAgICAgICAgICAgICAgaWYgdjg0NSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMzM1LCB2MTMzNiBpbiBwYWlycyh2ODQ1OkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTMzNjpJc0EoIkJhc2VQYXJ0IikgYW5kIHYxMzM2Lk5hbWU6ZmluZCgiTmVvblNocmluZVBhcnQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEzMzYuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUwMiA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVDb2xsZWN0QXp1cmUiLCB7CiAgICAgICAgVGl0bGUgPSAiQXV0byBDb2xsZWN0IEF6dXJlIEVtYmVyIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTAyOk9uQ2hhbmdlZChmdW5jdGlvbih2NTgyKQogICAgICAgIF9HLkNvbGxlY3RBenVyZSA9IHY1ODI7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUNvbGxlY3RBenVyZTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkNvbGxlY3RBenVyZSB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpGaW5kRmlyc3RDaGlsZCgiQXR0YWNoZWRBenVyZUVtYmVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOldhaXRGb3JDaGlsZCgiRW1iZXJUZW1wbGF0ZSIpOkZpbmRGaXJzdENoaWxkKCJQYXJ0IikuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kCnYxNi5TZWE6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkF1dG8gVHJhZGUgQXp1cmUgRW1iZXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpXYWl0Rm9yQ2hpbGQoIk1vZHVsZXMiKTpXYWl0Rm9yQ2hpbGQoIk5ldCIpOldhaXRGb3JDaGlsZCgiUkYvS2l0c3VuZVN0YXR1ZVByYXkiKTpJbnZva2VTZXJ2ZXIoKTsKICAgIGVuZAp9KTsKaWYgU2VhMyB0aGVuCiAgICBsb2NhbCB2NTAzID0gdjE2LlNlYTpBZGRTZWN0aW9uKCJTZWEiKTsKICAgIGxvY2FsIHY1MDQgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTsKICAgIGxvY2FsIHY1MDUgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKTsKICAgIGxvY2FsIHY1MDYgPSBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTsKICAgIGxvY2FsIHY1MDcgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOwogICAgbG9jYWwgdjUwOCA9IDM1MDsKICAgIGxvY2FsIHY1MDkgPSB2MTYuU2VhOkFkZFNsaWRlcigiU2xpZGVyU3BlZWRCb2F0IiwgewogICAgICAgIFRpdGxlID0gIkJvYXQgU3BlZWQiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IHY1MDgsCiAgICAgICAgTWluID0gMCwKICAgICAgICBNYXggPSAzNTAsCiAgICAgICAgUm91bmRpbmcgPSAxLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24odjU4MykKICAgICAgICAgICAgdjUwOCA9IHY1ODM7CiAgICAgICAgZW5kCiAgICB9KTsKICAgIHY1MDk6U2V0VmFsdWUodjUwOCk7CiAgICBsb2NhbCB2NTEwID0gdjE2LlNlYTpBZGRUb2dnbGUoIkF1dG9GaW5kUHJlaGlzdG9yaWMiLCB7CiAgICAgICAgVGl0bGUgPSAiQXV0byBGaW5kIFByZWhpc3RvcmljIElzbGFuZCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjE3LkF1dG9GaW5kUHJlaGlzdG9yaWM6U2V0VmFsdWUoZmFsc2UpOwogICAgdjUxMDpPbkNoYW5nZWQoZnVuY3Rpb24odjU4NCkKICAgICAgICBfRy5BdXRvRmluZFByZWhpc3RvcmljID0gdjU4NDsKICAgIGVuZCk7CiAgICBsb2NhbCB2NTExID0ge307CiAgICBsb2NhbCB2NTEyID0gZmFsc2U7CiAgICBsb2NhbCB2NTEzID0gZmFsc2U7CiAgICB2NTA1LlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgbm90IF9HLkF1dG9GaW5kUHJlaGlzdG9yaWMgdGhlbgogICAgICAgICAgICB2NTEzID0gZmFsc2U7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NTg1ID0gdjUwNC5Mb2NhbFBsYXllcjsKICAgICAgICBsb2NhbCB2NTg2ID0gdjU4NS5DaGFyYWN0ZXI7CiAgICAgICAgaWYgKG5vdCB2NTg2IG9yIG5vdCB2NTg2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpKSB0aGVuCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCBmdW5jdGlvbiB2NTg3KCkKICAgICAgICAgICAgaWYgdjUxMiB0aGVuCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB2NTEyID0gdHJ1ZTsKICAgICAgICAgICAgZm9yIHY3NjksIHY3NzAgaW4gcGFpcnModjUxMSkgZG8KICAgICAgICAgICAgICAgIGlmICh2NzcwIGFuZCB2NzcwLlBhcmVudCBhbmQgKHY3NzAuTmFtZSA9PSAiVmVoaWNsZVNlYXQiKSBhbmQgbm90IHY3NzAuT2NjdXBhbnQpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbjIodjc3MC5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB2NTEyID0gZmFsc2U7CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjU4OCA9IHY1ODYuSHVtYW5vaWQ7CiAgICAgICAgbG9jYWwgdjU4OSA9IGZhbHNlOwogICAgICAgIGxvY2FsIHY1OTAgPSBuaWw7CiAgICAgICAgZm9yIHY2ODQsIHY2ODUgaW4gcGFpcnModjUwNy5Cb2F0czpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBsb2NhbCB2Njg2ID0gdjY4NTpGaW5kRmlyc3RDaGlsZCgiVmVoaWNsZVNlYXQiKTsKICAgICAgICAgICAgaWYgKHY2ODYgYW5kICh2Njg2Lk9jY3VwYW50ID09IHY1ODgpKSB0aGVuCiAgICAgICAgICAgICAgICB2NTg5ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHY1OTAgPSB2Njg2OwogICAgICAgICAgICAgICAgdjUxMVt2Njg1Lk5hbWVdID0gdjY4NjsKICAgICAgICAgICAgZWxzZWlmICh2Njg2IGFuZCAodjY4Ni5PY2N1cGFudCA9PSBuaWwpKSB0aGVuCiAgICAgICAgICAgICAgICB2NTg3KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGlmIG5vdCB2NTg5IHRoZW4KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgICAgIHY1OTAuTWF4U3BlZWQgPSB2NTA4OwogICAgICAgIHY1OTAuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhWZWN0b3IzLm5ldyh2NTkwLlBvc2l0aW9uLlgsIHY1OTAuUG9zaXRpb24uWSwgdjU5MC5Qb3NpdGlvbi5aKSkgKiB2NTkwLkNGcmFtZS5Sb3RhdGlvbiA7CiAgICAgICAgdjUwNjpTZW5kS2V5RXZlbnQodHJ1ZSwgIlciLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgZm9yIHY2ODcsIHY2ODggaW4gcGFpcnModjUwNy5Cb2F0czpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiB2Njg4OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICB2Njg4LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgZm9yIHY2ODksIHY2OTAgaW4gcGFpcnModjU4NjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiB2NjkwOklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICB2NjkwLkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjU5MyA9IHsKICAgICAgICAgICAgIlNoaXB3cmVja0lzbGFuZCIsCiAgICAgICAgICAgICJTYW5kSXNsYW5kIiwKICAgICAgICAgICAgIlRyZWVJc2xhbmQiLAogICAgICAgICAgICAiVGlueUlzbGFuZCIsCiAgICAgICAgICAgICJNeXN0aWNJc2xhbmQiLAogICAgICAgICAgICAiS2l0c3VuZUlzbGFuZCIsCiAgICAgICAgICAgICJGcm96ZW5EaW1lbnNpb24iCiAgICAgICAgfTsKICAgICAgICBmb3IgdjY5MSwgdjY5MiBpbiBpcGFpcnModjU5MykgZG8KICAgICAgICAgICAgbG9jYWwgdjY5MyA9IHY1MDcuTWFwOkZpbmRGaXJzdENoaWxkKHY2OTIpOwogICAgICAgICAgICBpZiAodjY5MyBhbmQgdjY5MzpJc0EoIk1vZGVsIikpIHRoZW4KICAgICAgICAgICAgICAgIHY2OTM6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NTk0ID0gdjUwNy5NYXA6RmluZEZpcnN0Q2hpbGQoIlByZWhpc3RvcmljSXNsYW5kIik7CiAgICAgICAgaWYgdjU5NCB0aGVuCiAgICAgICAgICAgIHY1MDY6U2VuZEtleUV2ZW50KGZhbHNlLCAiVyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgX0cuQXV0b0ZpbmRQcmVoaXN0b3JpYyA9IGZhbHNlOwogICAgICAgICAgICBpZiBub3QgdjUxMyB0aGVuCiAgICAgICAgICAgICAgICB2MTQ6Tm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICBUaXRsZSA9ICJCYW5hbmEgQ2F0IEh1YiIsCiAgICAgICAgICAgICAgICAgICAgQ29udGVudCA9ICLEkOG6o28gRHVuZyBOaGFtIFTDrG0gVGjhuqV5IiwKICAgICAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDEwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHY1MTMgPSB0cnVlOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MTQgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiQXV0b0ZpbmRNaXJhZ2UiLCB7CiAgICAgICAgVGl0bGUgPSAiQXV0byBGaW5kIE1pcmFnZSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjE3LkF1dG9GaW5kTWlyYWdlOlNldFZhbHVlKGZhbHNlKTsKICAgIHY1MTQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHY1OTUpCiAgICAgICAgX0cuQXV0b0ZpbmRNaXJhZ2UgPSB2NTk1OwogICAgZW5kKTsKICAgIGxvY2FsIHY1MTEgPSB7fTsKICAgIGxvY2FsIHY1MTIgPSBmYWxzZTsKICAgIGxvY2FsIHY1MTMgPSBmYWxzZTsKICAgIHY1MDUuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpZiBub3QgX0cuQXV0b0ZpbmRNaXJhZ2UgdGhlbgogICAgICAgICAgICB2NTEzID0gZmFsc2U7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NTk2ID0gdjUwNC5Mb2NhbFBsYXllcjsKICAgICAgICBsb2NhbCB2NTk3ID0gdjU5Ni5DaGFyYWN0ZXI7CiAgICAgICAgaWYgKG5vdCB2NTk3IG9yIG5vdCB2NTk3OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpKSB0aGVuCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCBmdW5jdGlvbiB2NTk4KCkKICAgICAgICAgICAgaWYgdjUxMiB0aGVuCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB2NTEyID0gdHJ1ZTsKICAgICAgICAgICAgZm9yIHY3NzEsIHY3NzIgaW4gcGFpcnModjUxMSkgZG8KICAgICAgICAgICAgICAgIGlmICh2NzcyIGFuZCB2NzcyLlBhcmVudCBhbmQgKHY3NzIuTmFtZSA9PSAiVmVoaWNsZVNlYXQiKSBhbmQgbm90IHY3NzIuT2NjdXBhbnQpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbjIodjc3Mi5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB2NTEyID0gZmFsc2U7CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjU5OSA9IHY1OTcuSHVtYW5vaWQ7CiAgICAgICAgbG9jYWwgdjYwMCA9IGZhbHNlOwogICAgICAgIGxvY2FsIHY2MDEgPSBuaWw7CiAgICAgICAgZm9yIHY2OTQsIHY2OTUgaW4gcGFpcnModjUwNy5Cb2F0czpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBsb2NhbCB2Njk2ID0gdjY5NTpGaW5kRmlyc3RDaGlsZCgiVmVoaWNsZVNlYXQiKTsKICAgICAgICAgICAgaWYgKHY2OTYgYW5kICh2Njk2Lk9jY3VwYW50ID09IHY1OTkpKSB0aGVuCiAgICAgICAgICAgICAgICB2NjAwID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHY2MDEgPSB2Njk2OwogICAgICAgICAgICAgICAgdjUxMVt2Njk1Lk5hbWVdID0gdjY5NjsKICAgICAgICAgICAgZWxzZWlmICh2Njk2IGFuZCAodjY5Ni5PY2N1cGFudCA9PSBuaWwpKSB0aGVuCiAgICAgICAgICAgICAgICB2NTk4KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGlmIG5vdCB2NjAwIHRoZW4KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgICAgIHY2MDEuTWF4U3BlZWQgPSB2NTA4OwogICAgICAgIHY2MDEuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhWZWN0b3IzLm5ldyh2NjAxLlBvc2l0aW9uLlgsIHY2MDEuUG9zaXRpb24uWSwgdjYwMS5Qb3NpdGlvbi5aKSkgKiB2NjAxLkNGcmFtZS5Sb3RhdGlvbiA7CiAgICAgICAgdjUwNjpTZW5kS2V5RXZlbnQodHJ1ZSwgIlciLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgZm9yIHY2OTcsIHY2OTggaW4gcGFpcnModjUwNy5Cb2F0czpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiB2Njk4OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICB2Njk4LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgZm9yIHY2OTksIHY3MDAgaW4gcGFpcnModjU5NzpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiB2NzAwOklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICB2NzAwLkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYwNCA9IHsKICAgICAgICAgICAgIlNoaXB3cmVja0lzbGFuZCIsCiAgICAgICAgICAgICJTYW5kSXNsYW5kIiwKICAgICAgICAgICAgIlRyZWVJc2xhbmQiLAogICAgICAgICAgICAiVGlueUlzbGFuZCIsCiAgICAgICAgICAgICJQcmVoaXN0b3JpY0lzbGFuZCIsCiAgICAgICAgICAgICJLaXRzdW5lSXNsYW5kIiwKICAgICAgICAgICAgIkZyb3plbkRpbWVuc2lvbiIKICAgICAgICB9OwogICAgICAgIGZvciB2NzAxLCB2NzAyIGluIGlwYWlycyh2NjA0KSBkbwogICAgICAgICAgICBsb2NhbCB2NzAzID0gdjUwNy5NYXA6RmluZEZpcnN0Q2hpbGQodjcwMik7CiAgICAgICAgICAgIGlmICh2NzAzIGFuZCB2NzAzOklzQSgiTW9kZWwiKSkgdGhlbgogICAgICAgICAgICAgICAgdjcwMzpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY2MDUgPSB2NTA3Lk1hcDpGaW5kRmlyc3RDaGlsZCgiTXlzdGljSXNsYW5kIik7CiAgICAgICAgaWYgdjYwNSB0aGVuCiAgICAgICAgICAgIHY1MDY6U2VuZEtleUV2ZW50KGZhbHNlLCAiVyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgX0cuQXV0b0ZpbmRNaXJhZ2UgPSBmYWxzZTsKICAgICAgICAgICAgaWYgbm90IHY1MTMgdGhlbgogICAgICAgICAgICAgICAgdjE0Ok5vdGlmeSh7CiAgICAgICAgICAgICAgICAgICAgVGl0bGUgPSAiQmFuYW5hIENhdCBIdWIiLAogICAgICAgICAgICAgICAgICAgIENvbnRlbnQgPSAixJDhuqNvIELDrSDhuqhuIFTDrG0gVGjhuqV5IiwKICAgICAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDEwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHY1MTMgPSB0cnVlOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MTUgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiQXV0b0ZpbmRGcm96ZW4iLCB7CiAgICAgICAgVGl0bGUgPSAiQXV0byBGaW5kIExldmlhdGhhbiBJc2xhbmQiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHYxNy5BdXRvRmluZEZyb3plbjpTZXRWYWx1ZShmYWxzZSk7CiAgICB2NTE1Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjA2KQogICAgICAgIF9HLkF1dG9GaW5kRnJvemVuID0gdjYwNjsKICAgIGVuZCk7CiAgICBsb2NhbCB2NTExID0ge307CiAgICBsb2NhbCB2NTEyID0gZmFsc2U7CiAgICBsb2NhbCB2NTEzID0gZmFsc2U7CiAgICB2NTA1LlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgbm90IF9HLkF1dG9GaW5kRnJvemVuIHRoZW4KICAgICAgICAgICAgdjUxMyA9IGZhbHNlOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYwNyA9IHY1MDQuTG9jYWxQbGF5ZXI7CiAgICAgICAgbG9jYWwgdjYwOCA9IHY2MDcuQ2hhcmFjdGVyOwogICAgICAgIGlmIChub3QgdjYwOCBvciBub3QgdjYwODpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSkgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgZnVuY3Rpb24gdjYwOSgpCiAgICAgICAgICAgIGlmIHY1MTIgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdjUxMiA9IHRydWU7CiAgICAgICAgICAgIGZvciB2NzczLCB2Nzc0IGluIHBhaXJzKHY1MTEpIGRvCiAgICAgICAgICAgICAgICBpZiAodjc3NCBhbmQgdjc3NC5QYXJlbnQgYW5kICh2Nzc0Lk5hbWUgPT0gIlZlaGljbGVTZWF0IikgYW5kIG5vdCB2Nzc0Lk9jY3VwYW50KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4yKHY3NzQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdjUxMiA9IGZhbHNlOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY2MTAgPSB2NjA4Lkh1bWFub2lkOwogICAgICAgIGxvY2FsIHY2MTEgPSBmYWxzZTsKICAgICAgICBsb2NhbCB2NjEyID0gbmlsOwogICAgICAgIGZvciB2NzA0LCB2NzA1IGluIHBhaXJzKHY1MDcuQm9hdHM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgbG9jYWwgdjcwNiA9IHY3MDU6RmluZEZpcnN0Q2hpbGQoIlZlaGljbGVTZWF0Iik7CiAgICAgICAgICAgIGlmICh2NzA2IGFuZCAodjcwNi5PY2N1cGFudCA9PSB2NjEwKSkgdGhlbgogICAgICAgICAgICAgICAgdjYxMSA9IHRydWU7CiAgICAgICAgICAgICAgICB2NjEyID0gdjcwNjsKICAgICAgICAgICAgICAgIHY1MTFbdjcwNS5OYW1lXSA9IHY3MDY7CiAgICAgICAgICAgIGVsc2VpZiAodjcwNiBhbmQgKHY3MDYuT2NjdXBhbnQgPT0gbmlsKSkgdGhlbgogICAgICAgICAgICAgICAgdjYwOSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBpZiBub3QgdjYxMSB0aGVuCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICB2NjEyLk1heFNwZWVkID0gdjUwODsKICAgICAgICB2NjEyLkNGcmFtZSA9IENGcmFtZS5uZXcoVmVjdG9yMy5uZXcodjYxMi5Qb3NpdGlvbi5YLCB2NjEyLlBvc2l0aW9uLlksIHY2MTIuUG9zaXRpb24uWikpICogdjYxMi5DRnJhbWUuUm90YXRpb24gOwogICAgICAgIHY1MDY6U2VuZEtleUV2ZW50KHRydWUsICJXIiwgZmFsc2UsIGdhbWUpOwogICAgICAgIGZvciB2NzA3LCB2NzA4IGluIHBhaXJzKHY1MDcuQm9hdHM6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgdjcwODpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgdjcwOC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGZvciB2NzA5LCB2NzEwIGluIHBhaXJzKHY2MDg6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgdjcxMDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgdjcxMC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY2MTUgPSB7CiAgICAgICAgICAgICJTaGlwd3JlY2tJc2xhbmQiLAogICAgICAgICAgICAiU2FuZElzbGFuZCIsCiAgICAgICAgICAgICJUcmVlSXNsYW5kIiwKICAgICAgICAgICAgIlRpbnlJc2xhbmQiLAogICAgICAgICAgICAiTXlzdGljSXNsYW5kIiwKICAgICAgICAgICAgIktpdHN1bmVJc2xhbmQiLAogICAgICAgICAgICAiUHJlaGlzdG9yaWNJc2xhbmQiCiAgICAgICAgfTsKICAgICAgICBmb3IgdjcxMSwgdjcxMiBpbiBpcGFpcnModjYxNSkgZG8KICAgICAgICAgICAgbG9jYWwgdjcxMyA9IHY1MDcuTWFwOkZpbmRGaXJzdENoaWxkKHY3MTIpOwogICAgICAgICAgICBpZiAodjcxMyBhbmQgdjcxMzpJc0EoIk1vZGVsIikpIHRoZW4KICAgICAgICAgICAgICAgIHY3MTM6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NjE2ID0gdjUwNy5NYXA6RmluZEZpcnN0Q2hpbGQoIkZyb3plbkRpbWVuc2lvbiIpOwogICAgICAgIGlmIHY2MTYgdGhlbgogICAgICAgICAgICB2NTA2OlNlbmRLZXlFdmVudChmYWxzZSwgIlciLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgIF9HLkF1dG9GaW5kRnJvemVuID0gZmFsc2U7CiAgICAgICAgICAgIGlmIG5vdCB2NTEzIHRoZW4KICAgICAgICAgICAgICAgIHYxNDpOb3RpZnkoewogICAgICAgICAgICAgICAgICAgIFRpdGxlID0gIkJhbmFuYSBDYXQgSHViIiwKICAgICAgICAgICAgICAgICAgICBDb250ZW50ID0gIsSQ4bqjbyBMZXZpYXRoYW4gVMOsbSBUaOG6pXkiLAogICAgICAgICAgICAgICAgICAgIER1cmF0aW9uID0gMTAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdjUxMyA9IHRydWU7CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUxNiA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJBdXRvQ29tZVRpa2kiLCB7CiAgICAgICAgVGl0bGUgPSAiR28gQmFjayBUbyBUaWtpIE91dHBvc3QiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MTY6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MTcpCiAgICAgICAgX0cuQXV0b0NvbWVUaWtpID0gdjYxNzsKICAgIGVuZCk7CiAgICB2NTA1LlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgbm90IF9HLkF1dG9Db21lVGlraSB0aGVuCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NjE4ID0gdjUwNC5Mb2NhbFBsYXllcjsKICAgICAgICBsb2NhbCB2NjE5ID0gdjYxOC5DaGFyYWN0ZXI7CiAgICAgICAgaWYgKG5vdCB2NjE5IG9yIG5vdCB2NjE5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpKSB0aGVuCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NjIwID0gdjYxOS5IdW1hbm9pZDsKICAgICAgICBsb2NhbCB2NjIxID0gbmlsOwogICAgICAgIGZvciB2NzE0LCB2NzE1IGluIHBhaXJzKHY1MDcuQm9hdHM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgbG9jYWwgdjcxNiA9IHY3MTU6RmluZEZpcnN0Q2hpbGQoIlZlaGljbGVTZWF0Iik7CiAgICAgICAgICAgIGlmICh2NzE2IGFuZCAodjcxNi5PY2N1cGFudCA9PSB2NjIwKSkgdGhlbgogICAgICAgICAgICAgICAgdjYyMSA9IHY3MTY7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgaWYgdjYyMSB0aGVuCiAgICAgICAgICAgIHY2MjEuTWF4U3BlZWQgPSB2NTA4OwogICAgICAgICAgICBsb2NhbCB2Nzc2ID0gQ0ZyYW1lLm5ldygtIDE2MjE3Ljc1NjgzNTkzNzUsIDkuMTI2NzYxNDM2NDYyNDAyLCA0NDYuMDY1MzY4NjUyMzQzNzUpOwogICAgICAgICAgICBsb2NhbCB2Nzc3ID0gdjYyMS5Qb3NpdGlvbjsKICAgICAgICAgICAgbG9jYWwgdjc3OCA9IHY3NzYuUG9zaXRpb247CiAgICAgICAgICAgIGxvY2FsIHY3NzkgPSAodjc3OCAtIHY3NzcpLnVuaXQ7CiAgICAgICAgICAgIGxvY2FsIHY3ODAgPSB2Nzc5ICogdjYyMS5NYXhTcGVlZCAqIHY1MDUuUmVuZGVyU3RlcHBlZDpXYWl0KCkgOwogICAgICAgICAgICB2NjIxLkNGcmFtZSA9IHY2MjEuQ0ZyYW1lICsgdjc4MCA7CiAgICAgICAgICAgIGxvY2FsIHY3ODIgPSBDRnJhbWUubmV3KHY3NzcsIHY3NzgpOwogICAgICAgICAgICB2NjIxLkNGcmFtZSA9IENGcmFtZS5uZXcodjYyMS5Qb3NpdGlvbiwgdjc3OCk7CiAgICAgICAgICAgIGlmICgodjYyMS5Qb3NpdGlvbiAtIHY3NzgpLm1hZ25pdHVkZSA8IDEyMCkgdGhlbgogICAgICAgICAgICAgICAgX0cuQXV0b0NvbWVUaWtpID0gZmFsc2U7CiAgICAgICAgICAgICAgICB2NTA2OlNlbmRLZXlFdmVudChmYWxzZSwgIlciLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MTcgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiQXV0b0NvbWVIeWRyYSIsIHsKICAgICAgICBUaXRsZSA9ICJHbyBCYWNrIFRvIEh5ZHJhIElzbGFuZCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUxNzpPbkNoYW5nZWQoZnVuY3Rpb24odjYyMikKICAgICAgICBfRy5BdXRvQ29tZUh5ZHJhID0gdjYyMjsKICAgIGVuZCk7CiAgICB2NTA1LlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgbm90IF9HLkF1dG9Db21lSHlkcmEgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYyMyA9IHY1MDQuTG9jYWxQbGF5ZXI7CiAgICAgICAgbG9jYWwgdjYyNCA9IHY2MjMuQ2hhcmFjdGVyOwogICAgICAgIGlmIChub3QgdjYyNCBvciBub3QgdjYyNDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSkgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYyNSA9IHY2MjQuSHVtYW5vaWQ7CiAgICAgICAgbG9jYWwgdjYyNiA9IG5pbDsKICAgICAgICBmb3IgdjcxNywgdjcxOCBpbiBwYWlycyh2NTA3LkJvYXRzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGxvY2FsIHY3MTkgPSB2NzE4OkZpbmRGaXJzdENoaWxkKCJWZWhpY2xlU2VhdCIpOwogICAgICAgICAgICBpZiAodjcxOSBhbmQgKHY3MTkuT2NjdXBhbnQgPT0gdjYyNSkpIHRoZW4KICAgICAgICAgICAgICAgIHY2MjYgPSB2NzE5OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGlmIHY2MjYgdGhlbgogICAgICAgICAgICB2NjI2Lk1heFNwZWVkID0gdjUwODsKICAgICAgICAgICAgbG9jYWwgdjc4NCA9IENGcmFtZS5uZXcoNTE5My45Mzc1LCAtIDAuMDQ2OTAyODk0OTczNzU0ODgsIDE2MzEuNTc4MzY5MTQwNjI1KTsKICAgICAgICAgICAgbG9jYWwgdjc4NSA9IHY2MjYuUG9zaXRpb247CiAgICAgICAgICAgIGxvY2FsIHY3ODYgPSB2Nzg0LlBvc2l0aW9uOwogICAgICAgICAgICBsb2NhbCB2Nzg3ID0gKHY3ODYgLSB2Nzg1KS51bml0OwogICAgICAgICAgICBsb2NhbCB2Nzg4ID0gdjc4NyAqIHY2MjYuTWF4U3BlZWQgKiB2NTA1LlJlbmRlclN0ZXBwZWQ6V2FpdCgpIDsKICAgICAgICAgICAgdjYyNi5DRnJhbWUgPSB2NjI2LkNGcmFtZSArIHY3ODggOwogICAgICAgICAgICBsb2NhbCB2NzkwID0gQ0ZyYW1lLm5ldyh2Nzg1LCB2Nzg2KTsKICAgICAgICAgICAgdjYyNi5DRnJhbWUgPSBDRnJhbWUubmV3KHY2MjYuUG9zaXRpb24sIHY3ODYpOwogICAgICAgICAgICBpZiAoKHY2MjYuUG9zaXRpb24gLSB2Nzg2KS5tYWduaXR1ZGUgPCAxMjApIHRoZW4KICAgICAgICAgICAgICAgIF9HLkF1dG9Db21lSHlkcmEgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHY1MDY6U2VuZEtleUV2ZW50KGZhbHNlLCAiVyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgdjE2LlNlYTpBZGRCdXR0b24oewogICAgICAgIFRpdGxlID0gIlRyYXZlbCB0byBIdW50aW5nIFpvbmUiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTY5MTcuMTU0Mjk2ODc1LCA3Ljc1NzU5NjAxNTkzMDE3NiwgNTExLjgyMDMxMjUpKTsKICAgICAgICBlbmQKICAgIH0pOwogICAgbG9jYWwgdjUxMSA9IHt9OwogICAgbG9jYWwgdjUxOCA9IHsKICAgICAgICAiQmVhc3QgSHVudGVyIiwKICAgICAgICAiU2xlaWdoIiwKICAgICAgICAiTWlyYWNsZSIsCiAgICAgICAgIlRoZSBTZW50aW5lbCIsCiAgICAgICAgIkd1YXJkaWFuIiwKICAgICAgICAiTGFudGVybiIsCiAgICAgICAgIkRpbmdoeSIsCiAgICAgICAgIlBpcmF0ZVNsb29wIiwKICAgICAgICAiUGlyYXRlQnJpZ2FkZSIsCiAgICAgICAgIlBpcmF0ZUdyYW5kQnJpZ2FkZSIsCiAgICAgICAgIk1hcmluZUdyYW5kQnJpZ2FkZSIsCiAgICAgICAgIk1hcmluZUJyaWdhZGUiLAogICAgICAgICJNYXJpbmVTbG9vcCIKICAgIH07CiAgICBsb2NhbCB2NTE5ID0gdjE2LlNlYTpBZGREcm9wZG93bigiRHJvcGRvd25Cb2F0IiwgewogICAgICAgIFRpdGxlID0gIlNlbGVjdCBCb2F0IiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIFZhbHVlcyA9IHY1MTgsCiAgICAgICAgTXVsdGkgPSBmYWxzZSwKICAgICAgICBEZWZhdWx0ID0gMQogICAgfSk7CiAgICB2NTE5OlNldFZhbHVlKHNlbGVjdGVkQm9hdCk7CiAgICB2NTE5Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjI3KQogICAgICAgIHNlbGVjdGVkQm9hdCA9IHY2Mjc7CiAgICBlbmQpOwogICAgbG9jYWwgZnVuY3Rpb24gdjUyMCh2NjI4KQogICAgICAgIGxvY2FsIHY2MjkgPSB7CiAgICAgICAgICAgIFsxXSA9ICJCdXlCb2F0IiwKICAgICAgICAgICAgWzJdID0gdjYyOAogICAgICAgIH07CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjYyOSkpOwogICAgICAgIHRhc2suZGVsYXkoMiwgZnVuY3Rpb24oKQogICAgICAgICAgICBmb3Igdjc5MSwgdjc5MiBpbiBwYWlycyh2NTA3LkJvYXRzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICBpZiAodjc5MjpJc0EoIk1vZGVsIikgYW5kICh2NzkyLk5hbWUgPT0gdjYyOCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2ODk2ID0gdjc5MjpGaW5kRmlyc3RDaGlsZCgiVmVoaWNsZVNlYXQiKTsKICAgICAgICAgICAgICAgICAgICBpZiAodjg5NiBhbmQgbm90IHY4OTYuT2NjdXBhbnQpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjUxMVt2NjI4XSA9IHY4OTY7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAogICAgbG9jYWwgZnVuY3Rpb24gdjUyMSgpCiAgICAgICAgZm9yIHY3MjAsIHY3MjEgaW4gcGFpcnModjUxMSkgZG8KICAgICAgICAgICAgaWYgKHY3MjEgYW5kIHY3MjEuUGFyZW50IGFuZCAodjcyMS5OYW1lID09ICJWZWhpY2xlU2VhdCIpIGFuZCBub3QgdjcyMS5PY2N1cGFudCkgdGhlbgogICAgICAgICAgICAgICAgVHdlZW4yKHY3MjEuQ0ZyYW1lKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgZm9yIHY3MjIsIHY3MjMgaW4gcGFpcnModjUxMSkgZG8KICAgICAgICAgICAgaWYgKHY3MjMgYW5kIHY3MjMuUGFyZW50IGFuZCAodjcyMy5OYW1lID09ICJWZWhpY2xlU2VhdCIpIGFuZCBub3QgdjcyMy5PY2N1cGFudCkgdGhlbgogICAgICAgICAgICAgICAgdjUxMVt2NzIyXSA9IHY3MjM7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIHYxNi5TZWE6QWRkQnV0dG9uKHsKICAgICAgICBUaXRsZSA9ICJCdXkgQm9hZCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgdjUyMChzZWxlY3RlZEJvYXQpOwogICAgICAgIGVuZAogICAgfSk7CiAgICB2MTYuU2VhOkFkZEJ1dHRvbih7CiAgICAgICAgVGl0bGUgPSAiRmx5IFRvIE15IEJvYXQiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIHY1MjEoKTsKICAgICAgICBlbmQKICAgIH0pOwogICAgbG9jYWwgdjUyMiA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVUZXJyb3JzaGFyayIsIHsKICAgICAgICBUaXRsZSA9ICJBdHRhY2sgVGVycm9yc2hhcmsiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MjI6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MzApCiAgICAgICAgX0cuQXV0b1RlcnJvcnNoYXJrID0gdjYzMDsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlVGVycm9yc2hhcms6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvVGVycm9yc2hhcmsgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiVGVycm9yc2hhcmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ0NCwgdjE0NDUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NDUuTmFtZSA9PSAiVGVycm9yc2hhcmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDQ1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTQ0NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE0NDUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0NS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQ0NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvVGVycm9yc2hhcmsgb3Igbm90IHYxNDQ1LlBhcmVudCBvciAodjE0NDUuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGVycm9yc2hhcmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGVycm9yc2hhcmsiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTIzID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVBpcmFuaGEiLCB7CiAgICAgICAgVGl0bGUgPSAiQXR0YWNrIFBpcmFuaGEiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MjM6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MzEpCiAgICAgICAgX0cuZmFybXBpcmFueWEgPSB2NjMxOwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVQaXJhbmhhOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuZmFybXBpcmFueWEgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiUGlyYW5oYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDQ2LCB2MTQ0NyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ0Ny5OYW1lID09ICJQaXJhbmhhIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ0NzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE0NDc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxNDQ3Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQ3Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDcuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQ3Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NDcuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuZmFybXBpcmFueWEgb3Igbm90IHYxNDQ3LlBhcmVudCBvciAodjE0NDcuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiUGlyYW5oYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJQaXJhbmhhIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUyNCA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVTaGFyayIsIHsKICAgICAgICBUaXRsZSA9ICJBdHRhY2sgU2hhcmsiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MjQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MzIpCiAgICAgICAgX0cuQXV0b1NoYXJrID0gdjYzMjsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlU2hhcms6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvU2hhcmsgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU2hhcmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ0OCwgdjE0NDkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NDkuTmFtZSA9PSAiU2hhcmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDQ5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTQ0OTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE0NDkuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDkuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0OS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDkuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQ0OS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLlNpdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b1NoYXJrIG9yIG5vdCB2MTQ0OS5QYXJlbnQgb3IgKHYxNDQ5Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5Cb2F0cy5QaXJhdGVHcmFuZEJyaWdhZGUuVmVoaWNsZVNlYXQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAxLCAwKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGVycm9yc2hhcmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlRlcnJvcnNoYXJrIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTI1ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZUZpc2hDcmV3IiwgewogICAgICAgIFRpdGxlID0gIkF0dGFjayBGaXNoIENyZXciLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MjU6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MzMpCiAgICAgICAgX0cuQXV0b0Zpc2hDcmV3ID0gdjYzMzsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlRmlzaENyZXc6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvRmlzaENyZXcgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRmlzaCBDcmV3IE1lbWJlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDUwLCB2MTQ1MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ1MS5OYW1lID09ICJGaXNoIENyZXcgTWVtYmVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ1MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE0NTE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxNDUxLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDUxLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NTEuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDUxLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NTEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5TaXQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9GaXNoQ3JldyBvciBub3QgdjE0NTEuUGFyZW50IG9yICh2MTQ1MS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuQm9hdHMuUGlyYXRlR3JhbmRCcmlnYWRlLlZlaGljbGVTZWF0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMSwgMCkpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkZpc2ggQ3JldyBNZW1iZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkZpc2ggQ3JldyBNZW1iZXIiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MjYgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlU2hpcCIsIHsKICAgICAgICBUaXRsZSA9ICJBdHRhY2sgU2hpcCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUyNjpPbkNoYW5nZWQoZnVuY3Rpb24odjYzNCkKICAgICAgICBfRy5TaGlwID0gdjYzNDsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlU2hpcDpTZXRWYWx1ZShmYWxzZSk7CiAgICBmdW5jdGlvbiBDaGVja1BpcmF0ZUJvYXQoKQogICAgICAgIGxvY2FsIHY2MzUgPSB7CiAgICAgICAgICAgICJQaXJhdGVHcmFuZEJyaWdhZGUiLAogICAgICAgICAgICAiUGlyYXRlQnJpZ2FkZSIKICAgICAgICB9OwogICAgICAgIGZvciB2NzI0LCB2NzI1IGluIG5leHQsIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpIGRvCiAgICAgICAgICAgIGlmICh0YWJsZS5maW5kKHY2MzUsIHY3MjUuTmFtZSkgYW5kIHY3MjU6RmluZEZpcnN0Q2hpbGQoIkhlYWx0aCIpIGFuZCAodjcyNS5IZWFsdGguVmFsdWUgPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuIHY3MjU7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLlNoaXAgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIENoZWNrUGlyYXRlQm9hdCgpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDMyLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAzMiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTMzOCA9IENoZWNrUGlyYXRlQm9hdCgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYXduKFR3ZWVuKHYxMzM4LkVuZ2luZS5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIC0gMjAsIDApKSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBaW1Cb3RTa2lsbFBvc2l0aW9uID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgLSA1LCAwKSA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTa2lsbGFpbWJvdCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvU2tpbGwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IHYxMzM4IG9yIG5vdCB2MTMzOC5QYXJlbnQgb3IgKHYxMzM4LkhlYWx0aC5WYWx1ZSA8PSAwKSBvciBub3QgQ2hlY2tQaXJhdGVCb2F0KCkKICAgICAgICAgICAgICAgICAgICAgICAgU2tpbGxhaW1ib3QgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvU2tpbGwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MjcgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlR2hvc3RTaGlwIiwgewogICAgICAgIFRpdGxlID0gIkF0dGFjayBHaG9zdCBTaGlwIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTI3Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjM2KQogICAgICAgIF9HLkdob3N0U2hpcCA9IHY2MzY7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUdob3N0U2hpcDpTZXRWYWx1ZShmYWxzZSk7CiAgICBmdW5jdGlvbiBDaGVja1BpcmF0ZUJvYXQoKQogICAgICAgIGxvY2FsIHY2MzcgPSB7CiAgICAgICAgICAgICJGaXNoQm9hdCIKICAgICAgICB9OwogICAgICAgIGZvciB2NzI2LCB2NzI3IGluIG5leHQsIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpIGRvCiAgICAgICAgICAgIGlmICh0YWJsZS5maW5kKHY2MzcsIHY3MjcuTmFtZSkgYW5kIHY3Mjc6RmluZEZpcnN0Q2hpbGQoIkhlYWx0aCIpIGFuZCAodjcyNy5IZWFsdGguVmFsdWUgPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuIHY3Mjc7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIF9HLmJqaXJGaXNoQm9hdCB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgQ2hlY2tQaXJhdGVCb2F0KCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMzIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDMyLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzM5ID0gQ2hlY2tQaXJhdGVCb2F0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhd24oVHdlZW4odjEzMzkuRW5naW5lLkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgLSAyMCwgMCksIDEpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9Ta2lsbCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTa2lsbGFpbWJvdCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBaW1Cb3RTa2lsbFBvc2l0aW9uID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgLSA1LCAwKSA7CiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIHYxMzM5LlBhcmVudCBvciAodjEzMzkuSGVhbHRoLlZhbHVlIDw9IDApIG9yIG5vdCBDaGVja1BpcmF0ZUJvYXQoKQogICAgICAgICAgICAgICAgICAgICAgICBBdXRvU2tpbGwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgU2tpbGxhaW1ib3QgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuYmppckZpc2hCb2F0IHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBDaGVja1BpcmF0ZUJvYXQoKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbFVzZXIiKTpDYXB0dXJlQ29udHJvbGxlcigpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxVc2VyIik6QnV0dG9uMURvd24oVmVjdG9yMi5uZXcoMTI4MCwgNjcyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ1MiwgdjE0NTMgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2MTQ1MzpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDUzLlRvb2xUaXAgPT0gIk1lbGVlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbCh2MTQ1Myk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJDIiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ1NCwgdjE0NTUgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2MTQ1NTpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDU1LlRvb2xUaXAgPT0gIkJsb3ggRnJ1aXQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6RXF1aXBUb29sKHYxNDU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiViIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJWIiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDU2LCB2MTQ1NyBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYxNDU3OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NTcuVG9vbFRpcCA9PSAiU3dvcmQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6RXF1aXBUb29sKHYxNDU3KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ1OCwgdjE0NTkgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2MTQ1OTpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDU5LlRvb2xUaXAgPT0gIkd1biIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodjE0NTkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTI4ID0gdjE2Lk1haW46QWRkU2VjdGlvbigiRWxpdGUiKTsKICAgIGxvY2FsIHY1MjkgPSB2MTYuTWFpbjpBZGRQYXJhZ3JhcGgoewogICAgICAgIFRpdGxlID0gIkVsaXRlIFN0YXR1cyIsCiAgICAgICAgQ29udGVudCA9ICIiCiAgICB9KTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJVcmJhbiIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJVcmJhbiIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjUyOTpTZXREZXNjKCJFbGl0ZSBCb3NzOiDinIXvuI8gfCBLaWxsZWQ6ICAiIC4uIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkVsaXRlSHVudGVyIiwgIlByb2dyZXNzIikpOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY1Mjk6U2V0RGVzYygiRWxpdGUgQm9zczog4p2M77iPIHwgS2lsbGVkOiAiIC4uIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkVsaXRlSHVudGVyIiwgIlByb2dyZXNzIikpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUzMCA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlRWxpdGUiLCB7CiAgICAgICAgVGl0bGUgPSAiQXV0byBFbGl0ZSBIdW50ZXIiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MzA6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MzgpCiAgICAgICAgX0cuQXV0b0VsaXRlID0gdjYzODsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlRWxpdGU6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9FbGl0ZSB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRWxpdGVIdW50ZXIiKTsKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSB0cnVlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiRGlhYmxvIikgb3Igc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIkRlYW5kcmUiKSBvciBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiVXJiYW4iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJVcmJhbiIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNjYzLCB2MTY2NCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNjY0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTY2NDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE2NjQuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE2NjQuTmFtZSA9PSAiRGlhYmxvIikgb3IgKHYxNjY0Lk5hbWUgPT0gIkRlYW5kcmUiKSBvciAodjE2NjQuTmFtZSA9PSAiVXJiYW4iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbjIodjE2NjQuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2NC5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2NC5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjQuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9FbGl0ZSA9PSBmYWxzZSkgb3IgKHYxNjY0Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE2NjQuUGFyZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEaWFibG8iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4yKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkRlYW5kcmUiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlVyYmFuIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJFbGl0ZUh1bnRlciIpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKaWYgU2VhMyB0aGVuCiAgICBsb2NhbCB2NTMxID0gdjE2LlNlYTpBZGRTZWN0aW9uKCJNaXJhZ2UgSXNsYW5kIik7CiAgICBsb2NhbCB2NTMyID0gdjE2LlNlYTpBZGRQYXJhZ3JhcGgoewogICAgICAgIFRpdGxlID0gIlN0YXR1cyIsCiAgICAgICAgQ29udGVudCA9ICIiCiAgICB9KTsKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxvY2FsIHY3OTMgPSBnYW1lOkdldFNlcnZpY2UoIkxpZ2h0aW5nIikuU2t5Lk1vb25UZXh0dXJlSWQ7CiAgICAgICAgICAgICAgICBpZiAodjc5MyA9PSAiaHR0cDovL3d3dy5yb2Jsb3guY29tL2Fzc2V0Lz9pZD05NzA5MTQ5NDMxIikgdGhlbgogICAgICAgICAgICAgICAgICAgIEZ1bGxNb29uU3RhdHVzID0gIjEwMCUiOwogICAgICAgICAgICAgICAgZWxzZWlmICh2NzkzID09ICJodHRwOi8vd3d3LnJvYmxveC5jb20vYXNzZXQvP2lkPTk3MDkxNDkwNTIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgRnVsbE1vb25TdGF0dXMgPSAiNzUlIjsKICAgICAgICAgICAgICAgIGVsc2VpZiAodjc5MyA9PSAiaHR0cDovL3d3dy5yb2Jsb3guY29tL2Fzc2V0Lz9pZD05NzA5MTQzNzMzIikgdGhlbgogICAgICAgICAgICAgICAgICAgIEZ1bGxNb29uU3RhdHVzID0gIjUwJSI7CiAgICAgICAgICAgICAgICBlbHNlaWYgKHY3OTMgPT0gImh0dHA6Ly93d3cucm9ibG94LmNvbS9hc3NldC8/aWQ9OTcwOTE1MDQwMSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBGdWxsTW9vblN0YXR1cyA9ICIyNSUiOwogICAgICAgICAgICAgICAgZWxzZWlmICh2NzkzID09ICJodHRwOi8vd3d3LnJvYmxveC5jb20vYXNzZXQvP2lkPTk3MDkxNDk2ODAiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgRnVsbE1vb25TdGF0dXMgPSAiMTUlIjsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBGdWxsTW9vblN0YXR1cyA9ICIwJSI7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lLldvcmtzcGFjZS5NYXA6RmluZEZpcnN0Q2hpbGQoIk15c3RpY0lzbGFuZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBNaXJhZ2VTdGF0dXMgPSAi4pyF77iPIjsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBNaXJhZ2VTdGF0dXMgPSAi4p2M77iPIjsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICAgICAgdjUzMjpTZXREZXNjKCJNaXJhZ2U6ICIgLi4gTWlyYWdlU3RhdHVzIC4uICIgfCBGdWxsIE1vb246ICIgLi4gRnVsbE1vb25TdGF0dXMpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kKTsKICAgIHYxNi5TZWE6QWRkQnV0dG9uKHsKICAgICAgICBUaXRsZSA9ICJGbHkgVG8gVGhlIEhpZ2ggTW91bnRhaW4iLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIFR3ZWVuVG9IaWdoZXN0UG9pbnQoKTsKICAgICAgICBlbmQKICAgIH0pOwogICAgZnVuY3Rpb24gVHdlZW5Ub0hpZ2hlc3RQb2ludCgpCiAgICAgICAgbG9jYWwgdjYzOSA9IGdldEhpZ2hlc3RQb2ludCgpOwogICAgICAgIGlmIHY2MzkgdGhlbgogICAgICAgICAgICBUd2VlbjIodjYzOS5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDIxMS44OCwgMCkpOwogICAgICAgIGVuZAogICAgZW5kCiAgICBmdW5jdGlvbiBnZXRIaWdoZXN0UG9pbnQoKQogICAgICAgIGlmIG5vdCBnYW1lLldvcmtzcGFjZS5NYXA6RmluZEZpcnN0Q2hpbGQoIk15c3RpY0lzbGFuZCIpIHRoZW4KICAgICAgICAgICAgcmV0dXJuIG5pbDsKICAgICAgICBlbmQKICAgICAgICBmb3IgdjcyOCwgdjcyOSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5NeXN0aWNJc2xhbmQ6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgdjcyOTpJc0EoIk1lc2hQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY3MjkuTWVzaElkID09ICJyYnhhc3NldGlkOi8vODMxOTAyNzY5NTE5MTQiKSB0aGVuIC0tdGhheSBpZCDhuqNuaCB2w6BvCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHY3Mjk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCmxvY2FsIHY2NiA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVUcEFkdmFuY2VkIiwgewogICAgVGl0bGUgPSAiRmx5IFRvIEFkdmFuY2VkIEZydWl0IERlYWxlciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NjY6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNTcpCiAgICBfRy5BdXRvVHBBZHZhbmNlZCA9IHYyNTc7CmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9UcEFkdmFuY2VkIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjczMCA9IGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuTlBDczpGaW5kRmlyc3RDaGlsZCgiQWR2YW5jZWQgRnJ1aXQgRGVhbGVyIik7CiAgICAgICAgICAgIGlmICh2NzMwIGFuZCB2NzMwOklzQSgiTW9kZWwiKSkgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjg1NiA9IHY3MzAuUHJpbWFyeVBhcnQgYW5kIHY3MzAuUHJpbWFyeVBhcnQuUG9zaXRpb24gOwogICAgICAgICAgICAgICAgaWYgdjg1NiB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcodjg1NikpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY2NyA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVUd2VlbkdlYXIiLCB7CiAgICBUaXRsZSA9ICJGbHkgVG8gR2VhciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2Njc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNTgpCiAgICBfRy5Ud2VlblRvR2VhciA9IHYyNTg7CmVuZCk7CnYxNy5Ub2dnbGVUd2VlbkdlYXI6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLlR3ZWVuVG9HZWFyIHRoZW4KICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJNeXN0aWNJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDQwLCB2MTA0MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5NeXN0aWNJc2xhbmQ6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjEwNDE6SXNBKCJNZXNoUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA0MS5NYXRlcmlhbCA9PSBFbnVtLk1hdGVyaWFsLk5lb24pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbjIodjEwNDEuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHY2OCA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVsb2NrbW9vbiIsIHsKICAgIFRpdGxlID0gIkxvb2sgTW9vbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2Njg6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNTkpCiAgICBfRy5BdXRvTG9ja01vb24gPSB2MjU5OwplbmQpOwp2MTcuVG9nZ2xlbG9ja21vb246U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9Mb2NrTW9vbiB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2Nzk0ID0gZ2FtZS5MaWdodGluZzpHZXRNb29uRGlyZWN0aW9uKCk7CiAgICAgICAgICAgICAgICBsb2NhbCB2Nzk1ID0gZ2FtZS5Xb3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUucCArICh2Nzk0ICogMTAwKSA7CiAgICAgICAgICAgICAgICBnYW1lLldvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNGcmFtZSA9IENGcmFtZS5sb29rQXQoZ2FtZS5Xb3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUucCwgdjc5NSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvTG9ja01vb24gdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUU6RmlyZVNlcnZlcigiQWN0aXZhdGVBYmlsaXR5Iik7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjY5ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9TYWJlciIsIHsKICAgIFRpdGxlID0gIkF1dG8gU2FiZXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjY5Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjYwKQogICAgX0cuQXV0b19TYWJlciA9IHYyNjA7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvU2FiZXI6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgIGlmIChfRy5BdXRvX1NhYmVyIGFuZCAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWUgPj0gMjAwKSkgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLkZpbmFsLlBhcnQuVHJhbnNwYXJlbmN5ID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLkRvb3IuVHJhbnNwYXJlbmN5ID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChDRnJhbWUubmV3KC0gMTYxMi41NTg4NCwgMzYuOTc3NDEzMiwgMTQ4LjcxOTU0MywgMC4zNzA5MTI3OSwgMy4wNzE3MTVlLTksIC0gMC45Mjg2Njc3MjQsIDMuOTcwOTk1ZS04LCAxLCAxLjkxNjc5MzVlLTgsIDAuOTI4NjY3NzI0LCAtIDQuMzk4Njk4ZS04LCAwLjM3MDkxMjc5KS5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLlBsYXRlMS5CdXR0b24uQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5KdW5nbGUuUXVlc3RQbGF0ZXMuUGxhdGUyLkJ1dHRvbi5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkp1bmdsZS5RdWVzdFBsYXRlcy5QbGF0ZTMuQnV0dG9uLkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLlBsYXRlNC5CdXR0b24uQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5KdW5nbGUuUXVlc3RQbGF0ZXMuUGxhdGU1LkJ1dHRvbi5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTYxMi41NTg4NCwgMzYuOTc3NDEzMiwgMTQ4LjcxOTU0MywgMC4zNzA5MTI3OSwgMy4wNzE3MTVlLTksIC0gMC45Mjg2Njc3MjQsIDMuOTcwOTk1ZS04LCAxLCAxLjkxNjc5MzVlLTgsIDAuOTI4NjY3NzI0LCAtIDQuMzk4Njk4ZS04LCAwLjM3MDkxMjc5KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuRGVzZXJ0LkJ1cm4uUGFydC5UcmFuc3BhcmVuY3kgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlRvcmNoIikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiVG9yY2giKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJUb3JjaCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygxMTE0LjYxNDc1LCA1LjA0Njc5NzI4LCA0MzUwLjIyODAzLCAtIDAuNjQ4NDY2NTg3LCAtIDEuMjg3OTkwOWUtOSwgMC43NjEyNDMxMDUsIC0gNS43MDY1MjllLTEwLCAxLCAxLjIwNTg0NTRlLTksIC0gMC43NjEyNDMxMDUsIDMuNDc1NDQ4OGUtMTAsIC0gMC42NDg0NjY1ODcpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDE2MTAuMDA3NTcsIDExLjUwNDk4NTgsIDE2NC4wMDE1ODcsIDAuOTg0ODA3NTUxLCAtIDAuMTY3NzIyMjg1LCAtIDAuMDQ0OTgxODE0OSwgMC4xNzM2NDk0MywgMC45NTEyNDQyMzUsIDAuMjU0OTEyMTk4LCAwLjAwMDAzNDIzNzI4LCAtIDAuMjU4ODUwNTE1LCAwLjk2NTkxNzQwOCkpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiU2lja01hbiIpIH49IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsICJHZXRDdXAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woIkN1cCIpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiRmlsbEN1cCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5DdXApOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDApOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwgIlNpY2tNYW4iKTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiUmljaFNvbiIpID09IG5pbCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwgIlJpY2hTb24iKTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiUmljaFNvbiIpID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTW9iIExlYWRlciIpIG9yIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiTW9iIExlYWRlciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMjk2Ny41OTUyMSwgLSA0LjkxMDg5ODIxLCA1MzI4LjcwNzAzLCAwLjM0MjIwODU2NCwgLSAwLjAyMjc4NDkwNTUsIDAuOTM5MzQ3ODA0LCAwLjAyNTE2MDM4MTYsIDAuOTk5NTY5NzE0LCAwLjAxNTA3OTYxNjYsIC0gMC45MzkyODcxMjYsIDAuMDE4NDczOTczNSwgMC4zNDI2MzQ1NTkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTc5OSwgdjE4MDAgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxODAwLk5hbWUgPT0gIk1vYiBMZWFkZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTW9iIExlYWRlciBbTHYuIDEyMF0gW0Jvc3NdIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxODAwOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTgwMDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE4MDAuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDAuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODAwLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODAwLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTgwMC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAodjE4MDAuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCBfRy5BdXRvX1NhYmVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiTW9iIExlYWRlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiTW9iIExlYWRlciIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiUmljaFNvbiIpID09IDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsICJSaWNoU29uIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJSZWxpYyIpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxNDA0LjkxNTA0LCAyOS45NzczMjczLCAzLjgwNTk4MTE2LCAwLjg3NjUxNDQ5NCwgNS42NjkwNjg4ZS05LCAwLjQ4MTM3NTQ1NiwgMi41Mzg1MmUtOCwgMSwgLSA1Ljc5OTk1NmUtOCwgLSAwLjQ4MTM3NTQ1NiwgNi4zMDU3MjY0ZS04LCAwLjg3NjUxNDQ5NCkpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNhYmVyIEV4cGVydCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiU2FiZXIgRXhwZXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NjAsIHYxNDYxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NjE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNDYxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTQ2MS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDYxLk5hbWUgPT0gIlNhYmVyIEV4cGVydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NjEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2MS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjEuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2MS5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2MS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2MS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjE0NjEuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTQ2MS5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKHYxNDYxLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgX0cuQXV0b19TYWJlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NjEuSHVtYW5vaWQuSGVhbHRoIDw9IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsICJQbGFjZVJlbGljIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NzAgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1BvbGVWMSIsIHsKICAgIFRpdGxlID0gIkF1dG8gUG9sZSBWMSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NzA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNjEpCiAgICBfRy5BdXRvX1BvbGVWMSA9IHYyNjE7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvUG9sZVYxOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjcxID0gQ0ZyYW1lLm5ldygtIDc3NDguMDE4NTU0Njg3NSwgNTYwNi44MDYxNTIzNDM3NSwgLSAyMzA1Ljg5ODY4MTY0MDYyNSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fUG9sZVYxIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJUaHVuZGVyIEdvZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwNDIsIHYxMDQzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNDMuTmFtZSA9PSAiVGh1bmRlciBHb2QiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNDM6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMDQzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTA0My5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0My5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDMuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDMuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDQzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX1BvbGVWMSBvciBub3QgdjEwNDMuUGFyZW50IG9yICh2MTA0My5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHY3MS5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMTUwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY3MSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA3NzQ4LjAxODU1NDY4NzUsIDU2MDYuODA2MTUyMzQzNzUsIC0gMjMwNS44OTg2ODE2NDA2MjUpKTsKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGh1bmRlciBHb2QiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJUaHVuZGVyIEdvZCIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjcyID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9TYXciLCB7CiAgICBUaXRsZSA9ICJBdXRvIFNoYXJrIFNhdyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NzI6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNjIpCiAgICBfRy5BdXRvX1NhdyA9IHYyNjI7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvU2F3OlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjcxID0gQ0ZyYW1lLm5ldygtIDY5MC4zMzA4MTA1NDY4OCwgMTUuMDk0MjUxNjMyNjksIDE1ODIuMjM4MDM3MTA5NCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fU2F3IHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJUaGUgU2F3IikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTA0NCwgdjEwNDUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA0NS5OYW1lID09ICJUaGUgU2F3IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDQ1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTA0NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjEwNDUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQ1Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQ1Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTA0NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19TYXcgb3Igbm90IHYxMDQ1LlBhcmVudCBvciAodjEwNDUuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2NzEuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDE1MDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2NzEpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gNjkwLjMzMDgxMDU0Njg4LCAxNS4wOTQyNTE2MzI2OSwgMTU4Mi4yMzgwMzcxMDk0KSk7CiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlRoZSBTYXciKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJUaGUgU2F3IikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NzMgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1dhcmRlbiIsIHsKICAgIFRpdGxlID0gIkF1dG8gV2FyZGVuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY3MzpPbkNoYW5nZWQoZnVuY3Rpb24odjI2MykKICAgIF9HLkF1dG9fV2FyZGVuID0gdjI2MzsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9XYXJkZW46U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2NzQgPSBDRnJhbWUubmV3KDUxODYuMTQ2OTcyNjU2MjUsIDI0Ljg2Njg0MjI2OTg5NzQ2LCA4MzIuMTg4NTM3NTk3NjU2Mik7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fV2FyZGVuIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDaGllZiBXYXJkZW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDQ2LCB2MTA0NyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDQ3Lk5hbWUgPT0gIkNoaWVmIFdhcmRlbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA0NzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjEwNDc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxMDQ3Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQ3Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0Ny5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0Ny5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwNDcuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fV2FyZGVuIG9yIG5vdCB2MTA0Ny5QYXJlbnQgb3IgKHYxMDQ3Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjc0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPCAxNTAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odjc0KTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg1MTg2LjE0Njk3MjY1NjI1LCAyNC44NjY4NDIyNjk4OTc0NiwgODMyLjE4ODUzNzU5NzY1NjIpKTsKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2hpZWYgV2FyZGVuIikgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2hpZWYgV2FyZGVuIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwppZiBTZWEzIHRoZW4KICAgIGxvY2FsIHY1MzMgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlSGFsbG93IiwgewogICAgICAgIFRpdGxlID0gIkhhbGxvdyBTY3l0aGUiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MzM6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2NDApCiAgICAgICAgQXV0b0hhbGxvd1N5Y3RoZSA9IHY2NDA7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUhhbGxvdzpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIEF1dG9IYWxsb3dTeWN0aGUgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU291bCBSZWFwZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ2MiwgdjE0NjMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2MTQ2My5OYW1lLCAiU291bCBSZWFwZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDYzLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQ2My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDYzLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKHYxNDYzLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciAoQXV0b0hhbGxvd1N5Y3RoZSA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJIYWxsb3cgRXNzZW5jZSIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGFsbG93IEVzc2VuY2UiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA4OTMyLjMyMjI2NTYyNSwgMTQ2LjgzMTU0Mjk2ODc1LCA2MDYyLjU1MDc4MTI1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIChDRnJhbWUubmV3KC0gODkzMi4zMjIyNjU2MjUsIDE0Ni44MzE1NDI5Njg3NSwgNjA2Mi41NTA3ODEyNSkuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA4CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJIYWxsb3cgRXNzZW5jZSIpOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlNvdWwgUmVhcGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlNvdWwgUmVhcGVyIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBBdXRvSGFsbG93U3ljdGhlIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4NTcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkJvbmVzIiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiQnV5IiwKICAgICAgICAgICAgICAgICAgICBbM10gPSAxLAogICAgICAgICAgICAgICAgICAgIFs0XSA9IDEKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODU3KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MzQgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlWWFtYSIsIHsKICAgICAgICBUaXRsZSA9ICJZYW1hIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTM0Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjQxKQogICAgICAgIF9HLkF1dG9ZYW1hID0gdjY0MTsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlWWFtYTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9ZYW1hIHRoZW4KICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJFbGl0ZUh1bnRlciIsICJQcm9ncmVzcyIpID49IDMwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuV2F0ZXJmYWxsLlNlYWxlZEthdGFuYS5IYW5kbGUuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgdW50aWwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIllhbWEiKSBvciBub3QgX0cuQXV0b1lhbWEKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTM1ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZVR1c2hpdGEiLCB7CiAgICAgICAgVGl0bGUgPSAiVHVzaGl0YSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUzNTpPbkNoYW5nZWQoZnVuY3Rpb24odjY0MikKICAgICAgICBBdXRvVHVzaGl0YSA9IHY2NDI7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZVR1c2hpdGE6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBBdXRvVHVzaGl0YSB0aGVuCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkxvbmdtYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEzNDAsIHYxMzQxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxMzQxLk5hbWUgPT0gKCJMb25nbWEiIG9yICh2MTM0MS5OYW1lID09ICJMb25nbWEiKSkpIGFuZCAodjEzNDEuSHVtYW5vaWQuSGVhbHRoID4gMCkgYW5kIHYxMzQxOklzQSgiTW9kZWwiKSBhbmQgdjEzNDE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMzQxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoU2VsZWN0V2VhcG9uKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxMzQxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQxLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQxLkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDEuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM0MS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM0MS5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEzNDEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IEF1dG9UdXNoaXRhIG9yIG5vdCB2MTM0MS5QYXJlbnQgb3IgKHYxMzQxLkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTAyMzguODc1OTc2NTYzLCAzODkuNzkxMjkwMjgzMiwgLSA5NTQ5Ljc5Mzk0NTMxMjUpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTM2ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUhvbHkiLCB7CiAgICAgICAgVGl0bGUgPSAiTGlnaHQgVGhlIEhvbHkgVG9yY2giLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MzY6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2NDMpCiAgICAgICAgX0cuQXV0b19Ib2x5X1RvcmNoID0gdjY0MzsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlSG9seTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9fSG9seV9Ub3JjaCB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTA3NTIsIDQxNywgLSA5MzY2KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19Ib2x5X1RvcmNoIG9yICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoLSAxMDc1MiwgNDE3LCAtIDkzNjYpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTE2NzIsIDMzNCwgLSA5NDc0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19Ib2x5X1RvcmNoIG9yICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoLSAxMTY3MiwgMzM0LCAtIDk0NzQpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTIxMzIsIDUyMSwgLSAxMDY1NSkpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fSG9seV9Ub3JjaCBvciAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KC0gMTIxMzIsIDUyMSwgLSAxMDY1NSkpLk1hZ25pdHVkZSA8PSAxMCkKICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMzMzNiwgNDg2LCAtIDY5ODUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX0hvbHlfVG9yY2ggb3IgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygtIDEzMzM2LCA0ODYsIC0gNjk4NSkpLk1hZ25pdHVkZSA8PSAxMCkKICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMzQ4OSwgMzMyLCAtIDc5MjUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX0hvbHlfVG9yY2ggb3IgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygtIDEzNDg5LCAzMzIsIC0gNzkyNSkpLk1hZ25pdHVkZSA8PSAxMCkKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kCmxvY2FsIHY3NSA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvQ2FudmFuZGVyIiwgewogICAgVGl0bGUgPSAiQXV0byBDYW52YW5kZXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjc1Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjY0KQogICAgX0cuQXV0b19DYW52YW5kZXIgPSB2MjY0OwplbmQpOwp2MTcuVG9nZ2xlQXV0b0NhbnZhbmRlcjpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHY3MSA9IENGcmFtZS5uZXcoNTMxMS4wNzQyMTg3NSwgNDI2LjAyNDM4MzU0NDkyMTksIDE2NS4xMjc2MjQ1MTE3MTg3NSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fQ2FudmFuZGVyIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJCZWF1dGlmdWwgUGlyYXRlIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTA0OCwgdjEwNDkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA0OS5OYW1lID09ICJCZWF1dGlmdWwgUGlyYXRlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDQ5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTA0OTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjEwNDkuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDkuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQ5Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQ5Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTA0OS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19DYW52YW5kZXIgb3Igbm90IHYxMDQ5LlBhcmVudCBvciAodjEwNDkuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2NzEuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDE1MDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2NzEpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDUzMTEuMDc0MjE4NzUsIDQyNi4wMjQzODM1NDQ5MjE5LCAxNjUuMTI3NjI0NTExNzE4NzUpKTsKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQmVhdXRpZnVsIFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkJlYXV0aWZ1bCBQaXJhdGUiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY3NiA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvTXVza2V0ZWVySGF0IiwgewogICAgVGl0bGUgPSAiQXV0byBNdXNrZXRlZXIgSGF0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY3NjpPbkNoYW5nZWQoZnVuY3Rpb24odjI2NSkKICAgIF9HLkF1dG9fTXVza2V0ZWVySGF0ID0gdjI2NTsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9NdXNrZXRlZXJIYXQ6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgwLjEpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9fTXVza2V0ZWVySGF0IHRoZW4KICAgICAgICAgICAgICAgIGlmICgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZSA+PSAxODAwKSBhbmQgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNpdGl6ZW5RdWVzdFByb2dyZXNzIikuS2lsbGVkQmFuZGl0cyA9PSBmYWxzZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIkZvcmVzdCBQaXJhdGUiKSBhbmQgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIjUwIikgYW5kIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IHRydWUpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRm9yZXN0IFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTU1OSwgdjE1NjAgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNTYwLk5hbWUgPT0gIkZvcmVzdCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1NjAuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE1NjAuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTYwLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQb3NNb24gPSB2MTU2MC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE1NjAuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuQXV0b19NdXNrZXRlZXJIYXQgPT0gZmFsc2UpIG9yIG5vdCB2MTU2MC5QYXJlbnQgb3IgKHYxNTYwLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEzMjA2LjQ1MjE0ODQzOCwgNDI1Ljg5MTk5ODI5MTAyLCAtIDc5NjQuNTUzNzEwOTM3NSkpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMjQ0My44NjcxODc1LCAzMzIuNDAzOTYxMTgxNjQsIC0gNzY3NS40ODkyNTc4MTI1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoVmVjdG9yMy5uZXcoLSAxMjQ0My44NjcxODc1LCAzMzIuNDAzOTYxMTgxNjQsIC0gNzY3NS40ODkyNTc4MTI1KSAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMzApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0YXJ0UXVlc3QiLCAiQ2l0aXplblF1ZXN0IiwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmICgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZSA+PSAxODAwKSBhbmQgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNpdGl6ZW5RdWVzdFByb2dyZXNzIikuS2lsbGVkQm9zcyA9PSBmYWxzZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSBhbmQgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIkNhcHRhaW4gRWxlcGhhbnQiKSBhbmQgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gdHJ1ZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYXB0YWluIEVsZXBoYW50IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNjY1LCB2MTY2NiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE2NjYuTmFtZSA9PSAiQ2FwdGFpbiBFbGVwaGFudCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2xkQ0ZyYW1lRWxlcGhhbnQgPSB2MTY2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY2Ni5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTY2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBPbGRDRnJhbWVFbGVwaGFudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuQXV0b19NdXNrZXRlZXJIYXQgPT0gZmFsc2UpIG9yICh2MTY2Ni5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxNjY2LlBhcmVudCBvciAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTMzNzQuODg5NjQ4NDM4LCA0MjEuMjc3NTI2ODU1NDcsIC0gODIyNS4yMDg5ODQzNzUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTI0NDMuODY3MTg3NSwgMzMyLjQwMzk2MTE4MTY0LCAtIDc2NzUuNDg5MjU3ODEyNSkpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKENGcmFtZS5uZXcoLSAxMjQ0My44NjcxODc1LCAzMzIuNDAzOTYxMTgxNjQsIC0gNzY3NS40ODkyNTc4MTI1KS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2l0aXplblF1ZXN0UHJvZ3Jlc3MiLCAiQ2l0aXplbiIpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWUgPj0gMTgwMCkgYW5kIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDaXRpemVuUXVlc3RQcm9ncmVzcyIsICJDaXRpemVuIikgPT0gMikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTI1MTIuMTM4NjcxODc1LCAzNDAuMzkyNzkxNzQ4MDUsIC0gOTg3Mi44MjAzMTI1KSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2NzcgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b09ic2VydmF0aW9uVjIiLCB7CiAgICBUaXRsZSA9ICJBdXRvIE9ic2VydmF0aW9uIFYyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY3NzpPbkNoYW5nZWQoZnVuY3Rpb24odjI2NikKICAgIF9HLkF1dG9fT2JzZXJ2YXRpb25WMiA9IHYyNjY7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvT2JzZXJ2YXRpb25WMjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b19PYnNlcnZhdGlvblYyIHRoZW4KICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDaXRpemVuUXVlc3RQcm9ncmVzcyIsICJDaXRpemVuIikgPT0gMykgdGhlbgogICAgICAgICAgICAgICAgICAgIF9HLkF1dG9fTXVza2V0ZWVySGF0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCYW5hbmEiKSBhbmQgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkFwcGxlIikgYW5kIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQaW5lYXBwbGUiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMjQ0NC43ODUxNTYyNSwgMzMyLjQwMzk2MTE4MTY0LCAtIDc2NzMuMTgwNjY0MDYyNSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19PYnNlcnZhdGlvblYyIG9yICgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygtIDEyNDQ0Ljc4NTE1NjI1LCAzMzIuNDAzOTYxMTgxNjQsIC0gNzY3My4xODA2NjQwNjI1KSkuTWFnbml0dWRlIDw9IDEwKQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNpdGl6ZW5RdWVzdFByb2dyZXNzIiwgIkNpdGl6ZW4iKTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJGcnVpdCBCb3dsIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGcnVpdCBCb3dsIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTA5MjAuMTI1LCA2MjQuMjAyNzU4Nzg5MDYsIC0gMTAyNjYuOTk1MTE3MTg4KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX09ic2VydmF0aW9uVjIgb3IgKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KC0gMTA5MjAuMTI1LCA2MjQuMjAyNzU4Nzg5MDYsIC0gMTAyNjYuOTk1MTE3MTg4KSkuTWFnbml0dWRlIDw9IDEwKQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIktlblRhbGsyIiwgIlN0YXJ0Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIktlblRhbGsyIiwgIkJ1eSIpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNTYxLCB2MTU2MiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxNTYyLk5hbWUgPT0gIkFwcGxlIikgb3IgKHYxNTYyLk5hbWUgPT0gIkJhbmFuYSIpIG9yICh2MTU2Mi5OYW1lID09ICJQaW5lYXBwbGUiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTYyLkhhbmRsZS5DRnJhbWUgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDEsIDEwKSA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LCB2MTU2Mi5IYW5kbGUsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBfRy5BdXRvX011c2tldGVlckhhdCA9IHRydWU7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2NzggPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1JhaW5ib3dIYWtpIiwgewogICAgVGl0bGUgPSAiQXV0byBSYWluYm93IEhha2kiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjc4Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjY3KQogICAgX0cuQXV0b19SYWluYm93SGFraSA9IHYyNjc7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvUmFpbmJvd0hha2k6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgwLjEpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9fUmFpbmJvd0hha2kgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMTg5Mi4wNzAzMTI1LCA5MzAuNTc2NzIxMTkxNDEsIC0gODc2MC4xNTkxNzk2ODc1KSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKChWZWN0b3IzLm5ldygtIDExODkyLjA3MDMxMjUsIDkzMC41NzY3MjExOTE0MSwgLSA4NzYwLjE1OTE3OTY4NzUpIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAzMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkhvcm5lZE1hbiIsICJCZXQiKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSBhbmQgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIlN0b25lIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlN0b25lIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE1NjMsIHYxNTY0IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNTY0Lk5hbWUgPT0gIlN0b25lIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9sZENGcmFtZVJhaW5ib3cgPSB2MTU2NC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE1NjQuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTU2NC5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1NjQuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBPbGRDRnJhbWVSYWluYm93OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTU2NC5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX1JhaW5ib3dIYWtpIG9yICh2MTU2NC5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxNTY0LlBhcmVudCBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEwODYuMTE2MjEsIDM4Ljg0MjU5MDMsIDY3NjguNzE0MzYpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSBhbmQgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIkh5ZHJhIExlYWRlciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJIeWRyYSBMZWFkZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTY2OSwgdjE2NzAgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE2NzAuTmFtZSA9PSAiSHlkcmEgTGVhZGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9sZENGcmFtZVJhaW5ib3cgPSB2MTY3MC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE2NzAuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY3MC5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NzAuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBPbGRDRnJhbWVSYWluYm93OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY3MC5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX1JhaW5ib3dIYWtpIG9yICh2MTY3MC5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxNjcwLlBhcmVudCBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg1NzEzLjk4ODc3LCA2MDEuOTIyOTc0LCAyMDIuNzUxMjUxKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIktpbG8gQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIktpbG8gQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNzYyLCB2MTc2MyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTc2My5OYW1lID09ICJLaWxvIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2xkQ0ZyYW1lUmFpbmJvdyA9IHYxNzYzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTc2My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzYzLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc2My5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE3NjMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBPbGRDRnJhbWVSYWluYm93OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fUmFpbmJvd0hha2kgb3IgKHYxNzYzLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE3NjMuUGFyZW50IG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDI4NzcuNjE3NDMsIDQyMy41NTg2ODUsIC0gNzIwNy4zMTAwNikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJDYXB0YWluIEVsZXBoYW50IikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2FwdGFpbiBFbGVwaGFudCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNzc0LCB2MTc3NSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTc3NS5OYW1lID09ICJDYXB0YWluIEVsZXBoYW50IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9sZENGcmFtZVJhaW5ib3cgPSB2MTc3NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE3NzUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc3NS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE3NzUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzc1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gT2xkQ0ZyYW1lUmFpbmJvdzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX1JhaW5ib3dIYWtpIG9yICh2MTc3NS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxNzc1LlBhcmVudCBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEzNDg1LjAyODMsIDMzMS43MDkyNTksIC0gODAxMi40ODczKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIkJlYXV0aWZ1bCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJCZWF1dGlmdWwgUGlyYXRlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE4MDIsIHYxODAzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxODAzLk5hbWUgPT0gIkJlYXV0aWZ1bCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2xkQ0ZyYW1lUmFpbmJvdyA9IHYxODAzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTgwMy5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODAzLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwMy5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBPbGRDRnJhbWVSYWluYm93OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fUmFpbmJvd0hha2kgb3IgKHYxODAzLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE4MDMuUGFyZW50IG9yIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDUzMTIuMzU5ODYzMjgxMywgMjAuMTQxMjAxMDE5Mjg3LCAtIDEwLjE1ODUzODgxODM1OSkpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMTg5Mi4wNzAzMTI1LCA5MzAuNTc2NzIxMTkxNDEsIC0gODc2MC4xNTkxNzk2ODc1KSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKChWZWN0b3IzLm5ldygtIDExODkyLjA3MDMxMjUsIDkzMC41NzY3MjExOTE0MSwgLSA4NzYwLjE1OTE3OTY4NzUpIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAzMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkhvcm5lZE1hbiIsICJCZXQiKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHY3OSA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvU2t1bGxHdWl0YXIiLCB7CiAgICBUaXRsZSA9ICJBdXRvIFNrdWxsIEd1aXRhciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2Nzk6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNjgpCiAgICBfRy5BdXRvX1NrdWxsR3VpdGFyID0gdjI2ODsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9Ta3VsbEd1aXRhcjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b19Ta3VsbEd1aXRhciB0aGVuCiAgICAgICAgICAgICAgICBpZiAoR2V0V2VhcG9uSW52ZW50b3J5KCJTa3VsbCBHdWl0YXIiKSA9PSBmYWxzZSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmICgoQ0ZyYW1lLm5ldygtIDk2ODEuNDU4OTg0Mzc1LCA2LjEzOTg4MDY1NzE5NjA0NSwgNjM0MS4zNzIwNzAzMTI1KS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNTAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk5QQ3M6RmluZEZpcnN0Q2hpbGQoIlNrZWxldG9uIE1hY2hpbmUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJzb3VsR3VpdGFyQnV5IiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uQ2FuZGxlMS5UcmFuc3BhcmVuY3kgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlBsYWNhcmQxLkxlZnQuUGFydC5UcmFuc3BhcmVuY3kgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFF1ZXN0MiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDg3NjIuNjkxNDA2MjUsIDE3Ni44NDc4MzkzNTU0Njg3NSwgNjE3MS4zMDc2MTcxODc1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKChDRnJhbWUubmV3KC0gODc2Mi42OTE0MDYyNSwgMTc2Ljg0NzgzOTM1NTQ2ODc1LCA2MTcxLjMwNzYxNzE4NzUpLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAzKSBvciBub3QgX0cuQXV0b19Ta3VsbEd1aXRhcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uUGxhY2FyZDcuTGVmdC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlBsYWNhcmQ2LkxlZnQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5QbGFjYXJkNS5MZWZ0LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uUGxhY2FyZDQuUmlnaHQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5QbGFjYXJkMy5MZWZ0LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uUGxhY2FyZDIuUmlnaHQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5QbGFjYXJkMS5SaWdodC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlRhYmxldC5TZWdtZW50MTpGaW5kRmlyc3RDaGlsZCgiQ2xpY2tEZXRlY3RvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDE6RmluZEZpcnN0Q2hpbGQoIkNsaWNrRGV0ZWN0b3IiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFF1ZXN0NCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDk1NTMuNTk4NjMyODEyNSwgNjUuNjIzMzgyNTY4MzU5MzgsIDYwNDEuNTg4Mzc4OTA2MjUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKChDRnJhbWUubmV3KC0gOTU1My41OTg2MzI4MTI1LCA2NS42MjMzODI1NjgzNTkzOCwgNjA0MS41ODgzNzg5MDYyNSkuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDMpIG9yIG5vdCBfRy5BdXRvX1NrdWxsR3VpdGFyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0My5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDMuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0NC5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0NC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQ0LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDYuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQ2LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDYuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0OC5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDguQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0MTAuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQxMC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQxMC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQxMC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFF1ZXN0MyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5OUENzOkZpbmRGaXJzdENoaWxkKCJHaG9zdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE3OTggPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMV0gPSAiR3VpdGFyUHV6emxlUHJvZ3Jlc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWzJdID0gIkdob3N0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2MTc5OCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkxpdmluZyBab21iaWUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTgwNCwgdjE4MDUgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxODA1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYxODA1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCAodjE4MDUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE4MDUuTmFtZSA9PSAiTGl2aW5nIFpvbWJpZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODA1Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwNS5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODA1Lkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODA1Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODA1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwNS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDIwLCAwKSA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMDE2MC43ODcxMDkzNzUsIDEzOC42NjE2OTczODc2OTUzLCA1OTU1LjAzMDc2MTcxODc1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbFVzZXIiKTpDYXB0dXJlQ29udHJvbGxlcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxVc2VyIik6QnV0dG9uMURvd24oVmVjdG9yMi5uZXcoMTI4MCwgNjcyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTAxNjAuNzg3MTA5Mzc1LCAxMzguNjYxNjk3Mzg3Njk1MywgNTk1NS4wMzA3NjE3MTg3NSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJncmF2ZXN0b25lRXZlbnQiLCAyKSwgIkVycm9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDg2NTMuMjA2MDU0Njg3NSwgMTQwLjk4NDg3ODU0MDAzOTA2LCA2MTYwLjAzMzIwMzEyNSkpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiZ3JhdmVzdG9uZUV2ZW50IiwgMiksICJOb3RoaW5nIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oIldhaXQgRnVsbCBNb29uIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoImdyYXZlc3RvbmVFdmVudCIsIDIsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA5NjgxLjQ1ODk4NDM3NSwgNi4xMzk4ODA2NTcxOTYwNDUsIDYzNDEuMzcyMDcwMzEyNSkpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjgwID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9CdWRkeSIsIHsKICAgIFRpdGxlID0gIkF1dG8gQnVkZHkiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjgwOk9uQ2hhbmdlZChmdW5jdGlvbih2MjY5KQogICAgX0cuQXV0b19CdWRkeSA9IHYyNjk7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvQnVkZHk6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2ODEgPSBDRnJhbWUubmV3KC0gNzMxLjIwMzQzMDE3NTc4MTIsIDM4MS41NjU4ODc0NTExNzE5LCAtIDExMTk4LjQ5NTExNzE4NzUpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX0J1ZGR5IHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYWtlIFF1ZWVuIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTA1MCwgdjEwNTEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA1MS5OYW1lID09ICJDYWtlIFF1ZWVuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDUxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTA1MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjEwNTEuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNTEuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDUxLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDUxLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTA1MS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19CdWRkeSBvciBub3QgdjEwNTEuUGFyZW50IG9yICh2MTA1MS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHY4MS5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMTUwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY4MSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA3MzEuMjAzNDMwMTc1NzgxMiwgMzgxLjU2NTg4NzQ1MTE3MTksIC0gMTExOTguNDk1MTE3MTg3NSkpOwogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJDYWtlIFF1ZWVuIikgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBRdWVlbiIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjgyID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9EdWFsS2F0YW5hIiwgewogICAgVGl0bGUgPSAiQXV0byBDREsiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjgyOk9uQ2hhbmdlZChmdW5jdGlvbih2MjcwKQogICAgX0cuQXV0b19EdWFsS2F0YW5hID0gdjI3MDsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9EdWFsS2F0YW5hOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvX0R1YWxLYXRhbmEgdGhlbgogICAgICAgICAgICAgICAgaWYgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlR1c2hpdGEiKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlR1c2hpdGEiKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJZYW1hIikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJZYW1hIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiVHVzaGl0YSIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiVHVzaGl0YSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiVHVzaGl0YSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbCgiVHVzaGl0YSIpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIllhbWEiKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIllhbWEiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIllhbWEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woIllhbWEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiTG9hZEl0ZW0iLCAiVHVzaGl0YSIpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvX0R1YWxLYXRhbmEgdGhlbgogICAgICAgICAgICAgICAgaWYgKEdldE1hdGVyaWFsKCJBbHVjYXJkIEZyYWdtZW50IikgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8xID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiUHJvZ3Jlc3MiLCAiRXZpbCIpOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlN0YXJ0VHJpYWwiLCAiRXZpbCIpOwogICAgICAgICAgICAgICAgZWxzZWlmIChHZXRNYXRlcmlhbCgiQWx1Y2FyZCBGcmFnbWVudCIpID09IDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8yID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlByb2dyZXNzIiwgIkV2aWwiKTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJTdGFydFRyaWFsIiwgIkV2aWwiKTsKICAgICAgICAgICAgICAgIGVsc2VpZiAoR2V0TWF0ZXJpYWwoIkFsdWNhcmQgRnJhZ21lbnQiKSA9PSAyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8zID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJQcm9ncmVzcyIsICJFdmlsIik7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiU3RhcnRUcmlhbCIsICJFdmlsIik7CiAgICAgICAgICAgICAgICBlbHNlaWYgKEdldE1hdGVyaWFsKCJBbHVjYXJkIEZyYWdtZW50IikgPT0gMykgdGhlbgogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8xID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiUHJvZ3Jlc3MiLCAiR29vZCIpOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlN0YXJ0VHJpYWwiLCAiR29vZCIpOwogICAgICAgICAgICAgICAgZWxzZWlmIChHZXRNYXRlcmlhbCgiQWx1Y2FyZCBGcmFnbWVudCIpID09IDQpIHRoZW4KICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8yID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlByb2dyZXNzIiwgIkdvb2QiKTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJTdGFydFRyaWFsIiwgIkdvb2QiKTsKICAgICAgICAgICAgICAgIGVsc2VpZiAoR2V0TWF0ZXJpYWwoIkFsdWNhcmQgRnJhZ21lbnQiKSA9PSA1KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8zID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJQcm9ncmVzcyIsICJHb29kIik7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiU3RhcnRUcmlhbCIsICJHb29kIik7CiAgICAgICAgICAgICAgICBlbHNlaWYgKEdldE1hdGVyaWFsKCJBbHVjYXJkIEZyYWdtZW50IikgPT0gNikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkN1cnNlZCBTa2VsZXRvbiBCb3NzIFtMdi4gMjAyNV0gW0Jvc3NdIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5SZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgiQ3Vyc2VkIFNrZWxldG9uIEJvc3MgW0x2LiAyMDI1XSBbQm9zc10iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDdXJzZWQgU2tlbGV0b24gQm9zcyBbTHYuIDIwMjVdIFtCb3NzXSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ3Vyc2VkIFNrZWxldG9uIFtMdi4gMjIwMF0iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxODQyLCB2MTg0MyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxODQzLk5hbWUgPT0gIkN1cnNlZCBTa2VsZXRvbiBCb3NzIikgb3IgKHYxODQzLk5hbWUgPT0gIkN1cnNlZCBTa2VsZXRvbiIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTg0My5IdW1hbm9pZC5IZWFsdGggPiAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU3dvcmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE4NDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBwb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4NDMuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTg0My5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTg0My5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4NDMuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODQzLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxODQzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxODQzLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoKENGcmFtZS5uZXcoLSAxMjM2MS43MDYwNTQ2ODc1LCA2MDMuMzU0Nzk3MzYzMjgxMiwgLSA2NTUwLjUzNDE3OTY4NzUpLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMTAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlByb2dyZXNzIiwgIkdvb2QiKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiUHJvZ3Jlc3MiLCAiRXZpbCIpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTIzNjEuNzA2MDU0Njg3NSwgNjAzLjM1NDc5NzM2MzI4MTIsIC0gNjU1MC41MzQxNzk2ODc1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMjI1My41NDE5OTIxODc1LCA1OTguODk5OTYzMzc4OTA2MiwgLSA2NTQ2LjgzODg2NzE4NzUpKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMjM2MS43MDYwNTQ2ODc1LCA2MDMuMzU0Nzk3MzYzMjgxMiwgLSA2NTUwLjUzNDE3OTY4NzUpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIEF1dG9fUXVlc3RfWWFtYV8xIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJNeXRob2xvZ2ljYWwgUGlyYXRlIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTA1MiwgdjEwNTMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA1My5OYW1lID09ICJNeXRob2xvZ2ljYWwgUGlyYXRlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDUzLgpIdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMCwgLSAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuQXV0b19EdWFsS2F0YW5hID09IGZhbHNlKSBvciAoQXV0b19RdWVzdF9ZYW1hXzEgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJTdGFydFRyaWFsIiwgIkV2aWwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEzNDUxLjQ2NDg0Mzc1LCA1NDMuNzEyODkwNjI1LCAtIDY5NjEuMDAyOTI5Njg3NSkpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBBdXRvX1F1ZXN0X1lhbWFfMiB0aGVuCiAgICAgICAgICAgICAgICBmb3Igdjg1OCwgdjg1OSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODU5OkZpbmRGaXJzdENoaWxkKCJIYXplRVNQIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2ODU5LkhhemVFU1AuU2l6ZSA9IFVEaW0yLm5ldyg1MCwgNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHY4NTkuSGF6ZUVTUC5NYXhEaXN0YW5jZSA9ICJpbmYiOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBmb3Igdjg2MCwgdjg2MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODYxOkZpbmRGaXJzdENoaWxkKCJIYXplRVNQIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2ODYxLkhhemVFU1AuU2l6ZSA9IFVEaW0yLm5ldyg1MCwgNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHY4NjEuSGF6ZUVTUC5NYXhEaXN0YW5jZSA9ICJpbmYiOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBmb3IgdjczMSwgdjczMiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgIGlmIChBdXRvX1F1ZXN0X1lhbWFfMiBhbmQgdjczMjpGaW5kRmlyc3RDaGlsZCgiSGF6ZUVTUCIpIGFuZCAoKHY3MzIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIEZhcm1Qb3NzRXNwLlBvc2l0aW9uKS5tYWduaXR1ZGUgPD0gMzAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIHY3MzIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBGYXJtUG9zc0VzcDsKICAgICAgICAgICAgICAgICAgICB2NzMyLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHY3MzIuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY3MzIuSHVtYW5vaWRSb290UGFydDpGaW5kRmlyc3RDaGlsZCgiQm9keVZlbG9jaXR5IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTA1OCA9IEluc3RhbmNlLm5ldygiQm9keVZlbG9jaXR5IiwgdjczMi5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEwNTguTWF4Rm9yY2UgPSBWZWN0b3IzLm5ldygxLCAxLCAxKSAqIG1hdGguaHVnZSA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMDU4LlZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMCwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBBdXRvX1F1ZXN0X1lhbWFfMiB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGZvciB2ODY1LCB2ODY2IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY4NjY6RmluZEZpcnN0Q2hpbGQoIkhhemVFU1AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2ODY2Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDIwMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2ODY2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU3dvcmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY4NjYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NjYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg2Ni5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg2Ni5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NjYuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODY2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2ODY2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2ODY2Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjg2Ni5IdW1hbm9pZC5IZWFsdGggPD0gMCkgYW5kIHY4NjYuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg2Ni5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9fRHVhbEthdGFuYSA9PSBmYWxzZSkgb3IgKEF1dG9fUXVlc3RfWWFtYV8yID09IGZhbHNlKSBvciBub3Qgdjg2Ni5QYXJlbnQgb3IgKHY4NjYuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2ODY2OkZpbmRGaXJzdENoaWxkKCJIYXplRVNQIikKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTM0MiwgdjEzNDMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2MTM0MzpGaW5kRmlyc3RDaGlsZCgiSGF6ZUVTUCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxMzQzLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDIwMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEzNDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWVNb24gKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTM0My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIEF1dG9fUXVlc3RfWWFtYV8zIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJIYWxsb3cgRXNzZW5jZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5TdW1tb25lci5EZXRlY3Rpb24uQ0ZyYW1lKTsKICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiSGVsbERpbWVuc2lvbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDdXJzZWQgU2tlbGV0b24gW0x2LiAyMjAwXSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ3Vyc2VkIFNrZWxldG9uIFtMdi4gMjIwMF0gW0Jvc3NdIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJIZWxsJ3MgTWVzc2VuZ2VyIFtMdi4gMjIwMF0gW0Jvc3NdIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTY0MSwgdjE2NDIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTY0Mi5OYW1lID09ICJDdXJzZWQgU2tlbGV0b24iKSBvciAodjE2NDIuTmFtZSA9PSAiQ3Vyc2VkIFNrZWxldG9uIikgb3IgKHYxNjQyLk5hbWUgPT0gIkhlbGwncyBNZXNzZW5nZXIiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE2NDIuSHVtYW5vaWQuSGVhbHRoID4gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTd29yZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE2NDIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjQyLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjQyLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY0Mi5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjQyLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NDIuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNjQyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTY0Mi5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxNjQyLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBhbmQgdjE2NDIuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NDIuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKHYxNjQyLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE2NDIuUGFyZW50IG9yIChBdXRvX1F1ZXN0X1lhbWFfMyA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCg1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkhlbGxEaW1lbnNpb24uVG9yY2gxLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbShnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5IZWxsRGltZW5zaW9uLlRvcmNoMi5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSGVsbERpbWVuc2lvbi5Ub3JjaDMuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkhlbGxEaW1lbnNpb24uRXhpdC5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuQXV0b19EdWFsS2F0YW5hID09IGZhbHNlKSBvciAoQXV0b19RdWVzdF9ZYW1hXzMgPT0gZmFsc2UpIG9yIChHZXRNYXRlcmlhbCgiQWx1Y2FyZCBGcmFnbWVudCIpID09IDMpCiAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU291bCBSZWFwZXIiKSBvciBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlOkZpbmRGaXJzdENoaWxkKCJTb3VsIFJlYXBlciBbTHYuIDIxMDBdIFtSYWlkIEJvc3NdIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNvdWwgUmVhcGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE2NzEsIHYxNjcyIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNjcyLk5hbWUgPT0gIlNvdWwgUmVhcGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTY3Mi5IdW1hbm9pZC5IZWFsdGggPiAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE2NzIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuQXV0b19EdWFsS2F0YW5hID09IGZhbHNlKSBvciAoQXV0b19RdWVzdF9ZYW1hXzMgPT0gZmFsc2UpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJIZWxsRGltZW5zaW9uIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA5NTcwLjAzMzIwMzEyNSwgMzE1LjkzNDY5MjM4MjgxMjUsIDY3MjYuODkzMDY2NDA2MjUpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCb25lcyIsICJCdXkiLCAxLCAxKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIEF1dG9fUXVlc3RfVHVzaGl0YV8xIHRoZW4KICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDk1NDYuOTkwMjM0Mzc1LCAyMS4xMzk4OTI1NzgxMjUsIDQ2ODYuMTE0MjU3ODEyNSkpOwogICAgICAgICAgICB3YWl0KDUpOwogICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gNjEyMC4wNTc2MTcxODc1LCAxNi40NTU3ODAwMjkyOTY4NzUsIC0gMjI1MC42OTcyNjU2MjUpKTsKICAgICAgICAgICAgd2FpdCg1KTsKICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDk1MzMuMjM5MjU3ODEyNSwgNy4yNTQ0NDU1NTI4MjU5MjgsIC0gODM3Mi42OTkyMTg3NSkpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIEF1dG9fUXVlc3RfVHVzaGl0YV8yIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgKChDRnJhbWUubmV3KC0gNTUzOS4zMTE1MjM0Mzc1LCAzMTMuODAwNTM3MTA5Mzc1LCAtIDI5NzIuMzcyMzE0NDUzMTI1KS5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDUwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTA2MSwgdjEwNjIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBdXRvX1F1ZXN0X1R1c2hpdGFfMiBhbmQgdjEwNjI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdjEwNjI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kICh2MTA2Mi5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTA2Mi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPCAyMDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFN3b3JkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwNjIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA2Mi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNjIuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA2Mi5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA2Mi5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA2Mi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxMDYyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjEwNjIuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxMDYyLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBhbmQgdjEwNjIuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDYyLkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKHYxMDYyLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjEwNjIuUGFyZW50IG9yIChBdXRvX1F1ZXN0X1R1c2hpdGFfMiA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gNTU0NS4xMjQwMjM0Mzc1LCAzMTMuODAwNTM3MTA5Mzc1LCAtIDI5NzYuNjE2NDU1MDc4MTI1KSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBBdXRvX1F1ZXN0X1R1c2hpdGFfMyB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNha2UgUXVlZW4iKSBvciBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlOkZpbmRGaXJzdENoaWxkKCJDYWtlIFF1ZWVuIFtMdi4gMjE3NV0gW0Jvc3NdIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNha2UgUXVlZW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ2NCwgdjE0NjUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NjUuTmFtZSA9PSAiQ2FrZSBRdWVlbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NjUuSHVtYW5vaWQuSGVhbHRoID4gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTd29yZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQ2NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2NS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDY1Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDY1Lkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2NS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjE0NjUuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE0NjUuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE0NjUuSHVtYW5vaWQuSGVhbHRoIDw9IDApIGFuZCB2MTQ2NS5IdW1hbm9pZDpGaW5kRmlyc3RDaGlsZCgiQW5pbWF0b3IiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDY1Lkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuQXV0b19EdWFsS2F0YW5hID09IGZhbHNlKSBvciAoQXV0b19RdWVzdF9UdXNoaXRhXzMgPT0gZmFsc2UpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJIZWF2ZW5seURpbWVuc2lvbiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gNzA5LjMxMzI5MzQ1NzAzMTIsIDM4MS42MDA1ODU5Mzc1LCAtIDExMDExLjM5NjQ4NDM3NSkpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJIZWF2ZW5seURpbWVuc2lvbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDdXJzZWQgU2tlbGV0b24gW0x2LiAyMjAwXSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ3Vyc2VkIFNrZWxldG9uIFtMdi4gMjIwMF0gW0Jvc3NdIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJIZWF2ZW4ncyBHdWFyZGlhbiBbTHYuIDIyMDBdIFtCb3NzXSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE2NTAsIHYxNjUxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE2NTEuTmFtZSA9PSAiQ3Vyc2VkIFNrZWxldG9uIikgb3IgKHYxNjUxLk5hbWUgPT0gIkN1cnNlZCBTa2VsZXRvbiIpIG9yICh2MTY1MS5OYW1lID09ICJIZWF2ZW4ncyBHdWFyZGlhbiIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTY1MS5IdW1hbm9pZC5IZWFsdGggPiAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFN3b3JkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTY1MS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NTEuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NTEuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjUxLkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NTEuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY1MS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjE2NTEuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNjUxLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE2NTEuSHVtYW5vaWQuSGVhbHRoIDw9IDApIGFuZCB2MTY1MS5IdW1hbm9pZDpGaW5kRmlyc3RDaGlsZCgiQW5pbWF0b3IiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY1MS5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAodjE2NTEuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTY1MS5QYXJlbnQgb3IgKEF1dG9fUXVlc3RfVHVzaGl0YV8zID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSGVhdmVubHlEaW1lbnNpb24uVG9yY2gxLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5IZWF2ZW5seURpbWVuc2lvbi5Ub3JjaDIuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkhlYXZlbmx5RGltZW5zaW9uLlRvcmNoMy5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSGVhdmVubHlEaW1lbnNpb24uRXhpdC5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19EdWFsS2F0YW5hIG9yIG5vdCBBdXRvX1F1ZXN0X1R1c2hpdGFfMyBvciAoR2V0TWF0ZXJpYWwoIkFsdWNhcmQgRnJhZ21lbnQiKSA9PSA2KQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKaWYgU2VhMiB0aGVuCiAgICBsb2NhbCB2NTM3ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUZhY3RvcnkiLCB7CiAgICAgICAgVGl0bGUgPSAiQXV0byBGYWN0b3J5IiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTM3Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjQ0KQogICAgICAgIF9HLkZhY3RvcnkgPSB2NjQ0OwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVGYWN0b3J5OlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuRmFjdG9yeSB0aGVuCiAgICAgICAgICAgICAgICBpZiBnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDb3JlIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTM0NCwgdjEzNDUgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxMzQ1Lk5hbWUgPT0gIkNvcmUiKSBhbmQgKHYxMzQ1Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg0NDguNDY3NTYsIDE5OS4zNTY3ODEsIC0gNDQxLjM4OTI1MikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkZhY3Rvcnkgb3IgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldyg0NDguNDY3NTYsIDE5OS4zNTY3ODEsIC0gNDQxLjM4OTI1MikpLk1hZ25pdHVkZSA8PSAxMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMzQ1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM0NS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM0NS5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDUuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM0NS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQ1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTM0NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjEzNDUuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCB2MTM0NS5QYXJlbnQgb3IgKHYxMzQ1Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciAoX0cuRmFjdG9yeSA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgiQ29yZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg0NDguNDY3NTYsIDE5OS4zNTY3ODEsIC0gNDQxLjM4OTI1MikpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkZhY3Rvcnkgb3IgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldyg0NDguNDY3NTYsIDE5OS4zNTY3ODEsIC0gNDQxLjM4OTI1MikpLk1hZ25pdHVkZSA8PSAxMCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZApsb2NhbCB2ODMgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b0Zhcm1Td2FuIiwgewogICAgVGl0bGUgPSAiQXV0byBTd2FuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY4MzpPbkNoYW5nZWQoZnVuY3Rpb24odjI3MSkKICAgIF9HLkF1dG9fRmFybVN3YW4gPSB2MjcxOwplbmQpOwp2MTcuVG9nZ2xlQXV0b0Zhcm1Td2FuOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvRmFybVN3YW4gdGhlbgogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJEb24gU3dhbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwNjMsIHYxMDY0IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxMDY0Lk5hbWUgPT0gIkRvbiBTd2FuIikgYW5kICh2MTA2NC5IdW1hbm9pZC5IZWFsdGggPiAwKSBhbmQgdjEwNjQ6SXNBKCJNb2RlbCIpIGFuZCB2MTA2NDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjEwNjQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNjQuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDY0Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTA2NC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9GYXJtU3dhbiA9PSBmYWxzZSkgb3IgKHYxMDY0Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDIyODQuOTEyMTA5Mzc1LCAxNS41Mzc2NjYzMjA4MDEsIDkwNS40ODI5MTAxNTYyNSkpOwogICAgICAgICAgICAgICAgICAgIHVudGlsICgoQ0ZyYW1lLm5ldygyMjg0LjkxMjEwOTM3NSwgMTUuNTM3NjY2MzIwODAxLCA5MDUuNDgyOTEwMTU2MjUpLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA0KSBvciAoX0cuQXV0b0Zhcm1Td2FuID09IGZhbHNlKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjg0ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9SZW5nb2t1IiwgewogICAgVGl0bGUgPSAiUmVuZ29rdSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2ODQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzIpCiAgICBfRy5BdXRvX1JlZ29rdSA9IHYyNzI7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvUmVuZ29rdTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b19SZWdva3UgdGhlbgogICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJIaWRkZW4gS2V5Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIaWRkZW4gS2V5IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woIkhpZGRlbiBLZXkiKTsKICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDY1NzEuMTIwMTE3MTg3NSwgMjk5LjIzMDI4NTY0NDUzLCAtIDY5NjcuODQxNzk2ODc1KSk7CiAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU25vdyBMdXJrZXIiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkFyY3RpYyBXYXJyaW9yIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NjYsIHYxNDY3IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKCh2MTQ2Ny5OYW1lID09ICJTbm93IEx1cmtlciIpIG9yICh2MTQ2Ny5OYW1lID09ICJBcmN0aWMgV2FycmlvciIpKSBhbmQgKHYxNDY3Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2Ny5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2Ny5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjE0NjcuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNDY3Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NjcuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiSGlkZGVuIEtleSIpIG9yIChfRy5BdXRvX1JlZ29rdSA9PSBmYWxzZSkgb3Igbm90IHYxNDY3LlBhcmVudCBvciAodjE0NjcuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNTQzOS43MTY3OTY4NzUsIDg0LjQyMDk0NDIxMzg2NywgLSA2NzE1LjE2MzU3NDIxODgpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmlmIChTZWEyIG9yIFNlYTMpIHRoZW4KICAgIGxvY2FsIHY1MzggPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlSGFraUNvbG9yIiwgewogICAgICAgIFRpdGxlID0gIkJ1eSBIYWtpIENvbG9yIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTM4Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjQ1KQogICAgICAgIF9HLkF1dG9fQnV5X0VuY2hhbmNlbWVudCA9IHY2NDU7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUhha2lDb2xvcjpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9fQnV5X0VuY2hhbmNlbWVudCB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2ODY3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJDb2xvcnNEZWFsZXIiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICIyIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4NjcpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKaWYgU2VhMiB0aGVuCiAgICBsb2NhbCB2NTM5ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVTd29yZExlbmdlbmQiLCB7CiAgICAgICAgVGl0bGUgPSAiQXV0byBCdXkgTGVuZ2VuZGFyeSBTd29yZCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUzOTpPbkNoYW5nZWQoZnVuY3Rpb24odjY0NikKICAgICAgICBfRy5CdXlMZW5nZW5kU3dvcmQgPSB2NjQ2OwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVTd29yZExlbmdlbmQ6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoX0cuQnV5TGVuZ2VuZFN3b3JkIG9yIFRyaXBsZV9BKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjg5NyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxlZ2VuZGFyeVN3b3JkRGVhbGVyIiwKICAgICAgICAgICAgICAgICAgICAgICAgWzJdID0gIjIiCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODk3KSk7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKaWYgU2VhMiB0aGVuCiAgICBsb2NhbCB2NTQwID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVFdm9SYWNlIiwgewogICAgICAgIFRpdGxlID0gIkF1dG8gVXBncmFkZSBSYWNlIFYyIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTQwOk9uQ2hhbmdlZChmdW5jdGlvbih2NjQ3KQogICAgICAgIF9HLkF1dG9Fdm9SYWNlID0gdjY0NzsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlRXZvUmFjZTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICB3aGlsZSB3YWl0KDAuMSkgZG8KICAgICAgICAgICAgICAgIGlmIF9HLkF1dG9Fdm9SYWNlIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlOkZpbmRGaXJzdENoaWxkKCJFdm9sdmVkIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWxjaGVtaXN0IiwgIjEiKSA9PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMjc3OS44MzUyMSwgNzIuOTY2MTQwNywgLSAzNTc0LjAyMDAyLCAtIDAuNzMwNDg0OTAzLCA2LjM5MDE0MWUtOCwgLSAwLjY4MjkyODg2LCAzLjU5OTYzMjJlLTgsIDEsIDUuNTA2NjcwM2UtOCwgMC42ODI5Mjg4NiwgMS41NjQyNDY3ZS04LCAtIDAuNzMwNDg0OTAzKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKFZlY3RvcjMubmV3KC0gMjc3OS44MzUyMSwgNzIuOTY2MTQwNywgLSAzNTc0LjAyMDAyKSAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS4zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJBbGNoZW1pc3QiLCAiMiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWxjaGVtaXN0IiwgIjEiKSA9PSAxKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmxvd2VyIDEiKSBhbmQgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRmxvd2VyIDEiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkZsb3dlcjEuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmxvd2VyIDIiKSBhbmQgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRmxvd2VyIDIiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkZsb3dlcjIuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmxvd2VyIDMiKSBhbmQgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRmxvd2VyIDMiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlpvbWJpZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTgzNCwgdjE4MzUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxODM1Lk5hbWUgPT0gIlpvbWJpZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTgzNS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgzNS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODM1Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxODM1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxODM1Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJGbG93ZXIgMyIpIG9yIG5vdCB2MTgzNS5QYXJlbnQgb3IgKHYxODM1Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciAoX0cuQXV0b0V2b1JhY2UgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDU2ODUuOTIzMzM5ODQzOCwgNDguNDgwMTI1NDI3MjQ2LCAtIDg1My4yMzcyNDM2NTIzNCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWxjaGVtaXN0IiwgIjEiKSA9PSAyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJBbGNoZW1pc3QiLCAiMyIpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kKTsKZW5kCmxvY2FsIHY4NSA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1QiLCB7CiAgICBUaXRsZSA9ICJBdXRvIFR1cm4gT24gUmFjZSBWMyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2ODU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzMpCiAgICBfRy5BdXRvVCA9IHYyNzM7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvVDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b1QgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUU6RmlyZVNlcnZlcigiQWN0aXZhdGVBYmlsaXR5Iik7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjg2ID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVBdXRvWSIsIHsKICAgIFRpdGxlID0gIkF1dG8gVHVybiBPbiBSYWNlIFY0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY4NjpPbkNoYW5nZWQoZnVuY3Rpb24odjI3NCkKICAgIF9HLkF1dG9ZID0gdjI3NDsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9ZOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvWSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIlkiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJZIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY4NyA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b0tlbiIsIHsKICAgIFRpdGxlID0gIkF1dG8gS2VuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY4NzpPbkNoYW5nZWQoZnVuY3Rpb24odjI3NSkKICAgIF9HLkF1dG9LZW4gPSB2Mjc1OwogICAgaWYgdjI3NSB0aGVuCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUU6RmlyZVNlcnZlcigiS2VuIiwgdHJ1ZSk7CiAgICBlbHNlCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUU6RmlyZVNlcnZlcigiS2VuIiwgZmFsc2UpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVBdXRvS2VuOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvS2VuIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1FOkZpcmVTZXJ2ZXIoIktlbiIsIHRydWUpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY4OCA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlU2F2ZVNwYXduIiwgewogICAgVGl0bGUgPSAiQXV0byBTYXZlIFNwYXdtIFBvaW50IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY4ODpPbkNoYW5nZWQoZnVuY3Rpb24odjI3NikKICAgIF9HLlNhdmVTcGF3biA9IHYyNzY7CiAgICBpZiB2Mjc2IHRoZW4KICAgICAgICBsb2NhbCB2NjQ4ID0gewogICAgICAgICAgICBbMV0gPSAiU2V0U3Bhd25Qb2ludCIKICAgICAgICB9OwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY2NDgpKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlU2F2ZVNwYXduOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5TYXZlU3Bhd24gdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjc5NyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiU2V0U3Bhd25Qb2ludCIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2Nzk3KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjg5ID0gcmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlV0aWwuQ2FtZXJhU2hha2VyKTsKdjg5OlN0b3AoKTsKbG9jYWwgdjkwID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVCcmluZ01vYiIsIHsKICAgIFRpdGxlID0gIkJyaW5nIE1vYiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IHRydWUKfSk7CnY5MDpPbkNoYW5nZWQoZnVuY3Rpb24odjI3NykKICAgIF9HLkJyaW5nTW9iID0gdjI3NzsKZW5kKTsKdjE3LlRvZ2dsZUJyaW5nTW9iOlNldFZhbHVlKHRydWUpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGZvciB2NzMzLCB2NzM0IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgaWYgKF9HLkJyaW5nTW9iIGFuZCBicmluZ21vYikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmICgodjczNC5OYW1lID09IE1vbkZhcm0pIGFuZCB2NzM0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCAodjczNC5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjczNC5OYW1lID09ICJGYWN0b3J5IFN0YWZmIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2NzM0Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBGYXJtUG9zLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMTAwMDAwMDAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSGVhZC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBGYXJtUG9zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY3MzQuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKHY3MzQuTmFtZSA9PSBNb25GYXJtKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHY3MzQuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIEZhcm1Qb3MuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMDAwMDAwMDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IEZhcm1Qb3M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHY3MzQuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSGVhZC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZDpDaGFuZ2VTdGF0ZSgxNCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2OTEgPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZVJlbW92ZU5vdGlmeSIsIHsKICAgIFRpdGxlID0gIlJlbW92ZSBOb3RpZnkiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjkxOk9uQ2hhbmdlZChmdW5jdGlvbih2Mjc4KQogICAgUmVtb3ZlTm90aWZ5ID0gdjI3ODsKZW5kKTsKdjE3LlRvZ2dsZVJlbW92ZU5vdGlmeTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIFJlbW92ZU5vdGlmeSB0aGVuCiAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTm90aWZpY2F0aW9ucy5FbmFibGVkID0gZmFsc2U7CiAgICAgICAgZWxzZQogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk5vdGlmaWNhdGlvbnMuRW5hYmxlZCA9IHRydWU7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjkyID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVXaGl0ZSIsIHsKICAgIFRpdGxlID0gIldoaXRlIFNjcmVlbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2OTI6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzkpCiAgICBfRy5XaGl0ZVNjcmVlbiA9IHYyNzk7CiAgICBpZiAoX0cuV2hpdGVTY3JlZW4gPT0gdHJ1ZSkgdGhlbgogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpOlNldDNkUmVuZGVyaW5nRW5hYmxlZChmYWxzZSk7CiAgICBlbHNlaWYgKF9HLldoaXRlU2NyZWVuID09IGZhbHNlKSB0aGVuCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIik6U2V0M2RSZW5kZXJpbmdFbmFibGVkKHRydWUpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVXaGl0ZTpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHY5MyA9IHYxNi5TZXR0aW5nOkFkZFNlY3Rpb24oIlNraWxsIik7CmxvY2FsIHY5NCA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlWiIsIHsKICAgIFRpdGxlID0gIloiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSB0cnVlCn0pOwp2OTQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyODApCiAgICBTa2lsbFogPSB2MjgwOwplbmQpOwp2MTcuVG9nZ2xlWjpTZXRWYWx1ZSh0cnVlKTsKbG9jYWwgdjk1ID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVYIiwgewogICAgVGl0bGUgPSAiWCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IHRydWUKfSk7CnY5NTpPbkNoYW5nZWQoZnVuY3Rpb24odjI4MSkKICAgIFNraWxsWCA9IHYyODE7CmVuZCk7CnYxNy5Ub2dnbGVYOlNldFZhbHVlKHRydWUpOwpsb2NhbCB2OTYgPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZUMiLCB7CiAgICBUaXRsZSA9ICJDIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gdHJ1ZQp9KTsKdjk2Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjgyKQogICAgU2tpbGxDID0gdjI4MjsKZW5kKTsKdjE3LlRvZ2dsZUM6U2V0VmFsdWUodHJ1ZSk7CmxvY2FsIHY5NyA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlViIsIHsKICAgIFRpdGxlID0gIlYiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSB0cnVlCn0pOwp2OTc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyODMpCiAgICBTa2lsbFYgPSB2MjgzOwplbmQpOwp2MTcuVG9nZ2xlVjpTZXRWYWx1ZSh0cnVlKTsKbG9jYWwgdjk4ID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVGIiwgewogICAgVGl0bGUgPSAiRiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2OTg6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyODQpCiAgICBTa2lsbEYgPSB2Mjg0OwplbmQpOwp2MTcuVG9nZ2xlRjpTZXRWYWx1ZSh0cnVlKTsKbG9jYWwgdjk5ID0gdjE2LlN0YXR1czpBZGRQYXJhZ3JhcGgoewogICAgVGl0bGUgPSAiSW5mb3JtYXRpb24iLAogICAgQ29udGVudCA9ICLilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIFcbiIgLi4gIk5hbWUgOiAiIC4uIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EaXNwbGF5TmFtZSAuLiAiIChAIiAuLiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuTmFtZSAuLiAiKVxuIiAuLiAiTGV2ZWwgOiAiIC4uIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWUgLi4gIlxuIiAuLiAiQmVsaSA6ICIgLi4gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5CZWxpLlZhbHVlIC4uICJcbiIgLi4gIkZyYWdtZW50cyA6ICIgLi4gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5GcmFnbWVudHMuVmFsdWUgLi4gIlxuIiAuLiAiV2FudGVkIEJlbGkgOiAiIC4uIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLmxlYWRlcnN0YXRzWyJCb3VudHkvSG9ub3IiXS5WYWx1ZSAuLiAiXG4iIC4uICJIUDogIiAuLiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCAuLiAiLyIgLi4gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5NYXhIZWFsdGggLi4gIlxuIiAuLiAiRW5lcmd5IDogIiAuLiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkVuZXJneS5WYWx1ZSAuLiAiLyIgLi4gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5FbmVyZ3kuTWF4VmFsdWUgLi4gIlxuIiAuLiAiUmFjZSA6ICIgLi4gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlIC4uICJcbiIgLi4gIkZydWl0IDogIiAuLiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkRldmlsRnJ1aXQuVmFsdWUgLi4gIlxuIiAuLiAi4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBIgp9KTsKbG9jYWwgdjEwMCA9IHYxNi5TdGF0dXM6QWRkUGFyYWdyYXBoKHsKICAgIFRpdGxlID0gIlRpbWUiLAogICAgQ29udGVudCA9ICIiCn0pOwpsb2NhbCBmdW5jdGlvbiB2MTAxKCkKICAgIGxvY2FsIHYyODUgPSBvcy5kYXRlKCIqdCIpOwogICAgbG9jYWwgdjI4NiA9IHYyODUuaG91ciAlIDI0IDsKICAgIGxvY2FsIHYyODcgPSAoKHYyODYgPCAxMikgYW5kICJBTSIpIG9yICJQTSIgOwogICAgbG9jYWwgdjI4OCA9IHN0cmluZy5mb3JtYXQoIiUwMmk6JTAyaTolMDJpICVzIiwgKCh2Mjg2IC0gMSkgJSAxMikgKyAxLCB2Mjg1Lm1pbiwgdjI4NS5zZWMsIHYyODcpOwogICAgbG9jYWwgdjI4OSA9IHN0cmluZy5mb3JtYXQoIiUwMmQvJTAyZC8lMDRkIiwgdjI4NS5kYXksIHYyODUubW9udGgsIHYyODUueWVhcik7CiAgICBsb2NhbCB2MjkwID0gZ2FtZTpHZXRTZXJ2aWNlKCJMb2NhbGl6YXRpb25TZXJ2aWNlIik7CiAgICBsb2NhbCB2MjkxID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik7CiAgICBsb2NhbCB2MjkyID0gdjI5MS5Mb2NhbFBsYXllcjsKICAgIGxvY2FsIHYyOTMgPSB2MjkyLk5hbWU7CiAgICBsb2NhbCB2Mjk0ID0gIlVua25vd24iOwogICAgbG9jYWwgdjI5NSwgdjI5NiA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICByZXR1cm4gdjI5MDpHZXRDb3VudHJ5UmVnaW9uRm9yUGxheWVyQXN5bmModjI5Mik7CiAgICBlbmQpOwogICAgaWYgdjI5NSB0aGVuCiAgICAgICAgdjI5NCA9IHYyOTY7CiAgICBlbmQKICAgIHYxMDA6U2V0RGVzYyh2Mjg5IC4uICItIiAuLiB2Mjg4IC4uICIgWyAiIC4uIHYyOTQgLi4gIiBdIik7CmVuZApzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0cnVlIGRvCiAgICAgICAgdjEwMSgpOwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLlJlbmRlclN0ZXBwZWQ6V2FpdCgpOwogICAgZW5kCmVuZCk7CmxvY2FsIHYxMDIgPSB2MTYuU3RhdHVzOkFkZFBhcmFncmFwaCh7CiAgICBUaXRsZSA9ICJTZXJ2ZXIgdGltZSIsCiAgICBDb250ZW50ID0gIiIKfSk7CmxvY2FsIGZ1bmN0aW9uIHYxMDMoKQogICAgbG9jYWwgdjI5NyA9IG1hdGguZmxvb3Iod29ya3NwYWNlLkRpc3RyaWJ1dGVkR2FtZVRpbWUgKyAwLjUpOwogICAgbG9jYWwgdjI5OCA9IG1hdGguZmxvb3IodjI5NyAvICg2MCBeIDIpKSAlIDI0IDsKICAgIGxvY2FsIHYyOTkgPSBtYXRoLmZsb29yKHYyOTcgLyA2MCkgJSA2MCA7CiAgICBsb2NhbCB2MzAwID0gdjI5NyAlIDYwIDsKICAgIHYxMDI6U2V0RGVzYyhzdHJpbmcuZm9ybWF0KCIlMDJkIFRp4bq/bmctJTAyZCBQaMO6dC0lMDJkIEdpw6J5IiwgdjI5OCwgdjI5OSwgdjMwMCkpOwplbmQKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBwY2FsbCh2MTAzKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2MTA0ID0gdjE2LlN0YXR1czpBZGRQYXJhZ3JhcGgoewogICAgVGl0bGUgPSAiRnJvemVuIERpbWVuc2lvbiIsCiAgICBDb250ZW50ID0gIiIKfSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIkZyb3plbkRpbWVuc2lvbiIpIHRoZW4KICAgICAgICAgICAgICAgIHYxMDQ6U2V0RGVzYygi4pyFIik7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHYxMDQ6U2V0RGVzYygi4p2MIik7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjEwNSA9IHYxNi5TdGF0dXM6QWRkSW5wdXQoIklucHV0IiwgewogICAgVGl0bGUgPSAiU2VydmVyIElEIiwKICAgIERlZmF1bHQgPSAiIiwKICAgIFBsYWNlaG9sZGVyID0gIiIsCiAgICBOdW1lcmljID0gZmFsc2UsCiAgICBGaW5pc2hlZCA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2MzAxKQogICAgICAgIF9HLkpvYiA9IHYzMDE7CiAgICBlbmQKfSk7CnYxNi5TdGF0dXM6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkpvaW4gU2VydmVyIElEIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlRlbGVwb3J0U2VydmljZSIpOlRlbGVwb3J0VG9QbGFjZUluc3RhbmNlKGdhbWUucGxhY2VJZCwgX0cuSm9iLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIpOwogICAgZW5kCn0pOwp2MTYuU3RhdHVzOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJDb3B5IFNlcnZlciBJRCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgc2V0Y2xpcGJvYXJkKHRvc3RyaW5nKGdhbWUuSm9iSWQpKTsKICAgIGVuZAp9KTsKbG9jYWwgdjEwNiA9IHYxNi5TdGF0dXM6QWRkVG9nZ2xlKCJNeVRvZ2dsZSIsIHsKICAgIFRpdGxlID0gIlNwYW0gSm9pbiBTZXJ2ZXIgSUQiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTA2Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzAyKQogICAgX0cuSm9pbiA9IHYzMDI7CmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkpvaW4gdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlRlbGVwb3J0U2VydmljZSIpOlRlbGVwb3J0VG9QbGFjZUluc3RhbmNlKGdhbWUucGxhY2VJZCwgX0cuSm9iLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxMDcgPSB2MTYuU3RhdHM6QWRkVG9nZ2xlKCJUb2dnbGVNZWxlZSIsIHsKICAgIFRpdGxlID0gIk1lbGVlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMDc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMDMpCiAgICBfRy5BdXRvX1N0YXRzX01lbGVlID0gdjMwMzsKZW5kKTsKdjE3LlRvZ2dsZU1lbGVlOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjEwOCA9IHYxNi5TdGF0czpBZGRUb2dnbGUoIlRvZ2dsZURlIiwgewogICAgVGl0bGUgPSAiRGVmZW5zZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTA4Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzA0KQogICAgX0cuQXV0b19TdGF0c19EZWZlbnNlID0gdjMwNDsKZW5kKTsKdjE3LlRvZ2dsZURlOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjEwOSA9IHYxNi5TdGF0czpBZGRUb2dnbGUoIlRvZ2dsZVN3b3JkIiwgewogICAgVGl0bGUgPSAiU3dvcmQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEwOTpPbkNoYW5nZWQoZnVuY3Rpb24odjMwNSkKICAgIF9HLkF1dG9fU3RhdHNfU3dvcmQgPSB2MzA1OwplbmQpOwp2MTcuVG9nZ2xlU3dvcmQ6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2MTEwID0gdjE2LlN0YXRzOkFkZFRvZ2dsZSgiVG9nZ2xlR3VuIiwgewogICAgVGl0bGUgPSAiR3VuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMTA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMDYpCiAgICBfRy5BdXRvX1N0YXRzX0d1biA9IHYzMDY7CmVuZCk7CnYxNy5Ub2dnbGVHdW46U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2MTExID0gdjE2LlN0YXRzOkFkZFRvZ2dsZSgiVG9nZ2xlRnJ1aXQiLCB7CiAgICBUaXRsZSA9ICJGcnVpdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTExOk9uQ2hhbmdlZChmdW5jdGlvbih2MzA3KQogICAgX0cuQXV0b19TdGF0c19EZXZpbF9GcnVpdCA9IHYzMDc7CmVuZCk7CnYxNy5Ub2dnbGVGcnVpdDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fU3RhdHNfRGV2aWxfRnJ1aXQgdGhlbgogICAgICAgICAgICBsb2NhbCB2NzM3ID0gewogICAgICAgICAgICAgICAgWzFdID0gIkFkZFBvaW50IiwKICAgICAgICAgICAgICAgIFsyXSA9ICJEZW1vbiBGcnVpdCIsCiAgICAgICAgICAgICAgICBbM10gPSAzCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY3MzcpKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX1N0YXRzX0d1biB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3MzggPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiQWRkUG9pbnQiLAogICAgICAgICAgICAgICAgWzJdID0gIkd1biIsCiAgICAgICAgICAgICAgICBbM10gPSAzCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY3MzgpKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX1N0YXRzX1N3b3JkIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjczOSA9IHsKICAgICAgICAgICAgICAgIFsxXSA9ICJBZGRQb2ludCIsCiAgICAgICAgICAgICAgICBbMl0gPSAiU3dvcmQiLAogICAgICAgICAgICAgICAgWzNdID0gMwogICAgICAgICAgICB9OwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NzM5KSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19TdGF0c19EZWZlbnNlIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjc0MCA9IHsKICAgICAgICAgICAgICAgIFsxXSA9ICJBZGRQb2ludCIsCiAgICAgICAgICAgICAgICBbMl0gPSAiRGVmZW5zZSIsCiAgICAgICAgICAgICAgICBbM10gPSAzCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY3NDApKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX1N0YXRzX01lbGVlIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjc0MSA9IHsKICAgICAgICAgICAgICAgIFsxXSA9ICJBZGRQb2ludCIsCiAgICAgICAgICAgICAgICBbMl0gPSAiTWVsZWUiLAogICAgICAgICAgICAgICAgWzNdID0gMwogICAgICAgICAgICB9OwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NzQxKSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjExMiA9IHt9Owpmb3IgdjMwOCwgdjMwOSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTpHZXRDaGlsZHJlbigpKSBkbwogICAgdGFibGUuaW5zZXJ0KHYxMTIsIHYzMDkuTmFtZSk7CmVuZApsb2NhbCB2MTEzID0gdjE2LlBsYXllcjpBZGREcm9wZG93bigiU2VsZWN0ZWRQbHkiLCB7CiAgICBUaXRsZSA9ICJTZWxlY3QgUGxheWVyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSB2MTEyLAogICAgTXVsdGkgPSBmYWxzZSwKICAgIERlZmF1bHQgPSAxCn0pOwp2MTEzOlNldFZhbHVlKF9HLlNlbGVjdFBseSk7CnYxMTM6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMTApCiAgICBfRy5TZWxlY3RQbHkgPSB2MzEwOwplbmQpOwp2MTYuUGxheWVyOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJMb2FkIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICB0YWJsZS5jbGVhcih2MTEyKTsKICAgICAgICBmb3IgdjU0MSwgdjU0MiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICB0YWJsZS5pbnNlcnQodjExMiwgdjU0Mi5OYW1lKTsKICAgICAgICBlbmQKICAgIGVuZAp9KTsKbG9jYWwgdjExNCA9IHYxNi5QbGF5ZXI6QWRkVG9nZ2xlKCJUb2dnbGVUZWxlcG9ydCIsIHsKICAgIFRpdGxlID0gIlRQIFRvIFBsYXllciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTE0Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzExKQogICAgX0cuVGVsZXBvcnRQbHkgPSB2MzExOwogICAgaWYgKHYzMTEgPT0gZmFsc2UpIHRoZW4KICAgICAgICB3YWl0KCk7CiAgICAgICAgQXV0b0hha2koKTsKICAgICAgICBUd2VlbjIoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICB3YWl0KCk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZVRlbGVwb3J0OlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuVGVsZXBvcnRQbHkgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnM6RmluZEZpcnN0Q2hpbGQoX0cuU2VsZWN0UGx5KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4yKGdhbWUuUGxheWVyc1tfRy5TZWxlY3RQbHldLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NTYgPSB2MTYuUGxheWVyOkFkZFNlY3Rpb24oIk90aGVyIik7CmxvY2FsIHYxMTUgPSB2MTYuUGxheWVyOkFkZFRvZ2dsZSgiVG9nZ2xlTm9DbGlwIiwgewogICAgVGl0bGUgPSAiTm9jbGlwIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gdHJ1ZQp9KTsKdjExNTpPbkNoYW5nZWQoZnVuY3Rpb24odjMxMikKICAgIF9HLkxPZiA9IHYzMTI7CmVuZCk7CnYxNy5Ub2dnbGVOb0NsaXA6U2V0VmFsdWUodHJ1ZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5TdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5MT2YgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY4NjgsIHY4NjkgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY4Njk6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjg2OS5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHYxMTYgPSB2MTYuUGxheWVyOkFkZFRvZ2dsZSgiVG9nZ2xlV2Fsa29uV2F0ZXIiLCB7CiAgICBUaXRsZSA9ICJXYWxrIE9uIFdhdGVyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gdHJ1ZQp9KTsKdjExNjpPbkNoYW5nZWQoZnVuY3Rpb24odjMxMykKICAgIF9HLldhbGtvbldhdGVyID0gdjMxMzsKZW5kKTsKdjE3LlRvZ2dsZVdhbGtvbldhdGVyOlNldFZhbHVlKHRydWUpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuV2Fsa29uV2F0ZXIgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIldhdGVyQmFzZS1QbGFuZSJdLlNpemUgPSBWZWN0b3IzLm5ldygxMDAwLCAxMTIsIDEwMDApOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiV2F0ZXJCYXNlLVBsYW5lIl0uU2l6ZSA9IFZlY3RvcjMubmV3KDEwMDAsIDgwLCAxMDAwKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2MTE3ID0gdjE2LlBsYXllcjpBZGRUb2dnbGUoIlRvZ2dsZUVuYWJsZVB2cCIsIHsKICAgIFRpdGxlID0gIkVuYWJsZSBQVlAiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjExNzpPbkNoYW5nZWQoZnVuY3Rpb24odjMxNCkKICAgIF9HLkVuYWJsZWRQdlAgPSB2MzE0OwplbmQpOwp2MTcuVG9nZ2xlRW5hYmxlUHZwOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5FbmFibGVkUHZQIHRoZW4KICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5QdnBEaXNhYmxlZC5WaXNpYmxlID09IHRydWUpIHRoZW4KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJFbmFibGVQdnAiKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHYxMTggPSB2MTYuVGVsZXBvcnQ6QWRkU2VjdGlvbigiU2VhIik7CmxvY2FsIHYxMTkgPSB2MTYuVGVsZXBvcnQ6QWRkVG9nZ2xlKCJUb2dnbGVBdXRvU2VhMiIsIHsKICAgIFRpdGxlID0gIkF1dG8gU2VhIDIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjExOTpPbkNoYW5nZWQoZnVuY3Rpb24odjMxNSkKICAgIF9HLkF1dG9fU2VhMiA9IHYzMTU7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvU2VhMjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fU2VhMiB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDAgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlOwogICAgICAgICAgICAgICAgaWYgKCh2ODAwID49IDcwMCkgYW5kIFdvcmxkMSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmICgoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSWNlLkRvb3IuQ2FuQ29sbGlkZSA9PSBmYWxzZSkgYW5kIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5JY2UuRG9vci5UcmFuc3BhcmVuY3kgPT0gMSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzNDYgPSBDRnJhbWUubmV3KDQ4NDkuMjk4ODMsIDUuNjUxMzgxNDksIDcxOS42MTE4NzcpOwogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMzQ2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKCh2MTM0Ni5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMykgb3IgKF9HLkF1dG9fU2VhMiA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjEpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJEcmVzc3Jvc2FRdWVzdFByb2dyZXNzIiwgIkRldGVjdGl2ZSIpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbCgiS2V5Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygxMzQ3LjcxMjQsIDM3LjM3NTE2MDIsIC0gMTMyNS42NDg4KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICgoVmVjdG9yMy5uZXcoMTM0Ny43MTI0LCAzNy4zNzUxNjAyLCAtIDEzMjUuNjQ4OCkgLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDMpIG9yIChfRy5BdXRvX1NlYTIgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5JY2UuRG9vci5DYW5Db2xsaWRlID09IGZhbHNlKSBhbmQgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkljZS5Eb29yLlRyYW5zcGFyZW5jeSA9PSAxKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkljZSBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNjgwLCB2MTY4MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE2ODEuTmFtZSA9PSAiSWNlIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3QgdjE2ODEuSHVtYW5vaWQuSGVhbHRoIDw9IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTY4MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE2ODE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxNjgxLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2xkQ0ZyYW1lU2Vjb25kID0gdjE2ODEuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjgxLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY4MS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY4MS5IZWFkLkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2ODEuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjgxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gT2xkQ0ZyYW1lU2Vjb25kOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTY4MS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19TZWEyIG9yIG5vdCB2MTY4MS5QYXJlbnQgb3IgKHYxNjgxLkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlRyYXZlbERyZXNzcm9zYSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJJY2UgQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiSWNlIEFkbWlyYWwiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoNSwgMTAsIDcpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTIwID0gdjE2LlRlbGVwb3J0OkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1NlYTMiLCB7CiAgICBUaXRsZSA9ICJBdXRvIFNlYSAzIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMjA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMTYpCiAgICBfRy5BdXRvX1NlYTMgPSB2MzE2OwplbmQpOwp2MTcuVG9nZ2xlQXV0b1NlYTM6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvU2VhMyB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmICgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZSA+PSAxNTAwKSBhbmQgV29ybGQyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgX0cuQXV0b0xldmVsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzWydDb21tRl8nXTpJbnZva2VTZXJ2ZXIoIlpRdWVzdFByb2dyZXNzIiwgIkdlbmVyYWwiKSA9PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxOTI2LjMyMjE0MzU1NDcsIDEyLjgxOTg1MTg3NTMwNSwgMTczOC4zMDkyMDQxMDE2KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoQ0ZyYW1lLm5ldygtIDE5MjYuMzIyMTQzNTU0NywgMTIuODE5ODUxODc1MzA1LCAxNzM4LjMwOTIwNDEwMTYpLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiWlF1ZXN0UHJvZ3Jlc3MiLCAiQmVnaW4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS44KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJyaXBfaW5kcmEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE1NzgsIHYxNTc5IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTU3OS5OYW1lID09ICJyaXBfaW5kcmEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9sZENGcmFtZVRoaXJkID0gdjE1NzkuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE1NzkuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1NzkuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBPbGRDRnJhbWVUaGlyZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTc5Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1NzkuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTU3OS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiVHJhdmVsWm91Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIChfRy5BdXRvU2VhMyA9PSBmYWxzZSkgb3IgKHYxNTc5Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE1NzkuUGFyZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJyaXBfaW5kcmEiKSBhbmQgKChDRnJhbWUubmV3KC0gMjY4ODAuOTMzNTkzNzUsIDIyLjg0ODU1NDYxMTIwNiwgNDczLjE4OTUxNDE2MDE2KS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMTAwMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAyNjg4MC45MzM1OTM3NSwgMjIuODQ4NTU0NjExMjA2LCA0NzMuMTg5NTE0MTYwMTYpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwp2MTYuVGVsZXBvcnQ6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlNlYSAxIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJUcmF2ZWxNYWluIik7CiAgICBlbmQKfSk7CnYxNi5UZWxlcG9ydDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiU2VhIDIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlRyYXZlbERyZXNzcm9zYSIpOwogICAgZW5kCn0pOwp2MTYuVGVsZXBvcnQ6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlNlYSAzIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJUcmF2ZWxab3UiKTsKICAgIGVuZAp9KTsKbG9jYWwgdjU2ID0gdjE2LlRlbGVwb3J0OkFkZFNlY3Rpb24oIklzbGFuZCIpOwppZiBTZWExIHRoZW4KICAgIElzbGFuZExpc3QgPSB7CiAgICAgICAgIldpbmRNaWxsIiwKICAgICAgICAiTWFyaW5lIiwKICAgICAgICAiTWlkZGxlIFRvd24iLAogICAgICAgICJKdW5nbGUiLAogICAgICAgICJQaXJhdGUgVmlsbGFnZSIsCiAgICAgICAgIkRlc2VydCIsCiAgICAgICAgIlNub3cgSXNsYW5kIiwKICAgICAgICAiTWFyaW5lRm9yZCIsCiAgICAgICAgIkNvbG9zc2V1bSIsCiAgICAgICAgIlNreSBJc2xhbmQgMSIsCiAgICAgICAgIlNreSBJc2xhbmQgMiIsCiAgICAgICAgIlNreSBJc2xhbmQgMyIsCiAgICAgICAgIlByaXNvbiIsCiAgICAgICAgIk1hZ21hIFZpbGxhZ2UiLAogICAgICAgICJVbmRlciBXYXRlciBJc2xhbmQiLAogICAgICAgICJGb3VudGFpbiBDaXR5IiwKICAgICAgICAiU2hhbmsgUm9vbSIsCiAgICAgICAgIk1vYiBJc2xhbmQiCiAgICB9OwplbHNlaWYgU2VhMiB0aGVuCiAgICBJc2xhbmRMaXN0ID0gewogICAgICAgICJUaGUgQ2FmZSIsCiAgICAgICAgIkZyaXN0IFNwb3QiLAogICAgICAgICJEYXJrIEFyZWEiLAogICAgICAgICJGbGFtaW5nbyBNYW5zaW9uIiwKICAgICAgICAiRmxhbWluZ28gUm9vbSIsCiAgICAgICAgIkdyZWVuIFpvbmUiLAogICAgICAgICJGYWN0b3J5IiwKICAgICAgICAiQ29sb3NzdWltIiwKICAgICAgICAiWm9tYmllIElzbGFuZCIsCiAgICAgICAgIlR3byBTbm93IE1vdW50YWluIiwKICAgICAgICAiUHVuayBIYXphcmQiLAogICAgICAgICJDdXJzZWQgU2hpcCIsCiAgICAgICAgIkljZSBDYXN0bGUiLAogICAgICAgICJGb3Jnb3R0ZW4gSXNsYW5kIiwKICAgICAgICAiVXNzb3AgSXNsYW5kIiwKICAgICAgICAiTWluaSBTa3kgSXNsYW5kIgogICAgfTsKZWxzZWlmIFNlYTMgdGhlbgogICAgSXNsYW5kTGlzdCA9IHsKICAgICAgICAiTWFuc2lvbiIsCiAgICAgICAgIlBvcnQgVG93biIsCiAgICAgICAgIkdyZWF0IFRyZWUiLAogICAgICAgICJDYXN0bGUgT24gVGhlIFNlYSIsCiAgICAgICAgIk1pbmlTa3kiLAogICAgICAgICJIeWRyYSBJc2xhbmQiLAogICAgICAgICJGbG9hdGluZyBUdXJ0bGUiLAogICAgICAgICJIYXVudGVkIENhc3RsZSIsCiAgICAgICAgIkljZSBDcmVhbSBJc2xhbmQiLAogICAgICAgICJQZWFudXQgSXNsYW5kIiwKICAgICAgICAiQ2FrZSBJc2xhbmQiLAogICAgICAgICJDb2NvYSBJc2xhbmQiLAogICAgICAgICJDYW5keSBJc2xhbmQiLAogICAgICAgICJUaWtpIE91dHBvc3QiCiAgICB9OwplbmQKbG9jYWwgdjEyMSA9IHYxNi5UZWxlcG9ydDpBZGREcm9wZG93bigiRHJvcGRvd25Jc2xhbmQiLCB7CiAgICBUaXRsZSA9ICJTZWxlY3QgSXNsYW5kIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSBJc2xhbmRMaXN0LAogICAgTXVsdGkgPSBmYWxzZSwKICAgIERlZmF1bHQgPSAxCn0pOwp2MTIxOlNldFZhbHVlKF9HLlNlbGVjdElzbGFuZCk7CnYxMjE6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMTcpCiAgICBfRy5TZWxlY3RJc2xhbmQgPSB2MzE3OwplbmQpOwp2MTYuVGVsZXBvcnQ6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlRlbGVwb3J0IFRvIElzbGFuZCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiV2luZE1pbGwiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDk3OS43OTg5NTAxOTUzMSwgMTYuNTE2NjEzMDA2NTkyLCAxNDI5LjA0NjYzMDg1OTQpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiTWFyaW5lIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDI1NjYuNDI5Njg3NSwgNi44NTU2NjgwNjc5MzIxLCAyMDQ1LjI1NjEwMzUxNTYpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiTWlkZGxlIFRvd24iKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNjkwLjMzMDgxMDU0Njg4LCAxNS4wOTQyNTE2MzI2OSwgMTU4Mi4yMzgwMzcxMDk0KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkp1bmdsZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxNjEyLjc5NTc3NjM2NzIsIDM2Ljg1MjA4MTI5ODgyOCwgMTQ5LjEyODQzMzIyNzU0KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlBpcmF0ZSBWaWxsYWdlIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDExODEuMzA5MzI2MTcxOSwgNC43NTE0OTA1OTI5NTY1LCAzODAzLjU0NTY1NDI5NjkpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiRGVzZXJ0IikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg5NDQuMTU3ODk3OTQ5MjIsIDIwLjkxOTcyOTIzMjc4OCwgNDM3My4zMDAyOTI5Njg4KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlNub3cgSXNsYW5kIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygxMzQ3LjgwNjc2MjY5NTMsIDEwNC42NjgwNjAzMDI3MywgLSAxMzE5LjczNzA2MDU0NjkpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiTWFyaW5lRm9yZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA0OTE0LjgyMTI4OTA2MjUsIDUwLjk2MzYyNjg2MTU3MiwgNDI4MS4wMjc4MzIwMzEzKSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkNvbG9zc2V1bSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxNDI3LjYyMDM2MTMyODEsIDcuMjg4MTA3ODcyMDA5MywgLSAyNzkyLjc3MjIxNjc5NjkpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiU2t5IElzbGFuZCAxIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDQ4NjkuMTAyNTM5MDYyNSwgNzMzLjQ2MDUxMDI1MzkxLCAtIDI2NjcuMDE4MDY2NDA2MykpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJTa3kgSXNsYW5kIDIiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNDYwNy44MjI3NSwgODcyLjU0MjQ4LCAtIDE2NjcuNTU2ODgpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiU2t5IElzbGFuZCAzIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDc4OTQuNjE3Njc1NzgxMywgNTU0Ny4xNDE2MDE1NjI1LCAtIDM4MC4yOTExOTg3MzA0NykpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJQcmlzb24iKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDQ4NzUuMzMwMDc4MTI1LCA1LjY1MTk4MTgzMDU5NjksIDczNC44NTAyMTk3MjY1NikpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJNYWdtYSBWaWxsYWdlIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDUyNDcuNzE2MzA4NTkzOCwgMTIuODgzOTM0MDIwOTk2LCA4NTA0Ljk2ODc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlVuZGVyIFdhdGVyIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNjExNjMuODUxNTYyNSwgMTEuNjc5Njg3NSwgMTgxOS43ODQxNzk2ODc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkZvdW50YWluIENpdHkiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDUxMjcuMTI4NDE3OTY4OCwgNTkuNTAxMzY1NjYxNjIxLCA0MTA1LjQ0NTgwMDc4MTMpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiU2hhbmsgUm9vbSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxNDQyLjE2NTUzLCAyOS44Nzg4MjYxLCAtIDI4LjM1NDc0NzgpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiTW9iIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAyODUwLjIwMDY4LCA3LjM5MjI0NzY4LCA1MzU0Ljk5MjY4KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlRoZSBDYWZlIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDI4MS45MzcwNzI3NTM5MDYyNSwgMzA2LjEzMDYxNTIzNDM3NSwgNjA5LjI4MDAyOTI5Njg3NSkpOwogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMzgwLjQ3OTI3ODU2NDQ1LCA3Ny4yMjAzOTAzMTk4MjQsIDI1NS44MjU1MDA0ODgyOCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJGcmlzdCBTcG90IikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDExLjMxMTQ1NTcyNjYyNCwgMjkuMjc2NzMzMzk4NDM4LCAyNzcxLjUyMjQ2MDkzNzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiRGFyayBBcmVhIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygzNzgwLjAzMDI3MzQzNzUsIDIyLjY1MjE2NDQ1OTIyOSwgLSAzNDk4LjU4NTkzNzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiRmxhbWluZ28gTWFuc2lvbiIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSAyODEuOTM3MDcyNzUzOTA2MjUsIDMwNi4xMzA2MTUyMzQzNzUsIDYwOS4yODAwMjkyOTY4NzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiRmxhbWluZ28gUm9vbSIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoMjI4NC45MTIxMDkzNzUsIDE1LjE1MjAzNDc1OTUyMTQ4NCwgOTA1LjQ4MjkxMDE1NjI1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkdyZWVuIFpvbmUiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMjQ0OC41MzAwMjkyOTY5LCA3My4wMTYxMDU2NTE4NTUsIC0gMzIxMC42MzA2MTUyMzQ0KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkZhY3RvcnkiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDQyNC4xMjY5ODM2NDI1OCwgMjExLjE2MTcxMjY0NjQ4LCAtIDQyNy41NDA0OTY4MjYxNykpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJDb2xvc3N1aW0iKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTUwMy42MjI0MzY1MjM0LCAyMTkuNzk1NjIzNzc5MywgMTM2OS4zMTAxODA2NjQxKSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlpvbWJpZSBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNTYyMi4wMzMyMDMxMjUsIDQ5Mi4xOTYwNDQ5MjE4OCwgLSA3ODEuNzg1NTIyNDYwOTQpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiVHdvIFNub3cgTW91bnRhaW4iKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDc1My4xNDI4ODMzMDA3OCwgNDA4LjIzNTU5NTcwMzEzLCAtIDUyNzQuNjE0NzQ2MDkzOCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJQdW5rIEhhemFyZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA2MTI3LjY1NDI5Njg3NSwgMTUuOTUxNzYyMTk5NDAyLCAtIDUwNDAuMjg2MTMyODEyNSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJDdXJzZWQgU2hpcCIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoOTIzLjQwMTk3NzUzOTA2LCAxMjUuMDU3MTI4OTA2MjUsIDMyODg1Ljg3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJJY2UgQ2FzdGxlIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg2MTQ4LjQxMTYyMTA5MzgsIDI5NC4zODY4NzEzMzc4OSwgLSA2NzQxLjExNjY5OTIxODgpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiRm9yZ290dGVuIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAzMDMyLjc2NDE2MDE1NjMsIDMxNy44OTY3Mjg1MTU2MywgLSAxMDA3NS4zNzMwNDY4NzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiVXNzb3AgSXNsYW5kIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg0ODE2Ljg2MTgxNjQwNjMsIDguNDU5OTg4NTk0MDU1MiwgMjg2My44MTk1ODAwNzgxKSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIk1pbmkgU2t5IElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAyODguNzQwNjAwNTg1OTQsIDQ5MzI2LjMxNjQwNjI1LCAtIDM1MjQ4LjU5Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkdyZWF0IFRyZWUiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDI2ODEuMjczNjgxNjQwNiwgMTY4Mi44MDkyMDQxMDE2LCAtIDcxOTAuOTg1MzUxNTYyNSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJDYXN0bGUgT24gVGhlIFNlYSIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA1MDc1LjUwOTI3NzM0Mzc1LCAzMTQuNTE1NTAyOTI5Njg3NSwgLSAzMTUwLjAyMjQ2MDkzNzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiTWluaVNreSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAyNjAuNjU1NTc4NjEzMjgsIDQ5MzI1LjgwNDY4NzUsIC0gMzUyNTMuNTcwMzEyNSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJQb3J0IFRvd24iKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMjkwLjczNzY3MDg5ODQzNzUsIDYuNzI5OTUyODEyMTk0ODI0LCA1MzQzLjU1MzcxMDkzNzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiSHlkcmEgSXNsYW5kIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg1NjYxLjUzMjIyNjU2MjUsIDEwMTMuMDkwNzU5Mjc3MzQzOCwgLSAzMzQuOTY0OTk2MzM3ODkwNikpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJGbG9hdGluZyBUdXJ0bGUiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTMyNzQuNTI4MzIwMzEzLCA1MzEuODIwNzM5NzQ2MDksIC0gNzU3OS4yMjI2NTYyNSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJNYW5zaW9uIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDEyNDY4LjUzODA4NTkzNzUsIDM3NS4wMDk0Mjk5MzE2NDA2LCAtIDc1NTQuNjI1NDg4MjgxMjUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiQ2FzdGxlIE9uIFRoZSBTZWEiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNTA3NS41MDkyNzczNDM3NSwgMzE0LjUxNTUwMjkyOTY4NzUsIC0gMzE1MC4wMjI0NjA5Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkhhdW50ZWQgQ2FzdGxlIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDk1MTUuMzcyMDcwMzEyNSwgMTY0LjAwNjI0MDg0NDczLCA1Nzg2LjA2MTAzNTE1NjIpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiSWNlIENyZWFtIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA5MDIuNTY4MTc2MjY5NTMsIDc5LjkzMjA0NDk4MjkxLCAtIDEwOTg4Ljg0NzY1NjI1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlBlYW51dCBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMjA2Mi43NDc1NTg1OTM4LCA1MC40NzM4OTIyMTE5MTQsIC0gMTAyMzIuNTY4MzU5Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkNha2UgSXNsYW5kIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDE4ODQuNzc0NzgwMjczNDM3NSwgMTkuMzI3NTI2MDkyNTI5Mjk3LCAtIDExNjY2Ljg5NzQ2MDkzNzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiQ29jb2EgSXNsYW5kIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg4Ny45NDI3NjQyODIyMjY1NiwgNzMuNTU0NTEyMDIzOTI1NzgsIC0gMTIzMTkuNDY0ODQzNzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiQ2FuZHkgSXNsYW5kIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDEwMTQuNDI0MTk0MzM1OTM3NSwgMTQ5LjExMDY4NzI1NTg1OTM4LCAtIDE0NTU1Ljk2Mjg5MDYyNSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJUaWtpIE91dHBvc3QiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTY1NDIuNDQ3MjY1NjI1LCA1NS42ODYzMjg4ODc5Mzk0NSwgMTA0NC40MTY1MDM5MDYyNSkpOwogICAgICAgIGVuZAogICAgZW5kCn0pOwp2MTYuVGVsZXBvcnQ6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlN0b3AgVGVsZXBvcnQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIENhbmNlbFR3ZWVuKCk7CiAgICBlbmQKfSk7CnYxNi5WaXN1YWw6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkZha2UiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHYzMTggPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllcjsKICAgICAgICBsb2NhbCB2MzE5ID0gcmVxdWlyZShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuTm90aWZpY2F0aW9uKTsKICAgICAgICBsb2NhbCB2MzIwID0gdjMxODpXYWl0Rm9yQ2hpbGQoIkRhdGEiKTsKICAgICAgICBsb2NhbCB2MzIxID0gcmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlOldhaXRGb3JDaGlsZCgiRVhQRnVuY3Rpb24iKSk7CiAgICAgICAgbG9jYWwgdjMyMiA9IHJlcXVpcmUoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkVmZmVjdC5Db250YWluZXIuTGV2ZWxVcCk7CiAgICAgICAgbG9jYWwgdjMyMyA9IHJlcXVpcmUoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlV0aWwuU291bmQpOwogICAgICAgIGxvY2FsIHYzMjQgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuVXRpbC5Tb3VuZC5TdG9yYWdlLk90aGVyOkZpbmRGaXJzdENoaWxkKCJMZXZlbFVwX1Byb3h5Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlV0aWwuU291bmQuU3RvcmFnZS5PdGhlcjpGaW5kRmlyc3RDaGlsZCgiTGV2ZWxVcCIpIDsKICAgICAgICBmdW5jdGlvbiB2MTI5KHY1NDMpCiAgICAgICAgICAgIGxvY2FsIHY1NDQgPSB2NTQzOwogICAgICAgICAgICB3aGlsZSB0cnVlIGRvCiAgICAgICAgICAgICAgICBsb2NhbCB2NjQ5LCB2NjUwID0gc3RyaW5nLmdzdWIodjU0NCwgIl4oLT8lZCspKCVkJWQlZCkiLCAiJTEsJTIiKTsKICAgICAgICAgICAgICAgIHY1NDQgPSB2NjQ5OwogICAgICAgICAgICAgICAgaWYgKHY2NTAgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICByZXR1cm4gdjU0NDsKICAgICAgICBlbmQKICAgICAgICB2MzE5Lm5ldygiPENvbG9yPVllbGxvdz5RVUVTVCBDT01QTEVURUQhPENvbG9yPS8+Iik6RGlzcGxheSgpOwogICAgICAgIHYzMTkubmV3KCJFYXJuZWQ8Q29sb3I9WWVsbG93PjksOTk5LDk5OSw5OTksOTk5IEV4cC48Q29sb3I9Lz4oK05vbmUpIik6RGlzcGxheSgpOwogICAgICAgIHYzMTkubmV3KCJFYXJuZWQ8Q29sb3I9R3JlZW4+JDksOTk5LDk5OSw5OTksOTk5PENvbG9yPS8+Iik6RGlzcGxheSgpOwogICAgICAgIHYzMTguRGF0YS5FeHAuVmFsdWUgPSA5OTk5OTk5OTk5OTk7CiAgICAgICAgdjMxOC5EYXRhLkJlbGkuVmFsdWUgPSB2MzE4LkRhdGEuQmVsaS5WYWx1ZSArIDk5OTk5OTk5OTk5OSA7CiAgICAgICAgZGVsYXkgPSAwOwogICAgICAgIGNvdW50ID0gMDsKICAgICAgICB3aGlsZSAodjMxOC5EYXRhLkV4cC5WYWx1ZSAtIHYzMjEodjMyMC5MZXZlbC5WYWx1ZSkpID4gMCBkbwogICAgICAgICAgICB2MzE4LkRhdGEuRXhwLlZhbHVlID0gdjMxOC5EYXRhLkV4cC5WYWx1ZSAtIHYzMjEodjMyMC5MZXZlbC5WYWx1ZSkgOwogICAgICAgICAgICB2MzE4LkRhdGEuTGV2ZWwuVmFsdWUgPSB2MzE4LkRhdGEuTGV2ZWwuVmFsdWUgKyAxIDsKICAgICAgICAgICAgdjMxOC5EYXRhLlBvaW50cy5WYWx1ZSA9IHYzMTguRGF0YS5Qb2ludHMuVmFsdWUgKyAzIDsKICAgICAgICAgICAgdjMyMih7CiAgICAgICAgICAgICAgICB2MzE4CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2MzIzLlBsYXkodjMyMywgdjMyNC5WYWx1ZSk7CiAgICAgICAgICAgIHYzMTkubmV3KCI8Q29sb3I9R3JlZW4+TEVWRUwgVVAhPENvbG9yPS8+KCIgLi4gdjMxOC5EYXRhLkxldmVsLlZhbHVlIC4uICIpIik6RGlzcGxheSgpOwogICAgICAgICAgICBjb3VudCA9IGNvdW50ICsgMSA7CiAgICAgICAgICAgIGlmIChjb3VudCA+PSA1KSB0aGVuCiAgICAgICAgICAgICAgICBkZWxheSA9IHRpY2soKTsKICAgICAgICAgICAgICAgIGNvdW50ID0gMDsKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKfSk7CnYxNi5WaXN1YWw6QWRkSW5wdXQoIklucHV0X0xldmVsIiwgewogICAgVGl0bGUgPSAiTGV2ZWwiLAogICAgRGVmYXVsdCA9ICIiLAogICAgUGxhY2Vob2xkZXIgPSAiLi4uIiwKICAgIE51bWVyaWMgPSBmYWxzZSwKICAgIEZpbmlzaGVkID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYzMjcpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIilbJ0xvY2FsUGxheWVyJ10uRGF0YS5MZXZlbC5WYWx1ZSA9IHRvbnVtYmVyKHYzMjcpOwogICAgZW5kCn0pOwp2MTYuVmlzdWFsOkFkZElucHV0KCJJbnB1dF9FWFAiLCB7CiAgICBUaXRsZSA9ICJFWFAiLAogICAgRGVmYXVsdCA9ICIiLAogICAgUGxhY2Vob2xkZXIgPSAiLi4uIiwKICAgIE51bWVyaWMgPSBmYWxzZSwKICAgIEZpbmlzaGVkID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYzMjkpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIilbJ0xvY2FsUGxheWVyJ10uRGF0YS5FeHAuVmFsdWUgPSB0b251bWJlcih2MzI5KTsKICAgIGVuZAp9KTsKdjE2LlZpc3VhbDpBZGRJbnB1dCgiSW5wdXRfQmVsaSIsIHsKICAgIFRpdGxlID0gIkJlbGkiLAogICAgRGVmYXVsdCA9ICIiLAogICAgUGxhY2Vob2xkZXIgPSAiLi4uIiwKICAgIE51bWVyaWMgPSBmYWxzZSwKICAgIEZpbmlzaGVkID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYzMzEpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIilbJ0xvY2FsUGxheWVyJ10uRGF0YS5CZWxpLlZhbHVlID0gdG9udW1iZXIodjMzMSk7CiAgICBlbmQKfSk7CnYxNi5WaXN1YWw6QWRkSW5wdXQoIklucHV0X0ZyYWdtZW50cyIsIHsKICAgIFRpdGxlID0gIkZyYWdtZW50cyIsCiAgICBEZWZhdWx0ID0gIiIsCiAgICBQbGFjZWhvbGRlciA9ICIuLi4iLAogICAgTnVtZXJpYyA9IGZhbHNlLAogICAgRmluaXNoZWQgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odjMzMykKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKVsnTG9jYWxQbGF5ZXInXS5EYXRhLkZyYWdtZW50cy5WYWx1ZSA9IHRvbnVtYmVyKHYzMzMpOwogICAgZW5kCn0pOwpsb2NhbCB2MTIyID0gZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgiUmVtb3RlcyIpLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkdldEZydWl0cyIpOwpUYWJsZV9EZXZpbEZydWl0U25pcGVyID0ge307ClNob3BEZXZpbFNlbGwgPSB7fTsKZm9yIHYzMzUsIHYzMzYgaW4gbmV4dCwgdjEyMiBkbwogICAgdGFibGUuaW5zZXJ0KFRhYmxlX0RldmlsRnJ1aXRTbmlwZXIsIHYzMzYuTmFtZSk7CiAgICBpZiB2MzM2Lk9uU2FsZSB0aGVuCiAgICAgICAgdGFibGUuaW5zZXJ0KFNob3BEZXZpbFNlbGwsIHYzMzYuTmFtZSk7CiAgICBlbmQKZW5kCl9HLlNlbGVjdEZydWl0ID0gIkRyYWdvbi1EcmFnb24iOwpfRy5QZXJtYW5lbnRGcnVpdCA9ICJEcmFnb24tRHJhZ29uIjsKX0cuQXV0b0J1eUZydWl0U25pcGVyID0gZmFsc2U7Cl9HLkF1dG9Td2l0Y2hQZXJtYW5lbnRGcnVpdCA9IGZhbHNlOwpsb2NhbCB2MTIzID0gdjE2LkZydWl0OkFkZERyb3Bkb3duKCJEcm9wZG93bkZydWl0IiwgewogICAgVGl0bGUgPSAiU2VsZWN0IEZydWl0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSBUYWJsZV9EZXZpbEZydWl0U25pcGVyLAogICAgTXVsdGkgPSBmYWxzZSwKICAgIERlZmF1bHQgPSAxCn0pOwp2MTIzOlNldFZhbHVlKF9HLlNlbGVjdEZydWl0KTsKdjEyMzpPbkNoYW5nZWQoZnVuY3Rpb24odjMzNykKICAgIF9HLlNlbGVjdEZydWl0ID0gdjMzNzsKZW5kKTsKbG9jYWwgdjExMSA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZUZydWl0IiwgewogICAgVGl0bGUgPSAiQnV5IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMTE6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMzgpCiAgICBpZiB2MzM4IHRoZW4KICAgICAgICBfRy5BdXRvQnV5RnJ1aXRTbmlwZXIgPSB0cnVlOwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiR2V0RnJ1aXRzIik7CiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlB1cmNoYXNlUmF3RnJ1aXQiLCBfRy5TZWxlY3RGcnVpdCwgZmFsc2UpOwogICAgICAgIGVuZCk7CiAgICAgICAgX0cuQXV0b0J1eUZydWl0U25pcGVyID0gZmFsc2U7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZUZydWl0OlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjEyNCA9IHYxNi5GcnVpdDpBZGREcm9wZG93bigiRHJvcGRvd25QZXJtYW5lbnRGcnVpdCIsIHsKICAgIFRpdGxlID0gIlNlbGVjdCBQZXJtYW5lbnQgRnJ1aXQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIFZhbHVlcyA9IFRhYmxlX0RldmlsRnJ1aXRTbmlwZXIsCiAgICBNdWx0aSA9IGZhbHNlLAogICAgRGVmYXVsdCA9IDEKfSk7CnYxMjQ6U2V0VmFsdWUoX0cuUGVybWFuZW50RnJ1aXQpOwp2MTI0Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzM5KQogICAgX0cuUGVybWFuZW50RnJ1aXQgPSB2MzM5OwplbmQpOwpsb2NhbCB2MTI1ID0gdjE2LkZydWl0OkFkZFRvZ2dsZSgiVG9nZ2xlUGVybWFuZW50RnJ1aXQiLCB7CiAgICBUaXRsZSA9ICJVc2UgUGVybWFuZW50IEZydWl0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMjU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNDApCiAgICBpZiB2MzQwIHRoZW4KICAgICAgICBfRy5BdXRvU3dpdGNoUGVybWFuZW50RnJ1aXQgPSB0cnVlOwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgbG9jYWwgdjc0MiA9IHsKICAgICAgICAgICAgICAgIFsxXSA9ICJTd2l0Y2hGcnVpdCIsCiAgICAgICAgICAgICAgICBbMl0gPSBfRy5QZXJtYW5lbnRGcnVpdAogICAgICAgICAgICB9OwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NzQyKSk7CiAgICAgICAgZW5kKTsKICAgICAgICBfRy5BdXRvU3dpdGNoUGVybWFuZW50RnJ1aXQgPSBmYWxzZTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlUGVybWFuZW50RnJ1aXQ6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2MTI2ID0gdjE2LkZydWl0OkFkZFRvZ2dsZSgiVG9nZ2xlU3RvcmUiLCB7CiAgICBUaXRsZSA9ICJTdG9yZSBGcnVpdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTI2Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzQxKQogICAgX0cuQXV0b1N0b3JlRnJ1aXQgPSB2MzQxOwplbmQpOwp2MTcuVG9nZ2xlU3RvcmU6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9TdG9yZUZydWl0IHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgX0cuQXV0b1N0b3JlRnJ1aXQgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkJvbWIgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQm9tYiBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiQm9tYi1Cb21iIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkJvbWIgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU3Bpa2UgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3Bpa2UgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlNwaWtlLVNwaWtlIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwaWtlIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkNob3AgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQ2hvcCBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiQ2hvcC1DaG9wIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkJsYWRlIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNwcmluZyBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcHJpbmcgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlNwcmluZy1TcHJpbmciLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3ByaW5nIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlJvY2tldCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJLaWxvIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJSb2NrZXQtUm9ja2V0IiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIktpbG8gRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU21va2UgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU21va2UgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlNtb2tlLVNtb2tlIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNtb2tlIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNwaW4gRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3BpbiBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiU3Bpbi1TcGluIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwaW4gRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRmxhbWUgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmxhbWUgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkZsYW1lLUZsYW1lIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZsYW1lIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZhbGNvbiBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJGYWxjb24gRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkZhbGNvbiIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJhbGNvbiBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJJY2UgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiSWNlIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJJY2UtSWNlIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkljZSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTYW5kIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNhbmQgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlNhbmQtU2FuZCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTYW5kIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkRhcmsgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRGFyayBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiRGFyay1EYXJrIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRhcmsgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiR2hvc3QgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUmV2aXZlIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJHaG9zdC1HaG9zdCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJSZXZpdmUgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRGlhbW9uZCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEaWFtb25kIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJEaWFtb25kLURpYW1vbmQiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRGlhbW9uZCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJMaWdodCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJMaWdodCBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiTGlnaHQtTGlnaHQiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTGlnaHQgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTG92ZSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJMb3ZlIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJMb3ZlLUxvdmUiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTG92ZSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJSdWJiZXIgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUnViYmVyIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJSdWJiZXItUnViYmVyIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlJ1YmJlciBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJCYXJyaWVyIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkJhcnJpZXIgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkJhcnJpZXItQmFycmllciIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCYXJyaWVyIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIk1hZ21hIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIk1hZ21hIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJNYWdtYS1NYWdtYSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJNYWdtYSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJQb3J0YWwgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUG9ydGFsIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJEb29yLURvb3IiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUG9ydGFsIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlF1YWtlIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlF1YWtlIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJRdWFrZS1RdWFrZSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJRdWFrZSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJCdWRkaGEgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQnVkZGhhIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnVkZGhhIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkJ1ZGRoYSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTcGlkZXIgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3BpZGVyIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJTcGlkZXItU3BpZGVyIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwaWRlciBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJCaXJkOiBQaG9lbml4IEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlBob2VuaXggRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlBob2VuaXgiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUGhvZW5peCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJSdW1ibGUgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUnVtYmxlIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJSdW1ibGUtUnVtYmxlIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlJ1bWJsZSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJQYWluIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlBhaW4gRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlBhaW4tUGFpbiIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQYWluIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkdyYXZpdHkgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiR3Jhdml0eSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiR3Jhdml0eS1HcmF2aXR5IiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkdyYXZpdHkgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRG91Z2ggRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRG91Z2ggRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkRvdWdoLURvdWdoIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRvdWdoIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNoYWRvdyBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTaGFkb3cgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlNoYWRvdy1TaGFkb3ciLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU2hhZG93IEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlZlbm9tIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlZlbm9tIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJWZW5vbS1WZW5vbSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJWZW5vbSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJDb250cm9sIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkNvbnRyb2wgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkNvbnRyb2wtQ29udHJvbCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJDb250cm9sIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNwaXJpdCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcGlyaXQgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlNvdWwtU291bCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcGlyaXQgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRHJhZ29uIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRyYWdvbiBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiRHJhZ29uLURyYWdvbiIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkxlb3BhcmQgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTGVvcGFyZCBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkxlb3BhcmQtTGVvcGFyZCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJMZW9wYXJkIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgICAgIHdhaXQoKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2MTI3ID0gdjE2LkZydWl0OkFkZFRvZ2dsZSgiVG9nZ2xlUmFuZG9tRnJ1aXQiLCB7CiAgICBUaXRsZSA9ICJSYW5kb20gRnJ1aXQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEyNzpPbkNoYW5nZWQoZnVuY3Rpb24odjM0MikKICAgIF9HLlJhbmRvbV9BdXRvID0gdjM0MjsKZW5kKTsKdjE3LlRvZ2dsZVJhbmRvbUZydWl0OlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5SYW5kb21fQXV0byB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDb3VzaW4iLCAiQnV5Iik7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjEyOCA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZUNvbGxlY3RUUCIsIHsKICAgIFRpdGxlID0gIkdldCBGcnVpdCAoVFApIiwKICAgIERlc2NyaXB0aW9uID0gIlJpc2siLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTI4Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzQzKQogICAgX0cuQ29sbGVjdEZydWl0VFAgPSB2MzQzOwplbmQpOwp2MTcuVG9nZ2xlQ29sbGVjdFRQOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQ29sbGVjdEZydWl0VFAgdGhlbgogICAgICAgICAgICBmb3IgdjgwMSwgdjgwMiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjgwMi5OYW1lLCAiRnJ1aXQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHY4MDIuSGFuZGxlLkNGcmFtZTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTI5ID0gdjE2LkZydWl0OkFkZFRvZ2dsZSgiVG9nZ2xlQ29sbGVjdCIsIHsKICAgIFRpdGxlID0gIkdldCBGcnVpdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTI5Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzQ0KQogICAgX0cuVHdlZW5mcnVpdCA9IHYzNDQ7CmVuZCk7CnYxNy5Ub2dnbGVDb2xsZWN0OlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuVHdlZW5mcnVpdCB0aGVuCiAgICAgICAgICAgIGZvciB2ODAzLCB2ODA0IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2ODA0Lk5hbWUsICJGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2ODA0LkhhbmRsZS5DRnJhbWUpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY1NiA9IHYxNi5GcnVpdDpBZGRTZWN0aW9uKCJFc3AiKTsKbG9jYWwgdjEzMCA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZUVzcFBsYXllciIsIHsKICAgIFRpdGxlID0gIlBsYXllciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTMwOk9uQ2hhbmdlZChmdW5jdGlvbih2MzQ1KQogICAgRVNQUGxheWVyID0gdjM0NTsKICAgIFVwZGF0ZVBsYXllckNoYW1zKCk7CmVuZCk7CnYxNy5Ub2dnbGVFc3BQbGF5ZXI6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2MTMxID0gdjE2LkZydWl0OkFkZFRvZ2dsZSgiVG9nZ2xlRXNwRnJ1aXQiLCB7CiAgICBUaXRsZSA9ICJGcnVpdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTMxOk9uQ2hhbmdlZChmdW5jdGlvbih2MzQ2KQogICAgRGV2aWxGcnVpdEVTUCA9IHYzNDY7CiAgICB3aGlsZSBEZXZpbEZydWl0RVNQIGRvCiAgICAgICAgd2FpdCgpOwogICAgICAgIFVwZGF0ZURldmlsQ2hhbXMoKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlRXNwRnJ1aXQ6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2MTMyID0gdjE2LkZydWl0OkFkZFRvZ2dsZSgiVG9nZ2xlRXNwSXNsYW5kIiwgewogICAgVGl0bGUgPSAiSXNsYW5kIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMzI6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNDcpCiAgICBJc2xhbmRFU1AgPSB2MzQ3OwogICAgd2hpbGUgSXNsYW5kRVNQIGRvCiAgICAgICAgd2FpdCgpOwogICAgICAgIFVwZGF0ZUlzbGFuZEVTUCgpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVFc3BJc2xhbmQ6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2MTMzID0gdjE2LkZydWl0OkFkZFRvZ2dsZSgiVG9nZ2xlRXNwRmxvd2VyIiwgewogICAgVGl0bGUgPSAiRmxvd2VyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMzM6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNDgpCiAgICBGbG93ZXJFU1AgPSB2MzQ4OwogICAgVXBkYXRlRmxvd2VyQ2hhbXMoKTsKZW5kKTsKdjE3LlRvZ2dsZUVzcEZsb3dlcjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIEZsb3dlckVTUCB0aGVuCiAgICAgICAgICAgIFVwZGF0ZUZsb3dlckNoYW1zKCk7CiAgICAgICAgZW5kCiAgICAgICAgaWYgRGV2aWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgIFVwZGF0ZURldmlsQ2hhbXMoKTsKICAgICAgICBlbmQKICAgICAgICBpZiBDaGVzdEVTUCB0aGVuCiAgICAgICAgICAgIFVwZGF0ZUNoZXN0Q2hhbXMoKTsKICAgICAgICBlbmQKICAgICAgICBpZiBFU1BQbGF5ZXIgdGhlbgogICAgICAgICAgICBVcGRhdGVQbGF5ZXJDaGFtcygpOwogICAgICAgIGVuZAogICAgICAgIGlmIFJlYWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgIFVwZGF0ZVJlYWxGcnVpdENoYW1zKCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjEzNCA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZUVzcFJlYWxGcnVpdCIsIHsKICAgIFRpdGxlID0gIlJlYWwgRnJ1aXQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEzNDpPbkNoYW5nZWQoZnVuY3Rpb24odjM0OSkKICAgIFJlYWxGcnVpdEVzcCA9IHYzNDk7CiAgICB3aGlsZSBSZWFsRnJ1aXRFc3AgZG8KICAgICAgICB3YWl0KCk7CiAgICAgICAgVXBkYXRlUmVhbEZydWl0RXNwKCk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZUVzcFJlYWxGcnVpdDpTZXRWYWx1ZShmYWxzZSk7CmZ1bmN0aW9uIFVwZGF0ZVJlYWxGcnVpdEVzcCgpCiAgICBmb3IgdjU0OCwgdjU0OSBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5BcHBsZVNwYXduZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NTQ5OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgUmVhbEZydWl0RXNwIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2NTQ5LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwNjYgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY1NDkuSGFuZGxlKTsKICAgICAgICAgICAgICAgICAgICB2MTA2Ni5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgdjEwNjYuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMDY2LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwNjYuQWRvcm5lZSA9IHY1NDkuSGFuZGxlOwogICAgICAgICAgICAgICAgICAgIHYxMDY2LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTA3MyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEwNjYpOwogICAgICAgICAgICAgICAgICAgIHYxMDczLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgdjEwNzMuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICB2MTA3My5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdjEwNzMuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTA3My5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgIHYxMDczLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgIHYxMDczLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgdjEwNzMuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwNzMuVGV4dCA9IHY1NDkuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjU0OS5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NTQ5LkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NTQ5Lk5hbWUgLi4gIiAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NTQ5LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NTQ5LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NTQ5LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBmb3IgdjU1MCwgdjU1MSBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5QaW5lYXBwbGVTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjU1MTpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIGlmIFJlYWxGcnVpdEVzcCB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgdjU1MS5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDg1ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NTUxLkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgdjEwODUuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHYxMDg1LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTA4NS5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgIHYxMDg1LkFkb3JuZWUgPSB2NTUxLkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2MTA4NS5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwOTIgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMDg1KTsKICAgICAgICAgICAgICAgICAgICB2MTA5Mi5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgIHYxMDkyLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgdjEwOTIuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHYxMDkyLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwOTIuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICB2MTA5Mi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2MTA5Mi5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgIHYxMDkyLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDE3NCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwOTIuVGV4dCA9IHY1NTEuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjU1MS5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NTUxLkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NTUxLk5hbWUgLi4gIiAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NTUxLkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NTUxLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NTUxLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBmb3IgdjU1MiwgdjU1MyBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5CYW5hbmFTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjU1MzpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIGlmIFJlYWxGcnVpdEVzcCB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgdjU1My5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTA0ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NTUzLkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgdjExMDQuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHYxMTA0LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTEwNC5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgIHYxMTA0LkFkb3JuZWUgPSB2NTUzLkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2MTEwNC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExMTEgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMTA0KTsKICAgICAgICAgICAgICAgICAgICB2MTExMS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgIHYxMTExLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgdjExMTEuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHYxMTExLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjExMTEuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICB2MTExMS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2MTExMS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgIHYxMTExLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTEsIDI1NSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjExMTEuVGV4dCA9IHY1NTMuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjU1My5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NTUzLkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NTUzLk5hbWUgLi4gIiAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NTUzLkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NTUzLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NTUzLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZApsb2NhbCB2MTM1ID0gdjE2LkZydWl0OkFkZFRvZ2dsZSgiVG9nZ2xlSXNsYW5kTWlyYWdlRXNwIiwgewogICAgVGl0bGUgPSAiTWlyYWdlIElzbGFuZCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTM1Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzUwKQogICAgSXNsYW5kTWlyYWdlRXNwID0gdjM1MDsKICAgIHdoaWxlIElzbGFuZE1pcmFnZUVzcCBkbwogICAgICAgIHdhaXQoKTsKICAgICAgICBVcGRhdGVJc2xhbmRNaXJhZ2VFc3AoKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlSXNsYW5kTWlyYWdlRXNwOlNldFZhbHVlKGZhbHNlKTsKZnVuY3Rpb24gaXNuaWwodjM1MSkKICAgIHJldHVybiB2MzUxID09IG5pbCA7CmVuZApsb2NhbCBmdW5jdGlvbiB2MjAodjM1MikKICAgIHJldHVybiBtYXRoLmZsb29yKHRvbnVtYmVyKHYzNTIpICsgMC41KTsKZW5kCk51bWJlciA9IG1hdGgucmFuZG9tKDEsIDEwMDAwMDApOwpmdW5jdGlvbiBVcGRhdGVJc2xhbmRNaXJhZ2VFc3AoKQogICAgZm9yIHY1NTQsIHY1NTUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uTG9jYXRpb25zOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBNaXJhZ2VJc2xhbmRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY1NTUuTmFtZSA9PSAiTWlyYWdlIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjU1NTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzNDcgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY1NTUpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTM0Ny5OYW1lID0gIk5hbWVFc3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTM0Ny5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQ3LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQ3LkFkb3JuZWUgPSB2NTU1OwogICAgICAgICAgICAgICAgICAgICAgICB2MTM0Ny5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzUzID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTM0Nyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzUzLkZvbnQgPSBFbnVtLkZvbnQuQ29kZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNTMuRm9udFNpemUgPSBFbnVtLkZvbnRTaXplLlNpemUxNDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNTMuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTM1My5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTM1My5UZXh0WUFsaWdubWVudCA9IEVudW0uVGV4dFlBbGlnbm1lbnQuVG9wOwogICAgICAgICAgICAgICAgICAgICAgICB2MTM1My5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNTMuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNTMuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDgwLCAyNDUsIDI0NSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NTU1WydOYW1lRXNwJ10uVGV4dExhYmVsLlRleHQgPSB2NTU1Lk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjU1NS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBNIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY1NTU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICB2NTU1OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApsb2NhbCB2MTM2ID0gewogICAgIkZsYW1lIiwKICAgICJJY2UiLAogICAgIlF1YWtlIiwKICAgICJMaWdodCIsCiAgICAiRGFyayIsCiAgICAiU3BpZGVyIiwKICAgICJSdW1ibGUiLAogICAgIk1hZ21hIiwKICAgICJCdWRkaGEiLAogICAgIlNhbmQiLAogICAgIlBob2VuaXgiLAogICAgIkRvdWdoIgp9Owpsb2NhbCB2MTM3ID0gdjE2LlJhaWQ6QWRkRHJvcGRvd24oIkRyb3Bkb3duUmFpZCIsIHsKICAgIFRpdGxlID0gIlNlbGVjdCBDaGlwIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSB2MTM2LAogICAgTXVsdGkgPSBmYWxzZSwKICAgIERlZmF1bHQgPSAxCn0pOwp2MTM3OlNldFZhbHVlKFNlbGVjdENoaXApOwp2MTM3Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzUzKQogICAgU2VsZWN0Q2hpcCA9IHYzNTM7CmVuZCk7CmxvY2FsIHYxMzggPSB2MTYuUmFpZDpBZGRUb2dnbGUoIlRvZ2dsZUJ1eSIsIHsKICAgIFRpdGxlID0gIkJ1eSBDaGlwIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMzg6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNTQpCiAgICBfRy5BdXRvX0J1eV9DaGlwc19EdW5nZW9uID0gdjM1NDsKZW5kKTsKdjE3LlRvZ2dsZUJ1eTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fQnV5X0NoaXBzX0R1bmdlb24gdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCB2ODA1ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJSYWlkc05wYyIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIlNlbGVjdCIsCiAgICAgICAgICAgICAgICAgICAgWzNdID0gU2VsZWN0Q2hpcAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDUpKTsKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTM5ID0gdjE2LlJhaWQ6QWRkVG9nZ2xlKCJUb2dnbGVTdGFydCIsIHsKICAgIFRpdGxlID0gIkF1dG8gU3RhcnQgUmFpZCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTM5Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzU1KQogICAgX0cuQXV0b19TdGFydFJhaWQgPSB2MzU1OwplbmQpOwp2MTcuVG9nZ2xlU3RhcnQ6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9fU3RhcnRSYWlkIHRoZW4KICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKVsnTG9jYWxQbGF5ZXInXS5QbGF5ZXJHdWkuTWFpbi5UaW1lci5WaXNpYmxlID09IGZhbHNlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWydfV29ybGRPcmlnaW4nXS5Mb2NhdGlvbnM6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCAxIikgYW5kIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3BlY2lhbCBNaWNyb2NoaXAiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNwZWNpYWwgTWljcm9jaGlwIikpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIFNlYTIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA2NDM4LjczNTM1LCAyNTAuNjQ1MzU1LCAtIDQ1MDEuNTA2ODQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNTQ3ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsxXSA9ICJTZXRTcGF3blBvaW50IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHYxNTQ3KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5DaXJjbGVJc2xhbmQuUmFpZFN1bW1vbjIuQnV0dG9uLk1haW4uQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBTZWEzIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNTA3NS41MDkyNzczNDM3NSwgMzE0LjUxNTUwMjkyOTY4NzUsIC0gMzE1MC4wMjI0NjA5Mzc1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDUwMTcuNDA4NjksIDMxNC44NDQwNTUsIC0gMjgyMy4wMTI3LCAtIDAuOTI1NzQzODE4LCA0LjQ4MjE3NWUtOCwgLSAwLjM3ODE1MTIzOCwgNC41NTUwMzE1ZS05LCAxLCAxLjA3Mzc3NTZlLTcsIDAuMzc4MTUxMjM4LCA5Ljc2ODE2MmUtOCwgLSAwLjkyNTc0MzgxOCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE2NTYgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWzFdID0gIlNldFNwYXduUG9pbnQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjE2NTYpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJCb2F0IENhc3RsZSJdLlJhaWRTdW1tb24yLkJ1dHRvbi5NYWluLkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHYxNDAgPSB2MTYuUmFpZDpBZGRUb2dnbGUoIlRvZ2dsZU5leHRJc2xhbmQiLCB7CiAgICBUaXRsZSA9ICJBdXRvIEZhcm0gUmFpZCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTQwOk9uQ2hhbmdlZChmdW5jdGlvbih2MzU2KQogICAgQXV0b05leHRJc2xhbmQgPSB2MzU2OwogICAgaWYgbm90IHYzNTYgdGhlbgogICAgICAgIF9HLkF1dG9OZWFyID0gZmFsc2U7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZU5leHRJc2xhbmQ6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBsb2NhbCB2MzU3ID0ge307CiAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgIGlmIEF1dG9OZXh0SXNsYW5kIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbG9jYWwgdjgwNiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI7CiAgICAgICAgICAgICAgICBpZiAodjgwNiBhbmQgdjgwNjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjkwMCA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbJ19Xb3JsZE9yaWdpbiddLkxvY2F0aW9uczsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTAxID0gdjgwNi5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uOwogICAgICAgICAgICAgICAgICAgIGlmICgoKHY5MDEgLSBWZWN0b3IzLm5ldygtIDY0MzguNzM1MzUsIDI1MC42NDUzNTUsIC0gNDUwMS41MDY4NCkpLk1hZ25pdHVkZSA8IDEpIG9yICgodjkwMSAtIFZlY3RvcjMubmV3KC0gNTAxNy40MDg2OSwgMzE0Ljg0NDA1NSwgLSAyODIzLjAxMjcpKS5NYWduaXR1ZGUgPCAxKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2MzU3ID0ge307CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgdjkwMDpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIF9HLkF1dG9OZWFyID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAodjkwMDpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDIiKSBhbmQgbm90IHYzNTdbIklzbGFuZCAyIl0pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjkwMDpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDIiKS5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB2MzU3WyJJc2xhbmQgMiJdID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b05leHRJc2xhbmQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvTmV4dElzbGFuZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICh2OTAwOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgMyIpIGFuZCBub3QgdjM1N1siSXNsYW5kIDMiXSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2OTAwOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgMyIpLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYzNTdbIklzbGFuZCAzIl0gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvTmV4dElzbGFuZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9OZXh0SXNsYW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCA0IikgYW5kIG5vdCB2MzU3WyJJc2xhbmQgNCJdKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCA0IikuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjM1N1siSXNsYW5kIDQiXSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9OZXh0SXNsYW5kID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b05leHRJc2xhbmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAodjkwMDpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDUiKSBhbmQgbm90IHYzNTdbIklzbGFuZCA1Il0pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjkwMDpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDUiKS5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB2MzU3WyJJc2xhbmQgNSJdID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b05leHRJc2xhbmQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvTmV4dElzbGFuZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTQxID0gdjE2LlJhaWQ6QWRkVG9nZ2xlKCJUb2dnbGVBd2FrZSIsIHsKICAgIFRpdGxlID0gIkF1dG8gQXdha2VuaW5nIEZydWl0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNDE6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNTgpCiAgICBBdXRvQXdha2VuQWJpbGl0aWVzID0gdjM1ODsKZW5kKTsKdjE3LlRvZ2dsZUF3YWtlOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBpZiBBdXRvQXdha2VuQWJpbGl0aWVzIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQXdha2VuZXIiLCAiQXdha2VuIik7CiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjE0MiA9IHYxNi5SYWlkOkFkZFRvZ2dsZSgiVG9nZ2xlR2V0RnJ1aXQiLCB7CiAgICBUaXRsZSA9ICJHaXZlIFVwIE5vcm1hbCBGcnVpdOKAlD5SYWlkIENoaXAiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE0MjpPbkNoYW5nZWQoZnVuY3Rpb24odjM1OSkKICAgIF9HLkF1dG9mcnVpdCA9IHYzNTk7CmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b2ZydWl0IHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIlJvY2tldC1Sb2NrZXQiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiU3Bpbi1TcGluIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkNob3AtQ2hvcCIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJTcHJpbmctU3ByaW5nIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkJvbWItQm9tYiIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJTbW9rZS1TbW9rZSIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJTcGlrZS1TcGlrZSIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJGbGFtZS1GbGFtZSIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJGYWxjb24tRmFsY29uIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkljZS1JY2UiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiU2FuZC1TYW5kIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkRhcmstRGFyayIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJHaG9zdC1HaG9zdCIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJEaWFtb25kLURpYW1vbmQiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiTGlnaHQtTGlnaHQiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiUnViYmVyLVJ1YmJlciIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJCYXJyaWVyLUJhcnJpZXIiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmlmIFNlYTIgdGhlbgogICAgdjE2LlJhaWQ6QWRkQnV0dG9uKHsKICAgICAgICBUaXRsZSA9ICJGbHkgVG8gVGhlIFJhaWQgUm9vbSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA2NDM4LjczNTM1LCAyNTAuNjQ1MzU1LCAtIDQ1MDEuNTA2ODQpKTsKICAgICAgICBlbmQKICAgIH0pOwplbHNlaWYgU2VhMyB0aGVuCiAgICB2MTYuUmFpZDpBZGRCdXR0b24oewogICAgICAgIFRpdGxlID0gIkZseSBUbyBUaGUgUmFpZCBSb29tIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDUwNzUuNTA5Mjc3MzQzNzUsIDMxNC41MTU1MDI5Mjk2ODc1LCAtIDMxNTAuMDIyNDYwOTM3NSkpOwogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDUwMTcuNDA4NjksIDMxNC44NDQwNTUsIC0gMjgyMy4wMTI3LCAtIDAuOTI1NzQzODE4LCA0LjQ4MjE3NWUtOCwgLSAwLjM3ODE1MTIzOCwgNC41NTUwMzE1ZS05LCAxLCAxLjA3Mzc3NTZlLTcsIDAuMzc4MTUxMjM4LCA5Ljc2ODE2MmUtOCwgLSAwLjkyNTc0MzgxOCkpOwogICAgICAgIGVuZAogICAgfSk7CmVuZApsb2NhbCB2NTYgPSB2MTYuUmFpZDpBZGRTZWN0aW9uKCJMYXciKTsKbG9jYWwgdjE0MyA9IHYxNi5SYWlkOkFkZFRvZ2dsZSgiVG9nZ2xlTGF3IiwgewogICAgVGl0bGUgPSAiQXV0byBSYWlkIExvdyAoRnVsbHkpIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNDM6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNjApCiAgICBBdXRvX0xhdyA9IHYzNjA7CmVuZCk7CnYxNy5Ub2dnbGVMYXc6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIEF1dG9fTGF3IHRoZW4KICAgICAgICAgICAgICAgIGlmIChub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJNaWNyb2NoaXAiKSBhbmQgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJNaWNyb2NoaXAiKSBhbmQgbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiT3JkZXIiKSBhbmQgbm90IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiT3JkZXIiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwgIk1pY3JvY2hpcCIsICIxIik7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJNaWNyb2NoaXAiLCAiMiIpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBBdXRvX0xhdyB0aGVuCiAgICAgICAgICAgICAgICBpZiAobm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiT3JkZXIiKSBhbmQgbm90IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiT3JkZXIiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIk1pY3JvY2hpcCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJNaWNyb2NoaXAiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5DaXJjbGVJc2xhbmQuUmFpZFN1bW1vbi5CdXR0b24uTWFpbi5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiT3JkZXIiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIk9yZGVyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIk9yZGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NjgsIHYxNDY5IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDY5Lk5hbWUgPT0gIk9yZGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQ2OS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDY5Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2OS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgdjE0NjkuUGFyZW50IG9yICh2MTQ2OS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3IgKEF1dG9fTGF3ID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIk9yZGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gNjIxNy4yMDIxNDg0Mzc1LCAyOC4wNDc2NDU1Njg4NDgsIC0gNTA1My4xMzU3NDIxODc1KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwp2MTYuUmFjZTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiVGVtcGxlIE9mIFRpbWUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDI4Mjg2LjM1NTQ2ODc1LCAxNDg5NS4zMDE3NTc4MTI1LCAxMDIuNjI0Njk0ODI0MjE4NzUpKTsKICAgIGVuZAp9KTsKdjE2LlJhY2U6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkF1dG8gUHVsbCBMZXZlciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoMjgyODYuMzU1NDY4NzUsIDE0ODk1LjMwMTc1NzgxMjUsIDEwMi42MjQ2OTQ4MjQyMTg3NSkpOwogICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDI4NTc1LjE4MTY0MDYyNSwgMTQ5MzYuNjI3OTI5Njg3NSwgNzIuMzE2MzY4MTAzMDI3MzQpKTsKICAgIGVuZAp9KTsKdjE2LlJhY2U6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlRQIEJ1eSBHZWFyIE5QQyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoMjgyODYuMzU1NDY4NzUsIDE0ODk1LjMwMTc1NzgxMjUsIDEwMi42MjQ2OTQ4MjQyMTg3NSkpOwogICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDI4OTgxLjU1MjczNDM3NSwgMTQ4ODguNDI2NzU3ODEyNSwgLSAxMjAuMjQ1ODQ5NjA5Mzc1KSk7CiAgICBlbmQKfSk7CmxvY2FsIHY1NiA9IHYxNi5SYWNlOkFkZFNlY3Rpb24oIlJhY2UiKTsKdjE2LlJhY2U6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlJhY2UgRG9vciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoMjgyODYuMzU1NDY4NzUsIDE0ODk1LjMwMTc1NzgxMjUsIDEwMi42MjQ2OTQ4MjQyMTg3NSkpOwogICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIkh1bWFuIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyOTIyMS44MjIyNjU2MjUsIDE0ODkwLjk3NTU4NTkzNzUsIC0gMjA1Ljk5MTE0OTkwMjM0Mzc1KSk7CiAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIlNreXBpZWEiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDI4OTYwLjE1ODIwMzEyNSwgMTQ5MTkuNjI0MDIzNDM3NSwgMjM1LjAzOTQ4OTc0NjA5Mzc1KSk7CiAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIkZpc2htYW4iKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDI4MjMxLjE3NTc4MTI1LCAxNDg5MC45NzU1ODU5Mzc1LCAtIDIxMS42NDE3Mzg4OTE2MDE1NikpOwogICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJDeWJvcmciKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDI4NTAyLjY4MTY0MDYyNSwgMTQ4OTUuOTc1NTg1OTM3NSwgLSA0MjMuNzI3OTM1NzkxMDE1NikpOwogICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJHaG91bCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMjg2NzQuMjQ0MTQwNjI1LCAxNDg5MC42NzY3NTc4MTI1LCA0NDUuNDMxMDYwNzkxMDE1NikpOwogICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJNaW5rIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyOTAxMi4zNDE3OTY4NzUsIDE0ODkwLjk3NTU4NTkzNzUsIC0gMzgwLjE0OTI2MTQ3NDYwOTQpKTsKICAgICAgICBlbmQKICAgIGVuZAp9KTsKbG9jYWwgdjE0NCA9IHYxNi5SYWNlOkFkZFRvZ2dsZSgiVG9nZ2xlSHVtYW5hbmRnaG91bCIsIHsKICAgIFRpdGxlID0gIk92ZXJjb21lIENoYWxsZW5nZXMgW0h1bWFuL0dob3VsXSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTQ0Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzYxKQogICAgS2lsbEF1cmEgPSB2MzYxOwplbmQpOwp2MTcuVG9nZ2xlSHVtYW5hbmRnaG91bDpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxNDUgPSB2MTYuUmFjZTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG90cmlhbCIsIHsKICAgIFRpdGxlID0gIk92ZXJjb21lIENoYWxsZW5nZXMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE0NTpPbkNoYW5nZWQoZnVuY3Rpb24odjM2MikKICAgIF9HLkF1dG9RdWVzdFJhY2UgPSB2MzYyOwplbmQpOwp2MTcuVG9nZ2xlQXV0b3RyaWFsOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvUXVlc3RSYWNlIHRoZW4KICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIkh1bWFuIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTEyMywgdjExMjQgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjExMjQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMTI0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTEyNC5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTI0Lkh1bWFub2lkLkhlYWx0aCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTI0Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b1F1ZXN0UmFjZSBvciBub3QgdjExMjQuUGFyZW50IG9yICh2MTEyNC5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIlNreXBpZWEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDcwLCB2MTQ3MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5Ta3lUcmlhbC5Nb2RlbDpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NzEuTmFtZSA9PSAic25vd2lzbGFuZF9DeWxpbmRlci4wODEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCVFBaKHYxNDcxLkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMCwgMCkpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJGaXNobWFuIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTU4MiwgdjE1ODMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5TZWFCZWFzdHMuU2VhQmVhc3QxOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTU4My5OYW1lID09ICJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE1ODMuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTc0NiwgdjE3NDcgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjE3NDc6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE3NDcuVG9vbFRpcCA9PSAiTWVsZWUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbCh2MTc0Nyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNzQ4LCB2MTc0OSBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2MTc0OTpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTc0OS5Ub29sVGlwID09ICJCbG94IEZydWl0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodjE3NDkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTc1MCwgdjE3NTEgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjE3NTE6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE3NTEuVG9vbFRpcCA9PSAiU3dvcmQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbCh2MTc1MSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNzUyLCB2MTc1MyBpbiBwYWlycyhnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2MTc1MzpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTc1My5Ub29sVGlwID09ICJHdW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbCh2MTc1Myk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJDeWJvcmciKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygyODY1NCwgMTQ4OTguNzgzMiwgLSAzMCwgMSwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMSkpOwogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIkdob3VsIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTc2NCwgdjE3NjUgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE3NjU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNzY1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTc2NS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzY1Lkh1bWFub2lkLkhlYWx0aCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzY1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRoaWRkZW5wcm9wZXJ0eShnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b1F1ZXN0UmFjZSBvciBub3QgdjE3NjUuUGFyZW50IG9yICh2MTc2NS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLlJhY2UuVmFsdWUgPT0gIk1pbmsiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxNzkwLCB2MTc5MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTc5MS5OYW1lID09ICJTdGFydFBvaW50IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE3OTEuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAxMCwgMCkpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHYxNDYgPSB2MTYuUmFjZTpBZGRUb2dnbGUoIlRvZ2dsZUtpbGxUcmlhbCIsIHsKICAgIFRpdGxlID0gIktpbGwgVHJpYWwiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE0NjpPbkNoYW5nZWQoZnVuY3Rpb24odjM2MykKICAgIF9HLkF1dG9LaWxsVHJpYWwgPSB2MzYzOwplbmQpOwp2MTcuVG9nZ2xlS2lsbFRyaWFsOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvS2lsbFRyaWFsIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2ODcwLCB2ODcxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY4NzEuTmFtZSBhbmQgKHY4NzEuTmFtZSB+PSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuTmFtZSkgYW5kICgodjg3MS5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY4NzEuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCA+IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2ODcxLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMCwgNSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NzEuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NzEuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvS2lsbFRyaWFsIG9yIG5vdCB2ODcxLlBhcmVudCBvciAodjg3MS5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjU2ID0gdjE2LlJhY2U6QWRkU2VjdGlvbigiIik7CmxvY2FsIHYxNDcgPSB2MTYuUmFjZTpBZGRUb2dnbGUoIlRvZ2dsZUZhcm1SYWNlIiwgewogICAgVGl0bGUgPSAiRmFybSBSYWNlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CmxvY2FsIHYxNDggPSBmYWxzZTsKdjE0NzpPbkNoYW5nZWQoZnVuY3Rpb24odjM2NCkKICAgIHYxNDggPSB2MzY0OwplbmQpOwp2MTcuVG9nZ2xlRmFybVJhY2U6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiB2MTQ4IHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUmFjZVRyYW5zZm9ybWVkIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLlJhY2VUcmFuc2Zvcm1lZC5WYWx1ZSA9PSB0cnVlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIF9HLkF1dG9Cb25lTm9RdWVzdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gOTY5OC40NzM2MzI4MTI1LCA0NDUuMDk0NDIxMzg2NzE4NzUsIDY1NDUuODUyNTM5MDYyNSkpOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5SYWNlVHJhbnNmb3JtZWQuVmFsdWUgPT0gZmFsc2UpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgX0cuQXV0b0JvbmVOb1F1ZXN0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJZIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIlkiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIF9HLkF1dG9Cb25lTm9RdWVzdCA9IGZhbHNlOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNDkgPSB2MTYuUmFjZTpBZGRUb2dnbGUoIlRvZ2dsZVVwZ3JhZGUiLCB7CiAgICBUaXRsZSA9ICJCdXkgR2VhciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTQ5Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzY1KQogICAgX0cuQXV0b1VwZ3JhZGUgPSB2MzY1OwogICAgaWYgX0cuQXV0b1VwZ3JhZGUgdGhlbgogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlVwZ3JhZGVSYWNlIiwgIkJ1eSIpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVVcGdyYWRlOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjU2ID0gdjE2LlNob3A6QWRkU2VjdGlvbigiSGFraSIpOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiR2VwcG8iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUhha2kiLCAiR2VwcG8iKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkJ1c28iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUhha2kiLCAiQnVzbyIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiU29ydSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SGFraSIsICJTb3J1Iik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJLZW4iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIktlblRhbGsiLCAiQnV5Iik7CiAgICBlbmQKfSk7CmxvY2FsIHY1NiA9IHYxNi5TaG9wOkFkZFNlY3Rpb24oIktp4bq/bSIpOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQ3V0bGFzcyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJDdXRsYXNzIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJLYXRhbmEiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiS2F0YW5hIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJJcm9uIE1hY2UiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiSXJvbiBNYWNlIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJEdWVsIEthdGFuYSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJEdWVsIEthdGFuYSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiVHJpcGxlIEthdGFuYSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJUcmlwbGUgS2F0YW5hIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJQaXBlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIlBpcGUiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkR1YWwtSGVhZGVkIEJsYWRlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIkR1YWwtSGVhZGVkIEJsYWRlIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJCaXNlbnRvIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIkJpc2VudG8iKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlNvdWwgQ2FuZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJTb3VsIENhbmUiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlBvbGUgVjIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJUaHVuZGVyR29kVGFsayIpOwogICAgZW5kCn0pOwpsb2NhbCB2NTYgPSB2MTYuU2hvcDpBZGRTZWN0aW9uKCJWw7UiKTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkJsYWNrIExlZyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5QmxhY2tMZWciKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkVsZWN0cm8iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUVsZWN0cm8iKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkZpc2htYW4gS2FyYXRlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlGaXNobWFuS2FyYXRlIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJEcmFnb24gQ2xhdyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJEcmFnb25DbGF3IiwgIjEiKTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwgIkRyYWdvbkNsYXciLCAiMiIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiU3VwZXJodW1hbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5U3VwZXJodW1hbiIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiRGVhdGggU3RlcCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RGVhdGhTdGVwIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJTaGFya21hbiBLYXJhdGUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eVNoYXJrbWFuS2FyYXRlIiwgdHJ1ZSk7CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5U2hhcmttYW5LYXJhdGUiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkVsZWN0cmljIENsYXciLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUVsZWN0cmljQ2xhdyIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiRHJhZ29uIFRhbG9uIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlEcmFnb25UYWxvbiIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiR29kaHVtYW4iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUdvZGh1bWFuIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJTYW5ndWluZSBBcnQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eVNhbmd1aW5lQXJ0Iik7CiAgICBlbmQKfSk7CmxvY2FsIHY1NiA9IHYxNi5TaG9wOkFkZFNlY3Rpb24oIk90aGVyIik7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJSZXNldCBTdGF0cyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJSZWZ1bmQiLCAiMSIpOwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCAiUmVmdW5kIiwgIjIiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlJhbmRvbSBSYWNlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwgIlJlcm9sbCIsICIxIik7CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJSZXJvbGwiLCAiMiIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQ2hhbmdlIFRvIEdob3VsIFJhY2UiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHYzNjYgPSB7CiAgICAgICAgICAgIFsxXSA9ICJFY3RvcGxhc20iLAogICAgICAgICAgICBbMl0gPSAiQ2hhbmdlIiwKICAgICAgICAgICAgWzNdID0gNAogICAgICAgIH07CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjM2NikpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQ2hhbmdlIFRvIEN5Ym9yZyBSYWNlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2MzY3ID0gewogICAgICAgICAgICBbMV0gPSAiQ3lib3JnVHJhaW5lciIsCiAgICAgICAgICAgIFsyXSA9ICJCdXkiCiAgICAgICAgfTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2MzY3KSk7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJDaGFuZ2UgdG8gRHJhY28iLAogICAgRGVzY3JpcHRpb24gPSAiU2VhIDMgT25seSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg1NjYxLjUzMjIyNjU2MjUsIDEwMTMuMDkwNzU5Mjc3MzQzOCwgLSAzMzQuOTY0OTk2MzM3ODkwNikpOwogICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDU4MTQuNDI3MjQ2MDkzNzUsIDEyMDguMzI2NzgyMjI2NTYyNSwgODg0LjU3ODU1MjI0NjA5MzgpKTsKICAgICAgICBsb2NhbCB2MzY4ID0gVmVjdG9yMy5uZXcoNTgxNC40MjcyNDYwOTM3NSwgMTIwOC4zMjY3ODIyMjY1NjI1LCA4ODQuNTc4NTUyMjQ2MDkzOCk7CiAgICAgICAgbG9jYWwgdjM2OSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjsKICAgICAgICBsb2NhbCB2MzcwID0gdjM2OS5DaGFyYWN0ZXIgb3IgdjM2OS5DaGFyYWN0ZXJBZGRlZDpXYWl0KCkgOwogICAgICAgIHJlcGVhdAogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgdW50aWwgKHYzNzAuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHYzNjgpLk1hZ25pdHVkZSA8IDEKICAgICAgICBsb2NhbCB2MzcxID0gewogICAgICAgICAgICBbMV0gPSB7CiAgICAgICAgICAgICAgICBOUEMgPSAiRHJhZ29uIFdpemFyZCIsCiAgICAgICAgICAgICAgICBDb21tYW5kID0gIkRyYWdvblJhY2UiCiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Nb2R1bGVzLk5ldDpGaW5kRmlyc3RDaGlsZCgiUkYvSW50ZXJhY3REcmFnb25RdWVzdCIpOkludm9rZVNlcnZlcih1bnBhY2sodjM3MSkpOwogICAgZW5kCn0pOwp2MTYuTWlzYzpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiUmVqb2luIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlRlbGVwb3J0U2VydmljZSIpOlRlbGVwb3J0KGdhbWUuUGxhY2VJZCwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIpOwogICAgZW5kCn0pOwp2MTYuTWlzYzpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiSG9wIFNlcnZlciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgSG9wKCk7CiAgICBlbmQKfSk7CmZ1bmN0aW9uIEhvcCgpCiAgICBsb2NhbCB2MzcyID0gZ2FtZS5QbGFjZUlkOwogICAgbG9jYWwgdjM3MyA9IHt9OwogICAgbG9jYWwgdjM3NCA9ICIiOwogICAgbG9jYWwgdjM3NSA9IG9zLmRhdGUoIiEqdCIpLmhvdXI7CiAgICBsb2NhbCB2Mzc2ID0gZmFsc2U7CiAgICBmdW5jdGlvbiBUUFJldHVybmVyKCkKICAgICAgICBsb2NhbCB2NTU2OwogICAgICAgIGlmICh2Mzc0ID09ICIiKSB0aGVuCiAgICAgICAgICAgIHY1NTYgPSBnYW1lLkh0dHBTZXJ2aWNlOkpTT05EZWNvZGUoZ2FtZTpIdHRwR2V0KCJodHRwczovL2dhbWVzLnJvYmxveC5jb20vdjEvZ2FtZXMvIiAuLiB2MzcyIC4uICIvc2VydmVycy9QdWJsaWM/c29ydE9yZGVyPUFzYyZsaW1pdD0xMDAiKSk7CiAgICAgICAgZWxzZQogICAgICAgICAgICB2NTU2ID0gZ2FtZS5IdHRwU2VydmljZTpKU09ORGVjb2RlKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9nYW1lcy5yb2Jsb3guY29tL3YxL2dhbWVzLyIgLi4gdjM3MiAuLiAiL3NlcnZlcnMvUHVibGljP3NvcnRPcmRlcj1Bc2MmbGltaXQ9MTAwJmN1cnNvcj0iIC4uIHYzNzQpKTsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NTU3ID0gIiI7CiAgICAgICAgaWYgKHY1NTYubmV4dFBhZ2VDdXJzb3IgYW5kICh2NTU2Lm5leHRQYWdlQ3Vyc29yIH49ICJudWxsIikgYW5kICh2NTU2Lm5leHRQYWdlQ3Vyc29yIH49IG5pbCkpIHRoZW4KICAgICAgICAgICAgdjM3NCA9IHY1NTYubmV4dFBhZ2VDdXJzb3I7CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjU1OCA9IDA7CiAgICAgICAgZm9yIHY2NTEsIHY2NTIgaW4gcGFpcnModjU1Ni5kYXRhKSBkbwogICAgICAgICAgICBsb2NhbCB2NjUzID0gdHJ1ZTsKICAgICAgICAgICAgdjU1NyA9IHRvc3RyaW5nKHY2NTIuaWQpOwogICAgICAgICAgICBpZiAodG9udW1iZXIodjY1Mi5tYXhQbGF5ZXJzKSA+IHRvbnVtYmVyKHY2NTIucGxheWluZykpIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2ODcyLCB2ODczIGluIHBhaXJzKHYzNzMpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY1NTggfj0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjU1NyA9PSB0b3N0cmluZyh2ODczKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjY1MyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKHRvbnVtYmVyKHYzNzUpIH49IHRvbnVtYmVyKHY4NzMpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNDcyID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjM3MyA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHYzNzMsIHYzNzUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIHY1NTggPSB2NTU4ICsgMSA7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGlmICh2NjUzID09IHRydWUpIHRoZW4KICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQodjM3MywgdjU1Nyk7CiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlRlbGVwb3J0U2VydmljZSIpOlRlbGVwb3J0VG9QbGFjZUluc3RhbmNlKHYzNzIsIHY1NTcsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcik7CiAgICAgICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGZ1bmN0aW9uIHYxMTgoKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBUUFJldHVybmVyKCk7CiAgICAgICAgICAgICAgICBpZiAodjM3NCB+PSAiIikgdGhlbgogICAgICAgICAgICAgICAgICAgIFRQUmV0dXJuZXIoKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCiAgICB2MTE4KCk7CmVuZApsb2NhbCB2NTYgPSB2MTYuTWlzYzpBZGRTZWN0aW9uKCJUZWFtIik7CnYxNi5NaXNjOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJQaXJhdGVzIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTZXRUZWFtIiwgIlBpcmF0ZXMiKTsKICAgIGVuZAp9KTsKdjE2Lk1pc2M6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIk1hcmluZXMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlNldFRlYW0iLCAiTWFyaW5lcyIpOwogICAgZW5kCn0pOwpsb2NhbCB2NTYgPSB2MTYuTWlzYzpBZGRTZWN0aW9uKCJDb2RlIik7CmxvY2FsIHYxNTAgPSB7CiAgICAiS0lUVF9SRVNFVCIsCiAgICAiU3ViMlVuY2xlS2l6YXJ1IiwKICAgICJTVUIyR0FNRVJST0JPVF9SRVNFVDEiLAogICAgIlN1YjJGZXI5OTkiLAogICAgIkVueXVfaXNfUHJvIiwKICAgICJKQ1dLIiwKICAgICJTdGFyY29kZUhFTyIsCiAgICAiTWFnaWNCdXMiLAogICAgIktpdHRHYW1pbmciLAogICAgIlN1YjJDYXB0YWluTWF1aSIsCiAgICAiU3ViMk9mZmljYWxOb29iaWUiLAogICAgIlRoZUdyZWF0QWNlIiwKICAgICJTdWIyTm9vYk1hc3RlcjEyMyIsCiAgICAiU3ViMkRhaWdyb2NrIiwKICAgICJBeGlvcmUiLAogICAgIlN0cmF3SGF0TWFpbmUiLAogICAgIlRhbnRhaUdhbWluZyIsCiAgICAiQmx1eHh5IiwKICAgICJTVUIyR0FNRVJST0JPVF9FWFAxIiwKICAgICJDaGFuZGxlciIsCiAgICAiTk9NT1JFSEFDSyIsCiAgICAiQkFORVhQTE9JVCIsCiAgICAiV2lsZERhcmVzIiwKICAgICJCb3NzQnVpbGQiLAogICAgIkdldFByYW5rZWQiLAogICAgIkVBUk5fRlJVSVRTIiwKICAgICJGSUdIVDRGUlVJVCIsCiAgICAiTk9FWFBMT0lURVIiLAogICAgIk5PT0IyQURNSU4iLAogICAgIkNPREVTTElERSIsCiAgICAiQURNSU5IQUNLRUQiLAogICAgIkFETUlOREFSRVMiLAogICAgImZydWl0Y29uY2VwdHMiLAogICAgImtyYXp5ZGFyZXMiLAogICAgIlRSSVBMRUFCVVNFIiwKICAgICJTRUFUUk9MTElORyIsCiAgICAiMjROT0FETUlOIiwKICAgICJSRVdBUkRGVU4iLAogICAgIk5FV1RST0xMIiwKICAgICJmdWRkMTBfdjIiLAogICAgIkZ1ZGQxMCIsCiAgICAiQmlnbmV3cyIsCiAgICAiU0VDUkVUX0FETUlOIgp9Owp2MTYuTWlzYzpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiUmVkZWVtIEFsbCBDb2RlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBmb3IgdjU1OSwgdjU2MCBpbiBpcGFpcnModjE1MCkgZG8KICAgICAgICAgICAgUmVkZWVtQ29kZSh2NTYwKTsKICAgICAgICBlbmQKICAgIGVuZAp9KTsKZnVuY3Rpb24gUmVkZWVtQ29kZSh2Mzc3KQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuUmVkZWVtOkludm9rZVNlcnZlcih2Mzc3KTsKZW5kCmxvY2FsIHY1NiA9IHYxNi5NaXNjOkFkZFNlY3Rpb24oIlRpdGxlcyIpOwp2MTYuTWlzYzpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiVGl0bGVzIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2Mzc4ID0gewogICAgICAgICAgICBbMV0gPSAiZ2V0VGl0bGVzIgogICAgICAgIH07CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjM3OCkpOwogICAgICAgIGdhbWUuUGxheWVycy5sb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5UaXRsZXMuVmlzaWJsZSA9IHRydWU7CiAgICBlbmQKfSk7CmxvY2FsIHY1NiA9IHYxNi5NaXNjOkFkZFNlY3Rpb24oIkF3YWtlbmluZyIpOwp2MTYuTWlzYzpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQXdha2VuaW5nIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5Bd2FrZW5pbmdUb2dnbGVyLlZpc2libGUgPSB0cnVlOwogICAgZW5kCn0pOwpsb2NhbCB2NTYgPSB2MTYuTWlzYzpBZGRTZWN0aW9uKCJNaXNjIik7CmxvY2FsIHYxNTEgPSB2MTYuTWlzYzpBZGRUb2dnbGUoIlRvZ2dsZVJlam9pbiIsIHsKICAgIFRpdGxlID0gIlJlam9pbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IHRydWUKfSk7CnYxNTE6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzODEpCiAgICBfRy5BdXRvUmVqb2luID0gdjM4MTsKZW5kKTsKdjE3LlRvZ2dsZVJlam9pbjpTZXRWYWx1ZSh0cnVlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b1Jlam9pbiB0aGVuCiAgICAgICAgICAgIGdldGdlbnYoKS5yZWpvaW4gPSBnYW1lOkdldFNlcnZpY2UoIkNvcmVHdWkiKS5Sb2Jsb3hQcm9tcHRHdWkucHJvbXB0T3ZlcmxheS5DaGlsZEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24odjgwOCkKICAgICAgICAgICAgICAgIGlmICgodjgwOC5OYW1lID09ICJFcnJvclByb21wdCIpIGFuZCB2ODA4OkZpbmRGaXJzdENoaWxkKCJNZXNzYWdlQXJlYSIpIGFuZCB2ODA4Lk1lc3NhZ2VBcmVhOkZpbmRGaXJzdENoaWxkKCJFcnJvckZyYW1lIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlRlbGVwb3J0U2VydmljZSIpOlRlbGVwb3J0KGdhbWUuUGxhY2VJZCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NTYgPSB2MTYuTWlzYzpBZGRTZWN0aW9uKCJGb2ciKTsKbG9jYWwgZnVuY3Rpb24gdjE1MigpCiAgICBsb2NhbCB2MzgyID0gZ2FtZTpHZXRTZXJ2aWNlKCJMaWdodGluZyIpOwogICAgaWYgdjM4MjpGaW5kRmlyc3RDaGlsZCgiQmFzZUF0bW9zcGhlcmUiKSB0aGVuCiAgICAgICAgdjM4Mi5CYXNlQXRtb3NwaGVyZTpEZXN0cm95KCk7CiAgICBlbmQKICAgIGlmIHYzODI6RmluZEZpcnN0Q2hpbGQoIlNlYVRlcnJvckNDIikgdGhlbgogICAgICAgIHYzODIuU2VhVGVycm9yQ0M6RGVzdHJveSgpOwogICAgZW5kCiAgICBpZiB2MzgyOkZpbmRGaXJzdENoaWxkKCJMaWdodGluZ0xheWVycyIpIHRoZW4KICAgICAgICBpZiB2MzgyLkxpZ2h0aW5nTGF5ZXJzOkZpbmRGaXJzdENoaWxkKCJBdG1vc3BoZXJlIikgdGhlbgogICAgICAgICAgICB2MzgyLkxpZ2h0aW5nTGF5ZXJzLkF0bW9zcGhlcmU6RGVzdHJveSgpOwogICAgICAgIGVuZAogICAgICAgIHdhaXQoKTsKICAgICAgICBpZiB2MzgyLkxpZ2h0aW5nTGF5ZXJzOkZpbmRGaXJzdENoaWxkKCJEYXJrRm9nIikgdGhlbgogICAgICAgICAgICB2MzgyLkxpZ2h0aW5nTGF5ZXJzLkRhcmtGb2c6RGVzdHJveSgpOwogICAgICAgIGVuZAogICAgZW5kCiAgICB2MzgyLkZvZ0VuZCA9IDEwMDAwMDsKZW5kCnYxNi5NaXNjOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJUaOG7qWMgVOG7iW5oIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICB2MTUyKCk7CiAgICBlbmQKfSk7CmxvY2FsIHYxNTMgPSB2MTYuTWlzYzpBZGRUb2dnbGUoIlRvZ2dsZUFudGlCYW5kIiwgewogICAgVGl0bGUgPSAiQW50aSBCYW4iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSB0cnVlCn0pOwp2MTUzOk9uQ2hhbmdlZChmdW5jdGlvbih2Mzg0KQogICAgX0cuQW50aUJhbmQgPSB2Mzg0OwplbmQpOwpsb2NhbCB2MTU0ID0gewogICAgMTc4ODQ4ODEsCiAgICAxMjAxNzM2MDQsCiAgICA5MTIzNDgKfTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQW50aUJhbmQgdGhlbgogICAgICAgICAgICBmb3IgdjgwOSwgdjgxMCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgICAgICAgICBpZiB0YWJsZS5maW5kKHYxNTQsIHY4MTAuVXNlcklkKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgSG9wKCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjU2ID0gdjE2LlNlYTpBZGRTZWN0aW9uKCJMZXZpYXRoYW4iKTsKdjE2LlNlYTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQnV5IExldmlhdGhhbiBDaGlwIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJJbmZvTGV2aWF0aGFuIiwgIjIiKTsKICAgIGVuZAp9KTsKbG9jYWwgdjE1NSA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVUUEZyb3plbkRpbWVuc2lvbiIsIHsKICAgIFRpdGxlID0gIkZseSBUbyBGcm96ZW4gRGltZW5zaW9uIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNTU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzODUpCiAgICBfRy5Ud2VlblRvRnJvemVuRGltZW5zaW9uID0gdjM4NTsKZW5kKTsKdjE1NTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIGxvY2FsIHYzODY7CiAgICB3aGlsZSBub3QgdjM4NiBkbwogICAgICAgIHYzODYgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiRnJvemVuRGltZW5zaW9uIik7CiAgICAgICAgd2FpdCgpOwogICAgZW5kCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5Ud2VlblRvRnJvemVuRGltZW5zaW9uIHRoZW4KICAgICAgICAgICAgaWYgdjM4NiB0aGVuCiAgICAgICAgICAgICAgICBUd2Vlbih2Mzg2LkNGcmFtZSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmlmIFNlYTMgdGhlbgogICAgbG9jYWwgdjU2MSA9IHYxNi5TZWE6QWRkUGFyYWdyYXBoKHsKICAgICAgICBUaXRsZSA9ICJMZXZpYXRoYW4gQ2hpcCBTdGF0dXMiLAogICAgICAgIENvbnRlbnQgPSAiIgogICAgfSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgICAgIGxvY2FsIHY4MTEgPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJJbmZvTGV2aWF0aGFuIiwgIjEiKTsKICAgICAgICAgICAgICAgIGlmICh2ODExID09IDUpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NTYxOlNldERlc2MoIkxldmlhdGhhbiBJcyBPdXQgVGhlcmUiKTsKICAgICAgICAgICAgICAgIGVsc2VpZiAodjgxMSA9PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjU2MTpTZXREZXNjKCJJIERvbid0IEtub3ciKTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NTYxOlNldERlc2MoIk11YTogIiAuLiB0b3N0cmluZyh2ODExKSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZCk7CmVuZApsb2NhbCB2MTU2ID0gdjE2LlNlYTpBZGRTZWN0aW9uKCJEcmFjbyIpOwpsb2NhbCB2MTU3ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZUJsYXplRW1iZXIiLCB7CiAgICBUaXRsZSA9ICJBdXRvIEJsYXplIEVtYmVyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNTc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzODcpCiAgICBfRy5BdXRvQmxhemVFbWJlciA9IHYzODc7CmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9CbGF6ZUVtYmVyIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOldhaXRGb3JDaGlsZCgiTW9kdWxlcyIpOldhaXRGb3JDaGlsZCgiTmV0Iik6V2FpdEZvckNoaWxkKCJSRS9EcmFnb25Eb2pvRW1iZXIiKTpGaXJlU2VydmVyKCk7CiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjE1OCA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVSZWNlaXZlUXVlc3QiLCB7CiAgICBUaXRsZSA9ICJHZXQgQmxhemUgRW1iZXIgUXVlc3QiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE1ODpPbkNoYW5nZWQoZnVuY3Rpb24odjM4OCkKICAgIF9HLkF1dG9SZWNlaXZlUXVlc3QgPSB2Mzg4OwogICAgaWYgX0cuQXV0b1JlY2VpdmVRdWVzdCB0aGVuCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNTY2MS41MzIyMjY1NjI1LCAxMDEzLjA5MDc1OTI3NzM0MzgsIC0gMzM0Ljk2NDk5NjMzNzg5MDYpKTsKICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg1ODE0LjQyNzI0NjA5Mzc1LCAxMjA4LjMyNjc4MjIyNjU2MjUsIDg4NC41Nzg1NTIyNDYwOTM4KSk7CiAgICAgICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2ODc0ID0gewogICAgICAgICAgICAgICAgICAgICAgICBbMV0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb250ZXh0ID0gIlJlcXVlc3RRdWVzdCIKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLk1vZHVsZXMuTmV0OkZpbmRGaXJzdENoaWxkKCJSRi9EcmFnb25IdW50ZXIiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4NzQpKTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2ODc1ID0gewogICAgICAgICAgICAgICAgICAgICAgICBbMV0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb250ZXh0ID0gIkNoZWNrIgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2ODc2ID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLk1vZHVsZXMuTmV0OkZpbmRGaXJzdENoaWxkKCJSRi9EcmFnb25IdW50ZXIiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4NzUpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjE1OSA9IHYxNi5TZWE6QWRkUGFyYWdyYXBoKHsKICAgIFRpdGxlID0gIkJsYXplIEVtYmVyIFF1ZXN0IFN0YXR1cyIsCiAgICBDb250ZW50ID0gIiIKfSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgbG9jYWwgdjY1NCA9IHsKICAgICAgICAgICAgICAgIFsxXSA9IHsKICAgICAgICAgICAgICAgICAgICBDb250ZXh0ID0gIkNoZWNrIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBsb2NhbCB2NjU1ID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLk1vZHVsZXMuTmV0OkZpbmRGaXJzdENoaWxkKCJSRi9EcmFnb25IdW50ZXIiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKHY2NTQpKTsKICAgICAgICAgICAgaWYgKHR5cGVvZih2NjU1KSA9PSAidGFibGUiKSB0aGVuCiAgICAgICAgICAgICAgICBmb3Igdjg3Nywgdjg3OCBpbiBwYWlycyh2NjU1KSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2ODc4ID09ICJEZWZlYXQgMyBWZW5vbW91cyBBc3NhaWxhbnRzIG9uIEh5ZHJhIElzbGFuZC4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHYxNTk6U2V0RGVzYygiRGVmZWF0IDMgVmVub21vdXMgQXNzYWlsYW50cyBvbiBIeWRyYSBJc2xhbmQuIik7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICh2ODc4ID09ICJEZWZlYXQgMyBIeWRyYSBFbmZvcmNlcnMgb24gSHlkcmEgSXNsYW5kLiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjE1OTpTZXREZXNjKCJEZWZlYXQgMyBIeWRyYSBFbmZvcmNlcnMgb24gSHlkcmEgSXNsYW5kLiIpOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAodjg3OCA9PSAiRGVzdHJveSAxMCB0cmVlcyBvbiBIeWRyYSBJc2xhbmQuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2MTU5OlNldERlc2MoIkRlc3Ryb3kgMTAgdHJlZXMgb24gSHlkcmEgSXNsYW5kLiIpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHByaW50KHY2NTUpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHYxNjAgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlSHlkcmFUcmVlIiwgewogICAgVGl0bGUgPSAiRGVzdHJveSB0cmVlcyBhdCBIeWRyYSBJc2xhbmQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE2MDpPbkNoYW5nZWQoZnVuY3Rpb24odjM4OSkKICAgIF9HLkF1dG9IeWRyYVRyZWUgPSB2Mzg5OwplbmQpOwpsb2NhbCBmdW5jdGlvbiB2MTYxKHYzOTApCiAgICBsb2NhbCB2MzkxID0gZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik7CiAgICB2MzkxOlNlbmRLZXlFdmVudCh0cnVlLCB2MzkwLCBmYWxzZSwgZ2FtZSk7CiAgICB2MzkxOlNlbmRLZXlFdmVudChmYWxzZSwgdjM5MCwgZmFsc2UsIGdhbWUpOwplbmQKbG9jYWwgZnVuY3Rpb24gdjE2Mih2MzkyKQogICAgbG9jYWwgdjM5MyA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjsKICAgIGxvY2FsIHYzOTQgPSB2MzkzLkJhY2twYWNrOwogICAgZm9yIHY1NjIsIHY1NjMgaW4gcGFpcnModjM5NDpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmICh2NTYzOklzQSgiVG9vbCIpIGFuZCAodjU2My5Ub29sVGlwID09IHYzOTIpKSB0aGVuCiAgICAgICAgICAgIHY1NjMuUGFyZW50ID0gdjM5My5DaGFyYWN0ZXI7CiAgICAgICAgICAgIGZvciB2ODEyLCB2ODEzIGluIGlwYWlycyh7CiAgICAgICAgICAgICAgICAiWiIsCiAgICAgICAgICAgICAgICAiWCIsCiAgICAgICAgICAgICAgICAiQyIsCiAgICAgICAgICAgICAgICAiViIsCiAgICAgICAgICAgICAgICAiRiIKICAgICAgICAgICAgfSkgZG8KICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB2MTYxKHY4MTMpOwogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHY1NjMuUGFyZW50ID0gdjM5NDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kCmxvY2FsIHYxNjMgPSB7CiAgICBDRnJhbWUubmV3KDUyODguNjE5NjI4OTA2MjUsIDEwMDUuNDAwMDI0NDE0MDYyNSwgMzkyLjQzMDExNDc0NjA5Mzc1KSwKICAgIENGcmFtZS5uZXcoNTM0My4zOTQ1MzEyNSwgMTAwNC4xOTk4OTAxMzY3MTg4LCAzNjEuMDY4NzU2MTAzNTE1NiksCiAgICBDRnJhbWUubmV3KDUyMzUuNzg1NjQ0NTMxMjUsIDEwMDQuMTk5ODkwMTM2NzE4OCwgNDMxLjQ1MzA5NDQ4MjQyMTkpLAogICAgQ0ZyYW1lLm5ldyg1MzIxLjMwNjE1MjM0Mzc1LCAxMDA0LjE5OTg5MDEzNjcxODgsIDQ0MC44OTUxNDE2MDE1NjI1KSwKICAgIENGcmFtZS5uZXcoNTI1OC45NjQ4NDM3NSwgMTAwNC4xOTk4OTAxMzY3MTg4LCAzNDUuNTA1MjQ5MDIzNDM3NSkKfTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b0h5ZHJhVHJlZSB0aGVuCiAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgIGZvciB2ODE0LCB2ODE1IGluIGlwYWlycyh2MTYzKSBkbwogICAgICAgICAgICAgICAgaWYgbm90IF9HLkF1dG9IeWRyYVRyZWUgdGhlbgogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBUd2VlbjIodjgxNSk7CiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODE2ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjsKICAgICAgICAgICAgICAgIGlmICh2ODE2IGFuZCB2ODE2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTAyID0gKHY4MTYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHY4MTUuUG9zaXRpb24pLk1hZ25pdHVkZTsKICAgICAgICAgICAgICAgICAgICBpZiAodjkwMiA8PSAxKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHYxNjIoIk1lbGVlIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxNjIoIlN3b3JkIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxNjIoIkd1biIpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnYxNTY6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlRlbGVwb3J0IFRvIERyYWdvbiBEb2pvIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg1NjYxLjUzMjIyNjU2MjUsIDEwMTMuMDkwNzU5Mjc3MzQzOCwgLSAzMzQuOTY0OTk2MzM3ODkwNikpOwogICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDU4MTQuNDI3MjQ2MDkzNzUsIDEyMDguMzI2NzgyMjI2NTYyNSwgODg0LjU3ODU1MjI0NjA5MzgpKTsKICAgIGVuZAp9KTsKdjE1NjpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQ3JhZnQgVm9sY2FuaWMgTWFnbmV0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2Mzk1ID0gewogICAgICAgICAgICBbMV0gPSAiQ3JhZnRJdGVtIiwKICAgICAgICAgICAgWzJdID0gIkNyYWZ0IiwKICAgICAgICAgICAgWzNdID0gIlZvbGNhbmljIE1hZ25ldCIKICAgICAgICB9OwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHYzOTUpKTsKICAgIGVuZAp9KTsKbG9jYWwgdjE2NCA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVDb2xsZWN0RmlyZUZsb3dlcnMiLCB7CiAgICBUaXRsZSA9ICJDb2xsZWN0IEZpcmUgRmxvd2VycyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTY0Ok9uQ2hhbmdlZChmdW5jdGlvbih2Mzk2KQogICAgX0cuQXV0b0NvbGxlY3RGaXJlRmxvd2VycyA9IHYzOTY7CmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9Db2xsZWN0RmlyZUZsb3dlcnMgdGhlbgogICAgICAgICAgICBsb2NhbCB2NzQ3ID0gd29ya3NwYWNlOkZpbmRGaXJzdENoaWxkKCJGaXJlRmxvd2VycyIpOwogICAgICAgICAgICBpZiB2NzQ3IHRoZW4KICAgICAgICAgICAgICAgIGZvciB2OTAzLCB2OTA0IGluIHBhaXJzKHY3NDc6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiAodjkwNDpJc0EoIk1vZGVsIikgYW5kIHY5MDQuUHJpbWFyeVBhcnQpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzNjcgPSB2OTA0LlByaW1hcnlQYXJ0LlBvc2l0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTM2OCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzNjkgPSAodjEzNjcgLSB2MTM2OCkuTWFnbml0dWRlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEzNjkgPD0gMSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcodjEzNjcpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjE2NSA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVXaGl0ZUJlbHQiLCB7CiAgICBUaXRsZSA9ICJBdG8gV2hpdGUgQmVsdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTY1Ok9uQ2hhbmdlZChmdW5jdGlvbih2Mzk3KQogICAgX0cuQXV0b0xldmVsID0gdjM5NzsKICAgIGlmIHYzOTcgdGhlbgogICAgICAgIGxvY2FsIHY2NTYgPSB7CiAgICAgICAgICAgIFsxXSA9IHsKICAgICAgICAgICAgICAgIE5QQyA9ICJEb2pvIFRyYWluZXIiLAogICAgICAgICAgICAgICAgQ29tbWFuZCA9ICJSZXF1ZXN0UXVlc3QiCiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Nb2R1bGVzLk5ldDpGaW5kRmlyc3RDaGlsZCgiUkYvSW50ZXJhY3REcmFnb25RdWVzdCIpOkludm9rZVNlcnZlcih1bnBhY2sodjY1NikpOwogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgd2hpbGUgX0cuQXV0b0xldmVsIGRvCiAgICAgICAgICAgICAgICBsb2NhbCB2ODE3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgTlBDID0gIkRvam8gVHJhaW5lciIsCiAgICAgICAgICAgICAgICAgICAgICAgIENvbW1hbmQgPSAiQ2xhaW1RdWVzdCIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLk1vZHVsZXMuTmV0OkZpbmRGaXJzdENoaWxkKCJSRi9JbnRlcmFjdERyYWdvblF1ZXN0Iik6SW52b2tlU2VydmVyKHVucGFjayh2ODE3KSk7CiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjE2NiA9IHYxNi5TZWE6QWRkUGFyYWdyYXBoKHsKICAgIFRpdGxlID0gIkRyYWNvIFJhY2UiLAogICAgQ29udGVudCA9ICIiCn0pOwpsb2NhbCB2MTY3ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVRyaWFsVGVsZXBvcnQiLCB7CiAgICBUaXRsZSA9ICJGbHkgVG8gVHJpYWwgRG9vciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTY3Ok9uQ2hhbmdlZChmdW5jdGlvbih2Mzk4KQogICAgX0cuQXV0b1RyaWFsVGVsZXBvcnQgPSB2Mzk4OwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvVHJpYWxUZWxlcG9ydCB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3NDggPSB3b3Jrc3BhY2UuTWFwLlByZWhpc3RvcmljSXNsYW5kOkZpbmRGaXJzdENoaWxkKCJUcmlhbFRlbGVwb3J0Iik7CiAgICAgICAgICAgIGlmICh2NzQ4IGFuZCB2NzQ4OklzQSgiUGFydCIpKSB0aGVuCiAgICAgICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyh2NzQ4LlBvc2l0aW9uKSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNjggPSB2MTYuU2VhOkFkZFNlY3Rpb24oIlByZWhpc3RvcmljIElzbGFuZCIpOwpsb2NhbCB2MTY5ID0gdjE2LlNlYTpBZGRQYXJhZ3JhcGgoewogICAgVGl0bGUgPSAiUHJlaGlzdG9yaWMgSXNsYW5kIFN0YXR1cyIsCiAgICBDb250ZW50ID0gIiIKfSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgZ2dhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJQcmVoaXN0b3JpY0lzbGFuZCIpIHRoZW4KICAgICAgICAgICAgICAgIHYxNjk6U2V0RGVzYygiUHJlaGlzdG9yaWMgSXNsYW5kOiDinIXvuI8iKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgdjE2OTpTZXREZXNjKCJQcmVoaXN0b3JpYyBJc2xhbmQ6IOKdjO+4jyIpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHYxNzAgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlVFBWb2xjYW5vIiwgewogICAgVGl0bGUgPSAiRmx5IFRvIFByZWhpc3RvcmljIElzbGFuZCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTcwOk9uQ2hhbmdlZChmdW5jdGlvbih2Mzk5KQogICAgX0cuVHdlZW5Ub1ByZWhpc3RvcmljID0gdjM5OTsKZW5kKTsKdjE3LlRvZ2dsZVRQVm9sY2FubzpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIGxvY2FsIHY0MDA7CiAgICB3aGlsZSBub3QgdjQwMCBkbwogICAgICAgIHY0MDAgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiUHJlaGlzdG9yaWNJc2xhbmQiKTsKICAgICAgICB3YWl0KCk7CiAgICBlbmQKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLlR3ZWVuVG9QcmVoaXN0b3JpYyB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3NDkgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiUHJlaGlzdG9yaWNJc2xhbmQiKTsKICAgICAgICAgICAgaWYgdjc0OSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2ODc5ID0gdjc0OTpGaW5kRmlyc3RDaGlsZCgiQ29yZSIpIGFuZCB2NzQ5LkNvcmU6RmluZEZpcnN0Q2hpbGQoIlByZWhpc3RvcmljUmVsaWMiKSA7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODgwID0gdjg3OSBhbmQgdjg3OTpGaW5kRmlyc3RDaGlsZCgiU2t1bGwiKSA7CiAgICAgICAgICAgICAgICBpZiB2ODgwIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyh2ODgwLlBvc2l0aW9uKSk7CiAgICAgICAgICAgICAgICAgICAgX0cuVHdlZW5Ub1ByZWhpc3RvcmljID0gZmFsc2U7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjE3MSA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVEZWZlbmRWb2xjYW5vIiwgewogICAgVGl0bGUgPSAiU2FmZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTcxOk9uQ2hhbmdlZChmdW5jdGlvbih2NDAxKQogICAgX0cuQXV0b0RlZmVuZFZvbGNhbm8gPSB2NDAxOwplbmQpOwpsb2NhbCB2MTA3ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZU1lbGVlIiwgewogICAgVGl0bGUgPSAiVXNlIE1lbGVlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMDc6T25DaGFuZ2VkKGZ1bmN0aW9uKHY0MDIpCiAgICBfRy5Vc2VNZWxlZSA9IHY0MDI7CmVuZCk7CmxvY2FsIHYxMDkgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlU3dvcmQiLCB7CiAgICBUaXRsZSA9ICJVc2UgU3dvcmQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEwOTpPbkNoYW5nZWQoZnVuY3Rpb24odjQwMykKICAgIF9HLlVzZVN3b3JkID0gdjQwMzsKZW5kKTsKbG9jYWwgdjExMCA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVHdW4iLCB7CiAgICBUaXRsZSA9ICJVc2UgR3VuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMTA6T25DaGFuZ2VkKGZ1bmN0aW9uKHY0MDQpCiAgICBfRy5Vc2VHdW4gPSB2NDA0OwplbmQpOwpsb2NhbCBmdW5jdGlvbiB2MTcyKHY0MDUpCiAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgdjQwNSwgZmFsc2UsIGdhbWUpOwogICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCB2NDA1LCBmYWxzZSwgZ2FtZSk7CmVuZApsb2NhbCBmdW5jdGlvbiB2MTczKCkKICAgIGxvY2FsIHY0MDYgPSBnYW1lLldvcmtzcGFjZS5NYXAuUHJlaGlzdG9yaWNJc2xhbmQuQ29yZTpGaW5kRmlyc3RDaGlsZCgiSW50ZXJpb3JMYXZhIik7CiAgICBpZiAodjQwNiBhbmQgdjQwNjpJc0EoIk1vZGVsIikpIHRoZW4KICAgICAgICB2NDA2OkRlc3Ryb3koKTsKICAgIGVuZAogICAgbG9jYWwgdjQwNyA9IGdhbWUuV29ya3NwYWNlLk1hcDpGaW5kRmlyc3RDaGlsZCgiUHJlaGlzdG9yaWNJc2xhbmQiKTsKICAgIGlmIHY0MDcgdGhlbgogICAgICAgIGZvciB2NzUwLCB2NzUxIGluIHBhaXJzKHY0MDc6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgKHY3NTE6SXNBKCJQYXJ0IikgYW5kIHY3NTEuTmFtZTpsb3dlcigpOmZpbmQoImxhdmEiKSkgdGhlbgogICAgICAgICAgICAgICAgdjc1MTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBsb2NhbCB2NDA4ID0gZ2FtZS5Xb3Jrc3BhY2UuTWFwOkZpbmRGaXJzdENoaWxkKCJQcmVoaXN0b3JpY0lzbGFuZCIpOwogICAgaWYgdjQwOCB0aGVuCiAgICAgICAgZm9yIHY3NTIsIHY3NTMgaW4gcGFpcnModjQwODpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICBpZiB2NzUzOklzQSgiTW9kZWwiKSB0aGVuCiAgICAgICAgICAgICAgICBmb3IgdjkwNSwgdjkwNiBpbiBwYWlycyh2NzUzOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY5MDY6SXNBKCJNZXNoUGFydCIpIGFuZCB2OTA2Lk5hbWU6bG93ZXIoKTpmaW5kKCJsYXZhIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjkwNjpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCmxvY2FsIGZ1bmN0aW9uIHYxNzQoKQogICAgbG9jYWwgdjQwOSA9IGdhbWUuV29ya3NwYWNlLk1hcC5QcmVoaXN0b3JpY0lzbGFuZC5Db3JlLlZvbGNhbm9Sb2NrczsKICAgIGZvciB2NTY0LCB2NTY1IGluIHBhaXJzKHY0MDk6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NTY1OklzQSgiTW9kZWwiKSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3NTQgPSB2NTY1OkZpbmRGaXJzdENoaWxkKCJ2b2xjYW5vcm9jayIpOwogICAgICAgICAgICBpZiAodjc1NCBhbmQgdjc1NDpJc0EoIk1lc2hQYXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4ODEgPSB2NzU0LkNvbG9yOwogICAgICAgICAgICAgICAgaWYgKCh2ODgxID09IENvbG9yMy5mcm9tUkdCKDE4NSwgNTMsIDU2KSkgb3IgKHY4ODEgPT0gQ29sb3IzLmZyb21SR0IoMTg1LCA1MywgNTcpKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIHJldHVybiB2NzU0OwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICByZXR1cm4gbmlsOwplbmQKbG9jYWwgZnVuY3Rpb24gdjE2Mih2NDEwKQogICAgbG9jYWwgdjQxMSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcjsKICAgIGxvY2FsIHY0MTIgPSB2NDExLkJhY2twYWNrOwogICAgZm9yIHY1NjYsIHY1NjcgaW4gcGFpcnModjQxMjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmICh2NTY3OklzQSgiVG9vbCIpIGFuZCAodjU2Ny5Ub29sVGlwID09IHY0MTApKSB0aGVuCiAgICAgICAgICAgIHY1NjcuUGFyZW50ID0gdjQxMS5DaGFyYWN0ZXI7CiAgICAgICAgICAgIGZvciB2ODE4LCB2ODE5IGluIGlwYWlycyh7CiAgICAgICAgICAgICAgICAiWiIsCiAgICAgICAgICAgICAgICAiWCIsCiAgICAgICAgICAgICAgICAiQyIsCiAgICAgICAgICAgICAgICAiViIsCiAgICAgICAgICAgICAgICAiRiIKICAgICAgICAgICAgfSkgZG8KICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICB2MTcyKHY4MTkpOwogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHY1NjcuUGFyZW50ID0gdjQxMjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9EZWZlbmRWb2xjYW5vIHRoZW4KICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgcGNhbGwodjE3Myk7CiAgICAgICAgICAgIGxvY2FsIHY3NTcgPSB2MTc0KCk7CiAgICAgICAgICAgIGlmIHY3NTcgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjg4MiA9IENGcmFtZS5uZXcodjc1Ny5Qb3NpdGlvbiArIFZlY3RvcjMubmV3KDAsIDAsIDApKTsKICAgICAgICAgICAgICAgIFR3ZWVuMih2ODgyKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4ODMgPSB2NzU3LkNvbG9yOwogICAgICAgICAgICAgICAgaWYgKCh2ODgzIH49IENvbG9yMy5mcm9tUkdCKDE4NSwgNTMsIDU2KSkgYW5kICh2ODgzIH49IENvbG9yMy5mcm9tUkdCKDE4NSwgNTMsIDU3KSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NzU3ID0gdjE3NCgpOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTI1ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTI2ID0gKCh2MTEyNSAtIHY3NTcuUG9zaXRpb24pIC0gVmVjdG9yMy5uZXcoMCwgMCwgMCkpLk1hZ25pdHVkZTsKICAgICAgICAgICAgICAgICAgICBpZiAodjExMjYgPD0gMSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBfRy5Vc2VNZWxlZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTYyKCJNZWxlZSIpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgX0cuVXNlU3dvcmQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2MigiU3dvcmQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlVzZUd1biB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTYyKCJHdW4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgX0cuVHdlZW5Ub1ByZWhpc3RvcmljID0gZmFsc2U7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgX0cuVHdlZW5Ub1ByZWhpc3RvcmljID0gdHJ1ZTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjE3NSA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVLaWxsQXVyYSIsIHsKICAgIFRpdGxlID0gIkF0dGFjayBHb2xlbXMgQXVyYSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTc1Ok9uQ2hhbmdlZChmdW5jdGlvbih2NDEzKQogICAgS2lsbEF1cmEgPSB2NDEzOwplbmQpOwp2MTcuVG9nZ2xlS2lsbEF1cmE6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBLaWxsQXVyYSB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGZvciB2ODg0LCB2ODg1IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiAodjg4NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjg4NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjg4NS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4ODUuSHVtYW5vaWQuSGVhbHRoID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4ODUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBLaWxsQXVyYSBvciBub3Qgdjg4NS5QYXJlbnQgb3IgKHY4ODUuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTc2ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZUNvbGxlY3RCb25lIiwgewogICAgVGl0bGUgPSAiQ29sbGVjdCBCb25lIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNzY6T25DaGFuZ2VkKGZ1bmN0aW9uKHY0MTQpCiAgICBfRy5BdXRvQ29sbGVjdEJvbmUgPSB2NDE0OwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvQ29sbGVjdEJvbmUgdGhlbgogICAgICAgICAgICBmb3IgdjgyMCwgdjgyMSBpbiBwYWlycyh3b3Jrc3BhY2U6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgIGlmICh2ODIxOklzQSgiQmFzZVBhcnQiKSBhbmQgKHY4MjEuTmFtZSA9PSAiRGlub0JvbmUiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KHY4MjEuUG9zaXRpb24pKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTc3ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZUNvbGxlY3RFZ2ciLCB7CiAgICBUaXRsZSA9ICJDb2xsZWN0IERyYWdvbiBFZ2ciLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE3NzpPbkNoYW5nZWQoZnVuY3Rpb24odjQxNSkKICAgIF9HLkF1dG9Db2xsZWN0RWdnID0gdjQxNTsKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b0NvbGxlY3RFZ2cgdGhlbgogICAgICAgICAgICBsb2NhbCB2NzU4ID0gd29ya3NwYWNlLk1hcC5QcmVoaXN0b3JpY0lzbGFuZC5Db3JlLlNwYXduZWREcmFnb25FZ2dzOkdldENoaWxkcmVuKCk7CiAgICAgICAgICAgIGlmICgjIHY3NTggPiAwKSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2ODg2ID0gdjc1OFttYXRoLnJhbmRvbSgxLCAjIHY3NTgpXTsKICAgICAgICAgICAgICAgIGlmICh2ODg2OklzQSgiTW9kZWwiKSBhbmQgdjg4Ni5QcmltYXJ5UGFydCkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuMih2ODg2LlByaW1hcnlQYXJ0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExMjcgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb247CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExMjggPSB2ODg2LlByaW1hcnlQYXJ0LlBvc2l0aW9uOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTI5ID0gKHYxMTI3IC0gdjExMjgpLk1hZ25pdHVkZTsKICAgICAgICAgICAgICAgICAgICBpZiAodjExMjkgPD0gMSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwoKCgoKLS0gPT09PT09PT09PT09PT09PT0gU0FGRSBNRU5VIFRPR0dMRSAoUklHSFRTSElGVCkgPT09PT09PT09PT09PT09PT0KLS0gTm9uLWRlc3RydWN0aXZlIHRvZ2dsZTogb25seSBoaWRlcy9zaG93cyBTY3JlZW5HdWkgaW5zdGVhZCBvZiBEZXN0cm95KCkKbG9jYWwgVUlTID0gZ2FtZTpHZXRTZXJ2aWNlKCJVc2VySW5wdXRTZXJ2aWNlIikKCmxvY2FsIGZ1bmN0aW9uIGZpbmRNYWluR3VpKCkKICAgIC0tIFRyeSBDb3JlR3VpIGZpcnN0IChjb21tb24gZm9yIFVJIGxpYnMpCiAgICBmb3IgXyx2IGluIGlwYWlycyhnYW1lOkdldFNlcnZpY2UoIkNvcmVHdWkiKTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY6SXNBKCJTY3JlZW5HdWkiKSB0aGVuCiAgICAgICAgICAgIHJldHVybiB2CiAgICAgICAgZW5kCiAgICBlbmQKICAgIC0tIEZhbGxiYWNrIHRvIFBsYXllckd1aQogICAgbG9jYWwgcGcgPSBQbGF5ZXJzLkxvY2FsUGxheWVyOkZpbmRGaXJzdENoaWxkKCJQbGF5ZXJHdWkiKQogICAgaWYgcGcgdGhlbgogICAgICAgIGZvciBfLHYgaW4gaXBhaXJzKHBnOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGlmIHY6SXNBKCJTY3JlZW5HdWkiKSB0aGVuCiAgICAgICAgICAgICAgICByZXR1cm4gdgogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIG5pbAplbmQKCmxvY2FsIE1haW5HdWkgPSBmaW5kTWFpbkd1aSgpCmxvY2FsIFZpc2libGUgPSB0cnVlCgpVSVMuSW5wdXRCZWdhbjpDb25uZWN0KGZ1bmN0aW9uKGlucHV0LCBncCkKICAgIGlmIGdwIHRoZW4gcmV0dXJuIGVuZAogICAgaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuUmlnaHRTaGlmdCB0aGVuCiAgICAgICAgVmlzaWJsZSA9IG5vdCBWaXNpYmxlCiAgICAgICAgaWYgTWFpbkd1aSB0aGVuCiAgICAgICAgICAgIE1haW5HdWkuRW5hYmxlZCA9IFZpc2libGUKICAgICAgICBlbmQKICAgIGVuZAplbmQpCi0tID09PT09PT09PT09PT09PT09IEVORCBNRU5VIFRPR0dMRSA9PT09PT09PT09PT09PT09PQoKCgotLSA9PT09PT09PT09PT09PT09PSBGVUxMIFRPR0dMRSBGSVggPT09PT09PT09PT09PT09PT0KbG9jYWwgVUlTID0gZ2FtZTpHZXRTZXJ2aWNlKCJVc2VySW5wdXRTZXJ2aWNlIikKbG9jYWwgQ29yZUd1aSA9IGdhbWU6R2V0U2VydmljZSgiQ29yZUd1aSIpCmxvY2FsIFBsYXllcnMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQpsb2NhbCBscCA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKCmxvY2FsIEdVSV9OQU1FID0gIkJOX1RPR0dMRV9HVUkiCmlmIENvcmVHdWk6RmluZEZpcnN0Q2hpbGQoR1VJX05BTUUpIHRoZW4KICAgIENvcmVHdWlbR1VJX05BTUVdOkRlc3Ryb3koKQplbmQKCmxvY2FsIFNjcmVlbkd1aSA9IEluc3RhbmNlLm5ldygiU2NyZWVuR3VpIikKU2NyZWVuR3VpLk5hbWUgPSBHVUlfTkFNRQpTY3JlZW5HdWkuUmVzZXRPblNwYXduID0gZmFsc2UKU2NyZWVuR3VpLlBhcmVudCA9IENvcmVHdWkKCmxvY2FsIFRvZ2dsZUJ0biA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpClRvZ2dsZUJ0bi5TaXplID0gVURpbTIuZnJvbU9mZnNldCg1MCw1MCkKVG9nZ2xlQnRuLlBvc2l0aW9uID0gVURpbTIubmV3KDAsMTAsMC41LC0yNSkKVG9nZ2xlQnRuLlRleHQgPSAi4omhIgpUb2dnbGVCdG4uVGV4dFNjYWxlZCA9IHRydWUKVG9nZ2xlQnRuLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjIKVG9nZ2xlQnRuLlBhcmVudCA9IFNjcmVlbkd1aQoKbG9jYWwgZnVuY3Rpb24gZmluZE1haW4oKQogICAgZm9yIF8sdiBpbiBwYWlycyhTY3JlZW5HdWk6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICBpZiB2OklzQSgiRnJhbWUiKSBhbmQgdi5OYW1lOmxvd2VyKCk6ZmluZCgibWFpbiIpIHRoZW4KICAgICAgICAgICAgcmV0dXJuIHYKICAgICAgICBlbmQKICAgIGVuZAplbmQKCmxvY2FsIG9wZW5lZCA9IHRydWUKbG9jYWwgZnVuY3Rpb24gc2V0VmlzaWJsZShzdGF0ZSkKICAgIGxvY2FsIG1haW4gPSBmaW5kTWFpbigpCiAgICBpZiBtYWluIHRoZW4KICAgICAgICBtYWluLlZpc2libGUgPSBzdGF0ZQogICAgZW5kCmVuZAoKVG9nZ2xlQnRuLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgb3BlbmVkID0gbm90IG9wZW5lZAogICAgc2V0VmlzaWJsZShvcGVuZWQpCmVuZCkKClVJUy5JbnB1dEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQsIGdwKQogICAgaWYgZ3AgdGhlbiByZXR1cm4gZW5kCiAgICBpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5SaWdodENvbnRyb2wgdGhlbgogICAgICAgIG9wZW5lZCA9IG5vdCBvcGVuZWQKICAgICAgICBzZXRWaXNpYmxlKG9wZW5lZCkKICAgIGVuZAplbmQpCgp0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgyKSBkbwogICAgICAgIGlmIG5vdCBTY3JlZW5HdWkuUGFyZW50IHRoZW4KICAgICAgICAgICAgU2NyZWVuR3VpLlBhcmVudCA9IENvcmVHdWkKICAgICAgICAgICAgc2V0VmlzaWJsZShvcGVuZWQpCiAgICAgICAgZW5kIAogICAgZW5kCiAgZW5kKQotLSA9PT09PT09PT09PT09PT09PSBFTkQgVE9HR0xFIEZJWCA9PT09PT09PT09PT09PT09PQog"

local function __decode(b)
    local s = game:GetService("HttpService"):Base64Decode(b)
    return s
end

local __src = __decode(__b64)
local __f = loadstring(__src)
if not __f then error("Decode failed") end
return __f()
