-- Olios Obfuscated (Light)
local b64 = "LS0gPT09PT0gQk9PVCA9PT09PQpyZXBlYXQgdGFzay53YWl0KCkgdW50aWwgZ2FtZTpJc0xvYWRlZCgpCmxvY2FsIEh0dHBTZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJIdHRwU2VydmljZSIpCmxvY2FsIFBsYXllcnMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQpsb2NhbCBMb2NhbFBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKcmVwZWF0IHRhc2sud2FpdCgpIHVudGlsIExvY2FsUGxheWVyCgotLSA9PT09PSBBUEkgPT09PT0KbG9jYWwgQVBJID0gImh0dHBzOi8vb2xpb3Nia2l0Lm9ucmVuZGVyLmNvbSIKCi0tID09PT09IEtFWSA9PT09PQpsb2NhbCBrZXkgPSBnZXRnZW52KCkuS2V5CmlmIG5vdCBrZXkgdGhlbgogICAgTG9jYWxQbGF5ZXI6S2ljaygiTWlzc2luZyBLZXkiKQogICAgcmV0dXJuCmVuZAoKLS0gPT09PT0gSFdJRCA9PT09PQpsb2NhbCBod2lkID0gIlVOS05PV04iCnBjYWxsKGZ1bmN0aW9uKCkKICAgIGh3aWQgPSBnYW1lOkdldFNlcnZpY2UoIlJieEFuYWx5dGljc1NlcnZpY2UiKTpHZXRDbGllbnRJZCgpCmVuZCkKCi0tID09PT09IFZFUklGWSA9PT09PQpsb2NhbCBmdW5jdGlvbiB2ZXJpZnlLZXkoKQogICAgbG9jYWwgdXJsID0gQVBJIC4uICIvYXBpL3ZlcmlmeT9rZXk9IgogICAgICAgIC4uIEh0dHBTZXJ2aWNlOlVybEVuY29kZShrZXkpCiAgICAgICAgLi4gIiZod2lkPSIKICAgICAgICAuLiBIdHRwU2VydmljZTpVcmxFbmNvZGUoaHdpZCkKCiAgICBmb3IgaSA9IDEsNSBkbwogICAgICAgIGxvY2FsIG9rLCBib2R5ID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICByZXR1cm4gZ2FtZTpIdHRwR2V0KHVybCkKICAgICAgICBlbmQpCgogICAgICAgIGlmIG9rIGFuZCBib2R5IHRoZW4KICAgICAgICAgICAgbG9jYWwgc3VjY2VzcywgcmVzID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgcmV0dXJuIEh0dHBTZXJ2aWNlOkpTT05EZWNvZGUoYm9keSkKICAgICAgICAgICAgZW5kKQoKICAgICAgICAgICAgaWYgc3VjY2VzcyBhbmQgcmVzIGFuZCByZXMuc3VjY2VzcyB0aGVuCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgICAgICBlbHNlaWYgc3VjY2VzcyBhbmQgcmVzIGFuZCByZXMubWVzc2FnZSB0aGVuCiAgICAgICAgICAgICAgICBMb2NhbFBsYXllcjpLaWNrKHJlcy5tZXNzYWdlKQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAoKICAgICAgICB0YXNrLndhaXQoMikgLS0gY2jhu50gcuG7k2kgdGjhu60gbOG6oWkKICAgIGVuZAoKICAgIExvY2FsUGxheWVyOktpY2soIkFQSSBFcnJvciAoVGltZW91dCkiKQogICAgcmV0dXJuIGZhbHNlCmVuZAogICAgaWYgbm90IHZlcmlmeUtleSgpIHRoZW4KICAgIHJldHVybgplbmQKCnByaW50KCJbT2xpb3NdIEtleSBPSyB8IEhXSUQgYm91bmQiKQoKdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAtLSBNRU5VICsgRkFSTSDhu54gxJDDglkKbG9jYWwgdjE0ID0gbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoImh0dHBzOi8vZ2l0aHViLmNvbS9kYXdpZC1zY3JpcHRzL0ZsdWVudC9yZWxlYXNlcy9sYXRlc3QvZG93bmxvYWQvbWFpbi5sdWEiKSkoKTsKbG9jYWwgdjE1ID0gdjE0OkNyZWF0ZVdpbmRvdyh7CiAgICBUaXRsZSA9ICJGYUZhIEJldGEgSHViLUJsb3ggRnJ1aXQgWyBQcmVtaXVtIF0iLC0tIG9saW9zCiAgICBTdWJUaXRsZSA9ICJCeSBPbGlvcyIsLS0gCiAgICBUYWJXaWR0aCA9IDE2MCwKICAgIFRoZW1lID0gIkRhcmsiLC0tCiAgICBBY3J5bGljID0gZmFsc2UsCiAgICBTaXplID0gVURpbTIuZnJvbU9mZnNldCg1MDAsIDMyMCksCiAgICBNaW5pbWl6ZUtleSA9IEVudW0uS2V5Q29kZS5FbmQKfSk7CmxvY2FsIHYxNiA9IHsKICAgIEhvbWUgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJUYWIgSW5mb3JtYXRpb24iCiAgICB9KSwKICAgIE1haW4gPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJUYWIgRmFybWluZyIKICAgIH0pLAogICAgU2VhID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVGFiIFZvbGNhbm8gQW5kIFNlYSBFdmVudCIKICAgIH0pLAogICAgSVRNID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVGFiIEZhcm1pbmcgT3RoZXIiCiAgICB9KSwKICAgIFNldHRpbmcgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJTZXR0aW5nIEZhcm0iCiAgICB9KSwKICAgIFN0YXR1cyA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIlRhYiBTdGF0dXMgQW5kIFNlcnZlciIKICAgIH0pLAogICAgU3RhdHMgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJUYWIgU3RhdHMiCiAgICB9KSwKICAgIFBsYXllciA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIlRhYiBMb2NhbCBQbGF5ZXIiCiAgICB9KSwKICAgIFRlbGVwb3J0ID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVGFiIFRlbGVwb3J0IgogICAgfSksCiAgICBWaXN1YWwgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJUYWIgVmlzdWFsIgogICAgfSksCiAgICBGcnVpdCA9IHYxNTpBZGRUYWIoewogICAgICAgIFRpdGxlID0gIlRhYiBFc3AgQW5kIEZydWl0IgogICAgfSksCiAgICBSYWlkID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVGFiIFJhaWQiCiAgICB9KSwKICAgIFJhY2UgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJUYWIgVXBncmFkZSBSYWNlIgogICAgfSksCiAgICBTaG9wID0gdjE1OkFkZFRhYih7CiAgICAgICAgVGl0bGUgPSAiVGFiIFNob3AiCiAgICB9KSwKICAgIE1pc2MgPSB2MTU6QWRkVGFiKHsKICAgICAgICBUaXRsZSA9ICJUYWIgTWlzYyIKICAgIH0pCn07CmxvY2FsIHYxNyA9IHYxNC5PcHRpb25zOwpsb2NhbCB2MTggPSBnYW1lLlBsYWNlSWQ7CmlmICh2MTggPT0gMjc1MzkxNTU0OSkgdGhlbgogICAgU2VhMSA9IHRydWU7CmVsc2VpZiAodjE4ID09IDQ0NDIyNzIxODMpIHRoZW4KICAgIFNlYTIgPSB0cnVlOwplbHNlaWYgKHYxOCA9PSA3NDQ5NDIzNjM1KSB0aGVuCiAgICBTZWEzID0gdHJ1ZTsKZWxzZQogICAgZ2FtZTpTaHV0ZG93bigpOwplbmQKZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuSWRsZWQ6Y29ubmVjdChmdW5jdGlvbigpCiAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxVc2VyIik6QnV0dG9uMkRvd24oVmVjdG9yMi5uZXcoMCwgMCksIHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNGcmFtZSk7CiAgICB3YWl0KCk7CiAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxVc2VyIik6QnV0dG9uMlVwKFZlY3RvcjIubmV3KDAsIDApLCB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUpOwplbmQpOwpTZWExID0gZmFsc2U7ClNlYTIgPSBmYWxzZTsKU2VhMyA9IGZhbHNlOwpsb2NhbCB2MTkgPSBnYW1lLlBsYWNlSWQ7CmlmICh2MTkgPT0gMjc1MzkxNTU0OSkgdGhlbgogICAgU2VhMSA9IHRydWU7CmVsc2VpZiAodjE5ID09IDQ0NDIyNzIxODMpIHRoZW4KICAgIFNlYTIgPSB0cnVlOwplbHNlaWYgKHYxOSA9PSA3NDQ5NDIzNjM1KSB0aGVuCiAgICBTZWEzID0gdHJ1ZTsKZW5kCmZ1bmN0aW9uIENoZWNrTGV2ZWwoKQogICAgbG9jYWwgdjE5NyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWU7CiAgICBpZiBTZWExIHRoZW4KICAgICAgICBpZiAoKHYxOTcgPT0gMSkgb3IgKHYxOTcgPD0gOSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkJhbmRpdCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkJhbmRpdCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJCYW5kaXRRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJCYW5kaXQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygxMDYwLjkzODM1NDQ5MjIsIDE2LjQ1NTA2NjY4MDkwOCwgMTU0Ny43ODQxNzk2ODc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxMDM4LjU1MzM0NDcyNjYsIDQxLjI5NjI0OTM4OTY0OCwgMTU3Ni41MDk4ODc2OTUzKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEwKSBvciAodjE5NyA8PSAxNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk1vbmtleSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk1vbmtleSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJKdW5nbGVRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIk1vbmtleSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTYwMS42NTUzOTU1MDc4LCAzNi44NTIxMzQ3MDQ1OSwgMTUzLjM4ODA5MjA0MTAyKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE0NDguMTQ0NjUzMzIwMywgNTAuODUxOTkzNTYwNzkxLCA2My42MDcxODUzNjM3Nyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNSkgb3IgKHYxOTcgPD0gMjkpIG9yIChTZWxlY3RNb25zdGVyID09ICJHb3JpbGxhIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiR29yaWxsYSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJKdW5nbGVRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkdvcmlsbGEiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE2MDEuNjU1Mzk1NTA3OCwgMzYuODUyMTM0NzA0NTksIDE1My4zODgwOTIwNDEwMik7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxMTQyLjY0ODgwMzcxMDksIDQwLjQ2MjM0ODkzNzk4OCwgLSA1MTUuMzkyMjcyOTQ5MjIpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMzApIG9yICh2MTk3IDw9IDM5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiUGlyYXRlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkJ1Z2d5UXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUGlyYXRlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxMTQwLjE3NjE0NzQ2MDksIDQuNzUyMDQ5NDQ2MTA2LCAzODI3LjQwNTc2MTcxODgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTIwMS4wODgxMzQ3NjU2LCA0MC42Mjg5NDA1ODIyNzUsIDM4NTcuNTk2Njc5Njg3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSA0MCkgb3IgKHYxOTcgPD0gNTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJCcnV0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkJydXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkJ1Z2d5UXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQnJ1dGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDExNDAuMTc2MTQ3NDYwOSwgNC43NTIwNDk0NDYxMDYsIDM4MjcuNDA1NzYxNzE4OCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxMzg3LjUzMjQ3MDcwMzEsIDI0LjU5MjAzNTI5MzU3OSwgNDEwMC45NTc1MTk1MzEzKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDYwKSBvciAodjE5NyA8PSA3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkRlc2VydCBCYW5kaXQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJEZXNlcnQgQmFuZGl0IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRlc2VydFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRGVzZXJ0IEJhbmRpdCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDg5Ni41MTcyMTE5MTQwNiwgNi40Mzg0NjE3ODA1NDgxLCA0MzkwLjE0OTQxNDA2MjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDk4NC45OTg5NjI0MDIzNCwgMTYuMTA5NTUyMzgzNDIzLCA0NDE3LjkxMDE1NjI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDc1KSBvciAodjE5NyA8PSA4OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkRlc2VydCBPZmZpY2VyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRGVzZXJ0IE9mZmljZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRGVzZXJ0UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJEZXNlcnQgT2ZmaWNlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDg5Ni41MTcyMTE5MTQwNiwgNi40Mzg0NjE3ODA1NDgxLCA0MzkwLjE0OTQxNDA2MjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDE1NDcuMTUxMDAwOTc2NiwgMTQuNDUyMDM4NzY0OTU0LCA0MzgxLjgwMDI5Mjk2ODgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gOTApIG9yICh2MTk3IDw9IDk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU25vdyBCYW5kaXQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTbm93IEJhbmRpdCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTbm93UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTbm93IEJhbmRpdCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDEzODYuODA3MzczMDQ2OSwgODcuMjcyNzg5MDAxNDY1LCAtIDEyOTguMzU3NjY2MDE1Nik7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMTM1Ni4zMDI4NTY0NDUzLCAxMDUuNzY4NjUzODY5NjMsIC0gMTMyOC4yNDE4MjEyODkxKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEwMCkgb3IgKHYxOTcgPD0gMTE5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU25vd21hbiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNub3dtYW4iOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU25vd1F1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU25vd21hbiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDEzODYuODA3MzczMDQ2OSwgODcuMjcyNzg5MDAxNDY1LCAtIDEyOTguMzU3NjY2MDE1Nik7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMTIxOC43OTU2NTQyOTY5LCAxMzguMDExODQwODIwMzEsIC0gMTQ4OC4wMjYyNDUxMTcyKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEyMCkgb3IgKHYxOTcgPD0gMTQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQ2hpZWYgUGV0dHkgT2ZmaWNlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkNoaWVmIFBldHR5IE9mZmljZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFyaW5lUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQ2hpZWYgUGV0dHkgT2ZmaWNlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNTAzNS40OTYwOTM3NSwgMjguNjc3ODM1NDY0NDc4LCA0MzI0LjE4NDA4MjAzMTMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNDkzMS4xNTUyNzM0Mzc1LCA2NS43OTMxMTM3MDg0OTYsIDQxMjEuODM5MzU1NDY4OCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNTApIG9yICh2MTk3IDw9IDE3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNreSBCYW5kaXQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTa3kgQmFuZGl0IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNreVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU2t5IEJhbmRpdCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNDg0Mi4xMzcyMDcwMzEzLCA3MTcuNjk1NDM0NTcwMzEsIC0gMjYyMy4wNDgzMzk4NDM4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDQ5NTUuNjQxMTEzMjgxMywgMzY1LjQ2MzY1MzU2NDQ1LCAtIDI5MDguMTg2NTIzNDM3NSk7CiAgICAgICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTc1KSBvciAodjE5NyA8PSAxODkpIG9yIChTZWxlY3RNb25zdGVyID09ICJEYXJrIE1hc3RlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkRhcmsgTWFzdGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNreVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRGFyayBNYXN0ZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDQ4NDIuMTM3MjA3MDMxMywgNzE3LjY5NTQzNDU3MDMxLCAtIDI2MjMuMDQ4MzM5ODQzOCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA1MTQ4LjE2NTAzOTA2MjUsIDQzOS4wNDU3MTUzMzIwMywgLSAyMzMyLjk2MTE4MTY0MDYpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTkwKSBvciAodjE5NyA8PSAyMDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJQcmlzb25lciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlByaXNvbmVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlByaXNvbmVyUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJQcmlzb25lciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDUzMTAuNjA1NDcsIDAuMzUwMDE0OTI1LCA0NzQuOTQ2NTk0LCAwLjAxNzUwMTcxMTgsIDAsIDAuOTk5ODQ2OTM1LCAwLCAxLCAwLCAtIDAuOTk5ODQ2OTM1LCAwLCAwLjAxNzUwMTcxMTgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDQ5MzcuMzE4ODUsIDAuMzMyMDMxMzk5LCA2NDkuNTc0NTI0LCAwLjY5NDY0OTgxNiwgMCwgLSAwLjcxOTM0ODA3MywgMCwgMSwgMCwgMC43MTkzNDgwNzMsIDAsIDAuNjk0NjQ5ODE2KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIxMCkgb3IgKHYxOTcgPD0gMjQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRGFuZ2Vyb3VzIFByaXNvbmVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRGFuZ2Vyb3VzIFByaXNvbmVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlByaXNvbmVyUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJEYW5nZXJvdXMgUHJpc29uZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg1MzEwLjYwNTQ3LCAwLjM1MDAxNDkyNSwgNDc0Ljk0NjU5NCwgMC4wMTc1MDE3MTE4LCAwLCAwLjk5OTg0NjkzNSwgMCwgMSwgMCwgLSAwLjk5OTg0NjkzNSwgMCwgMC4wMTc1MDE3MTE4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg1MDk5LjY2MjYsIDAuMzUxNTYyNjc5LCAxMDU1Ljc1ODMsIDAuODk4OTA2ODI3LCAwLCAtIDAuNDM4MTM5ODU2LCAwLCAxLCAwLCAwLjQzODEzOTg1NiwgMCwgMC44OTg5MDY4MjcpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjUwKSBvciAodjE5NyA8PSAyNzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJUb2dhIFdhcnJpb3IiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJUb2dhIFdhcnJpb3IiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQ29sb3NzZXVtUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJUb2dhIFdhcnJpb3IiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE1NzcuNzg5MDYyNSwgNy40MTUxNDIwNTkzMjYyLCAtIDI5ODQuNDgzODg2NzE4OCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxODcyLjUxNjYwMTU2MjUsIDQ5LjA4MDIxNTQ1NDEwMiwgLSAyOTEzLjgxMDU0Njg3NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNzUpIG9yICh2MTk3IDw9IDI5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkdsYWRpYXRvciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkdsYWRpYXRvciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDb2xvc3NldW1RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkdsYWRpYXRvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTU3Ny43ODkwNjI1LCA3LjQxNTE0MjA1OTMyNjIsIC0gMjk4NC40ODM4ODY3MTg4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE1MjEuMzc0MDIzNDM3NSwgODEuMjAzMTcwNzc2MzY3LCAtIDMwNjYuMzEzOTY0ODQzOCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAzMDApIG9yICh2MTk3IDw9IDMyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk1pbGl0YXJ5IFNvbGRpZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNaWxpdGFyeSBTb2xkaWVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIk1hZ21hUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJNaWxpdGFyeSBTb2xkaWVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA1MzE2LjExNTcyMjY1NjMsIDEyLjI2MjgzMTY4NzkyNywgODUxNy4wMDM5MDYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA1MzY5LjAwMDQ4ODI4MTMsIDYxLjI0MzUyNjQ1ODc0LCA4NTU2LjQ5MjE4NzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMzI1KSBvciAodjE5NyA8PSAzNzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJNaWxpdGFyeSBTcHkiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNaWxpdGFyeSBTcHkiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTWFnbWFRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIk1pbGl0YXJ5IFNweSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNTMxNi4xMTU3MjI2NTYzLCAxMi4yNjI4MzE2ODc5MjcsIDg1MTcuMDAzOTA2MjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNTc4Ny4wMDI5MywgNzUuODI2MjYzNCwgODY1MS42OTkyMiwgMC44Mzg1OTA1NjIsIDAsIC0gMC41NDQ3NjIxOTQsIDAsIDEsIDAsIDAuNTQ0NzYyMTk0LCAwLCAwLjgzODU5MDU2Mik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAzNzUpIG9yICh2MTk3IDw9IDM5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkZpc2htYW4gV2FycmlvciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkZpc2htYW4gV2FycmlvciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGaXNobWFuUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJGaXNobWFuIFdhcnJpb3IiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg2MTEyMi42NTIzNDM3NSwgMTguNDk3NDQyMjQ1NDgzLCAxNTY5LjM5OTc4MDI3MzQpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDYwODQ0LjEwNTQ2ODc1LCA5OC40NjI4NzUzNjYyMTEsIDEyOTguMzk4NTU5NTcwMyk7CiAgICAgICAgICAgIGlmIChfRy5BdXRvTGV2ZWwgYW5kICgoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAzMDAwKSkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNjExNjMuODUxNTYyNSwgMTEuNjc5Njg3NSwgMTgxOS43ODQxNzk2ODc1KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNDAwKSBvciAodjE5NyA8PSA0NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJGaXNobWFuIENvbW1hbmRvIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRmlzaG1hbiBDb21tYW5kbyI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGaXNobWFuUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJGaXNobWFuIENvbW1hbmRvIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNjExMjIuNjUyMzQzNzUsIDE4LjQ5NzQ0MjI0NTQ4MywgMTU2OS4zOTk3ODAyNzM0KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg2MTczOC4zOTg0Mzc1LCA2NC4yMDczMjExNjY5OTIsIDE0MzMuODM3NTI0NDE0MSk7CiAgICAgICAgICAgIGlmIChfRy5BdXRvTGV2ZWwgYW5kICgoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAzMDAwKSkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNjExNjMuODUxNTYyNSwgMTEuNjc5Njg3NSwgMTgxOS43ODQxNzk2ODc1KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDQwMCkgb3IgKHYxOTcgPD0gNDQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRmlzaG1hbiBDb21tYW5kbyIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkZpc2htYW4gQ29tbWFuZG8iOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRmlzaG1hblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiRmlzaG1hbiBDb21tYW5kbyI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDYxMTIyLjY1MjM0Mzc1LCAxOC40OTc0NDIyNDU0ODMsIDE1NjkuMzk5NzgwMjczNCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNjE3MzguMzk4NDM3NSwgNjQuMjA3MzIxMTY2OTkyLCAxNDMzLjgzNzUyNDQxNDEpOwogICAgICAgICAgICBpZiAoX0cuQXV0b0xldmVsIGFuZCAoKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMzAwMCkpIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDYxMTYzLjg1MTU2MjUsIDExLjY3OTY4NzUsIDE4MTkuNzg0MTc5Njg3NSkpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEwKSBvciAodjE5NyA8PSA0NzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJHb2QncyBHdWFyZCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkdvZCdzIEd1YXJkIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNreUV4cDFRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkdvZCdzIEd1YXJkIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA0NzIxLjg2MDM1MTU2MjUsIDg0NS4zMDI5Nzg1MTU2MywgLSAxOTUzLjg0ODk5OTAyMzQpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNDYyOC4wNDk4MDQ2ODc1LCA4NjYuOTI4NzcxOTcyNjYsIC0gMTkzMS4yMzUyMjk0OTIyKTsKICAgICAgICAgICAgaWYgKF9HLkF1dG9MZXZlbCBhbmQgKChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDMwMDApKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDQ2MDcuODIyNzUsIDg3Mi41NDI0OCwgLSAxNjY3LjU1Njg4KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gNDc1KSBvciAodjE5NyA8PSA1MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJTaGFuZGEiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTaGFuZGEiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2t5RXhwMVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU2hhbmRhIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA3ODYzLjE1OTY2Nzk2ODgsIDU1NDUuNTE5MDQyOTY4OCwgLSAzNzguNDIyNjY4NDU3MDMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNzY4NS4xNDc0NjA5Mzc1LCA1NjAxLjA3NTE5NTMxMjUsIC0gNDQxLjM4ODc2MzQyNzczKTsKICAgICAgICAgICAgaWYgKF9HLkF1dG9MZXZlbCBhbmQgKChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDMwMDApKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDc4OTQuNjE3Njc1NzgxMywgNTU0Ny4xNDE2MDE1NjI1LCAtIDM4MC4yOTExOTg3MzA0NykpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDUyNSkgb3IgKHYxOTcgPD0gNTQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiUm95YWwgU3F1YWQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJSb3lhbCBTcXVhZCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTa3lFeHAyUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJSb3lhbCBTcXVhZCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNzkwMy4zODI4MTI1LCA1NjM1Ljk4OTc0NjA5MzgsIC0gMTQxMC45MjM4MjgxMjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNzY1NC4yNTE0NjQ4NDM4LCA1NjM3LjEwNzkxMDE1NjMsIC0gMTQwNy43NTUwMDQ4ODI4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDU1MCkgb3IgKHYxOTcgPD0gNjI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiUm95YWwgU29sZGllciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlJveWFsIFNvbGRpZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiU2t5RXhwMlF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUm95YWwgU29sZGllciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNzkwMy4zODI4MTI1LCA1NjM1Ljk4OTc0NjA5MzgsIC0gMTQxMC45MjM4MjgxMjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gNzc2MC40MTA2NDQ1MzEzLCA1Njc5LjkwNzcxNDg0MzgsIC0gMTg4NC44MTEyNzkyOTY5KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDYyNSkgb3IgKHYxOTcgPD0gNjQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiR2FsbGV5IFBpcmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkdhbGxleSBQaXJhdGUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRm91bnRhaW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkdhbGxleSBQaXJhdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg1MjU4LjI3ODgwODU5MzgsIDM4LjUyNjkzMTc2MjY5NSwgNDA1MC4wNDQ5MjE4NzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDU1NTcuMTY4NDU3MDMxMywgMTUyLjMyNzE3ODk1NTA4LCAzOTk4Ljc3NTg3ODkwNjMpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPj0gNjUwKSBvciAoU2VsZWN0TW9uc3RlciA9PSAiR2FsbGV5IENhcHRhaW4iKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJHYWxsZXkgQ2FwdGFpbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGb3VudGFpblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiR2FsbGV5IENhcHRhaW4iOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg1MjU4LjI3ODgwODU5MzgsIDM4LjUyNjkzMTc2MjY5NSwgNDA1MC4wNDQ5MjE4NzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDU2NzcuNjc3MjQ2MDkzOCwgOTIuNzg2MTA5OTI0MzE2LCA0OTY2LjYzMjMyNDIxODgpOwogICAgICAgIGVuZAogICAgZW5kCiAgICBpZiBTZWEyIHRoZW4KICAgICAgICBpZiAoKHYxOTcgPT0gNzAwKSBvciAodjE5NyA8PSA3MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJSYWlkZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJSYWlkZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQXJlYTFRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlJhaWRlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNDI3LjcyNTY3NzQ5MDIzLCA3Mi45OTYzNDU1MjAwMiwgMTgzNS45NDI2MjY5NTMxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg2OC44NzQ1NjUxMjQ1MTIsIDkzLjYzNTY0MzAwNTM3MSwgMjQyOS42NzUyOTI5Njg4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDcyNSkgb3IgKHYxOTcgPD0gNzc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTWVyY2VuYXJ5IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTWVyY2VuYXJ5IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkFyZWExUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJNZXJjZW5hcnkiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDQyNy43MjU2Nzc0OTAyMywgNzIuOTk2MzQ1NTIwMDIsIDE4MzUuOTQyNjI2OTUzMSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA4NjQuODUwMDk3NjU2MjUsIDEyMi40NzEwNDY0NDc3NSwgMTQ1My4xNTA1MTI2OTUzKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDc3NSkgb3IgKHYxOTcgPD0gNzk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU3dhbiBQaXJhdGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTd2FuIFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJBcmVhMlF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU3dhbiBQaXJhdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg2MzUuNjExNTExMjMwNDcsIDczLjA5NjM1MTYyMzUzNSwgOTE3LjgxMjk4ODI4MTI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygxMDY1LjM2Njk0MzM1OTQsIDEzNy42NDAxMjE0NTk5NiwgMTMyNC4zNzk4ODI4MTI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDgwMCkgb3IgKHYxOTcgPD0gODc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRmFjdG9yeSBTdGFmZiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkZhY3RvcnkgU3RhZmYiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiQXJlYTJRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkZhY3RvcnkgU3RhZmYiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg2MzUuNjExNTExMjMwNDcsIDczLjA5NjM1MTYyMzUzNSwgOTE3LjgxMjk4ODI4MTI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg1MzMuMjIwNDU4OTg0MzgsIDEyOC40Njg3NjUyNTg3OSwgMzU1LjYyNjE1OTY2Nzk3KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDg3NSkgb3IgKHYxOTcgPD0gODk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTWFyaW5lIExpZXV0ZW5hbiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk1hcmluZSBMaWV1dGVuYW50IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIk1hcmluZVF1ZXN0MyI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIk1hcmluZSBMaWV1dGVuYW50IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAyNDQwLjk5MzQwODIwMzEsIDczLjA0MTkwODI2NDE2LCAtIDMyMTcuNzA4MjUxOTUzMSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAyNDg5LjI2MjIwNzAzMTMsIDg0LjYxMzU5NDA1NTE3NiwgLSAzMTUxLjg4MzA1NjY0MDYpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gOTAwKSBvciAodjE5NyA8PSA5NDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJNYXJpbmUgQ2FwdGFpbiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk1hcmluZSBDYXB0YWluIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIk1hcmluZVF1ZXN0MyI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIk1hcmluZSBDYXB0YWluIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAyNDQwLjk5MzQwODIwMzEsIDczLjA0MTkwODI2NDE2LCAtIDMyMTcuNzA4MjUxOTUzMSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAyMzM1LjIwMjYzNjcxODgsIDc5Ljc4NjY1OTI0MDcyMywgLSAzMjQ1Ljg2NzQzMTY0MDYpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gOTUwKSBvciAodjE5NyA8PSA5NzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJab21iaWUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJab21iaWUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiWm9tYmllUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJab21iaWUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDU0OTQuMzQxMzA4NTkzOCwgNDguNTA1OTMxODU0MjQ4LCAtIDc5NC41OTA5NDIzODI4MSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA1NTM2LjQ5NzA3MDMxMjUsIDEwMS4wODU3NzcyODI3MSwgLSA4MzUuNTkwNzU5Mjc3MzQpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gOTc1KSBvciAodjE5NyA8PSA5OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJWYW1waXJlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiVmFtcGlyZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJab21iaWVRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlZhbXBpcmUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDU0OTQuMzQxMzA4NTkzOCwgNDguNTA1OTMxODU0MjQ4LCAtIDc5NC41OTA5NDIzODI4MSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA1ODA2LjEwOTg2MzI4MTMsIDE2LjcyMjUyODQ1NzY0MiwgLSAxMTY0LjQzODQ3NjU2MjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTAwMCkgb3IgKHYxOTcgPD0gMTA0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNub3cgVHJvb3BlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNub3cgVHJvb3BlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJTbm93TW91bnRhaW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlNub3cgVHJvb3BlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDYwNy4wNTk2MzEzNDc2NiwgNDAxLjQ0NzgxNDk0MTQxLCAtIDUzNzAuNTU0Njg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTM1LjIxMDUxMDI1MzkxLCA0MzIuNzQyMDk1OTQ3MjcsIC0gNTQ4NC45MTY1MDM5MDYzKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEwNTApIG9yICh2MTk3IDw9IDEwOTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJXaW50ZXIgV2FycmlvciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIldpbnRlciBXYXJyaW9yIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNub3dNb3VudGFpblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiV2ludGVyIFdhcnJpb3IiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg2MDcuMDU5NjMxMzQ3NjYsIDQwMS40NDc4MTQ5NDE0MSwgLSA1MzcwLjU1NDY4NzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDEyMzQuNDQ0OTQ2Mjg5MSwgNDU2Ljk1NDE5MzExNTIzLCAtIDUxNzQuMTMwODU5Mzc1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDExMDApIG9yICh2MTk3IDw9IDExMjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJMYWIgU3Vib3JkaW5hdGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJMYWIgU3Vib3JkaW5hdGUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSWNlU2lkZVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTGFiIFN1Ym9yZGluYXRlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA2MDYxLjg0MTc5Njg3NSwgMTUuOTI2NjcxOTgxODEyLCAtIDQ5MDIuMDM4NTc0MjE4OCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA1NzIwLjU1NzYxNzE4NzUsIDYzLjMwOTQ3MTEzMDM3MSwgLSA0Nzg0LjYxMDM1MTU2MjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTEyNSkgb3IgKHYxOTcgPD0gMTE3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkhvcm5lZCBXYXJyaW9yIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiSG9ybmVkIFdhcnJpb3IiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSWNlU2lkZVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiSG9ybmVkIFdhcnJpb3IiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDYwNjEuODQxNzk2ODc1LCAxNS45MjY2NzE5ODE4MTIsIC0gNDkwMi4wMzg1NzQyMTg4KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDYyOTIuNzUxOTUzMTI1LCA5MS4xODE5ODM5NDc3NTQsIC0gNTUwMi42NDk5MDIzNDM4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDExNzUpIG9yICh2MTk3IDw9IDExOTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJNYWdtYSBOaW5qYSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk1hZ21hIE5pbmphIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZpcmVTaWRlUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJNYWdtYSBOaW5qYSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNTQyOS4wNDczNjMyODEzLCAxNS45Nzc1NjU3NjUzODEsIC0gNTI5Ny45NjE0MjU3ODEzKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDU0NjEuODM4ODY3MTg3NSwgMTMwLjM2MzQ3OTYxNDI2LCAtIDU4MzYuNDcwMjE0ODQzOCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMjAwKSBvciAodjE5NyA8PSAxMjQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTGF2YSBQaXJhdGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJMYXZhIFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJGaXJlU2lkZVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTGF2YSBQaXJhdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDU0MjkuMDQ3MzYzMjgxMywgMTUuOTc3NTY1NzY1MzgxLCAtIDUyOTcuOTYxNDI1NzgxMyk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA1MjUxLjE4ODk2NDg0MzgsIDU1LjE2NDUzNTUyMjQ2MSwgLSA0Nzc0LjQwOTY2Nzk2ODgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTI1MCkgb3IgKHYxOTcgPD0gMTI3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNoaXAgRGVja2hhbmQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTaGlwIERlY2toYW5kIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNoaXBRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTaGlwIERlY2toYW5kIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMTA0MC4yOTI3MjQ2MDk0LCAxMjUuMDgyOTMxNTE4NTUsIDMyOTExLjAzOTA2MjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDkyMS4xMjM2NTcyMjY1NiwgMTI1Ljk4Mzk1NTM4MzMsIDMzMDg4LjMyODEyNSk7CiAgICAgICAgICAgIGlmIChfRy5BdXRvTGV2ZWwgYW5kICgoQ0ZyYW1lTW9uLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAyMDAwMCkpIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDkyMy4yMTI1MjQ0MTQwNiwgMTI2Ljk3NjAwNTU1NDIsIDMyODUyLjgzMjAzMTI1KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTI3NSkgb3IgKHYxOTcgPD0gMTI5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNoaXAgRW5naW5lZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTaGlwIEVuZ2luZWVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNoaXBRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTaGlwIEVuZ2luZWVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMTA0MC4yOTI3MjQ2MDk0LCAxMjUuMDgyOTMxNTE4NTUsIDMyOTExLjAzOTA2MjUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDg4Ni4yODE3OTkzMTY0MSwgNDAuNDc3OTAxNDU4NzQsIDMyODAwLjgzMjAzMTI1KTsKICAgICAgICAgICAgaWYgKF9HLkF1dG9MZXZlbCBhbmQgKChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDIwMDAwKSkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoOTIzLjIxMjUyNDQxNDA2LCAxMjYuOTc2MDA1NTU0MiwgMzI4NTIuODMyMDMxMjUpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMzAwKSBvciAodjE5NyA8PSAxMzI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU2hpcCBTdGV3YXJkIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU2hpcCBTdGV3YXJkIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNoaXBRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTaGlwIFN0ZXdhcmQiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg5NzEuNDIwNjU0Mjk2ODgsIDEyNS4wODI5MzE1MTg1NSwgMzMyNDUuNTQyOTY4NzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDk0My44NTUwNDE1MDM5MSwgMTI5LjU4MTgzMjg4NTc0LCAzMzQ0NC4zNjcxODc1KTsKICAgICAgICAgICAgaWYgKF9HLkF1dG9MZXZlbCBhbmQgKChDRnJhbWVNb24uUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+IDIwMDAwKSkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoOTIzLjIxMjUyNDQxNDA2LCAxMjYuOTc2MDA1NTU0MiwgMzI4NTIuODMyMDMxMjUpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxMzI1KSBvciAodjE5NyA8PSAxMzQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU2hpcCBPZmZpY2VyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU2hpcCBPZmZpY2VyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlNoaXBRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTaGlwIE9mZmljZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg5NzEuNDIwNjU0Mjk2ODgsIDEyNS4wODI5MzE1MTg1NSwgMzMyNDUuNTQyOTY4NzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDk1NS4zODQ1ODI1MTk1MywgMTgxLjA4MzM1ODc2NDY1LCAzMzMzMS44OTA2MjUpOwogICAgICAgICAgICBpZiAoX0cuQXV0b0xldmVsIGFuZCAoKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMjAwMDApKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg5MjMuMjEyNTI0NDE0MDYsIDEyNi45NzYwMDU1NTQyLCAzMjg1Mi44MzIwMzEyNSkpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEzNTApIG9yICh2MTk3IDw9IDEzNzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJBcmN0aWMgV2FycmlvciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkFyY3RpYyBXYXJyaW9yIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZyb3N0UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJBcmN0aWMgV2FycmlvciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDU2NjguMTM3MjA3MDMxMywgMjguMjAyNTMxODE0NTc1LCAtIDY0ODQuNjAwNTg1OTM3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTkzNS40NTQxMDE1NjI1LCA3Ny4yNjAxNjk5ODI5MSwgLSA2NDcyLjc1NjgzNTkzNzUpOwogICAgICAgICAgICBpZiAoX0cuQXV0b0xldmVsIGFuZCAoKENGcmFtZU1vbi5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMjAwMDApKSB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDY1MDguNTU4MTA1NDY4OCwgODkuMDM0OTk2MDMyNzE1LCAtIDEzMi44Mzk1Mzg1NzQyMikpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDEzNzUpIG9yICh2MTk3IDw9IDE0MjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJTbm93IEx1cmtlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNub3cgTHVya2VyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkZyb3N0UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTbm93IEx1cmtlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDU2NjguMTM3MjA3MDMxMywgMjguMjAyNTMxODE0NTc1LCAtIDY0ODQuNjAwNTg1OTM3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNTYyOC40ODI0MjE4NzUsIDU3LjU3NDk5Njk0ODI0MiwgLSA2NjE4LjM0ODE0NDUzMTMpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTQyNSkgb3IgKHYxOTcgPD0gMTQ0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNlYSBTb2xkaWVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU2VhIFNvbGRpZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRm9yZ290dGVuUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTZWEgU29sZGllciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMzA1NC41ODI3NjM2NzE5LCAyMzYuODcyMTMxMzQ3NjYsIC0gMTAxNDcuNzkwMDM5MDYzKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDMxODUuMDE1MzgwODU5NCwgNTguNzg5MDg5MjAyODgxLCAtIDk2NjMuNjA2NDQ1MzEyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA+PSAxNDUwKSBvciAoU2VsZWN0TW9uc3RlciA9PSAiV2F0ZXIgRmlnaHRlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIldhdGVyIEZpZ2h0ZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRm9yZ290dGVuUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJXYXRlciBGaWdodGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAzMDU0LjU4Mjc2MzY3MTksIDIzNi44NzIxMzEzNDc2NiwgLSAxMDE0Ny43OTAwMzkwNjMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMzI2Mi45MzAxNzU3ODEzLCAyOTguNjkwMzY4NjUyMzQsIC0gMTA1NTIuNTI5Mjk2ODc1KTsKICAgICAgICBlbmQKICAgIGVuZAogICAgICAgIGlmIFNlYTMgdGhlbgogICAgICAgIGlmICgodjE5NyA9PSAxNTAwKSBvciAodjE5NyA8PSAxNTI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiUGlyYXRlIE1pbGxpb25haXJlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUGlyYXRlIE1pbGxpb25haXJlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlBpcmF0ZVBvcnRRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlBpcmF0ZSBNaWxsaW9uYWlyZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gNDUwLjEwNDY0NDc3NTM5MDYsIDEwNy42ODE0NTc1MTk1MzEyNSwgNTk1MC43MjYwNzQyMTg3NSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxOTMuOTkyMjc5MDUyNzM0MzgsIDU2LjEyNTAyNjcwMjg4MDg2LCA1NzU1Ljc4ODA4NTkzNzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTUyNSkgb3IgKHYxOTcgPD0gMTU3NCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlBpc3RvbCBCaWxsaW9uYWlyZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlBpc3RvbCBCaWxsaW9uYWlyZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJQaXJhdGVQb3J0UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJQaXN0b2wgQmlsbGlvbmFpcmUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDQ1MC4xMDQ2NDQ3NzUzOTA2LCAxMDcuNjgxNDU3NTE5NTMxMjUsIDU5NTAuNzI2MDc0MjE4NzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTg4LjE0NDYyMjgwMjczNDM4LCA4NC40OTYxMzE4OTY5NzI2NiwgNjMzNy4wNDE5OTIxODc1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE1NzUpIG9yICh2MTk3IDw9IDE1OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJEcmFnb24gQ3JldyBXYXJyaW9yIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiRHJhZ29uIENyZXcgV2FycmlvciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEcmFnb25DcmV3UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJEcmFnb24gQ3JldyBXYXJyaW9yIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNjczNS4xMTA4Mzk4NDM3NSwgMTI2Ljk5MDQ2MzI1NjgzNTk0LCAtIDcxMS4wOTc5NjE0MjU3ODEyKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldyg2NjE1LjIzMzM5ODQzNzUsIDUwLjg0NzY3OTEzODE4MzU5NCwgLSA5NzguOTM0MDgyMDMxMjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTYwMCkgb3IgKHYxOTcgPD0gMTYyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkRyYWdvbiBDcmV3IEFyY2hlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkRyYWdvbiBDcmV3IEFyY2hlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEcmFnb25DcmV3UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJEcmFnb24gQ3JldyBBcmNoZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldyg2NzM1LjExMDgzOTg0Mzc1LCAxMjYuOTkwNDYzMjU2ODM1OTQsIC0gNzExLjA5Nzk2MTQyNTc4MTIpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDY4MTguNTg5MzU1NDY4NzUsIDQ4My43MTg5OTQxNDA2MjUsIDUxMi43MjY4MDY2NDA2MjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTYyNSkgb3IgKHYxOTcgPD0gMTY0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkh5ZHJhIEVuZm9yY2VyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiSHlkcmEgRW5mb3JjZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiVmVub21DcmV3UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJIeWRyYSBFbmZvcmNlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDU0NDYuODc5Mzk0NTMxMywgNjAxLjYyOTQ1NTU2NjQxLCA3NDkuNDU2NzI2MDc0MjIpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDQ1NDcuMTE1MjM0Mzc1LCAxMDAxLjYwMjA1MDc4MTI1LCAzMzQuMTk1NDY1MDg3ODkwNik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNjUwKSBvciAodjE5NyA8PSAxNjk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiVmVub21vdXMgQXNzYWlsYW50IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiVmVub21vdXMgQXNzYWlsYW50IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlZlbm9tQ3Jld1F1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiVmVub21vdXMgQXNzYWlsYW50IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoNTQ0Ni44NzkzOTQ1MzEzLCA2MDEuNjI5NDU1NTY2NDEsIDc0OS40NTY3MjYwNzQyMik7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNDYzNy44ODUyNTM5MDYyNSwgMTA3Ny44NTU5NTcwMzEyNSwgODgyLjQxODM5NTk5NjA5MzgpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTcwMCkgb3IgKHYxOTcgPD0gMTcyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIk1hcmluZSBDb21tb2RvcmUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJNYXJpbmUgQ29tbW9kb3JlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIk1hcmluZVRyZWVJc2xhbmQiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJNYXJpbmUgQ29tbW9kb3JlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMjE3OS45ODgyODEyNSwgMjguNzMxMjM5MzE4ODQ4LCAtIDY3NDAuMDU1MTc1NzgxMyk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoMjE5OC4wMDYzNDc2NTYzLCAxMjguNzEwNzU0Mzk0NTMsIC0gNzEwOS41MDQzOTQ1MzEzKTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE3MjUpIG9yICh2MTk3IDw9IDE3NzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJNYXJpbmUgUmVhciBBZG1pcmFsIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTWFyaW5lIFJlYXIgQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJNYXJpbmVUcmVlSXNsYW5kIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTWFyaW5lIFJlYXIgQWRtaXJhbCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDIxNzkuOTg4MjgxMjUsIDI4LjczMTIzOTMxODg0OCwgLSA2NzQwLjA1NTE3NTc4MTMpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDMyOTQuMzE0MjA4OTg0NCwgMzg1LjQxMTI1NDg4MjgxLCAtIDcwNDguNjM0Mjc3MzQzOCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxNzc1KSBvciAodjE5NyA8PSAxNzk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRmlzaG1hbiBSYWlkZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJGaXNobWFuIFJhaWRlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEZWVwRm9yZXN0SXNsYW5kMyI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkZpc2htYW4gUmFpZGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxMDU4Mi43NTk3NjU2MjUsIDMzMS43ODg0NTIxNDg0NCwgLSA4NzU3LjY2NjAxNTYyNSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxMDU1My4yNjg1NTQ2ODgsIDUyMS4zODQzOTk0MTQwNiwgLSA4MTc2Ljk0NTgwMDc4MTMpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTgwMCkgb3IgKHYxOTcgPD0gMTgyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkZpc2htYW4gQ2FwdGFpbiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkZpc2htYW4gQ2FwdGFpbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJEZWVwRm9yZXN0SXNsYW5kMyI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIkZpc2htYW4gQ2FwdGFpbiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTA1ODMuMDk5NjA5Mzc1LCAzMzEuNzg4NDUyMTQ4NDQsIC0gODc1OS40NjM4NjcxODc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDEwNzg5LjQwMTM2NzE4OCwgNDI3LjE4NjM3MDg0OTYxLCAtIDkxMzEuNDQyMzgyODEyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxODI1KSBvciAodjE5NyA8PSAxODQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiRm9yZXN0IFBpcmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkZvcmVzdCBQaXJhdGUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRGVlcEZvcmVzdElzbGFuZCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkZvcmVzdCBQaXJhdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDEzMjMyLjY2MjEwOTM3NSwgMzMyLjQwMzk2MTE4MTY0LCAtIDc2MjYuNDgxOTMzNTkzOCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxMzQ4OS4zOTc0NjA5MzgsIDQwMC4zMDM0OTczMTQ0NSwgLSA3NzcwLjI1MTk1MzEyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxODUwKSBvciAodjE5NyA8PSAxODk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTXl0aG9sb2dpY2FsIFBpcmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk15dGhvbG9naWNhbCBQaXJhdGUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRGVlcEZvcmVzdElzbGFuZCI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIk15dGhvbG9naWNhbCBQaXJhdGUiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDEzMjMyLjY2MjEwOTM3NSwgMzMyLjQwMzk2MTE4MTY0LCAtIDc2MjYuNDgxOTMzNTkzOCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxMzUwOC42MTYyMTA5MzgsIDU4Mi40NjIyODAyNzM0NCwgLSA2OTg1LjMwMzcxMDkzNzUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMTkwMCkgb3IgKHYxOTcgPD0gMTkyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkp1bmdsZSBQaXJhdGUiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJKdW5nbGUgUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkRlZXBGb3Jlc3RJc2xhbmQyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiSnVuZ2xlIFBpcmF0ZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTI2ODIuMDk2Njc5Njg4LCAzOTAuODg2NTM1NjQ0NTMsIC0gOTkwMi4xMjQwMjM0Mzc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDEyMjY3LjEwMzUxNTYyNSwgNDU5Ljc1MjYyNDUxMTcyLCAtIDEwMjc3LjIwMDE5NTMxMyk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAxOTI1KSBvciAodjE5NyA8PSAxOTc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiTXVza2V0ZWVyIFBpcmF0ZSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIk11c2tldGVlciBQaXJhdGUiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiRGVlcEZvcmVzdElzbGFuZDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJNdXNrZXRlZXIgUGlyYXRlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxMjY4Mi4wOTY2Nzk2ODgsIDM5MC44ODY1MzU2NDQ1MywgLSA5OTAyLjEyNDAyMzQzNzUpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTMyOTEuNTA3ODEyNSwgNTIwLjQ3MzM4ODY3MTg4LCAtIDk5MDQuNjM4NjcxODc1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDE5NzUpIG9yICh2MTk3IDw9IDE5OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJSZWJvcm4gU2tlbGV0b24iKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJSZWJvcm4gU2tlbGV0b24iOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSGF1bnRlZFF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIlJlYm9ybiBTa2VsZXRvbiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gOTQ4MC44MDc2MiwgMTQyLjEzMDY2MSwgNTU2Ni4zNzMwNSwgLSAwLjAwNjU1NTAzMDU5LCA0LjUyOTU0MjNlLTgsIC0gMC45OTk5Nzg1NDIsIDIuMDQ5MjA0N2UtOCwgMSwgNC41MTYyMDY4ZS04LCAwLjk5OTk3ODU0MiwgLSAyLjAxOTU1NjhlLTgsIC0gMC4wMDY1NTUwMzA1OSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA4NzYxLjc3MTQ4LCAxODMuNDMxNzQ3LCA2MTY4LjMzMzAxLCAwLjk3ODA3MzU5NywgLSAwLjAwMDAxMzk1MDczMiwgLSAwLjIwODI1OTAxNiwgLSAwLjAwMDAwMTA4MDczOTMsIDEsIC0gMC4wMDAwNzIwNjMwMywgMC4yMDgyNTkwMTYsIDAuMDAwMDcwNzA4MDQsIDAuOTc4MDczNTk3KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIwMDApIG9yICh2MTk3IDw9IDIwMjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJMaXZpbmcgWm9tYmllIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiTGl2aW5nIFpvbWJpZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJIYXVudGVkUXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiTGl2aW5nIFpvbWJpZSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gOTQ4MC44MDc2MiwgMTQyLjEzMDY2MSwgNTU2Ni4zNzMwNSwgLSAwLjAwNjU1NTAzMDU5LCA0LjUyOTU0MjNlLTgsIC0gMC45OTk5Nzg1NDIsIDIuMDQ5MjA0N2UtOCwgMSwgNC41MTYyMDY4ZS04LCAwLjk5OTk3ODU0MiwgLSAyLjAxOTU1NjhlLTgsIC0gMC4wMDY1NTUwMzA1OSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxMDEwMy43NTI5LCAyMzguNTY1OTc5LCA2MTc5Ljc1OTc3LCAwLjk5OTQ3NDIyNywgMi43NzU0NzE0ZS04LCAwLjAzMjQyNDAzNjQsIC0gMi41ODAwNjMzZS04LCAxLCAtIDYuMDY4NDg1ZS04LCAtIDAuMDMyNDI0MDM2NCwgNS45ODE2MzllLTgsIDAuOTk5NDc0MjI3KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIwMjUpIG9yICh2MTk3IDw9IDIwNDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJEZW1vbmljIFNvdWwiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJEZW1vbmljIFNvdWwiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiSGF1bnRlZFF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAxOwogICAgICAgICAgICBOYW1lTW9uID0gIkRlbW9uaWMgU291bCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gOTUxNi45OTMxNjQwNjI1LCAxNzguMDA2NTE1NTAyOTMsIDYwNzguNDY1MzMyMDMxMyk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA5NzEyLjAzMTI1LCAyMDQuNjk1ODkyMzMzOTgsIDYxOTMuMzIyMjY1NjI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIwNTApIG9yICh2MTk3IDw9IDIwNzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJQb3Nlc3NlZCBNdW1teSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlBvc2Vzc2VkIE11bW15IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkhhdW50ZWRRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJQb3Nlc3NlZCBNdW1teSI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gOTUxNi45OTMxNjQwNjI1LCAxNzguMDA2NTE1NTAyOTMsIDYwNzguNDY1MzMyMDMxMyk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA5NTQ1Ljc3NjM2NzE4NzUsIDY5LjYxOTg5NTkzNTA1OSwgNjMzOS41NjE1MjM0Mzc1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIwNzUpIG9yICh2MTk3IDw9IDIwOTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJQZWFudXQgU2NvdXQiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJQZWFudXQgU2NvdXQiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiTnV0c0lzbGFuZFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiUGVhbnV0IFNjb3V0IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAyMTA1LjUzMTk4LCAzNy4yNDk1OTk1LCAtIDEwMTk1LjUwODgsIC0gMC43NjYwNjE2NjQsIDAsIC0gMC42NDI3Njc2MDgsIDAsIDEsIDAsIDAuNjQyNzY3NjA4LCAwLCAtIDAuNzY2MDYxNjY0KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDIxNTAuNTg3ODkwNjI1LCAxMjIuNDk3NjczMDM0NjcsIC0gMTAzNTguOTk0MTQwNjI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIxMDApIG9yICh2MTk3IDw9IDIxMjQpIG9yIChTZWxlY3RNb25zdGVyID09ICJQZWFudXQgUHJlc2lkZW50IikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiUGVhbnV0IFByZXNpZGVudCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJOdXRzSXNsYW5kUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJQZWFudXQgUHJlc2lkZW50IjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAyMTA1LjUzMTk4LCAzNy4yNDk1OTk1LCAtIDEwMTk1LjUwODgsIC0gMC43NjYwNjE2NjQsIDAsIC0gMC42NDI3Njc2MDgsIDAsIDEsIDAsIDAuNjQyNzY3NjA4LCAwLCAtIDAuNzY2MDYxNjY0KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDIxNTAuNTg3ODkwNjI1LCAxMjIuNDk3NjczMDM0NjcsIC0gMTAzNTguOTk0MTQwNjI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIxMjUpIG9yICh2MTk3IDw9IDIxNDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJJY2UgQ3JlYW0gQ2hlZiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkljZSBDcmVhbSBDaGVmIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkljZUNyZWFtSXNsYW5kUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJJY2UgQ3JlYW0gQ2hlZiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gODE5LjM3NjcwOSwgNjQuOTI1OTc5NiwgLSAxMDk2Ny4yODMyLCAtIDAuNzY2MDYxNjY0LCAwLCAwLjY0Mjc2NzYwOCwgMCwgMSwgMCwgLSAwLjY0Mjc2NzYwOCwgMCwgLSAwLjc2NjA2MTY2NCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSA3ODkuOTQxNTI4LCAyMDkuMzgyODg5LCAtIDExMDA5Ljk4MDUsIC0gMC4wNzAzMTAxNTMxLCAiLTAiLCAtIDAuOTk3NTI1MTU2LCAiLTAiLCAxLjAwMDAwMDEyLCAiLTAiLCAwLjk5NzUyNTI3NSwgMCwgLSAwLjA3MDMxMDE0NTYpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjE1MCkgb3IgKHYxOTcgPD0gMjE5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkljZSBDcmVhbSBDb21tYW5kZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJJY2UgQ3JlYW0gQ29tbWFuZGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkljZUNyZWFtSXNsYW5kUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJJY2UgQ3JlYW0gQ29tbWFuZGVyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSA4MTkuMzc2NzA5LCA2NC45MjU5Nzk2LCAtIDEwOTY3LjI4MzIsIC0gMC43NjYwNjE2NjQsIDAsIDAuNjQyNzY3NjA4LCAwLCAxLCAwLCAtIDAuNjQyNzY3NjA4LCAwLCAtIDAuNzY2MDYxNjY0KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDc4OS45NDE1MjgsIDIwOS4zODI4ODksIC0gMTEwMDkuOTgwNSwgLSAwLjA3MDMxMDE1MzEsICItMCIsIC0gMC45OTc1MjUxNTYsICItMCIsIDEuMDAwMDAwMTIsICItMCIsIDAuOTk3NTI1Mjc1LCAwLCAtIDAuMDcwMzEwMTQ1Nik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMjAwKSBvciAodjE5NyA8PSAyMjI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQ29va2llIENyYWZ0ZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJDb29raWUgQ3JhZnRlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDYWtlUXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQ29va2llIENyYWZ0ZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDIwMjIuMjk4NTgsIDM2LjkyNzU4OTQsIC0gMTIwMzAuOTc2NiwgLSAwLjk2MTI3MzkwOSwgMCwgLSAwLjI3NTU5NDU5MiwgMCwgMSwgMCwgMC4yNzU1OTQ1OTIsIDAsIC0gMC45NjEyNzM5MDkpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMjMyMS43MTIxNiwgMzYuNjk5NDgyLCAtIDEyMjE2Ljc4NzEsIC0gMC43ODAwNzQ5NTQsIDAsIDAuNjI1Njg2MTA5LCAwLCAxLCAwLCAtIDAuNjI1Njg2MTA5LCAwLCAtIDAuNzgwMDc0OTU0KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIyMjUpIG9yICh2MTk3IDw9IDIyNDkpIG9yIChTZWxlY3RNb25zdGVyID09ICJDYWtlIEd1YXJkIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQ2FrZSBHdWFyZCI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDYWtlUXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQ2FrZSBHdWFyZCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMjAyMi4yOTg1OCwgMzYuOTI3NTg5NCwgLSAxMjAzMC45NzY2LCAtIDAuOTYxMjczOTA5LCAwLCAtIDAuMjc1NTk0NTkyLCAwLCAxLCAwLCAwLjI3NTU5NDU5MiwgMCwgLSAwLjk2MTI3MzkwOSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNDE4LjExMDExLCAzNi42NzE4OTQxLCAtIDEyMjU1LjczMjQsIDAuMDY3Nzg0NDg4MiwgMCwgMC45OTc3MDAwMzYsIDAsIDEsIDAsIC0gMC45OTc3MDAwMzYsIDAsIDAuMDY3Nzg0NDg4Mik7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMjUwKSBvciAodjE5NyA8PSAyMjc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQmFraW5nIFN0YWZmIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQmFraW5nIFN0YWZmIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNha2VRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJCYWtpbmcgU3RhZmYiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE5MjguMzE3NjMsIDM3LjcyOTY2MzgsIC0gMTI4NDAuNjI2LCAwLjk1MTA2ODQwMSwgIi0wIiwgLSAwLjMwODk4MDQ2NSwgMCwgMSwgIi0wIiwgMC4zMDg5ODA0NjUsIDAsIDAuOTUxMDY4NDAxKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE5ODAuNDM4NDgsIDM2LjY3MTY3NjYsIC0gMTI5ODMuODQxOCwgLSAwLjI1NDQ0Mzc2NSwgMCwgLSAwLjk2NzA4NzU2NywgMCwgMSwgMCwgMC45NjcwODc1NjcsIDAsIC0gMC4yNTQ0NDM3NjUpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjI3NSkgb3IgKHYxOTcgPD0gMjI5OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkhlYWQgQmFrZXIiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJIZWFkIEJha2VyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNha2VRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJIZWFkIEJha2VyIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxOTI4LjMxNzYzLCAzNy43Mjk2NjM4LCAtIDEyODQwLjYyNiwgMC45NTEwNjg0MDEsICItMCIsIC0gMC4zMDg5ODA0NjUsIDAsIDEsICItMCIsIDAuMzA4OTgwNDY1LCAwLCAwLjk1MTA2ODQwMSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAyMjUxLjU3OTEsIDUyLjI3MTQ2MTUsIC0gMTMwMzMuMzk2NSwgLSAwLjk5MTk3MTAxNiwgMCwgLSAwLjEyNjQ2NjA5NSwgMCwgMSwgMCwgMC4xMjY0NjYwOTUsIDAsIC0gMC45OTE5NzEwMTYpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjMwMCkgb3IgKHYxOTcgPD0gMjMyNCkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIkNvY29hIFdhcnJpb3IiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJDb2NvYSBXYXJyaW9yIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNob2NRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJDb2NvYSBXYXJyaW9yIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoMjMxLjc1LCAyMy45MDAzMDI5LCAtIDEyMjAwLjI5MiwgLSAxLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAtIDEpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDE2Ny45Nzg1MTYsIDI2LjIyNTQ2NTgsIC0gMTIyMzguODc0LCAtIDAuOTM5NzAwOTYxLCAwLCAwLjM0MTk5ODM2OSwgMCwgMSwgMCwgLSAwLjM0MTk5ODM2OSwgMCwgLSAwLjkzOTcwMDk2MSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMzI1KSBvciAodjE5NyA8PSAyMzQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQ2hvY29sYXRlIEJhciBCYXR0bGVyIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQ2hvY29sYXRlIEJhciBCYXR0bGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNob2NRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJDaG9jb2xhdGUgQmFyIEJhdHRsZXIiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygyMzEuNzUsIDIzLjkwMDMwMjksIC0gMTIyMDAuMjkyLCAtIDEsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIC0gMSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNzAxLjMxMjA3MywgMjUuNTgyNDk4NiwgLSAxMjcwOC4yMTQ4LCAtIDAuMzQyMDQyNjg1LCAwLCAtIDAuOTM5Njg0MzkxLCAwLCAxLCAwLCAwLjkzOTY4NDM5MSwgMCwgLSAwLjM0MjA0MjY4NSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyMzUwKSBvciAodjE5NyA8PSAyMzc0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU3dlZXQgVGhpZWYiKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTd2VldCBUaGllZiI7CiAgICAgICAgICAgIE5hbWVRdWVzdCA9ICJDaG9jUXVlc3QyIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU3dlZXQgVGhpZWYiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygxNTEuMTk4MjQyLCAyMy44OTA3MTQ2LCAtIDEyNzc0LjYxNzIsIDAuNDIyNTkyOTk4LCAwLCAwLjkwNjMxOTYxOCwgMCwgMSwgMCwgLSAwLjkwNjMxOTYxOCwgMCwgMC40MjI1OTI5OTgpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTQwLjI1ODMwMSwgMjUuNTgyNDk4NiwgLSAxMjY1Mi4zMTE1LCAwLjE3MzYyNDMzNywgIi0wIiwgLSAwLjk4NDgxMTkwMiwgMCwgMSwgIi0wIiwgMC45ODQ4MTE5MDIsIDAsIDAuMTczNjI0MzM3KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDIzNzUpIG9yICh2MTk3IDw9IDI0MDApIG9yIChTZWxlY3RNb25zdGVyID09ICJDYW5keSBSZWJlbCIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIkNhbmR5IFJlYmVsIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNob2NRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMjsKICAgICAgICAgICAgTmFtZU1vbiA9ICJDYW5keSBSZWJlbCI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KDE1MS4xOTgyNDIsIDIzLjg5MDcxNDYsIC0gMTI3NzQuNjE3MiwgMC40MjI1OTI5OTgsIDAsIDAuOTA2MzE5NjE4LCAwLCAxLCAwLCAtIDAuOTA2MzE5NjE4LCAwLCAwLjQyMjU5Mjk5OCk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoNDcuOTIzMTQ1MywgMjUuNTgyNDk4NiwgLSAxMzAyOS4yNDAyLCAtIDAuODE5MTU2MDUxLCAwLCAtIDAuNTczNTcxMjY1LCAwLCAxLCAwLCAwLjU3MzU3MTI2NSwgMCwgLSAwLjgxOTE1NjA1MSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNDAwKSBvciAodjE5NyA8PSAyNDI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiQ2FuZHkgUGlyYXRlIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiQ2FuZHkgUGlyYXRlIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNhbmR5UXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDE7CiAgICAgICAgICAgIE5hbWVNb24gPSAiQ2FuZHkgUGlyYXRlIjsKICAgICAgICAgICAgQ0ZyYW1lUSA9IENGcmFtZS5uZXcoLSAxMTQ5LjMyOCwgMTMuNTc1OTAzOSwgLSAxNDQ0NS42MTQzLCAtIDAuMTU2NDQ2MDk5LCAwLCAtIDAuOTg3Njg2NTc0LCAwLCAxLCAwLCAwLjk4NzY4NjU3NCwgMCwgLSAwLjE1NjQ0NjA5OSk7CiAgICAgICAgICAgIENGcmFtZU1vbiA9IENGcmFtZS5uZXcoLSAxNDM3LjU2MzQ4LCAxNy4xNDgxMjg1LCAtIDE0Mzg1LjY5MzQsIDAuMTczNjI0MzM3LCAiLTAiLCAtIDAuOTg0ODExOTAyLCAwLCAxLCAiLTAiLCAwLjk4NDgxMTkwMiwgMCwgMC4xNzM2MjQzMzcpOwogICAgICAgIGVsc2VpZiAoKHYxOTcgPT0gMjQyNSkgb3IgKHYxOTcgPD0gMjQ0OSkgb3IgKFNlbGVjdE1vbnN0ZXIgPT0gIlNub3cgRGVtb24iKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTbm93IERlbW9uIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIkNhbmR5UXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdiA9IDI7CiAgICAgICAgICAgIE5hbWVNb24gPSAiU25vdyBEZW1vbiI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTE0OS4zMjgsIDEzLjU3NTkwMzksIC0gMTQ0NDUuNjE0MywgLSAwLjE1NjQ0NjA5OSwgMCwgLSAwLjk4NzY4NjU3NCwgMCwgMSwgMCwgMC45ODc2ODY1NzQsIDAsIC0gMC4xNTY0NDYwOTkpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gOTE2LjIyMjY1NiwgMTcuMTQ4MTI4NSwgLSAxNDYzOC44MTI1LCAwLjg2NjAwNzI2OCwgMCwgMC41MDAwMzE0MTIsIDAsIDEsIDAsIC0gMC41MDAwMzE0MTIsIDAsIDAuODY2MDA3MjY4KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDI0NTApIG9yICh2MTk3IDw9IDI0NzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJJc2xlIE91dGxhdyIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIklzbGUgT3V0bGF3IjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlRpa2lRdWVzdDEiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJJc2xlIE91dGxhdyI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTY1NDkuODkwNjI1LCA1NS42ODYzNTU1OTA4MjAzMSwgLSAxNzkuOTEzNjA0NzM2MzI4MTIpOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KC0gMTYxNjIuODE5MzM1OTM3NSwgMTEuNjg2MzM3NDcxMDA4MywgLSA5Ni40NTQ4MTg3MjU1ODU5NCk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNDc1KSBvciAodjE5NyA8PSAyNDk5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiSXNsYW5kIEJveSIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIklzbGFuZCBCb3kiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiVGlraVF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIklzbGFuZCBCb3kiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE2NTQ5Ljg5MDYyNSwgNTUuNjg2MzU1NTkwODIwMzEsIC0gMTc5LjkxMzYwNDczNjMyODEyKTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE2MzU3LjMxMjUsIDIwLjYzMjgyMjAzNjc0MzE2NCwgMTAwNS42NDg5MjU3ODEyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNTAwKSBvciAodjE5NyA8PSAyNTI0KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiU3VuLWtpc3NlZCBXYXJyaW9yIikpIHRoZW4KICAgICAgICAgICAgTXMgPSAiU3VuLWtpc3NlZCBXYXJyaW9yIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlRpa2lRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTdW4ta2lzc2VkIFdhcnJpb3IiOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE2NTQxLjAyMTQ4NDM3NSwgNTQuNzcwODEyOTg4MjgxMjUsIDEwNTEuNDYxMTgxNjQwNjI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE2MzU3LjMxMjUsIDIwLjYzMjgyMjAzNjc0MzE2NCwgMTAwNS42NDg5MjU3ODEyNSk7CiAgICAgICAgZWxzZWlmICgodjE5NyA9PSAyNTI1KSBvciAodjE5NyA8PSAyNTQ5KSBvciAoU2VsZWN0TW9uc3RlciA9PSAiSXNsZSBDaGFtcGlvbiIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIklzbGUgQ2hhbXBpb24iOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiVGlraVF1ZXN0MiI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIklzbGUgQ2hhbXBpb24iOwogICAgICAgICAgICBDRnJhbWVRID0gQ0ZyYW1lLm5ldygtIDE2NTQxLjAyMTQ4NDM3NSwgNTQuNzcwODEyOTg4MjgxMjUsIDEwNTEuNDYxMTgxNjQwNjI1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE2ODQ4Ljk0MTQwNjI1LCAyMS42ODYzMzQ2MDk5ODUzNSwgMTA0MS40NDkwOTY2Nzk2ODc1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDI1NTApIG9yICh2MTk3IDw9IDI1NzQpIG9yIChTZWxlY3RNb25zdGVyID09ICJTZXJwZW50IEh1bnRlciIpKSB0aGVuCiAgICAgICAgICAgIE1zID0gIlNlcnBlbnQgSHVudGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0ID0gIlRpa2lRdWVzdDMiOwogICAgICAgICAgICBRdWVzdEx2ID0gMTsKICAgICAgICAgICAgTmFtZU1vbiA9ICJTZXJwZW50IEh1bnRlciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTY2NjUuMTkxNDA2MjUsIDEwNC41OTY0MDUwMjkyOTY4OCwgMTU3OS42OTQzMzU5Mzc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE2NjIxLjQxNDA2MjUsIDEyMS40MDYzMTEwMzUxNTYyNSwgMTI5MC42ODgxMTAzNTE1NjI1KTsKICAgICAgICBlbHNlaWYgKCh2MTk3ID09IDI1NzUpIG9yICh2MTk3IDw9IDI1OTkpIG9yIChTZWxlY3RNb25zdGVyID09ICJTa3VsbCBTbGF5ZXIiKSBvciAodjE5NyA9PSAyNjAwKSkgdGhlbgogICAgICAgICAgICBNcyA9ICJTa3VsbCBTbGF5ZXIiOwogICAgICAgICAgICBOYW1lUXVlc3QgPSAiVGlraVF1ZXN0MyI7CiAgICAgICAgICAgIFF1ZXN0THYgPSAyOwogICAgICAgICAgICBOYW1lTW9uID0gIlNrdWxsIFNsYXllciI7CiAgICAgICAgICAgIENGcmFtZVEgPSBDRnJhbWUubmV3KC0gMTY2NjUuMTkxNDA2MjUsIDEwNC41OTY0MDUwMjkyOTY4OCwgMTU3OS42OTQzMzU5Mzc1KTsKICAgICAgICAgICAgQ0ZyYW1lTW9uID0gQ0ZyYW1lLm5ldygtIDE2ODExLjU3MDMxMjUsIDg0LjYyNTI0NDE0MDYyNSwgMTU0Mi4yMzUxMDc0MjE4NzUpOwogICAgICAgIGVuZAogICAgZW5kCmVuZAppZiBTZWExIHRoZW4KICAgIHRhYmxlTW9uID0gewogICAgICAgICJCYW5kaXQiLAogICAgICAgICJNb25rZXkiLAogICAgICAgICJHb3JpbGxhIiwKICAgICAgICAiUGlyYXRlIiwKICAgICAgICAiQnJ1dGUiLAogICAgICAgICJEZXNlcnQgQmFuZGl0IiwKICAgICAgICAiRGVzZXJ0IE9mZmljZXIiLAogICAgICAgICJTbm93IEJhbmRpdCIsCiAgICAgICAgIlNub3dtYW4iLAogICAgICAgICJDaGllZiBQZXR0eSBPZmZpY2VyIiwKICAgICAgICAiU2t5IEJhbmRpdCIsCiAgICAgICAgIkRhcmsgTWFzdGVyIiwKICAgICAgICAiUHJpc29uZXIiLAogICAgICAgICJEYW5nZXJvdXMgUHJpc29uZXIiLAogICAgICAgICJUb2dhIFdhcnJpb3IiLAogICAgICAgICJHbGFkaWF0b3IiLAogICAgICAgICJNaWxpdGFyeSBTb2xkaWVyIiwKICAgICAgICAiTWlsaXRhcnkgU3B5IiwKICAgICAgICAiRmlzaG1hbiBXYXJyaW9yIiwKICAgICAgICAiRmlzaG1hbiBDb21tYW5kbyIsCiAgICAgICAgIkdvZCdzIEd1YXJkIiwKICAgICAgICAiU2hhbmRhIiwKICAgICAgICAiUm95YWwgU3F1YWQiLAogICAgICAgICJSb3lhbCBTb2xkaWVyIiwKICAgICAgICAiR2FsbGV5IFBpcmF0ZSIsCiAgICAgICAgIkdhbGxleSBDYXB0YWluIgogICAgfTsKZWxzZWlmIFNlYTIgdGhlbgogICAgdGFibGVNb24gPSB7CiAgICAgICAgIlJhaWRlciIsCiAgICAgICAgIk1lcmNlbmFyeSIsCiAgICAgICAgIlN3YW4gUGlyYXRlIiwKICAgICAgICAiRmFjdG9yeSBTdGFmZiIsCiAgICAgICAgIk1hcmluZSBMaWV1dGVuYW50IiwKICAgICAgICAiTWFyaW5lIENhcHRhaW4iLAogICAgICAgICJab21iaWUiLAogICAgICAgICJWYW1waXJlIiwKICAgICAgICAiU25vdyBUcm9vcGVyIiwKICAgICAgICAiV2ludGVyIFdhcnJpb3IiLAogICAgICAgICJMYWIgU3Vib3JkaW5hdGUiLAogICAgICAgICJIb3JuZWQgV2FycmlvciIsCiAgICAgICAgIk1hZ21hIE5pbmphIiwKICAgICAgICAiTGF2YSBQaXJhdGUiLAogICAgICAgICJTaGlwIERlY2toYW5kIiwKICAgICAgICAiU2hpcCBFbmdpbmVlciIsCiAgICAgICAgIlNoaXAgU3Rld2FyZCIsCiAgICAgICAgIlNoaXAgT2ZmaWNlciIsCiAgICAgICAgIkFyY3RpYyBXYXJyaW9yIiwKICAgICAgICAiU25vdyBMdXJrZXIiLAogICAgICAgICJTZWEgU29sZGllciIsCiAgICAgICAgIldhdGVyIEZpZ2h0ZXIiCiAgICB9OwplbHNlaWYgU2VhMyB0aGVuCiAgICB0YWJsZU1vbiA9IHsKICAgICAgICAiUGlyYXRlIE1pbGxpb25haXJlIiwKICAgICAgICAiRHJhZ29uIENyZXcgV2FycmlvciIsCiAgICAgICAgIkRyYWdvbiBDcmV3IEFyY2hlciIsCiAgICAgICAgIkh5ZHJhIEVuZm9yY2VyIiwKICAgICAgICAiVmVub21vdXMgQXNzYWlsYW50IiwKICAgICAgICAiTWFyaW5lIENvbW1vZG9yZSIsCiAgICAgICAgIk1hcmluZSBSZWFyIEFkbWlyYWwiLAogICAgICAgICJGaXNobWFuIFJhaWRlciIsCiAgICAgICAgIkZpc2htYW4gQ2FwdGFpbiIsCiAgICAgICAgIkZvcmVzdCBQaXJhdGUiLAogICAgICAgICJNeXRob2xvZ2ljYWwgUGlyYXRlIiwKICAgICAgICAiSnVuZ2xlIFBpcmF0ZSIsCiAgICAgICAgIk11c2tldGVlciBQaXJhdGUiLAogICAgICAgICJSZWJvcm4gU2tlbGV0b24iLAogICAgICAgICJMaXZpbmcgWm9tYmllIiwKICAgICAgICAiRGVtb25pYyBTb3VsIiwKICAgICAgICAiUG9zZXNzZWQgTXVtbXkiLAogICAgICAgICJQZWFudXQgU2NvdXQiLAogICAgICAgICJQZWFudXQgUHJlc2lkZW50IiwKICAgICAgICAiSWNlIENyZWFtIENoZWYiLAogICAgICAgICJJY2UgQ3JlYW0gQ29tbWFuZGVyIiwKICAgICAgICAiQ29va2llIENyYWZ0ZXIiLAogICAgICAgICJDYWtlIEd1YXJkIiwKICAgICAgICAiQmFraW5nIFN0YWZmIiwKICAgICAgICAiSGVhZCBCYWtlciIsCiAgICAgICAgIkNvY29hIFdhcnJpb3IiLAogICAgICAgICJDaG9jb2xhdGUgQmFyIEJhdHRsZXIiLAogICAgICAgICJTd2VldCBUaGllZiIsCiAgICAgICAgIkNhbmR5IFJlYmVsIiwKICAgICAgICAiQ2FuZHkgUGlyYXRlIiwKICAgICAgICAiU25vdyBEZW1vbiIsCiAgICAgICAgIklzbGUgT3V0bGF3IiwKICAgICAgICAiSXNsYW5kIEJveSIsCiAgICAgICAgIlN1bi1raXNzZWQgV2FycmlvciIsCiAgICAgICAgIklzbGUgQ2hhbXBpb24iLAogICAgICAgICJTZXJwZW50IEh1bnRlciIsCiAgICAgICAgIlNrdWxsIFNsYXllciIKICAgIH07CmVuZAppZiBTZWExIHRoZW4KICAgIEFyZWFMaXN0ID0gewogICAgICAgICJKdW5nbGUiLAogICAgICAgICJCdWdneSIsCiAgICAgICAgIkRlc2VydCIsCiAgICAgICAgIlNub3ciLAogICAgICAgICJNYXJpbmUiLAogICAgICAgICJTa3kiLAogICAgICAgICJQcmlzb24iLAogICAgICAgICJDb2xvc3NldW0iLAogICAgICAgICJNYWdtYSIsCiAgICAgICAgIkZpc2htYW4iLAogICAgICAgICJTa3kgSXNsYW5kIiwKICAgICAgICAiRm91bnRhaW4iCiAgICB9OwplbHNlaWYgU2VhMiB0aGVuCiAgICBBcmVhTGlzdCA9IHsKICAgICAgICAiQXJlYSAxIiwKICAgICAgICAiQXJlYSAyIiwKICAgICAgICAiWm9tYmllIiwKICAgICAgICAiTWFyaW5lIiwKICAgICAgICAiU25vdyBNb3VudGFpbiIsCiAgICAgICAgIkljZSBmaXJlIiwKICAgICAgICAiU2hpcCIsCiAgICAgICAgIkZyb3N0IiwKICAgICAgICAiRm9yZ290dGVuIgogICAgfTsKZWxzZWlmIFNlYTMgdGhlbgogICAgQXJlYUxpc3QgPSB7CiAgICAgICAgIlBpcmF0ZSBQb3J0IiwKICAgICAgICAiQW1hem9uIiwKICAgICAgICAiTWFyaW5lIFRyZWUiLAogICAgICAgICJEZWVwIEZvcmVzdCIsCiAgICAgICAgIkhhdW50ZWQgQ2FzdGxlIiwKICAgICAgICAiTnV0IElzbGFuZCIsCiAgICAgICAgIkljZSBDcmVhbSBJc2xhbmQiLAogICAgICAgICJDYWtlIElzbGFuZCIsCiAgICAgICAgIkNob2NvIElzbGFuZCIsCiAgICAgICAgIkNhbmR5IElzbGFuZCIsCiAgICAgICAgIlRpa2kgT3V0cG9zdCIKICAgIH07CmVuZApmdW5jdGlvbiBDaGVja0Jvc3NRdWVzdCgpCiAgICBpZiBTZWExIHRoZW4KICAgICAgICBpZiAoU2VsZWN0Qm9zcyA9PSAiVGhlIEdvcmlsbGEgS2luZyIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJUaGUgR29yaWxsYSBLaW5nIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiVGhlIEdvcnJpbGEgS2luZyI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiSnVuZ2xlUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDIsMDAwXG43LDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gMTYwMS42NTUzOTU1MDc4LCAzNi44NTIxMzQ3MDQ1OSwgMTUzLjM4ODA5MjA0MTAyKTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAxMDg4Ljc1OTc3LCA4LjEzNDYzNzgzLCAtIDQ4OC41NTk5MDYsIC0gMC43MDcxMzQyNDcsIDAsIDAuNzA3MDc5MjkxLCAwLCAxLCAwLCAtIDAuNzA3MDc5MjkxLCAwLCAtIDAuNzA3MTM0MjQ3KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkJvYmJ5IikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkJvYmJ5IjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiQm9iYnkiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkJ1Z2d5UXVlc3QxIjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQ4LDAwMFxuMzUsMDAwIEV4cC4iOwogIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDE2MDEuNjU1Mzk1NTA3OCwgMzYuODUyMTM0NzA0NTksIDE1My4zODgwOTIwNDEwMik7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gMTA4OC43NTk3NywgOC4xMzQ2Mzc4MywgLSA0ODguNTU5OTA2LCAtIDAuNzA3MTM0MjQ3LCAwLCAwLjcwNzA3OTI5MSwgMCwgMSwgMCwgLSAwLjcwNzA3OTI5MSwgMCwgLSAwLjcwNzEzNDI0Nyk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJCb2JieSIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJCb2JieSI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkJvYmJ5IjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJCdWdneVF1ZXN0MSI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kOCwwMDBcbjM1LDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gMTE0MC4xNzYxNDc0NjA5LCA0Ljc1MjA0OTQ0NjEwNiwgMzgyNy40MDU3NjE3MTg4KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAxMDg3LjM3NjA5ODYzMjgsIDQ2Ljk0OTQwOTQ4NDg2MywgNDA0MC4xNDYyNDAyMzQ0KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIlRoZSBTYXciKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiVGhlIFNhdyI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlRoZSBTYXciOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDc4NC44OTcxNTU3NjE3MiwgNzIuNDI3MzgzNDIyODUyLCAxNjAzLjU4MjI3NTM5MDYpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiWWV0aSIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJZZXRpIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiWWV0aSI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiU25vd1F1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQxMCwwMDBcbjE4MCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygxMzg2LjgwNzM3MzA0NjksIDg3LjI3Mjc4OTAwMTQ2NSwgLSAxMjk4LjM1NzY2NjAxNTYpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygxMjE4Ljc5NTY1NDI5NjksIDEzOC4wMTE4NDA4MjAzMSwgLSAxNDg4LjAyNjI0NTExNzIpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiTW9iIExlYWRlciIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJNb2IgTGVhZGVyIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiTW9iIExlYWRlciI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gMjg0NC43MzA3MTI4OTA2LCA3LjQxODA1MDI4OTE1NDEsIDUzNTYuNjcyMzYzMjgxMyk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJWaWNlIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiVmljZSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiVmljZSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJNYXJpbmVRdWVzdDIiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDI7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDEwLDAwMFxuMTgwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gNTAzNi4yNDY1ODIwMzEzLCAyOC42Nzc4MzU0NjQ0NzgsIDQzMjQuNTY2NDA2MjUpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDUwMDYuNTQ1NDEwMTU2MywgODguMDMyMDgxNjA0MDA0LCA0MzUzLjE2MjEwOTM3NSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJTYWJlciBFeHBlcnQiKSB0aGVuCiAgICAgICAgICAgIE5hbWVCb3NzID0gIlNhYmVyIEV4cGVydCI7CiAgICAgICAgICAgIEJvc3NNb24gPSAiU2FiZXIgRXhwZXJ0IjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAxNDU4Ljg5NTAyLCAyOS44ODcwMzM1LCAtIDUwLjYzMzU2NCk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJXYXJkZW4iKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiV2FyZGVuIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiV2FyZGVuIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJJbXBlbFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAxOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQ2LDAwMFxuODUwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoNTI3OC4wNDkzMiwgMi4xNTE2NzQ3NSwgOTQ0LjEwMTkyOSwgMC4yMjA1NDY5NjEsIC0gMC4wMDAwMDQ0OTk0NjQsIDAuOTc1Mzc2NDI3LCAtIDAuMDAwMDE5NTQxMjU4LCAxLCAwLjAwMDAwOTAzMTYyMSwgLSAwLjk3NTM3NjQyNywgLSAwLjAwMDAyMTA1MTk3NiwgMC4yMjA1NDY5NjEpOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoNTE5MS44NjEzMywgMi44NDAyMDY4NiwgNjg2LjQzODcyMSwgLSAwLjczMTM4NDYzNSwgMCwgMC42ODE5NjUxNzIsIDAsIDEsIDAsIC0gMC42ODE5NjUxNzIsIDAsIC0gMC43MzEzODQ2MzUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiQ2hpZWYgV2FyZGVuIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkNoaWVmIFdhcmRlbiI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkNoaWVmIFdhcmRlbiI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiSW1wZWxRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMjsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMTAsMDAwXG4xLDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDUyMDYuOTI1NzgsIDAuOTk3NzUzMzgyLCA4MTQuOTc2NzQ2LCAwLjM0MjA0MTM0MywgLSAwLjAwMDYyOTE1Njc3LCAwLjkzOTY4NDc0OSwgMC4wMDE5MTY0NTM5NCwgMC45OTk5OTgxNTIsIC0gMC4wMDAwMjgwNDIyMzQsIC0gMC45Mzk2ODI5NjEsIDAuMDAxODEwNDU0MDYsIDAuMzQyMDQxOTM5KTsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDUxOTEuODYxMzMsIDIuODQwMjA2ODYsIDY4Ni40Mzg3MjEsIC0gMC43MzEzODQ2MzUsIDAsIDAuNjgxOTY1MTcyLCAwLCAxLCAwLCAtIDAuNjgxOTY1MTcyLCAwLCAtIDAuNzMxMzg0NjM1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIlN3YW4iKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiU3dhbiI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlN3YW4iOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkltcGVsUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDE1LDAwMFxuMSw2MDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldyg1MzI1LjA5NjE5LCA3LjAzOTA2NTg0LCA3MTkuNTcwNjc5LCAtIDAuMzA5MDYwODEyLCAwLCAwLjk1MTA0MjIzNSwgMCwgMSwgMCwgLSAwLjk1MTA0MjIzNSwgMCwgLSAwLjMwOTA2MDgxMik7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldyg1MTkxLjg2MTMzLCAyLjg0MDIwNjg2LCA2ODYuNDM4NzIxLCAtIDAuNzMxMzg0NjM1LCAwLCAwLjY4MTk2NTE3MiwgMCwgMSwgMCwgLSAwLjY4MTk2NTE3MiwgMCwgLSAwLjczMTM4NDYzNSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJNYWdtYSBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIk1hZ21hIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJNYWdtYSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJNYWdtYVF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQxNSwwMDBcbjIsODAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gNTMxNC42MjIwNzAzMTI1LCAxMi4yNjI0MjA2NTQyOTcsIDg1MTcuMjc5Mjk2ODc1KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSA1NzY1Ljg5Njk3MjY1NjMsIDgyLjkyMDY0NjY2NzQ4LCA4NzE4LjMwNDY4NzUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiRmlzaG1hbiBMb3JkIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkZpc2htYW4gTG9yZCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkZpc2htYW4gTG9yZCI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiRmlzaG1hblF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQxNSwwMDBcbjQsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KDYxMTIyLjY1MjM0Mzc1LCAxOC40OTc0NDIyNDU0ODMsIDE1NjkuMzk5NzgwMjczNCk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDYxMjYwLjE1MjM0Mzc1LCAzMC45NTA4ODE5NTgwMDgsIDExOTMuNDMyOTgzMzk4NCk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJXeXNwZXIiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiV3lzcGVyIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiV3lzcGVyIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJTa3lFeHAxUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDE1LDAwMFxuNCw4MDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSA3ODYxLjk0NzI2NTYyNSwgNTU0NS41MTc1NzgxMjUsIC0gMzc5Ljg1OTc0MTIxMDk0KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSA3ODY2LjEzMzMwMDc4MTMsIDU1NzYuNDMxMTUyMzQzOCwgLSA1NDYuNzQ4MTY4OTQ1MzEpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiVGh1bmRlciBHb2QiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiVGh1bmRlciBHb2QiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJUaHVuZGVyIEdvZCI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiU2t5RXhwMlF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyMCwwMDBcbjUsODAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gNzkwMy4zODI4MTI1LCA1NjM1Ljk4OTc0NjA5MzgsIC0gMTQxMC45MjM4MjgxMjUpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDc5OTQuOTg0Mzc1LCA1NzYxLjAyNTM5MDYyNSwgLSAyMDg4LjY0Nzk0OTIxODgpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiQ3lib3JnIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkN5Ym9yZyI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkN5Ym9yZyI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiRm91bnRhaW5RdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMjAsMDAwXG43LDUwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldyg1MjU4LjI3ODgwODU5MzgsIDM4LjUyNjkzMTc2MjY5NSwgNDA1MC4wNDQ5MjE4NzUpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldyg2MDk0LjAyNDkwMjM0MzgsIDczLjc3MDA1MDA0ODgyOCwgMzgyNS43MzQ4NjMyODEzKTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkljZSBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkljZSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiSWNlIEFkbWlyYWwiOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygxMjY2LjA4OTQ4LCAyNi4xNzU3OTQ2LCAtIDEzOTkuNTc2NzgsIC0gMC41NzM1OTkyMTksIDAsIC0gMC44MTkxMzY1NiwgMCwgMSwgMCwgMC44MTkxMzY1NiwgMCwgLSAwLjU3MzU5OTIxOSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJHcmV5YmVhcmQiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiR3JleWJlYXJkIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiR3JleWJlYXJkIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSA1MDgxLjM0NTIxNDg0MzgsIDg1LjIyMTY0MTU0MDUyNywgNDI1Ny4zNTg4ODY3MTg4KTsKICAgICAgICBlbmQKICAgIGVuZAogICAgaWYgU2VhMiB0aGVuCiAgICAgICAgaWYgKFNlbGVjdEJvc3MgPT0gIkRpYW1vbmQiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiRGlhbW9uZCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkRpYW1vbmQiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkFyZWExUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDI1LDAwMFxuOSwwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSA0MjcuNTY2NjgwOTA4MiwgNzMuMzEzNzgxNzM4MjgxLCAxODM1LjQyMDg5ODQzNzUpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDE1NzYuNzE2Njc0ODA0NywgMTk4LjU5MjY1MTM2NzE5LCAxMy43MjQyODYwNzk0MDcpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiSmVyZW15IikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkplcmVteSI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkplcmVteSI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiQXJlYTJRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMjUsMDAwXG4xMSw1MDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoNjM2Ljc5OTQzODQ3NjU2LCA3My40MTM3ODc4NDE3OTcsIDkxOC4wMDQxNTAzOTA2Myk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDIwMDYuOTI2MTQ3NDYwOSwgNDQ4Ljk1NjY2NTAzOTA2LCA4NTMuOTgyODQ5MTIxMDkpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiRmFqaXRhIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkZhaml0YSI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkZhaml0YSI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiTWFyaW5lUXVlc3QzIjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyNSwwMDBcbjE1LDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygtIDI0NDEuOTg2MzI4MTI1LCA3My4zNTkzNDQ0ODI0MjIsIC0gMzIxNy41MzI0NzA3MDMxKTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAyMTcyLjczOTk5MDIzNDQsIDEwMy4zMjIxNjY0NDI4NywgLSA0MDE1LjAyNTM5MDYyNSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJEb24gU3dhbiIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJEb24gU3dhbiI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkRvbiBTd2FuIjsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoMjI4Ni4yMDA0Mzk0NTMxLCAxNS4xNzc4MzkyNzkxNzUsIDg2My44Mzg4NjcxODc1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIlNtb2tlIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiU21va2UgQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlNtb2tlIEFkbWlyYWwiOwogICAgICAgICAgICBOYW1lUXVlc3RCb3NzID0gIkljZVNpZGVRdWVzdCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kMjAsMDAwXG4yNSwwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSA1NDI5LjA0NzM2MzI4MTMsIDE1Ljk3NzU2NTc2NTM4MSwgLSA1Mjk3Ljk2MTQyNTc4MTMpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDUyNzUuMTk4NzMwNDY4OCwgMjAuNzU3MjU3NDYxNTQ4LCAtIDUyNjAuNjY2OTkyMTg3NSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJBd2FrZW5lZCBJY2UgQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJBd2FrZW5lZCBJY2UgQWRtaXJhbCI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIkF3YWtlbmVkIEljZSBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJGcm9zdFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQyMCwwMDBcbjM2LDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldyg1NjY4Ljk3ODAyNzM0MzgsIDI4LjUxOTk4OTAxMzY3MiwgLSA2NDgzLjM1MjA1MDc4MTMpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldyg2NDAzLjU0Mzk0NTMxMjUsIDM0MC4yOTc2Njg0NTcwMywgLSA2ODk0LjU1OTU3MDMxMjUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiVGlkZSBLZWVwZXIiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiVGlkZSBLZWVwZXIiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJUaWRlIEtlZXBlciI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiRm9yZ290dGVuUXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDEyLDUwMFxuMzgsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gMzA1My45ODE0NDUzMTI1LCAyMzcuMTg5NTQ0Njc3NzMsIC0gMTAxNDUuMDM5MDYyNSk7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gMzc5NS42NDIzMzM5ODQ0LCAxMDUuODg4NzcxMDU3MTMsIC0gMTE0MjEuMzA3NjE3MTg4KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkRhcmtiZWFyZCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJEYXJrYmVhcmQiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJEYXJrYmVhcmQiOwogICAgICAgICAgICBDRnJhbWVNb24gPSBDRnJhbWUubmV3KDM2NzcuMDgyMDMxMjUsIDYyLjc1MTkzNzg2NjIxMSwgLSAzMTQ0LjgzMzI1MTk1MzEpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiQ3Vyc2VkIENhcHRhaW4iKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiQ3Vyc2VkIENhcHRhaW4iOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJDdXJzZWQgQ2FwdGFpbiI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KDkxNi45Mjg1ODksIDE4MS4wOTI3NzMsIDMzNDIyKTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIk9yZGVyIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIk9yZGVyIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiT3JkZXIiOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDYyMTcuMjAyMTQ4NDM3NSwgMjguMDQ3NjQ1NTY4ODQ4LCAtIDUwNTMuMTM1NzQyMTg3NSk7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIGlmIFNlYTMgdGhlbgogICAgICAgIGlmIChTZWxlY3RCb3NzID09ICJTdG9uZSIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJTdG9uZSI7CiAgICAgICAgICAgIE5hbWVCb3NzID0gIlN0b25lIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJQaXJhdGVQb3J0UXVlc3QiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDI1LDAwMFxuNDAsMDAwLDAwMCBFeHAuIjsKICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldyg1NDQ1Ljk1NDEwMTU2MjUsIDYwMS42Mjk0NTU1NjY0MSwgNzUxLjQzNzkyNzI0NjA5KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoNTU0My44NjMyODEyNSwgNjY4Ljk3Mzk5OTAyMzQ0LCAxOTkuMDM0MTc5Njg3NSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJLaWxvIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgIEJvc3NNb24gPSAiS2lsbyBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiS2lsbyBBZG1pcmFsIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJNYXJpbmVUcmVlSXNsYW5kIjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQzNSwwMDBcbjU2LDAwMCwwMDAgRXhwLiI7CiAgICAgICAgICAgIENGcmFtZVFCb3NzID0gQ0ZyYW1lLm5ldygyMTc5LjMwMTAyNTM5MDYsIDI4LjczMTIzOTMxODg0OCwgLSA2NzM5Ljk3NDEyMTA5MzgpOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygyNzY0LjIyMzM4ODY3MTksIDQzMi40NjE1NDc4NTE1NiwgLSA3MTQ0LjQ1ODAwNzgxMjUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiQ2FwdGFpbiBFbGVwaGFudCIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJDYXB0YWluIEVsZXBoYW50IjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiQ2FwdGFpbiBFbGVwaGFudCI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiRGVlcEZvcmVzdElzbGFuZCI7CiAgICAgICAgICAgIFF1ZXN0THZCb3NzID0gMzsKICAgICAgICAgICAgUmV3YXJkQm9zcyA9ICJSZXdhcmQ6XG4kNDAsMDAwXG42NywwMDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSAxMzIzMi42ODI2MTcxODgsIDMzMi40MDM5NjExODE2NCwgLSA3NjI2LjAxMTcxODc1KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSAxMzM3Ni43NTc4MTI1LCA0MzMuMjg2ODk1NzUxOTUsIC0gODA3MS4zOTI1NzgxMjUpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAiQmVhdXRpZnVsIFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJCZWF1dGlmdWwgUGlyYXRlIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiQmVhdXRpZnVsIFBpcmF0ZSI7CiAgICAgICAgICAgIE5hbWVRdWVzdEJvc3MgPSAiRGVlcEZvcmVzdElzbGFuZDIiOwogICAgICAgICAgICBRdWVzdEx2Qm9zcyA9IDM7CiAgICAgICAgICAgIFJld2FyZEJvc3MgPSAiUmV3YXJkOlxuJDUwLDAwMFxuNzAsMDAwLDAwMCBFeHAuIjsKICAgICAgICAgICAgQ0ZyYW1lUUJvc3MgPSBDRnJhbWUubmV3KC0gMTI2ODIuMDk2Njc5Njg4LCAzOTAuODg2NTM1NjQ0NTMsIC0gOTkwMi4xMjQwMjM0Mzc1KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoNTI4My42MDkzNzUsIDIyLjU2MjIzNDg3ODU0LCAtIDExMC43ODI4NTIxNzI4NSk7CiAgICAgICAgZWxzZWlmIChTZWxlY3RCb3NzID09ICJDYWtlIFF1ZWVuIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIkNha2UgUXVlZW4iOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJDYWtlIFF1ZWVuIjsKICAgICAgICAgICAgTmFtZVF1ZXN0Qm9zcyA9ICJJY2VDcmVhbUlzbGFuZFF1ZXN0IjsKICAgICAgICAgICAgUXVlc3RMdkJvc3MgPSAzOwogICAgICAgICAgICBSZXdhcmRCb3NzID0gIlJld2FyZDpcbiQzMCwwMDBcbjExMiw1MDAsMDAwIEV4cC4iOwogICAgICAgICAgICBDRnJhbWVRQm9zcyA9IENGcmFtZS5uZXcoLSA4MTkuMzc2NzA5LCA2NC45MjU5Nzk2LCAtIDEwOTY3LjI4MzIsIC0gMC43NjYwNjE2NjQsIDAsIDAuNjQyNzY3NjA4LCAwLCAxLCAwLCAtIDAuNjQyNzY3NjA4LCAwLCAtIDAuNzY2MDYxNjY0KTsKICAgICAgICAgICAgQ0ZyYW1lQm9zcyA9IENGcmFtZS5uZXcoLSA2NzguNjQ4ODA0LCAzODEuMzUzOTQzLCAtIDExMTE0LjIwMTIsIC0gMC45MDg2NDE4MTUsIDAuMDAxNDkyOTQzMzgsIDAuNDE3NTczNzgsIDAuMDA4MzcxMTQ5MTksIDAuOTk5ODU3ODQzLCAwLjAxNDY0MDg5MjksIC0gMC40MTc0OTI1NjgsIDAuMDE2Nzk4ODk4NiwgLSAwLjkwODUyNDk5KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIkxvbmdtYSIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJMb25nbWEiOwogICAgICAgICAgICBOYW1lQm9zcyA9ICJMb25nbWEiOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDEwMjM4Ljg3NTk3NjU2MywgMzg5Ljc5MTI5MDI4MzIsIC0gOTU0OS43OTM5NDUzMTI1KTsKICAgICAgICBlbHNlaWYgKFNlbGVjdEJvc3MgPT0gIlNvdWwgUmVhcGVyIikgdGhlbgogICAgICAgICAgICBCb3NzTW9uID0gIlNvdWwgUmVhcGVyIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAiU291bCBSZWFwZXIiOwogICAgICAgICAgICBDRnJhbWVCb3NzID0gQ0ZyYW1lLm5ldygtIDk1MjQuNzg5MDYyNSwgMzE1LjgwNDI5MDc3MTQ4LCA2NjU1LjcxOTIzODI4MTMpOwogICAgICAgIGVsc2VpZiAoU2VsZWN0Qm9zcyA9PSAicmlwX2luZHJhIFRydWUgRm9ybSIpIHRoZW4KICAgICAgICAgICAgQm9zc01vbiA9ICJyaXBfaW5kcmEgVHJ1ZSBGb3JtIjsKICAgICAgICAgICAgTmFtZUJvc3MgPSAicmlwX2luZHJhIFRydWUgRm9ybSI7CiAgICAgICAgICAgIENGcmFtZUJvc3MgPSBDRnJhbWUubmV3KC0gNTQxNS4zOTIwODk4NDM4LCA1MDUuNzQxMzMzMDA3ODEsIC0gMjgxNC4wMTY2MDE1NjI1KTsKICAgICAgICBlbmQKICAgIGVuZAplbmQKZnVuY3Rpb24gTWF0ZXJpYWxNb24oKQogICAgaWYgKFNlbGVjdE1hdGVyaWFsID09ICJSYWRpb2FjdGl2ZSBNYXRlcmlhbCIpIHRoZW4KICAgICAgICBNTW9uID0gIkZhY3RvcnkgU3RhZmYiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KDI5NSwgNzMsIC0gNTYpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiTXlzdGljIERyb3BsZXQiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJXYXRlciBGaWdodGVyIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDMzODUsIDIzOSwgLSAxMDU0Mik7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJNYWdtYSBPcmUiKSB0aGVuCiAgICAgICAgaWYgU2VhMSB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiTWlsaXRhcnkgU3B5IjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSA1ODE1LCA4NCwgODgyMCk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVsc2VpZiBTZWEyIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJNYWdtYSBOaW5qYSI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gNTQyOCwgNzgsIC0gNTk1OSk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVuZAogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiQW5nZWwgV2luZ3MiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJHb2QncyBHdWFyZCI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSA0Njk4LCA4NDUsIC0gMTkxMik7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygtIDc4NTkuMDk4MTQsIDU1NDQuMTkwNDMsIC0gMzgxLjQ3NjE5NikpLk1hZ25pdHVkZSA+PSA1MDAwKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNzg1OS4wOTgxNCwgNTU0NC4xOTA0MywgLSAzODEuNDc2MTk2KSk7CiAgICAgICAgZW5kCiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJMZWF0aGVyIikgdGhlbgogICAgICAgIGlmIFNlYTEgdGhlbgogICAgICAgICAgICBNTW9uID0gIkJydXRlIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSAxMTQ1LCAxNSwgNDM1MCk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVsc2VpZiBTZWEyIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJNYXJpbmUgQ2FwdGFpbiI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gMjAxMC41MDU5ODE0NDUzMTI1LCA3My4wMDExNTk2Njc5Njg3NSwgLSAzMzI2LjYyMDg0OTYwOTM3NSk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVsc2VpZiBTZWEzIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJKdW5nbGUgUGlyYXRlIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSAxMTk3NS43ODUxNTYyNSwgMzMxLjc3MzQwNjk4MjQyMTksIC0gMTA2MjAuMDMwMjczNDM3NSk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVuZAogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiU2NyYXAgTWV0YWwiKSB0aGVuCiAgICAgICAgaWYgU2VhMSB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiQnJ1dGUiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDExNDUsIDE1LCA0MzUwKTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZWxzZWlmIFNlYTIgdGhlbgogICAgICAgICAgICBNTW9uID0gIlN3YW4gUGlyYXRlIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoODc4LCAxMjIsIDEyMzUpOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbHNlaWYgU2VhMyB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiSnVuZ2xlIFBpcmF0ZSI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gMTIxMDcsIDMzMiwgLSAxMDU0OSk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVuZAogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiRmlzaCBUYWlsIikgdGhlbgogICAgICAgIGlmIFNlYTMgdGhlbgogICAgICAgICAgICBNTW9uID0gIkZpc2htYW4gUmFpZGVyIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSAxMDk5MywgMzMyLCAtIDg5NDApOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbHNlaWYgU2VhMSB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiRmlzaG1hbiBXYXJyaW9yIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoNjExMjMsIDE5LCAxNTY5KTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgICAgIGlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoNjExNjMuODUxNTYyNSwgNS4zNDIzNDIzNzY3MDg5ODQsIDE4MTkuNzg0MTc5Njg3NSkpLk1hZ25pdHVkZSA+PSAxNzAwMCkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNjExNjMuODUxNTYyNSwgNS4zNDIzNDIzNzY3MDg5ODQsIDE4MTkuNzg0MTc5Njg3NSkpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIkRlbW9uaWMgV2lzcCIpIHRoZW4KICAgICAgICBNTW9uID0gIkRlbW9uaWMgU291bCI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSA5NTA3LCAxNzIsIDYxNTgpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiVmFtcGlyZSBGYW5nIikgdGhlbgogICAgICAgIE1Nb24gPSAiVmFtcGlyZSI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSA2MDMzLCA3LCAtIDEzMTcpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiQ29uanVyZWQgQ29jb2EiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJDaG9jb2xhdGUgQmFyIEJhdHRsZXIiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KDYyMC42MzQ0NjA0NDkyMTg4LCA3OC45MzY0NDcxNDM1NTQ2OSwgLSAxMjU4MS4zNjkxNDA2MjUpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiRHJhZ29uIFNjYWxlIikgdGhlbgogICAgICAgIE1Nb24gPSAiRHJhZ29uIENyZXcgQXJjaGVyIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldyg2ODI3LjkxNDU1MDc4MTI1LCA2MDkuNDEyNzE5NzI2NTYyNSwgMjUyLjM1MzgwNTU0MTk5MjIpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiR3VucG93ZGVyIikgdGhlbgogICAgICAgIE1Nb24gPSAiUGlzdG9sIEJpbGxpb25haXJlIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDQ2OSwgNzQsIDU5MDQpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOyAKICAgICAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJNYWdtYSBPcmUiKSB0aGVuCiAgICAgICAgaWYgU2VhMSB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiTWlsaXRhcnkgU3B5IjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSA1ODE1LCA4NCwgODgyMCk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVsc2VpZiBTZWEyIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJNYWdtYSBOaW5qYSI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gNTQyOCwgNzgsIC0gNTk1OSk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVuZAogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiQW5nZWwgV2luZ3MiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJHb2QncyBHdWFyZCI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSA0Njk4LCA4NDUsIC0gMTkxMik7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygtIDc4NTkuMDk4MTQsIDU1NDQuMTkwNDMsIC0gMzgxLjQ3NjE5NikpLk1hZ25pdHVkZSA+PSA1MDAwKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNzg1OS4wOTgxNCwgNTU0NC4xOTA0MywgLSAzODEuNDc2MTk2KSk7CiAgICAgICAgZW5kCiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJMZWF0aGVyIikgdGhlbgogICAgICAgIGlmIFNlYTEgdGhlbgogICAgICAgICAgICBNTW9uID0gIkJydXRlIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSAxMTQ1LCAxNSwgNDM1MCk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVsc2VpZiBTZWEyIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJNYXJpbmUgQ2FwdGFpbiI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gMjAxMC41MDU5ODE0NDUzMTI1LCA3My4wMDExNTk2Njc5Njg3NSwgLSAzMzI2LjYyMDg0OTYwOTM3NSk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVsc2VpZiBTZWEzIHRoZW4KICAgICAgICAgICAgTU1vbiA9ICJKdW5nbGUgUGlyYXRlIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSAxMTk3NS43ODUxNTYyNSwgMzMxLjc3MzQwNjk4MjQyMTksIC0gMTA2MjAuMDMwMjczNDM3NSk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVuZAogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiU2NyYXAgTWV0YWwiKSB0aGVuCiAgICAgICAgaWYgU2VhMSB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiQnJ1dGUiOwogICAgICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDExNDUsIDE1LCA0MzUwKTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgZWxzZWlmIFNlYTIgdGhlbgogICAgICAgICAgICBNTW9uID0gIlN3YW4gUGlyYXRlIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoODc4LCAxMjIsIDEyMzUpOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbHNlaWYgU2VhMyB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiSnVuZ2xlIFBpcmF0ZSI7CiAgICAgICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KC0gMTIxMDcsIDMzMiwgLSAxMDU0OSk7CiAgICAgICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgICAgIGVuZAogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiRmlzaCBUYWlsIikgdGhlbgogICAgICAgIGlmIFNlYTMgdGhlbgogICAgICAgICAgICBNTW9uID0gIkZpc2htYW4gUmFpZGVyIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSAxMDk5MywgMzMyLCAtIDg5NDApOwogICAgICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgICAgICBlbHNlaWYgU2VhMSB0aGVuCiAgICAgICAgICAgIE1Nb24gPSAiRmlzaG1hbiBXYXJyaW9yIjsKICAgICAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoNjExMjMsIDE5LCAxNTY5KTsKICAgICAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICAgICAgICAgIGlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoNjExNjMuODUxNTYyNSwgNS4zNDIzNDIzNzY3MDg5ODQsIDE4MTkuNzg0MTc5Njg3NSkpLk1hZ25pdHVkZSA+PSAxNzAwMCkgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNjExNjMuODUxNTYyNSwgNS4zNDIzNDIzNzY3MDg5ODQsIDE4MTkuNzg0MTc5Njg3NSkpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIkRlbW9uaWMgV2lzcCIpIHRoZW4KICAgICAgICBNTW9uID0gIkRlbW9uaWMgU291bCI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSA5NTA3LCAxNzIsIDYxNTgpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiVmFtcGlyZSBGYW5nIikgdGhlbgogICAgICAgIE1Nb24gPSAiVmFtcGlyZSI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoLSA2MDMzLCA3LCAtIDEzMTcpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiQ29uanVyZWQgQ29jb2EiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJDaG9jb2xhdGUgQmFyIEJhdHRsZXIiOwogICAgICAgIE1Qb3MgPSBDRnJhbWUubmV3KDYyMC42MzQ0NjA0NDkyMTg4LCA3OC45MzY0NDcxNDM1NTQ2OSwgLSAxMjU4MS4zNjkxNDA2MjUpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiRHJhZ29uIFNjYWxlIikgdGhlbgogICAgICAgIE1Nb24gPSAiRHJhZ29uIENyZXcgQXJjaGVyIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldyg2ODI3LjkxNDU1MDc4MTI1LCA2MDkuNDEyNzE5NzI2NTYyNSwgMjUyLjM1MzgwNTU0MTk5MjIpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiR3VucG93ZGVyIikgdGhlbgogICAgICAgIE1Nb24gPSAiUGlzdG9sIEJpbGxpb25haXJlIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygtIDQ2OSwgNzQsIDU5MDQpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZWxzZWlmIChTZWxlY3RNYXRlcmlhbCA9PSAiSHlkcmEgRW5mb3JjZXIiKSB0aGVuCiAgICAgICAgTU1vbiA9ICJIeWRyYSBFbmZvcmNlciI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoNDU4MS41MTc1NzgxMjUsIDEwMDEuNTU5MDgyMDMxMjUsIDcwNC45Mzc4NjYyMTA5Mzc1KTsKICAgICAgICBTUCA9ICJEZWZhdWx0IjsKICAgIGVsc2VpZiAoU2VsZWN0TWF0ZXJpYWwgPT0gIlZlbm9tb3VzIEFzc2FpbGFudCIpIHRoZW4KICAgICAgICBNTW9uID0gIlZlbm9tb3VzIEFzc2FpbGFudCI7CiAgICAgICAgTVBvcyA9IENGcmFtZS5uZXcoNDg3OS45MjA0MTAxNTYyNSwgMTA4OS40NjE0MjU3ODEyNSwgMTEwNC4wMDgzMDA3ODEyNSk7CiAgICAgICAgU1AgPSAiRGVmYXVsdCI7CiAgICBlbHNlaWYgKFNlbGVjdE1hdGVyaWFsID09ICJNaW5pIFR1c2siKSB0aGVuCiAgICAgICAgTU1vbiA9ICJNeXRob2xvZ2ljYWwgUGlyYXRlIjsKICAgICAgICBNUG9zID0gQ0ZyYW1lLm5ldygpOwogICAgICAgIFNQID0gIkRlZmF1bHQiOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVJc2xhbmRFU1AoKQogICAgZm9yIHY0MjUsIHY0MjYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uTG9jYXRpb25zOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBJc2xhbmRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0MjYuTmFtZSB+PSAiU2VhIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDI2OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEzMCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQyNik7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTMwLk5hbWUgPSAiTmFtZUVzcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTMwLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzAuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzAuQWRvcm5lZSA9IHY0MjY7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTMwLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjExMzYgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMTMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzYuRm9udCA9ICJHb3RoYW1Cb2xkIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzYuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzYuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzNi5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzNi5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTEzNi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzYuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExMzYuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDgsIDAsIDApOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQyNlsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gdjQyNi5OYW1lIC4uICIgICBcbiIgLi4gcm91bmQoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQyNi5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDI2OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgdjQyNjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gaXNuaWwodjE5OCkKICAgIHJldHVybiB2MTk4ID09IG5pbCA7CmVuZApsb2NhbCBmdW5jdGlvbiB2MjAodjE5OSkKICAgIHJldHVybiBtYXRoLmZsb29yKHRvbnVtYmVyKHYxOTkpICsgMC41KTsKZW5kCk51bWJlciA9IG1hdGgucmFuZG9tKDEsIDEwMDAwMDApOwpmdW5jdGlvbiBVcGRhdGVQbGF5ZXJDaGFtcygpCiAgICBmb3IgdjQyNywgdjQyOCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgbm90IGlzbmlsKHY0MjguQ2hhcmFjdGVyKSB0aGVuCiAgICAgICAgICAgICAgICBpZiBFU1BQbGF5ZXIgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChub3QgaXNuaWwodjQyOC5DaGFyYWN0ZXIuSGVhZCkgYW5kIG5vdCB2NDI4LkNoYXJhY3Rlci5IZWFkOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTQ2ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDI4LkNoYXJhY3Rlci5IZWFkKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNDYuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE0Ni5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTQ2LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTQ2LkFkb3JuZWUgPSB2NDI4LkNoYXJhY3Rlci5IZWFkOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE0Ni5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTUzID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTE0Nik7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTUzLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTUzLkZvbnRTaXplID0gIlNpemUxMCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTUzLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNTMuVGV4dCA9IHY0MjguTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQyOC5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE1My5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE1My5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE1My5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNTMuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0MjguVGVhbSA9PSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuVGVhbSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjExNTMuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMCwgMCwgMjU0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjExNTMuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMjU1LCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgdjQyOC5DaGFyYWN0ZXIuSGVhZFsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDI4Lk5hbWUgLi4gIiB8ICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MjguQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2VcbkhlYWx0aCA6ICIgLi4gdjIwKCh2NDI4LkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggKiAxMDApIC8gdjQyOC5DaGFyYWN0ZXIuSHVtYW5vaWQuTWF4SGVhbHRoKSAuLiAiJSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHY0MjguQ2hhcmFjdGVyLkhlYWQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIHY0MjguQ2hhcmFjdGVyLkhlYWQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZUNoZXN0Q2hhbXMoKQogICAgZm9yIHY0MjksIHY0MzAgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHY0MzAuTmFtZSwgIkNoZXN0IikgdGhlbgogICAgICAgICAgICAgICAgaWYgQ2hlc3RFU1AgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHY0MzAuTmFtZSwgIkNoZXN0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQzMDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTQ3NSA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ3NS5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ3NS5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ3NS5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NzUuQWRvcm5lZSA9IHY0MzA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ3NS5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTQ4MSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjE0NzUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDgxLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDgxLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDMwLk5hbWUgPT0gIkNoZXN0MSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ4MS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTA5LCAxMDksIDEwOSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dCA9ICJDaGVzdCAxIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzMC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQzMC5OYW1lID09ICJDaGVzdDIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE3MywgMTU4LCAyMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dCA9ICJDaGVzdCAyIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzMC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQzMC5OYW1lID09ICJDaGVzdDMiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDg1LCAyNTUsIDI1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0ODEuVGV4dCA9ICJDaGVzdCAzIiAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzMC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY0MzBbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQzMC5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzAuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgdjQzMDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjQzMDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlRGV2aWxDaGFtcygpCiAgICBmb3IgdjQzMSwgdjQzMiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgRGV2aWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2NDMyLk5hbWUsICJGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQzMi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTE2NCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQzMi5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE2NC5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTY0LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNjQuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNjQuQWRvcm5lZSA9IHY0MzIuSGFuZGxlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE2NC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTcxID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTE2NCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTcxLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTcxLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTcxLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTcxLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTcxLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExNzEuVGV4dCA9IHY0MzIuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzMi5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0MzIuSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0MzIuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDMyLkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDMyLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NDMyLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZUZsb3dlckNoYW1zKCkKICAgIGZvciB2NDMzLCB2NDM0IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiAoKHY0MzQuTmFtZSA9PSAiRmxvd2VyMiIpIG9yICh2NDM0Lk5hbWUgPT0gIkZsb3dlcjEiKSkgdGhlbgogICAgICAgICAgICAgICAgaWYgRmxvd2VyRVNQIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQzNDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTgzID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDM0KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODMuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4My5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTgzLlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTgzLkFkb3JuZWUgPSB2NDM0OwogICAgICAgICAgICAgICAgICAgICAgICB2MTE4My5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTg5ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTE4Myk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQzNC5OYW1lID09ICJGbG93ZXIxIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjExODkuVGV4dCA9ICJCbHVlIEZsb3dlciIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAyNTUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0MzQuTmFtZSA9PSAiRmxvd2VyMiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlRleHQgPSAiUmVkIEZsb3dlciIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTg5LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0MzRbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQzNC5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiB2NDM0OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NDM0OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVSZWFsRnJ1aXRDaGFtcygpCiAgICBmb3IgdjQzNSwgdjQzNiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5BcHBsZVNwYXduZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NDM2OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgUmVhbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2NDM2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjkwNyA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQzNi5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgIHY5MDcuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHY5MDcuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5MDcuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICB2OTA3LkFkb3JuZWUgPSB2NDM2LkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2OTA3LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTE0ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2OTA3KTsKICAgICAgICAgICAgICAgICAgICB2OTE0LkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgdjkxNC5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgIHY5MTQuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHY5MTQuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTE0LlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgdjkxNC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2OTE0LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgdjkxNC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTE0LlRleHQgPSB2NDM2Lk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzYuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjQzNi5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQzNi5OYW1lIC4uICIgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQzNi5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQzNi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjQzNi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgZm9yIHY0MzcsIHY0MzggaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuUGluZWFwcGxlU3Bhd25lcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY0Mzg6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICBpZiBSZWFsRnJ1aXRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IHY0MzguSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTI2ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDM4LkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgdjkyNi5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgdjkyNi5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjkyNi5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgIHY5MjYuQWRvcm5lZSA9IHY0MzguSGFuZGxlOwogICAgICAgICAgICAgICAgICAgIHY5MjYuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5MzMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHY5MjYpOwogICAgICAgICAgICAgICAgICAgIHY5MzMuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICB2OTMzLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgdjkzMy5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdjkzMy5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5MzMuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICB2OTMzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgIHY5MzMuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICB2OTMzLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDE3NCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjkzMy5UZXh0ID0gdjQzOC5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDM4LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY0MzguSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0MzguTmFtZSAuLiAiICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0MzguSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0MzguSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHY0MzguSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGZvciB2NDM5LCB2NDQwIGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkJhbmFuYVNwYXduZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NDQwOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgUmVhbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2NDQwLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjk0NSA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ0MC5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgIHY5NDUuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHY5NDUuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5NDUuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICB2OTQ1LkFkb3JuZWUgPSB2NDQwLkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2OTQ1LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTUyID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2OTQ1KTsKICAgICAgICAgICAgICAgICAgICB2OTUyLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgdjk1Mi5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgIHY5NTIuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHY5NTIuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTUyLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgdjk1Mi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2OTUyLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgdjk1Mi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUxLCAyNTUsIDApOwogICAgICAgICAgICAgICAgICAgIHY5NTIuVGV4dCA9IHY0NDAuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ0MC5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NDQwLkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDQwLk5hbWUgLi4gIiAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQwLkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDQwLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NDQwLkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVJc2xhbmRFU1AoKQogICAgZm9yIHY0NDEsIHY0NDIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uTG9jYXRpb25zOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBJc2xhbmRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0NDIuTmFtZSB+PSAiU2VhIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDQyOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTIwMCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ0Mik7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjAwLk5hbWUgPSAiTmFtZUVzcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjAwLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDAuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDAuQWRvcm5lZSA9IHY0NDI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjAwLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyMDYgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMjAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDYuRm9udCA9ICJHb3RoYW1Cb2xkIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDYuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDYuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwNi5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwNi5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIwNi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDYuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMDYuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcsIDIzNiwgMjQwKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0NDJbJ05hbWVFc3AnXS5UZXh0TGFiZWwuVGV4dCA9IHY0NDIuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQyLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NDI6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICB2NDQyOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBpc25pbCh2MjAwKQogICAgcmV0dXJuIHYyMDAgPT0gbmlsIDsKZW5kCmxvY2FsIGZ1bmN0aW9uIHYyMCh2MjAxKQogICAgcmV0dXJuIG1hdGguZmxvb3IodG9udW1iZXIodjIwMSkgKyAwLjUpOwplbmQKTnVtYmVyID0gbWF0aC5yYW5kb20oMSwgMTAwMDAwMCk7CmZ1bmN0aW9uIFVwZGF0ZVBsYXllckNoYW1zKCkKICAgIGZvciB2NDQzLCB2NDQ0IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBub3QgaXNuaWwodjQ0NC5DaGFyYWN0ZXIpIHRoZW4KICAgICAgICAgICAgICAgIGlmIEVTUFBsYXllciB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKG5vdCBpc25pbCh2NDQ0LkNoYXJhY3Rlci5IZWFkKSBhbmQgbm90IHY0NDQuQ2hhcmFjdGVyLkhlYWQ6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyMTYgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NDQuQ2hhcmFjdGVyLkhlYWQpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIxNi5OYW1lID0gIk5hbWVFc3AiIC4uIE51bWJlciA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjE2LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMTYuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMTYuQWRvcm5lZSA9IHY0NDQuQ2hhcmFjdGVyLkhlYWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjE2LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyMjMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMjE2KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMjMuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMjMuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMjMuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5UZXh0ID0gdjQ0NC5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQ0LkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjIzLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjIzLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjIzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQ0NC5UZWFtID09IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5UZWFtKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygwLCAyNTUsIDApOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTIyMy5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHY0NDQuQ2hhcmFjdGVyLkhlYWRbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjQ0NC5OYW1lIC4uICIgfCAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQ0LkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlXG5IZWFsdGggOiAiIC4uIHYyMCgodjQ0NC5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoICogMTAwKSAvIHY0NDQuQ2hhcmFjdGVyLkh1bWFub2lkLk1heEhlYWx0aCkgLi4gIiUiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiB2NDQ0LkNoYXJhY3Rlci5IZWFkOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NDQ0LkNoYXJhY3Rlci5IZWFkOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVDaGVzdENoYW1zKCkKICAgIGZvciB2NDQ1LCB2NDQ2IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2NDQ2Lk5hbWUsICJDaGVzdCIpIHRoZW4KICAgICAgICAgICAgICAgIGlmIENoZXN0RVNQIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZCh2NDQ2Lk5hbWUsICJDaGVzdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0NDY6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE0OTcgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NDYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0OTcuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0OTcuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0OTcuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDk3LkFkb3JuZWUgPSB2NDQ2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0OTcuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE1MDMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxNDk3KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUwMy5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUwMy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjQ0Ni5OYW1lID09ICJDaGVzdDEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MDMuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEwOSwgMTA5LCAxMDkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHQgPSAiQ2hlc3QgMSIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDYuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0NDYuTmFtZSA9PSAiQ2hlc3QyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxNzMsIDE1OCwgMjEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHQgPSAiQ2hlc3QgMiIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDYuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0NDYuTmFtZSA9PSAiQ2hlc3QzIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4NSwgMjU1LCAyNTUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTAzLlRleHQgPSAiQ2hlc3QgMyIgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDYuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NDQ2WyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0NDYuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDQ2LlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHY0NDY6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIHY0NDY6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIFVwZGF0ZURldmlsQ2hhbXMoKQogICAgZm9yIHY0NDcsIHY0NDggaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIERldmlsRnJ1aXRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjQ0OC5OYW1lLCAiRnJ1aXQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0NDguSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyMzQgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NDguSGFuZGxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMzQuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgICAgICB2MTIzNC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjM0LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjM0LkFkb3JuZWUgPSB2NDQ4LkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyMzQuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTI0MSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEyMzQpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI0MS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI0MS5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI0MS5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI0MS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICB2MTI0MS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjQxLlRleHQgPSB2NDQ4Lk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NDguSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDQ4LkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDQ4Lk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ0OC5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjQ0OC5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjQ0OC5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVGbG93ZXJDaGFtcygpCiAgICBmb3IgdjQ0OSwgdjQ1MCBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgKCh2NDUwLk5hbWUgPT0gIkZsb3dlcjIiKSBvciAodjQ1MC5OYW1lID09ICJGbG93ZXIxIikpIHRoZW4KICAgICAgICAgICAgICAgIGlmIEZsb3dlckVTUCB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY0NTA6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTI1MyA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjUzLk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTMuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1My5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1My5BZG9ybmVlID0gdjQ1MDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNTMuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTI1OSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEyNTMpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5UZXh0V3JhcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY0NTAuTmFtZSA9PSAiRmxvd2VyMSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMjU5LlRleHQgPSAiQmx1ZSBGbG93ZXIiIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDUwLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMjU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2NDUwLk5hbWUgPT0gIkZsb3dlcjIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5UZXh0ID0gIlJlZCBGbG93ZXIiIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDUwLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTI1OS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDUwWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0NTAuTmFtZSAuLiAiICAgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDUwLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgdjQ1MDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjQ1MDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlUmVhbEZydWl0Q2hhbXMoKQogICAgZm9yIHY0NTEsIHY0NTIgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuQXBwbGVTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjQ1MjpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIGlmIFJlYWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgdjQ1Mi5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5NjQgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NTIuSGFuZGxlKTsKICAgICAgICAgICAgICAgICAgICB2OTY0Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICB2OTY0LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTY0LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgdjk2NC5BZG9ybmVlID0gdjQ1Mi5IYW5kbGU7CiAgICAgICAgICAgICAgICAgICAgdjk2NC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjk3MSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjk2NCk7CiAgICAgICAgICAgICAgICAgICAgdjk3MS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgIHY5NzEuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICB2OTcxLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB2OTcxLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjk3MS5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgIHY5NzEuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgdjk3MS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgIHY5NzEuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjk3MS5UZXh0ID0gdjQ1Mi5OYW1lIC4uICIgXG4iIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDUyLkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY0NTIuSGFuZGxlWyJOYW1lRXNwIiAuLiBOdW1iZXIgXS5UZXh0TGFiZWwuVGV4dCA9IHY0NTIuTmFtZSAuLiAiICIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NTIuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NTIuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgIHY0NTIuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGZvciB2NDUzLCB2NDU0IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLlBpbmVhcHBsZVNwYXduZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NDU0OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgaWYgUmVhbEZydWl0RVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCB2NDU0LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjk4MyA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ1NC5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgIHY5ODMuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHY5ODMuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHY5ODMuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICB2OTgzLkFkb3JuZWUgPSB2NDU0LkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2OTgzLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2OTkwID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2OTgzKTsKICAgICAgICAgICAgICAgICAgICB2OTkwLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtU2VtaWJvbGQ7CiAgICAgICAgICAgICAgICAgICAgdjk5MC5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgIHY5OTAuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHY5OTAuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2OTkwLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgdjk5MC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2OTkwLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgdjk5MC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAxNzQsIDApOwogICAgICAgICAgICAgICAgICAgIHY5OTAuVGV4dCA9IHY0NTQuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ1NC5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NDU0LkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDU0Lk5hbWUgLi4gIiAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDU0LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDU0LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NDU0LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBmb3IgdjQ1NSwgdjQ1NiBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5CYW5hbmFTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjQ1NjpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIGlmIFJlYWxGcnVpdEVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgdjQ1Ni5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDAyID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NDU2LkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgdjEwMDIuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHYxMDAyLkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTAwMi5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgIHYxMDAyLkFkb3JuZWUgPSB2NDU2LkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2MTAwMi5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwMDkgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMDAyKTsKICAgICAgICAgICAgICAgICAgICB2MTAwOS5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgIHYxMDA5LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgdjEwMDkuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHYxMDA5LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwMDkuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICB2MTAwOS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2MTAwOS5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgIHYxMDA5LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTEsIDI1NSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwMDkuVGV4dCA9IHY0NTYuTmFtZSAuLiAiIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ1Ni5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NDU2LkhhbmRsZVsiTmFtZUVzcCIgLi4gTnVtYmVyIF0uVGV4dExhYmVsLlRleHQgPSB2NDU2Lk5hbWUgLi4gIiAiIC4uIHYyMCgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24gLSB2NDU2LkhhbmRsZS5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDU2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKSB0aGVuCiAgICAgICAgICAgICAgICB2NDU2LkhhbmRsZTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIgLi4gTnVtYmVyKTpEZXN0cm95KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZApzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIE1vYkVTUCB0aGVuCiAgICAgICAgICAgICAgICBmb3IgdjgyMiwgdjgyMyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODIzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjgyMzpGaW5kRmlyc3RDaGlsZCgiTW9iRWFwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzNzIgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzNzMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzIuUGFyZW50ID0gdjgyMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzcyLlpJbmRleEJlaGF2aW9yID0gRW51bS5aSW5kZXhCZWhhdmlvci5TaWJsaW5nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzIuQWN0aXZlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzcyLk5hbWUgPSAiTW9iRWFwIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzcyLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzcyLkxpZ2h0SW5mbHVlbmNlID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzcyLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3Mi5TdHVkc09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDIuNSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3My5QYXJlbnQgPSB2MTM3MjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzczLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzczLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOyAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNzMuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzczLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzczLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3LCAyMzYsIDI0MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM3My5UZXh0LlNpemUgPSAzNTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDIxID0gbWF0aC5mbG9vcigoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjgyMy5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUpOwogICAgICAgICAgICAgICAgICAgICAgICB2ODIzLk1vYkVhcC5UZXh0TGFiZWwuVGV4dCA9IHY4MjMuTmFtZSAuLiAiLSIgLi4gdjEwMjEgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGZvciB2ODI0LCB2ODI1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY4MjU6RmluZEZpcnN0Q2hpbGQoIk1vYkVhcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjgyNS5Nb2JFYXA6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBTZWFFU1AgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY4MjYsIHY4MjcgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5TZWFCZWFzdHM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODI3OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjgyNzpGaW5kRmlyc3RDaGlsZCgiU2VhZXNwcyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzkxID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzkyID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkxLlBhcmVudCA9IHY4Mjc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5MS5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkxLkFjdGl2ZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5MS5OYW1lID0gIlNlYWVzcHMiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTEuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTEuTGlnaHRJbmZsdWVuY2UgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTEuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkxLlN0dWRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMi41LCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkyLlBhcmVudCA9IHYxMzkxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM5Mi5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTIuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzOTIuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDcsIDIzNiwgMjQwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzkyLlRleHQuU2l6ZSA9IDM1OwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwMjMgPSBtYXRoLmZsb29yKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2ODI3Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHY4MjcuU2VhZXNwcy5UZXh0TGFiZWwuVGV4dCA9IHY4MjcuTmFtZSAuLiAiLSIgLi4gdjEwMjMgLi4gIiBEaXN0YW5jZSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGZvciB2ODI4LCB2ODI5IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuU2VhQmVhc3RzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjgyOTpGaW5kRmlyc3RDaGlsZCgiU2VhZXNwcyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjgyOS5TZWFlc3BzOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgTnBjRVNQIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2ODMwLCB2ODMxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTlBDczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHY4MzE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2ODMxOkZpbmRGaXJzdENoaWxkKCJOcGNFc3BlcyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNDEwID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNDExID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLlBhcmVudCA9IHY4MzE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMC5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLkFjdGl2ZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMC5OYW1lID0gIk5wY0VzcGVzIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLkxpZ2h0SW5mbHVlbmNlID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDEwLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMC5TdHVkc09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDIuNSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMS5QYXJlbnQgPSB2MTQxMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDExLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDExLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MTEuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDExLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDExLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3LCAyMzYsIDI0MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQxMS5UZXh0LlNpemUgPSAzNTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDI1ID0gbWF0aC5mbG9vcigoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjgzMS5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUpOwogICAgICAgICAgICAgICAgICAgICAgICB2ODMxLk5wY0VzcGVzLlRleHRMYWJlbC5UZXh0ID0gdjgzMS5OYW1lIC4uICItIiAuLiB2MTAyNSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgZm9yIHY4MzIsIHY4MzMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5OUENzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjgzMzpGaW5kRmlyc3RDaGlsZCgiTnBjRXNwZXMiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHY4MzMuTnBjRXNwZXM6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKZnVuY3Rpb24gaXNuaWwodjIwMikKICAgIHJldHVybiB2MjAyID09IG5pbCA7CmVuZApsb2NhbCBmdW5jdGlvbiB2MjAodjIwMykKICAgIHJldHVybiBtYXRoLmZsb29yKHRvbnVtYmVyKHYyMDMpICsgMC41KTsKZW5kCk51bWJlciA9IG1hdGgucmFuZG9tKDEsIDEwMDAwMDApOwpmdW5jdGlvbiBVcGRhdGVJc2xhbmRNaXJhZ2VFU1AoKQogICAgZm9yIHY0NTcsIHY0NTggaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uTG9jYXRpb25zOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBNaXJhZ2VJc2xhbmRFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0NTguTmFtZSA9PSAiTWlyYWdlIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQ1ODpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyNzAgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NTgpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3MC5OYW1lID0gIk5hbWVFc3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3MC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjcwLlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjcwLkFkb3JuZWUgPSB2NDU4OwogICAgICAgICAgICAgICAgICAgICAgICB2MTI3MC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMjc2ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTI3MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjc2LkZvbnQgPSAiQ29kZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjc2LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjc2LlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzYuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzYuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyNzYuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjc2LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjc2LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQ1OFsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gdjQ1OC5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NTguUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgTSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDU4OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgdjQ1ODpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlQXVyYUVTUCgpCiAgICBmb3IgdjQ1OSwgdjQ2MCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk5QQ3M6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIEF1cmFFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0NjAuTmFtZSA9PSAiTWFzdGVyIG9mIEVuaGFuY2VtZW50IikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NDYwOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTI4NiA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjQ2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjg2Lk5hbWUgPSAiTmFtZUVzcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjg2LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyODYuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyODYuQWRvcm5lZSA9IHY0NjA7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMjg2LkFsd2F5c09uVG9wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEyOTIgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMjg2KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyOTIuRm9udCA9ICJDb2RlIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyOTIuRm9udFNpemUgPSAiU2l6ZTE0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyOTIuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI5Mi5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI5Mi5UZXh0WUFsaWdubWVudCA9ICJUb3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTI5Mi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyOTIuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEyOTIuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDgwLCAyNDUsIDI0NSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB2NDYwWydOYW1lRXNwJ10uVGV4dExhYmVsLlRleHQgPSB2NDYwLk5hbWUgLi4gIiAgIFxuIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjQ2MC5Qb3NpdGlvbikuTWFnbml0dWRlIC8gMykgLi4gIiBNIiA7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIHY0NjA6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICB2NDYwOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZApmdW5jdGlvbiBVcGRhdGVMU0RFU1AoKQogICAgZm9yIHY0NjEsIHY0NjIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5OUENzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBMQURFU1AgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0NjIuTmFtZSA9PSAiTGVnZW5kYXJ5IFN3b3JkIERlYWxlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQ2MjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzMDIgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NjIpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwMi5OYW1lID0gIk5hbWVFc3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwMi5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzAyLlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzAyLkFkb3JuZWUgPSB2NDYyOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMwMi5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzA4ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTMwMik7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzA4LkZvbnQgPSAiQ29kZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzA4LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzA4LlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDguU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDguVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMDguQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzA4LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzA4LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQ2MlsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gdjQ2Mi5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NjIuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgTSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDYyOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgdjQ2MjpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVXBkYXRlR2VhRVNQKCkKICAgIGZvciB2NDYzLCB2NDY0IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLk15c3RpY0lzbGFuZDpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgR2VhckVTUCB0aGVuCiAgICAgICAgICAgICAgICBpZiAodjQ2NC5OYW1lID09ICJNZXNoUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBub3QgdjQ2NDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzMTggPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIsIHY0NjQpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMxOC5OYW1lID0gIk5hbWVFc3AiOwogICAgICAgICAgICAgICAgICAgICAgICB2MTMxOC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzE4LlNpemUgPSBVRGltMi5uZXcoMSwgMjAwLCAxLCAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzE4LkFkb3JuZWUgPSB2NDY0OwogICAgICAgICAgICAgICAgICAgICAgICB2MTMxOC5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzI0ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTMxOCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzI0LkZvbnQgPSAiQ29kZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzI0LkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzI0LlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMjQuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMjQuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzMjQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzI0LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzI0LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjQ2NFsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gdjQ2NC5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY0NjQuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgTSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NDY0OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgdjQ2NDpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKZnVuY3Rpb24gVHdlZW4yKHYyMDQpCiAgICBsb2NhbCB2MjA1ID0gKHYyMDQuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZTsKICAgIGxvY2FsIHYyMDYgPSAzNTA7CiAgICBpZiAodjIwNSA+PSAzNTApIHRoZW4KICAgICAgICB2MjA2ID0gMzUwOwplbmQKICAgIGxvY2FsIHYyMDcgPSBUd2VlbkluZm8ubmV3KHYyMDUgLyB2MjA2LCBFbnVtLkVhc2luZ1N0eWxlLkxpbmVhcik7CiAgICBsb2NhbCB2MjA4ID0gZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKTpDcmVhdGUoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LCB2MjA3LCB7CiAgICAgICAgQ0ZyYW1lID0gdjIwNAogICAgfSk7CiAgICB2MjA4OlBsYXkoKTsKICAgIGlmIF9HLkNhbmNlbFR3ZWVuMiB0aGVuCiAgICAgICAgdjIwODpDYW5jZWwoKTsKICAgIGVuZAogICAgX0cuQ2xpcDIgPSB0cnVlOwogICAgd2FpdCh2MjA1IC8gdjIwNik7CiAgICBfRy5DbGlwMiA9IGZhbHNlOwplbmQKZnVuY3Rpb24gQlRQWih2MjA5KQogICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHYyMDk7CiAgICB0YXNrLndhaXQoKTsKICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSB2MjA5OwplbmQKVHdlZW5TcGVlZCA9IDM1MDsKZnVuY3Rpb24gVHdlZW4odjIxMSkKICAgIGxvY2FsIHYyMTIgPSAodjIxMS5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlOwogICAgbG9jYWwgdjIxMyA9IFR3ZWVuU3BlZWQ7CiAgICBpZiAodjIxMiA+PSAzNTApIHRoZW4KICAgICAgICB2MjEzID0gVHdlZW5TcGVlZDsKICAgIGVuZAogICAgbG9jYWwgdjIxNCA9IFR3ZWVuSW5mby5uZXcodjIxMiAvIHYyMTMsIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyKTsKICAgIGxvY2FsIHYyMTUgPSBnYW1lOkdldFNlcnZpY2UoIlR3ZWVuU2VydmljZSIpOkNyZWF0ZShnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQsIHYyMTQsIHsKICAgICAgICBDRnJhbWUgPSB2MjExCiAgICB9KTsKICAgIHYyMTU6UGxheSgpOwogICAgaWYgX0cuU3RvcFR3ZWVuIHRoZW4KICAgICAgICB2MjE1OkNhbmNlbCgpOwogICAgZW5kCmVuZApmdW5jdGlvbiBDYW5jZWxUd2Vlbih2MjE2KQogICAgaWYgbm90IHYyMTYgdGhlbgogICAgICAgIF9HLlN0b3BUd2VlbiA9IHRydWU7CiAgICAgICAgd2FpdCgpOwogICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgd2FpdCgpOwogICAgICAgIF9HLlN0b3BUd2VlbiA9IGZhbHNlOwogICAgZW5kCmVuZApmdW5jdGlvbiBFcXVpcFRvb2wodjIxNykKICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCh2MjE3KSB0aGVuCiAgICAgICAgbG9jYWwgdjU3MCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCh2MjE3KTsKICAgICAgICB3YWl0KCk7CiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodjU3MCk7CiAgICBlbmQKZW5kCnNwYXduKGZ1bmN0aW9uKCkKICAgIGxvY2FsIHYyMTggPSBnZXRyYXdtZXRhdGFibGUoZ2FtZSk7CiAgICBsb2NhbCB2MjE5ID0gdjIxOC5fX25hbWVjYWxsOwogICAgc2V0cmVhZG9ubHkodjIxOCwgZmFsc2UpOwogICAgdjIxOC5fX25hbWVjYWxsID0gbmV3Y2Nsb3N1cmUoZnVuY3Rpb24oLi4uKQogICAgICAgIGxvY2FsIHY0NjUgPSBnZXRuYW1lY2FsbG1ldGhvZCgpOwogICAgICAgIGxvY2FsIHY0NjYgPSB7CiAgICAgICAgICAgIC4uLgogICAgICAgIH07CiAgICAgICAgaWYgKHRvc3RyaW5nKHY0NjUpID09ICJGaXJlU2VydmVyIikgdGhlbgogICAgICAgICAgICBpZiAodG9zdHJpbmcodjQ2NlsxXSkgPT0gIlJlbW90ZUV2ZW50IikgdGhlbgogICAgICAgICAgICAgICAgaWYgKCh0b3N0cmluZyh2NDY2WzJdKSB+PSAidHJ1ZSIpIGFuZCAodG9zdHJpbmcodjQ2NlsyXSkgfj0gImZhbHNlIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBfRy5Vc2VTa2lsbCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlKHY0NjZbMl0pID09ICJ2ZWN0b3IiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NDY2WzJdID0gUG9zaXRpb25Ta2lsbE1hc3RlcnlEZXZpbEZydWl0OwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NDY2WzJdID0gQ0ZyYW1lLm5ldyhQb3NpdGlvblNraWxsTWFzdGVyeURldmlsRnJ1aXQpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHYyMTkodW5wYWNrKHY0NjYpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICByZXR1cm4gdjIxOSguLi4pOwogICAgZW5kKTsKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIChfRy5BdXRvRXZvUmFjZSBvciBfRy5DYXN0bGVSYWlkIG9yIF9HLkNvbGxlY3RBenVyZSBvciBfRy5Ud2VlblRvS2l0c3VuZSBvciBfRy5HaG9zdFNoaXAgb3IgX0cuU2hpcCBvciBfRy5BdXRvX0hvbHlfVG9yY2ggb3IgX0cuVGVsZXBvcnRQbHkgb3IgX0cuQXV0b19TZWEzIG9yIF9HLkF1dG9fU2VhMiBvciBfRy5Ud2VlbmZydWl0IG9yIF9HLkF1dG9GaXNoQ3JldyBvciBfRy5BdXRvX1NhYmVyIG9yIF9HLkF1dG9TaGFyayBvciBfRy5BdXRvX1dhcmRlbiBvciBfRy5BdXRvX1JhaW5ib3dIYWtpIG9yIEF1dG9GYXJtUmFjZSBvciBfRy5BdXRvUXVlc3RSYWNlIG9yIEF1dG9fTGF3IG9yIEF1dG9UdXNoaXRhIG9yIF9HLkF1dG9Ib2x5VG9yY2ggb3IgX0cuQXV0b1RlcnJvcnNoYXJrIG9yIF9HLmZhcm1waXJhbnlhIG9yIF9HLkF1dG9fTXVza2V0ZWVySGF0IG9yIF9HLkF1dG9fT2JzZXJ2YXRpb25WMiBvciBfRy5BdXRvTmVhciBvciBfRy5BdXRvX1BvbGVWMSBvciBfRy5BdXRvX0J1ZGR5IG9yIF9HLkVjdG9wbGFzbSBvciBBdXRvRXZvUmFjZSBvciBBdXRvQmFydGlsbyBvciBfRy5BdXRvX0NhbnZhbmRlciBvciBfRy5BdXRvTGV2ZWwgb3IgX0cuQXV0b19EdWFsS2F0YW5hIG9yIEF1dG9fUXVlc3RfWWFtYV8zIG9yIEF1dG9fUXVlc3RfWWFtYV8yIG9yIEF1dG9fUXVlc3RfWWFtYV8xIG9yIEF1dG9fUXVlc3RfVHVzaGl0YV8xIG9yIEF1dG9fUXVlc3RfVHVzaGl0YV8yIG9yIEF1dG9fUXVlc3RfVHVzaGl0YV8zIG9yIF9HLkNsaXAyIG9yIF9HLkF1dG9fUmVnb2t1IG9yIF9HLkF1dG9Cb25lIG9yIF9HLkF1dG9Cb25lTm9RdWVzdCBvciBfRy5BdXRvQm9zcyBvciBBdXRvRmFybU1hc0RldmlsRnJ1aXQgb3IgQXV0b0hhbGxvd1N5Y3RoZSBvciBBdXRvVHVzaGl0YSBvciBfRy5DYWtlUHJpbmNlIG9yIF9HLkF1dG9fU2t1bGxHdWl0YXIgb3IgX0cuQXV0b0Zhcm1Td2FuIG9yIF9HLkRvdWdoS2luZyBvciBfRy5BdXRvRWxpdGVvciBvciBBdXRvTmV4dElzbGFuZCBvciBNdXNrZXRlZXIgb3IgX0cuQXV0b01hdGVyaWFsIG9yIEF1dG9GYXJtUmFjZVF1ZXN0IG9yIF9HLkZhY3Rvcnkgb3IgX0cuQXV0b19TYXcgb3IgX0cuQXV0b0Zyb3plbkRpbWVuc2lvbiBvciBfRy5BdXRvS2lsbFRyaWFsIG9yIF9HLkF1dG9VcGdyYWRlIG9yIF9HLlR3ZWVuVG9Gcm96ZW5EaW1lbnNpb24pIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydDpGaW5kRmlyc3RDaGlsZCgiQm9keUNsaXAiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjg4NyA9IEluc3RhbmNlLm5ldygiQm9keVZlbG9jaXR5Iik7CiAgICAgICAgICAgICAgICAgICAgdjg4Ny5OYW1lID0gIkJvZHlDbGlwIjsKICAgICAgICAgICAgICAgICAgICB2ODg3LlBhcmVudCA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0OwogICAgICAgICAgICAgICAgICAgIHY4ODcuTWF4Rm9yY2UgPSBWZWN0b3IzLm5ldygxMDAwMDAsIDEwMDAwMCwgMTAwMDAwKTsKICAgICAgICAgICAgICAgICAgICB2ODg3LlZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMCwgMCwgMCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQ6RmluZEZpcnN0Q2hpbGQoIkJvZHlDbGlwIik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5TdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiAoX0cuQXV0b0V2b1JhY2Ugb3IgX0cuQXV0b19SYWluYm93SGFraSBvciBfRy5BdXRvX1NrdWxsR3VpdGFyIG9yIF9HLkNhc3RsZVJhaWQgb3IgX0cuQ29sbGVjdEF6dXJlIG9yIF9HLlR3ZWVuVG9LaXRzdW5lIG9yIF9HLkF1dG9fU2VhMyBvciBfRy5BdXRvX1NlYTIgb3IgX0cuR2hvc3RTaGlwIG9yIF9HLlNoaXAgb3IgX0cuQXV0b19Ib2x5X1RvcmNoIG9yIF9HLlRlbGVwb3J0UGx5IG9yIF9HLlR3ZWVuZnJ1aXQgb3IgX0cuQXV0b19TYWJlciBvciBfRy5BdXRvX1BvbGVWMSBvciBfRy5BdXRvX011c2tldGVlckhhdCBvciBfRy5BdXRvRmlzaENyZXcgb3IgX0cuQXV0b1NoYXJrIG9yIEF1dG9GYXJtUmFjZSBvciBfRy5BdXRvUXVlc3RSYWNlIG9yIF9HLkF1dG9fV2FyZGVuIG9yIEF1dG9fTGF3IG9yIF9HLkF1dG9fRHVhbEthdGFuYSBvciBBdXRvX1F1ZXN0X1R1c2hpdGFfMSBvciBBdXRvX1F1ZXN0X1R1c2hpdGFfMiBvciBBdXRvX1F1ZXN0X1R1c2hpdGFfMyBvciBBdXRvVHVzaGl0YSBvciBfRy5BdXRvSG9seVRvcmNoIG9yIF9HLkF1dG9fQnVkZHkgb3IgX0cuQXV0b1RlcnJvcnNoYXJrIG9yIF9HLmZhcm1waXJhbnlhIG9yIEF1dG9fUXVlc3RfWWFtYV8zIG9yIF9HLkF1dG9fT2JzZXJ2YXRpb25WMiBvciBBdXRvX1F1ZXN0X1lhbWFfMiBvciBBdXRvX1F1ZXN0X1lhbWFfMSBvciBfRy5BdXRvTmVhciBvciBfRy5FY3RvcGxhc20gb3IgQXV0b0V2b1JhY2Ugb3IgX0cuQXV0b0tpbGxUcmlhbCBvciBBdXRvQmFydGlsbyBvciBfRy5BdXRvX1JlZ29rdSBvciBfRy5BdXRvTGV2ZWwgb3IgX0cuQ2xpcDIgb3IgX0cuQXV0b0JvbmUgb3IgX0cuQXV0b19DYW52YW5kZXIgb3IgX0cuQXV0b0JvbmVOb1F1ZXN0IG9yIF9HLkF1dG9Cb3NzIG9yIF9HLkF1dG9fU2F3IG9yIEF1dG9GYXJtTWFzRGV2aWxGcnVpdCBvciBBdXRvSGFsbG93U3ljdGhlIG9yIEF1dG9UdXNoaXRhIG9yIF9HLkNha2VQcmluY2Ugb3IgX0cuRG91Z2hLaW5nIG9yIF9HLkF1dG9GYXJtU3dhbiBvciBfRy5BdXRvRWxpdGVvciBvciBBdXRvTmV4dElzbGFuZCBvciBNdXNrZXRlZXIgb3IgX0cuQXV0b01hdGVyaWFsIG9yIF9HLkZhY3Rvcnkgb3IgX0cuQXV0b0Zyb3plbkRpbWVuc2lvbiBvciBBdXRvRmFybVJhY2VRdWVzdCBvciBfRy5BdXRvVXBncmFkZSBvciBfRy5Ud2VlblRvRnJvemVuRGltZW5zaW9uKSB0aGVuCiAgICAgICAgICAgICAgICBmb3IgdjgzNCwgdjgzNSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODM1OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHY4MzUuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQpOwplbmQpOwp0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlN0dW4iKSB0aGVuCiAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5TdHVuLkNoYW5nZWQ6Y29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlN0dW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5TdHVuLlZhbHVlID0gMDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKZnVuY3Rpb24gQ2hlY2tNYXRlcmlhbCh2MjIxKQogICAgZm9yIHY0NjcsIHY0NjggaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiZ2V0SW52ZW50b3J5IikpIGRvCiAgICAgICAgaWYgKHR5cGUodjQ2OCkgPT0gInRhYmxlIikgdGhlbgogICAgICAgICAgICBpZiAodjQ2OC5UeXBlID09ICJNYXRlcmlhbCIpIHRoZW4KICAgICAgICAgICAgICAgIGlmICh2NDY4Lk5hbWUgPT0gdjIyMSkgdGhlbgogICAgICAgICAgICAgICAgICAgIHJldHVybiB2NDY4LkNvdW50OwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICByZXR1cm4gMDsKZW5kCmZ1bmN0aW9uIEdldFdlYXBvbkludmVudG9yeSh2MjIyKQogICAgZm9yIHY0NjksIHY0NzAgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiZ2V0SW52ZW50b3J5IikpIGRvCiAgICAgICAgaWYgKHR5cGUodjQ3MCkgPT0gInRhYmxlIikgdGhlbgogICAgICAgICAgICBpZiAodjQ3MC5UeXBlID09ICJTd29yZCIpIHRoZW4KICAgICAgICAgICAgICAgIGlmICh2NDcwLk5hbWUgPT0gdjIyMikgdGhlbgogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICByZXR1cm4gZmFsc2U7CmVuZApsb2NhbCB2MjEgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI7CmZ1bmN0aW9uIEZpbmRFbmVtaWVzSW5SYW5nZSh2MjIzLCB2MjI0KQogICAgbG9jYWwgdjIyNSA9ICh2MjEuQ2hhcmFjdGVyIG9yIHYyMS5DaGFyYWN0ZXJBZGRlZDpXYWl0KCkpOkdldFBpdm90KCkuUG9zaXRpb247CiAgICBsb2NhbCB2MjI2ID0gbmlsOwogICAgZm9yIHY0NzEsIHY0NzIgaW4gaXBhaXJzKHYyMjQpIGRvCiAgICAgICAgaWYgKG5vdCB2NDcyOkdldEF0dHJpYnV0ZSgiSXNCb2F0IikgYW5kIHY0NzI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpIGFuZCAodjQ3Mi5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICBsb2NhbCB2NjcxID0gdjQ3MjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpOwogICAgICAgICAgICBpZiAodjY3MSBhbmQgKCh2MjI1IC0gdjY3MS5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDYwKSkgdGhlbgogICAgICAgICAgICAgICAgaWYgKHY0NzIgfj0gdjIxLkNoYXJhY3RlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh2MjIzLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHY0NzIsCiAgICAgICAgICAgICAgICAgICAgICAgIHY2NzEKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB2MjI2ID0gdjY3MTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgZm9yIHY0NzMsIHY0NzQgaW4gaXBhaXJzKGdhbWUuUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgaWYgKHY0NzQuQ2hhcmFjdGVyIGFuZCAodjQ3NCB+PSB2MjEpKSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY2NzIgPSB2NDc0LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpOwogICAgICAgICAgICBpZiAodjY3MiBhbmQgKCh2MjI1IC0gdjY3Mi5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDYwKSkgdGhlbgogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHYyMjMsIHsKICAgICAgICAgICAgICAgICAgICB2NDc0LkNoYXJhY3RlciwKICAgICAgICAgICAgICAgICAgICB2NjcyCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHYyMjYgPSB2NjcyOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIHYyMjY7CmVuZApmdW5jdGlvbiBHZXRFcXVpcHBlZFRvb2woKQogICAgbG9jYWwgdjIyNyA9IHYyMS5DaGFyYWN0ZXI7CiAgICBpZiBub3QgdjIyNyB0aGVuCiAgICAgICAgcmV0dXJuIG5pbDsKICAgIGVuZAogICAgZm9yIHY0NzUsIHY0NzYgaW4gaXBhaXJzKHYyMjc6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2NDc2OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgcmV0dXJuIHY0NzY7CiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiBuaWw7CmVuZApmdW5jdGlvbiBBdHRhY2tOb0Nvb2xEb3duKCkKICAgIGxvY2FsIHYyMjggPSB7fTsKICAgIGxvY2FsIHYyMjkgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKTsKICAgIGxvY2FsIHYyMzAgPSBGaW5kRW5lbWllc0luUmFuZ2UodjIyOCwgdjIyOSk7CiAgICBpZiBub3QgdjIzMCB0aGVuCiAgICAgICAgcmV0dXJuOwogICAgZW5kCiAgICBsb2NhbCB2MjMxID0gR2V0RXF1aXBwZWRUb29sKCk7CiAgICBpZiBub3QgdjIzMSB0aGVuCiAgICAgICAgcmV0dXJuOwogICAgZW5kCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgdjQ3NyA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTsKICAgICAgICBsb2NhbCB2NDc4ID0gdjQ3NzpXYWl0Rm9yQ2hpbGQoIk1vZHVsZXMiKTpXYWl0Rm9yQ2hpbGQoIk5ldCIpOldhaXRGb3JDaGlsZCgiUkUvUmVnaXN0ZXJBdHRhY2siKTsKICAgICAgICBsb2NhbCB2NDc5ID0gdjQ3NzpXYWl0Rm9yQ2hpbGQoIk1vZHVsZXMiKTpXYWl0Rm9yQ2hpbGQoIk5ldCIpOldhaXRGb3JDaGlsZCgiUkUvUmVnaXN0ZXJIaXQiKTsKICAgICAgICBpZiAoIyB2MjI4ID4gMCkgdGhlbgogICAgICAgICAgICB2NDc4OkZpcmVTZXJ2ZXIoMWUtOSk7CiAgICAgICAgICAgIHY0Nzk6RmlyZVNlcnZlcih2MjMwLCB2MjI4KTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIHRhc2sud2FpdCgxZS05KTsKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZApUeXBlID0gMTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgKFR5cGUgPT0gMSkgdGhlbgogICAgICAgICAgICBQb3MgPSBDRnJhbWUubmV3KDAsIDQwLCAwKTsKICAgICAgICBlbHNlaWYgKFR5cGUgPT0gMikgdGhlbgogICAgICAgICAgICBQb3MgPSBDRnJhbWUubmV3KC0gNDAsIDQwLCAwKTsKICAgICAgICBlbHNlaWYgKFR5cGUgPT0gMykgdGhlbgogICAgICAgICAgICBQb3MgPSBDRnJhbWUubmV3KDQwLCA0MCwgMCk7CiAgICAgICAgZWxzZWlmIChUeXBlID09IDQpIHRoZW4KICAgICAgICAgICAgUG9zID0gQ0ZyYW1lLm5ldygwLCA0MCwgNDApOwogICAgICAgIGVsc2VpZiAoVHlwZSA9PSA1KSB0aGVuCiAgICAgICAgICAgIFBvcyA9IENGcmFtZS5uZXcoMCwgNDAsIC0gNDApOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIFR5cGUgPSAxOwogICAgICAgIHdhaXQoMC4yKTsKICAgICAgICBUeXBlID0gMjsKICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgVHlwZSA9IDM7CiAgICAgICAgd2FpdCgwLjIpOwogICAgICAgIFR5cGUgPSA0OwogICAgICAgIHdhaXQoMC4yKTsKICAgICAgICBUeXBlID0gNTsKICAgICAgICB3YWl0KDAuMik7CiAgICBlbmQKZW5kKTsKZnVuY3Rpb24gQXV0b0hha2koKQogICAgaWYgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGFzQnVzbyIpIHRoZW4KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXNvIik7CiAgICBlbmQKZW5kCmZ1bmN0aW9uIHRvKHYyMzIpCiAgICByZXBlYXQKICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTUpOwogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSB2MjMyOwogICAgICAgIHRhc2sud2FpdCgpOwogICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSB2MjMyOwogICAgdW50aWwgKHYyMzIuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAyMDAwCmVuZApmdW5jdGlvbiB0byh2MjMzKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIGlmICgoKHYyMzMuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA+PSAyMDAwKSBhbmQgbm90IEF1dG9fUmFpZCBhbmQgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgaWYgKE5hbWVNb24gPT0gIkZpc2htYW5RdWVzdCIpIHRoZW4KICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNjExNjMuODUxNTYyNSwgMTEuNjc5Njg3NSwgMTgxOS43ODQxNzk2ODc1KSk7CiAgICAgICAgICAgIGVsc2VpZiAoTW9uID09ICJHb2QncyBHdWFyZCIpIHRoZW4KICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA0NjA3LjgyMjc1LCA4NzIuNTQyNDgsIC0gMTY2Ny41NTY4OCkpOwogICAgICAgICAgICBlbHNlaWYgKE5hbWVNb24gPT0gIlNreUV4cDFRdWVzdCIpIHRoZW4KICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA3ODk0LjYxNzY3NTc4MTMsIDU1NDcuMTQxNjAxNTYyNSwgLSAzODAuMjkxMTk4NzMwNDcpKTsKICAgICAgICAgICAgZWxzZWlmIChOYW1lTW9uID09ICJTaGlwUXVlc3QxIikgdGhlbgogICAgICAgICAgICAgICAgVHdlZW4oZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg5MjMuMjEyNTI0NDE0MDYsIDEyNi45NzYwMDU1NTQyLCAzMjg1Mi44MzIwMzEyNSkpOwogICAgICAgICAgICBlbHNlaWYgKE5hbWVNb24gPT0gIlNoaXBRdWVzdDIiKSB0aGVuCiAgICAgICAgICAgICAgICBUd2VlbihnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDkyMy4yMTI1MjQ0MTQwNiwgMTI2Ljk3NjAwNTU1NDIsIDMyODUyLjgzMjAzMTI1KSk7CiAgICAgICAgICAgIGVsc2VpZiAoTmFtZU1vbiA9PSAiRnJvc3RRdWVzdCIpIHRoZW4KICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA2NTA4LjU1ODEwNTQ2ODgsIDg5LjAzNDk5NjAzMjcxNSwgLSAxMzIuODM5NTM4NTc0MjIpKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gdjIzMzsKICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMDUpOwogICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZDpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IHYyMzM7CiAgICAgICAgICAgICAgICB1bnRpbCAoKHYyMzMuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDI1MDApIGFuZCAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPiAwKQogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZApsb2NhbCB2MjIgPSBJbnN0YW5jZS5uZXcoIlNjcmVlbkd1aSIpOwpsb2NhbCB2MjMgPSBJbnN0YW5jZS5uZXcoIkltYWdlQnV0dG9uIik7CmxvY2FsIHYyNCA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKTsKbG9jYWwgdjI1ID0gSW5zdGFuY2UubmV3KCJQYXJ0aWNsZUVtaXR0ZXIiKTsKbG9jYWwgdjI2ID0gZ2FtZTpHZXRTZXJ2aWNlKCJUd2VlblNlcnZpY2UiKTsKCnYyMi5QYXJlbnQgPSBnYW1lLkNvcmVHdWk7CnYyMi5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZzsKCnYyMy5QYXJlbnQgPSB2MjI7CnYyMy5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSk7CnYyMy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC41CnYyMy5Cb3JkZXJTaXplUGl4ZWwgPSAwOwp2MjMuUG9zaXRpb24gPSBVRGltMi5uZXcoMC4xMjA4MzMzMzcgLSAwLjEsIDAsIDAuMDk1Mjg5MDgxMyArIDAuMDEsIDApOwp2MjMuU2l6ZSA9IFVEaW0yLm5ldygwLCA1MCwgMCwgNTApOwp2MjMuRHJhZ2dhYmxlID0gdHJ1ZTsKdjIzLkltYWdlID0gImh0dHA6Ly93d3cucm9ibG94LmNvbS9hc3NldC8/aWQ9NzA2NTk3Mjg5NjM5MjQiOwoKdjI0LlBhcmVudCA9IHYyMzsKdjI0LkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDEsIDApOwoKdjI1LlBhcmVudCA9IHYyMzsKdjI1LkxpZ2h0RW1pc3Npb24gPSAxOwp2MjUuU2l6ZSA9IE51bWJlclNlcXVlbmNlLm5ldyh7CiAgICBOdW1iZXJTZXF1ZW5jZUtleXBvaW50Lm5ldygwLCAwLjEpLAogICAgTnVtYmVyU2VxdWVuY2VLZXlwb2ludC5uZXcoMSwgMCkKfSk7CnYyNS5MaWZldGltZSA9IE51bWJlclJhbmdlLm5ldygwLjUsIDEpOwp2MjUuUmF0ZSA9IDA7CnYyNS5TcGVlZCA9IE51bWJlclJhbmdlLm5ldyg1LCAxMCk7CnYyNS5Db2xvciA9IENvbG9yU2VxdWVuY2UubmV3KENvbG9yMy5mcm9tUkdCKDI1NSwgODUsIDI1NSksIENvbG9yMy5mcm9tUkdCKDg1LCAyNTUsIDI1NSkpOwoKbG9jYWwgdjQ3ID0gdjI2OkNyZWF0ZSh2MjMsIFR3ZWVuSW5mby5uZXcoMC41LCBFbnVtLkVhc2luZ1N0eWxlLlF1YWQsIEVudW0uRWFzaW5nRGlyZWN0aW9uLk91dCksIHsKICAgIFJvdGF0aW9uID0gMAp9KTsKCi0tIPCfn6IgVG9nZ2xlIHN0YXRlCmxvY2FsIHRvZ2dsZWQgPSB0cnVlCgp2MjMuTW91c2VCdXR0b24xRG93bjpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIHYyNS5SYXRlID0gMTAwOwogICAgdGFzay5kZWxheSgxLCBmdW5jdGlvbigpCiAgICAgICAgdjI1LlJhdGUgPSAwOwogICAgZW5kKTsKCiAgICB2NDc6UGxheSgpOwogICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIEVudW0uS2V5Q29kZS5FbmQsIGZhbHNlLCBnYW1lKTsKCiAgICB2NDcuQ29tcGxldGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIHYyMy5Sb3RhdGlvbiA9IDA7CiAgICBlbmQpOwoKICAgIGlmIG5vdCB0b2dnbGVkIHRoZW4KICAgICAgICAtLSBC4bqtdCB0cuG6oW5nIHRow6FpOiB0byArIHRy4bqvbmcgxJHhurdjCiAgICAgICAgdG9nZ2xlZCA9IHRydWUKICAgICAgICB2MjMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAKICAgICAgICB2MjMuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwyNTUsMjU1KQogICAgICAgIGxvY2FsIHYyMzUgPSB2MjY6Q3JlYXRlKHYyMywgVHdlZW5JbmZvLm5ldygwLjIsIEVudW0uRWFzaW5nU3R5bGUuQm91bmNlLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpLCB7CiAgICAgICAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgNjAsIDAsIDYwKQogICAgICAgIH0pOwogICAgICAgIHYyMzU6UGxheSgpCiAgICBlbHNlCiAgICAgICAgLS0gVOG6r3QgdHLhuqFuZyB0aMOhaTogbmjhu48gKyB0cm9uZyBuaOG6uQogICAgICAgIHRvZ2dsZWQgPSBmYWxzZQogICAgICAgIHYyMy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC41CiAgICAgICAgdjIzLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsMjU1LDI1NSkKICAgICAgICBsb2NhbCB2NDgzID0gdjI2OkNyZWF0ZSh2MjMsIFR3ZWVuSW5mby5uZXcoMC4yLCBFbnVtLkVhc2luZ1N0eWxlLkJvdW5jZSwgRW51bS5FYXNpbmdEaXJlY3Rpb24uT3V0KSwgewogICAgICAgICAgICBTaXplID0gVURpbTIubmV3KDAsIDUwLCAwLCA1MCkKICAgICAgICB9KTsKICAgICAgICB2NDgzOlBsYXkoKQogICAgZW5kCmVuZCkKCi0tIHhvw6EgZWZmZWN0IG3hurdjIMSR4buLbmgKaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkVmZmVjdC5Db250YWluZXI6RmluZEZpcnN0Q2hpbGQoIkRlYXRoIikgdGhlbgogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkVmZmVjdC5Db250YWluZXIuRGVhdGg6RGVzdHJveSgpOwplbmQKaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkVmZmVjdC5Db250YWluZXI6RmluZEZpcnN0Q2hpbGQoIlJlc3Bhd24iKSB0aGVuCiAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuRWZmZWN0LkNvbnRhaW5lci5SZXNwYXduOkRlc3Ryb3koKTsKZW5kCnYxNi5Ib21lOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJUaWsgVG9rIiwKICAgIERlc2NyaXB0aW9uID0gIkNsaWNrKENvcHkpIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIHNldGNsaXBib2FyZCgidGlrdG9rLmNvbS9AaG9jLmNvZGVkZXAucHl0aG9uIik7CiAgICBlbmQKfSk7CnYxNi5Ib21lOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJaYWxvIEdyb3VwIiwKICAgIERlc2NyaXB0aW9uID0gIkNsaWNrKENvcHkpIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIHNldGNsaXBib2FyZCgiaHR0cHM6Ly96YWxvLm1lL2cvdnp1YnJrNTE5Iik7CiAgICBlbmQKfSk7CnYxNi5Ib21lOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJSZW1lbWJlcjoiLAogICAgRGVzY3JpcHRpb24gPSAiVGhpcyByZWFsIE9saW9zIEh1YiwgYnV0IGEgbmV3IHZlcnNpb24gbWFkZSBieSBPbGlvcyBSb2Jsb3guIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIHNldGNsaXBib2FyZCgidGlrdG9rLmNvbS9AaG9jLmNvZGVkZXAucHl0aG9uIik7CiAgICBlbmQKfSk7Cl9HLkZhc3RBdHRhY2tTdHJpeF9Nb2RlID0gIlN1cGVyIEZhc3QgQXR0YWNrIjsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuRmFzdEF0dGFja1N0cml4X01vZGUgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoX0cuRmFzdEF0dGFja1N0cml4X01vZGUgPT0gIlN1cGVyIEZhc3QgQXR0YWNrIikgdGhlbgogICAgICAgICAgICAgICAgICAgIF9HLkZhc3RfRGVsYXkgPSAxZS05OwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjQ4ID0gdjE2Lk1haW46QWRkRHJvcGRvd24oIkRyb3Bkb3duU2VsZWN0V2VhcG9uIiwgewogICAgVGl0bGUgPSAiU2VsZWN0IHdlYXBvbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgVmFsdWVzID0gewogICAgICAgICJNZWxlZSIsCiAgICAgICAgIlN3b3JkIiwKICAgICAgICAiQmxveCBGcnVpdHMiCiAgICB9LAogICAgTXVsdGkgPSBmYWxzZSwKICAgIERlZmF1bHQgPSAxCn0pOwp2NDg6U2V0VmFsdWUoIk1lbGVlIik7CnY0ODpPbkNoYW5nZWQoZnVuY3Rpb24odjIzNikKICAgIENob29zZVdlYXBvbiA9IHYyMzY7CmVuZCk7CnRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiAoQ2hvb3NlV2VhcG9uID09ICJNZWxlZSIpIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2ODM2LCB2ODM3IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2ODM3LlRvb2xUaXAgPT0gIk1lbGVlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQodG9zdHJpbmcodjgzNy5OYW1lKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0V2VhcG9uID0gdjgzNy5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgKENob29zZVdlYXBvbiA9PSAiU3dvcmQiKSB0aGVuCiAgICAgICAgICAgICAgICBmb3IgdjEwMjgsIHYxMDI5IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2MTAyOS5Ub29sVGlwID09ICJTd29yZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKHRvc3RyaW5nKHYxMDI5Lk5hbWUpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWxlY3RXZWFwb24gPSB2MTAyOS5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgKENob29zZVdlYXBvbiA9PSAiQmxveCBGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2MTQzMCwgdjE0MzEgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDMxLlRvb2xUaXAgPT0gIkJsb3ggRnJ1aXQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCh0b3N0cmluZyh2MTQzMS5OYW1lKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0V2VhcG9uID0gdjE0MzEuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2NDkgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZUxldmVsIiwgewogICAgVGl0bGUgPSAiQXV0byBGYXJtIExldmVsIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY0OTpPbkNoYW5nZWQoZnVuY3Rpb24odjIzNykKICAgIF9HLkF1dG9MZXZlbCA9IHYyMzc7CiAgICBpZiAodjIzNyA9PSBmYWxzZSkgdGhlbgogICAgICAgIHdhaXQoKTsKICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgIHdhaXQoKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlTGV2ZWw6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9MZXZlbCB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIENoZWNrTGV2ZWwoKTsKICAgICAgICAgICAgICAgIGlmIChub3Qgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgTmFtZU1vbikgb3IgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWJhbmRvblF1ZXN0Iik7CiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lUSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKChDRnJhbWVRLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0YXJ0UXVlc3QiLCBOYW1lUXVlc3QsIFF1ZXN0THYpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIChzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCBOYW1lTW9uKSBvciAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSB0cnVlKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTQzMiwgdjE0MzMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQzMzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE0MzM6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxNDMzLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0MzMuTmFtZSA9PSBNcykgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDMzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzMuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDMzLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzMuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzMuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzMuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTQzMy5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNDMzLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9MZXZlbCBvciBub3QgdjE0MzMuUGFyZW50IG9yICh2MTQzMy5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2MTQzMy5OYW1lKSBvciAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBmb3IgdjE0MzQsIHYxNDM1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbJ19Xb3JsZE9yaWdpbiddLkVuZW15U3Bhd25zOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHYxNDM1Lk5hbWUsIE5hbWVNb24pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjE0MzUuUG9zaXRpb24pLk1hZ25pdHVkZSA+PSAxMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDM1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY1MCA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlTW9iQXVyYSIsIHsKICAgIFRpdGxlID0gIkF1dG8gRmFybSBOZWFyZXN0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY1MDpPbkNoYW5nZWQoZnVuY3Rpb24odjIzOCkKICAgIF9HLkF1dG9OZWFyID0gdjIzODsKICAgIGlmICh2MjM4ID09IGZhbHNlKSB0aGVuCiAgICAgICAgd2FpdCgpOwogICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgd2FpdCgpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVNb2JBdXJhOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b05lYXIgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBmb3IgdjgzOCwgdjgzOSBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY4Mzk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY4Mzk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHY4MzkuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjgzOS5OYW1lIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjgzOTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNTAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY4MzkuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODM5Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODM5Lkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjgzOS5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODM5Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4MzkuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2ODM5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjgzOS5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvTmVhciBvciBub3QgdjgzOS5QYXJlbnQgb3IgKHY4MzkuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCBnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHY4MzkuTmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjUxID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVDYXN0bGVSYWlkIiwgewogICAgVGl0bGUgPSAiQXV0byBGYXJtIFBpcmF0ZXMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjUxOk9uQ2hhbmdlZChmdW5jdGlvbih2MjM5KQogICAgX0cuQ2FzdGxlUmFpZCA9IHYyMzk7CmVuZCk7CnYxNy5Ub2dnbGVDYXN0bGVSYWlkOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQ2FzdGxlUmFpZCB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxvY2FsIHY3NjQgPSBDRnJhbWUubmV3KC0gNTQ5Ni4xNzQzMiwgMzEzLjc2ODkyMSwgLSAyODQxLjUzMDI3LCAwLjkyNDg5NDUxMiwgNy4zNzA1OGUtOSwgMC4zODAyMjM3NTEsIDMuNTg4MTAyZS04LCAxLCAtIDEuMDY2NjU0NDZlLTcsIC0gMC4zODAyMjM3NTEsIDEuMTIyOTcxMWUtNywgMC45MjQ4OTQ1MTIpOwogICAgICAgICAgICAgICAgaWYgKChDRnJhbWUubmV3KC0gNTUzOS4zMTE1MjM0Mzc1LCAzMTMuODAwNTM3MTA5Mzc1LCAtIDI5NzIuMzcyMzE0NDUzMTI1KS5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDUwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTAzMCwgdjEwMzEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfRy5DYXN0bGVSYWlkIGFuZCB2MTAzMTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2MTAzMTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgKHYxMDMxLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxMDMxLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDIwMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzEuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDMxLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTAzMS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKHYxMDMxLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjEwMzEuUGFyZW50IG9yIG5vdCBfRy5DYXN0bGVSYWlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odjc2NCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NTIgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZUhha2lGb3J0cmVzcyIsIHsKICAgIFRpdGxlID0gIkFjdGl2YXRlIENvbG9yIEhha2kgKEZvcnRyZXNzKSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NTI6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNDApCiAgICBfRy5FbmFibGVIYWtpRm9ydHJlc3MgPSB2MjQwOwplbmQpOwp2MTcuVG9nZ2xlSGFraUZvcnRyZXNzOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgZnVuY3Rpb24gdjUzKHYyNDEsIHYyNDIpCiAgICBsb2NhbCB2MjQzID0gewogICAgICAgIFsxXSA9IHsKICAgICAgICAgICAgU3RvcmFnZU5hbWUgPSB2MjQxLAogICAgICAgICAgICBUeXBlID0gIkF1cmFTa2luIiwKICAgICAgICAgICAgQ29udGV4dCA9ICJFcXVpcCIKICAgICAgICB9CiAgICB9OwogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLk1vZHVsZXMuTmV0OkZpbmRGaXJzdENoaWxkKCJSRi9GcnVpdEN1c3RvbWl6ZXJSRiIpOkludm9rZVNlcnZlcih1bnBhY2sodjI0MykpOwogICAgVHdlZW4yKHYyNDIpOwplbmQKbG9jYWwgZnVuY3Rpb24gdjU0KHYyNDQsIHYyNDUpCiAgICBsb2NhbCB2MjQ2ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjsKICAgIGlmIChub3QgdjI0NiBvciBub3QgdjI0NjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpKSB0aGVuCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgZW5kCiAgICBsb2NhbCB2MjQ3ID0gdjI0Ni5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uOwogICAgcmV0dXJuICh2MjQ3IC0gdjI0NCkuTWFnbml0dWRlIDwgdjI0NSA7CmVuZApzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0cnVlIGRvCiAgICAgICAgaWYgX0cuRW5hYmxlSGFraUZvcnRyZXNzIHRoZW4KICAgICAgICAgICAgdjUzKCJTbm93IFdoaXRlIiwgVmVjdG9yMy5uZXcoLSA0OTcxLjcxODI2MTcxODc1LCAzMzUuOTU4MjIxNDM1NTQ2OSwgLSAzNzIwLjA1OTU3MDMxMjUpKTsKICAgICAgICAgICAgd2hpbGUgbm90IHY1NChWZWN0b3IzLm5ldygtIDQ5NzEuNzE4MjYxNzE4NzUsIDMzNS45NTgyMjE0MzU1NDY5LCAtIDM3MjAuMDU5NTcwMzEyNSksIDEpIGRvCiAgICAgICAgICAgICAgICB3YWl0KDAuMSk7CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgIHY1MygiUHVyZSBSZWQiLCBWZWN0b3IzLm5ldygtIDU0MTQuOTIwNDEwMTU2MjUsIDMxNC4yNTgyMDkyMjg1MTU2LCAtIDIyMTIuMjAxNjYwMTU2MjUpKTsKICAgICAgICAgICAgd2hpbGUgbm90IHY1NChWZWN0b3IzLm5ldygtIDU0MTQuOTIwNDEwMTU2MjUsIDMxNC4yNTgyMDkyMjg1MTU2LCAtIDIyMTIuMjAxNjYwMTU2MjUpLCAxKSBkbwogICAgICAgICAgICAgICAgd2FpdCgwLjEpOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICB2NTMoIldpbnRlciBTa3kiLCBWZWN0b3IzLm5ldygtIDU0MjAuMjYzMTgzNTkzNzUsIDEwODkuMzU4Mjc2MzY3MTg3NSwgLSAyNjY2LjgxOTMzNTkzNzUpKTsKICAgICAgICAgICAgd2hpbGUgbm90IHY1NChWZWN0b3IzLm5ldygtIDU0MjAuMjYzMTgzNTkzNzUsIDEwODkuMzU4Mjc2MzY3MTg3NSwgLSAyNjY2LjgxOTMzNTkzNzUpLCAxKSBkbwogICAgICAgICAgICAgICAgd2FpdCgwLjEpOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICBfRy5FbmFibGVIYWtpRm9ydHJlc3MgPSBmYWxzZTsKICAgICAgICBlbmQKICAgICAgICB3YWl0KDAuNSk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjU1ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVDb2xsZWN0Q2hlc3QiLCB7CiAgICBUaXRsZSA9ICJBdXRvIEZhcm0gQ2hlc3QiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjQ5Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjM3KQogICAgX0cuQXV0b0xldmVsID0gdjIzNzsKICAgIGlmICh2MjM3ID09IGZhbHNlKSB0aGVuCiAgICAgICAgd2FpdCgpOwogICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgd2FpdCgpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVMZXZlbDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b0xldmVsIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgQ2hlY2tMZXZlbCgpOwogICAgICAgICAgICAgICAgaWYgKG5vdCBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCBOYW1lTW9uKSBvciAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJBYmFuZG9uUXVlc3QiKTsKICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWVRKTsKICAgICAgICAgICAgICAgICAgICBpZiAoKENGcmFtZVEuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDUpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RhcnRRdWVzdCIsIE5hbWVRdWVzdCwgUXVlc3RMdik7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsIE5hbWVNb24pIG9yIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IHRydWUpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDMyLCB2MTQzMyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDMzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTQzMzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE0MzMuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQzMy5OYW1lID09IE1zKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0MzMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzMy5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzMuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzMy5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzMy5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzMy5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNDMzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE0MzMuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b0xldmVsIG9yIG5vdCB2MTQzMy5QYXJlbnQgb3IgKHYxNDMzLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKHYxNDMzLk5hbWUpIG9yIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGZvciB2MTQzNCwgdjE0MzUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uRW5lbXlTcGF3bnM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjE0MzUuTmFtZSwgTmFtZU1vbikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2MTQzNS5Qb3NpdGlvbikuTWFnbml0dWRlID49IDEwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0MzUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjUwID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVNb2JBdXJhIiwgewogICAgVGl0bGUgPSAiQXV0byBGYXJtIE5lYXJlc3QiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjUwOk9uQ2hhbmdlZChmdW5jdGlvbih2MjM4KQogICAgX0cuQXV0b05lYXIgPSB2MjM4OwogICAgaWYgKHYyMzggPT0gZmFsc2UpIHRoZW4KICAgICAgICB3YWl0KCk7CiAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICB3YWl0KCk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZU1vYkF1cmE6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvTmVhciB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGZvciB2ODM4LCB2ODM5IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiAodjgzOTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjgzOTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjgzOS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiB2ODM5Lk5hbWUgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2ODM5OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1MDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjgzOS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4MzkuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4MzkuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODM5Lkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4MzkuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjgzOS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHY4MzkuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2ODM5Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9OZWFyIG9yIG5vdCB2ODM5LlBhcmVudCBvciAodjgzOS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQodjgzOS5OYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NTEgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZUNhc3RsZVJhaWQiLCB7CiAgICBUaXRsZSA9ICJBdXRvIEZhcm0gUGlyYXRlcyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NTE6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyMzkpCiAgICBfRy5DYXN0bGVSYWlkID0gdjIzOTsKZW5kKTsKdjE3LlRvZ2dsZUNhc3RsZVJhaWQ6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5DYXN0bGVSYWlkIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbG9jYWwgdjc2NCA9IENGcmFtZS5uZXcoLSA1NDk2LjE3NDMyLCAzMTMuNzY4OTIxLCAtIDI4NDEuNTMwMjcsIDAuOTI0ODk0NTEyLCA3LjM3MDU4ZS05LCAwLjM4MDIyMzc1MSwgMy41ODgxMDJlLTgsIDEsIC0gMS4wNjY2NTQ0NmUtNywgLSAwLjM4MDIyMzc1MSwgMS4xMjI5NzExZS03LCAwLjkyNDg5NDUxMik7CiAgICAgICAgICAgICAgICBpZiAoKENGcmFtZS5uZXcoLSA1NTM5LjMxMTUyMzQzNzUsIDMxMy44MDA1MzcxMDkzNzUsIC0gMjk3Mi4zNzIzMTQ0NTMxMjUpLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNTAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDMwLCB2MTAzMSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9HLkNhc3RsZVJhaWQgYW5kIHYxMDMxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYxMDMxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCAodjEwMzEuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjEwMzEuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMjAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzMS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzEuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDMxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAodjEwMzEuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTAzMS5QYXJlbnQgb3Igbm90IF9HLkNhc3RsZVJhaWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBUd2Vlbih2NzY0KTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY1MiA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlSGFraUZvcnRyZXNzIiwgewogICAgVGl0bGUgPSAiQWN0aXZhdGUgQ29sb3IgSGFraSAoRm9ydHJlc3MpIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY1MjpPbkNoYW5nZWQoZnVuY3Rpb24odjI0MCkKICAgIF9HLkVuYWJsZUhha2lGb3J0cmVzcyA9IHYyNDA7CmVuZCk7CnYxNy5Ub2dnbGVIYWtpRm9ydHJlc3M6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCBmdW5jdGlvbiB2NTModjI0MSwgdjI0MikKICAgIGxvY2FsIHYyNDMgPSB7CiAgICAgICAgWzFdID0gewogICAgICAgICAgICBTdG9yYWdlTmFtZSA9IHYyNDEsCiAgICAgICAgICAgIFR5cGUgPSAiQXVyYVNraW4iLAogICAgICAgICAgICBDb250ZXh0ID0gIkVxdWlwIgogICAgICAgIH0KICAgIH07CiAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuTW9kdWxlcy5OZXQ6RmluZEZpcnN0Q2hpbGQoIlJGL0ZydWl0Q3VzdG9taXplclJGIik6SW52b2tlU2VydmVyKHVucGFjayh2MjQzKSk7CiAgICBUd2VlbjIodjI0Mik7CmVuZApsb2NhbCBmdW5jdGlvbiB2NTQodjI0NCwgdjI0NSkKICAgIGxvY2FsIHYyNDYgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOwogICAgaWYgKG5vdCB2MjQ2IG9yIG5vdCB2MjQ2OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikpIHRoZW4KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICBlbmQKICAgIGxvY2FsIHYyNDcgPSB2MjQ2Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb247CiAgICByZXR1cm4gKHYyNDcgLSB2MjQ0KS5NYWduaXR1ZGUgPCB2MjQ1IDsKZW5kCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRydWUgZG8KICAgICAgICBpZiBfRy5FbmFibGVIYWtpRm9ydHJlc3MgdGhlbgogICAgICAgICAgICB2NTMoIlNub3cgV2hpdGUiLCBWZWN0b3IzLm5ldygtIDQ5NzEuNzE4MjYxNzE4NzUsIDMzNS45NTgyMjE0MzU1NDY5LCAtIDM3MjAuMDU5NTcwMzEyNSkpOwogICAgICAgICAgICB3aGlsZSBub3QgdjU0KFZlY3RvcjMubmV3KC0gNDk3MS43MTgyNjE3MTg3NSwgMzM1Ljk1ODIyMTQzNTU0NjksIC0gMzcyMC4wNTk1NzAzMTI1KSwgMSkgZG8KICAgICAgICAgICAgICAgIHdhaXQoMC4xKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgdjUzKCJQdXJlIFJlZCIsIFZlY3RvcjMubmV3KC0gNTQxNC45MjA0MTAxNTYyNSwgMzE0LjI1ODIwOTIyODUxNTYsIC0gMjIxMi4yMDE2NjAxNTYyNSkpOwogICAgICAgICAgICB3aGlsZSBub3QgdjU0KFZlY3RvcjMubmV3KC0gNTQxNC45MjA0MTAxNTYyNSwgMzE0LjI1ODIwOTIyODUxNTYsIC0gMjIxMi4yMDE2NjAxNTYyNSksIDEpIGRvCiAgICAgICAgICAgICAgICB3YWl0KDAuMSk7CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgIHY1MygiV2ludGVyIFNreSIsIFZlY3RvcjMubmV3KC0gNTQyMC4yNjMxODM1OTM3NSwgMTA4OS4zNTgyNzYzNjcxODc1LCAtIDI2NjYuODE5MzM1OTM3NSkpOwogICAgICAgICAgICB3aGlsZSBub3QgdjU0KFZlY3RvcjMubmV3KC0gNTQyMC4yNjMxODM1OTM3NSwgMTA4OS4zNTgyNzYzNjcxODc1LCAtIDI2NjYuODE5MzM1OTM3NSksIDEpIGRvCiAgICAgICAgICAgICAgICB3YWl0KDAuMSk7CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgIF9HLkVuYWJsZUhha2lGb3J0cmVzcyA9IGZhbHNlOwogICAgICAgIGVuZAogICAgICAgIHdhaXQoMC41KTsKICAgIGVuZAplbmQpOwpsb2NhbCB2NTUgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZUNvbGxlY3RDaGVzdCIsIHsKICAgIFRpdGxlID0gIkF1dG8gRmFybSBDaGVzdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NTU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNDgpCiAgICBfRy5BdXRvQ29sbGVjdENoZXN0ID0gdjI0ODsKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b0NvbGxlY3RDaGVzdCB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY2NzMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTsKICAgICAgICAgICAgbG9jYWwgdjY3NCA9IHY2NzMuTG9jYWxQbGF5ZXI7CiAgICAgICAgICAgIGxvY2FsIHY2NzUgPSB2Njc0LkNoYXJhY3RlciBvciB2Njc0LkNoYXJhY3RlckFkZGVkOldhaXQoKSA7CiAgICAgICAgICAgIGxvY2FsIHY2NzYgPSB2Njc1OkdldFBpdm90KCkuUG9zaXRpb247CiAgICAgICAgICAgIGxvY2FsIHY2NzcgPSBnYW1lOkdldFNlcnZpY2UoIkNvbGxlY3Rpb25TZXJ2aWNlIik7CiAgICAgICAgICAgIGxvY2FsIHY2NzggPSB2Njc3OkdldFRhZ2dlZCgiX0NoZXN0VGFnZ2VkIik7CiAgICAgICAgICAgIGxvY2FsIHY2NzksIHY2ODAgPSBtYXRoLmh1Z2U7CiAgICAgICAgICAgIGZvciB2NzY1ID0gMSwgIyB2Njc4IGRvCiAgICAgICAgICAgICAgICBsb2NhbCB2NzY2ID0gdjY3OFt2NzY1XTsKICAgICAgICAgICAgICAgIGxvY2FsIHY3NjcgPSAodjc2NjpHZXRQaXZvdCgpLlBvc2l0aW9uIC0gdjY3NikuTWFnbml0dWRlOwogICAgICAgICAgICAgICAgaWYgKG5vdCB2NzY2OkdldEF0dHJpYnV0ZSgiSXNEaXNhYmxlZCIpIGFuZCAodjc2NyA8IHY2NzkpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjY3OSwgdjY4MCA9IHY3NjcsIHY3NjY7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGlmIHY2ODAgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjg0MCA9IHY2ODA6R2V0UGl2b3QoKS5Qb3NpdGlvbjsKICAgICAgICAgICAgICAgIGxvY2FsIHY4NDEgPSBDRnJhbWUubmV3KHY4NDApOwogICAgICAgICAgICAgICAgVHdlZW4yKHY4NDEpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NTYgPSB2MTYuTWFpbjpBZGRTZWN0aW9uKCJNYXN0ZXJ5Iik7CmxvY2FsIHY1NyA9IHYxNi5NYWluOkFkZERyb3Bkb3duKCJEcm9wZG93bk1hc3RlcnkiLCB7CiAgICBUaXRsZSA9ICJBdXRvIEZhcm0gTWFzdGVyeSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgVmFsdWVzID0gewogICAgICAgICJOZWFyIE1vYnMiCiAgICB9LAogICAgTXVsdGkgPSBmYWxzZSwKICAgIERlZmF1bHQgPSAxCn0pOwp2NTc6U2V0VmFsdWUoVHlwZU1hc3RlcnkpOwp2NTc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNDkpCiAgICBUeXBlTWFzdGVyeSA9IHYyNDk7CmVuZCk7CmxvY2FsIHY1OCA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlTWFzdGVyeUZydWl0IiwgewogICAgVGl0bGUgPSAiQXV0byBNYXN0ZXJ5IEZydWl0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY1ODpPbkNoYW5nZWQoZnVuY3Rpb24odjI1MCkKICAgIEF1dG9GYXJtTWFzRGV2aWxGcnVpdCA9IHYyNTA7CmVuZCk7CnYxNy5Ub2dnbGVNYXN0ZXJ5RnJ1aXQ6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2NTkgPSB2MTYuTWFpbjpBZGRTbGlkZXIoIlNsaWRlckhlYWx0IiwgewogICAgVGl0bGUgPSAiTW9iIEhQIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gMjAsCiAgICBNaW4gPSAwLAogICAgTWF4ID0gMTAwLAogICAgUm91bmRpbmcgPSAxLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2MjUxKQogICAgICAgIEtpbGxQZXJjZW50ID0gdjI1MTsKICAgIGVuZAp9KTsKdjU5Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjUyKQogICAgS2lsbFBlcmNlbnQgPSB2MjUyOwplbmQpOwp2NTk6U2V0VmFsdWUoMjApOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgIGlmIF9HLlVzZVNraWxsIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgX0cuVXNlU2tpbGwgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTAzMiwgdjEwMzMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjEwMzMuTmFtZSA9PSBNb25GYXJtKSBhbmQgdjEwMzM6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMDMzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTAzMy5IdW1hbm9pZC5IZWFsdGggPD0gKCh2MTAzMy5IdW1hbm9pZC5NYXhIZWFsdGggKiBLaWxsUGVyY2VudCkgLyAxMDApKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OndhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkRhdGEuRGV2aWxGcnVpdC5WYWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwMzMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvc2l0aW9uU2tpbGxNYXN0ZXJ5RGV2aWxGcnVpdCA9IHYxMDMzLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb247CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EYXRhLkRldmlsRnJ1aXQuVmFsdWUpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EYXRhLkRldmlsRnJ1aXQuVmFsdWUpLk1vdXNlUG9zLlZhbHVlID0gUG9zaXRpb25Ta2lsbE1hc3RlcnlEZXZpbEZydWl0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTYwNiA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGF0YS5EZXZpbEZydWl0LlZhbHVlKS5MZXZlbC5WYWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFNraWxsWiBhbmQgKHYxNjA2ID49IDEpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIloiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJaIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFNraWxsWCBhbmQgKHYxNjA2ID49IDIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIlgiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJYIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFNraWxsQyBhbmQgKHYxNjA2ID49IDMpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkMiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJDIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFNraWxsViBhbmQgKHYxNjA2ID49IDQpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIlYiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOnNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJWIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFNraWxsRiBhbmQgKHYxNjA2ID49IDUpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkYiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJGIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBBdXRvRmFybU1hc0RldmlsRnJ1aXQgb3Igbm90IF9HLlVzZVNraWxsIG9yICh2MTAzMy5IdW1hbm9pZC5IZWFsdGggPT0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoMC4xKSBkbwogICAgICAgIGlmIChBdXRvRmFybU1hc0RldmlsRnJ1aXQgYW5kIChUeXBlTWFzdGVyeSA9PSAiTmVhciBNb2JzIikpIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgZm9yIHY4NDIsIHY4NDMgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2ODQzLk5hbWUgYW5kIHY4NDM6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY4NDM6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHY4NDM6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKS5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDUwMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY4NDMuSHVtYW5vaWQuSGVhbHRoIDw9ICgodjg0My5IdW1hbm9pZC5NYXhIZWFsdGggKiBLaWxsUGVyY2VudCkgLyAxMDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9HLlVzZVNraWxsID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9HLlVzZVNraWxsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY4NDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODQzLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODQzLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg0My5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODQzLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NDMuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2ODQzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjg0My5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgQXV0b0Zhcm1NYXNEZXZpbEZydWl0IG9yIChub3QgTWFzdGVyeVR5cGUgPT0gIk5lYXIgTW9icyIpIG9yIG5vdCB2ODQzLlBhcmVudCBvciAodjg0My5IdW1hbm9pZC5IZWFsdGggPT0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfRy5Vc2VTa2lsbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmlmIFNlYTMgdGhlbgogICAgbG9jYWwgdjQ4NCA9IHYxNi5NYWluOkFkZFNlY3Rpb24oIljGsMahbmciKTsKICAgIGxvY2FsIHY0ODUgPSB2MTYuTWFpbjpBZGRQYXJhZ3JhcGgoewogICAgICAgIFRpdGxlID0gIkJvbmUgU3RhdHVzIiwKICAgICAgICBDb250ZW50ID0gIiIKICAgIH0pOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgICAgICBsb2NhbCB2NzY4ID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQm9uZXMiLCAiQ2hlY2siKTsKICAgICAgICAgICAgICAgIHY0ODU6U2V0RGVzYygiWW91IGhhdmU6ICIgLi4gdG9zdHJpbmcodjc2OCkgLi4gIiBCb25lcyIpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kKTsKICAgIGxvY2FsIHY0ODYgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZUJvbmUiLCB7CiAgICAgICAgVGl0bGUgPSAiQXV0byBGYXJtIEJvbmUiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY0ODY6T25DaGFuZ2VkKGZ1bmN0aW9uKHY1NzEpCiAgICAgICAgX0cuQXV0b0JvbmUgPSB2NTcxOwogICAgICAgIGlmICh2NTcxID09IGZhbHNlKSB0aGVuCiAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgd2FpdCgpOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVCb25lOlNldFZhbHVlKGZhbHNlKTsKICAgIGxvY2FsIHY0ODcgPSBDRnJhbWUubmV3KC0gOTUxNS43NSwgMTc0Ljg1MjE3Mjg1MTU2MjUsIDYwNzkuNDA2MjUpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvQm9uZSB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjg5NCA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQ7CiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHN0cmluZy5maW5kKHY4OTQsICJEZW1vbmljIFNvdWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFiYW5kb25RdWVzdCIpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IGZhbHNlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY0ODcpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHY0ODcuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDMpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0YXJ0UXVlc3QiLCAiSGF1bnRlZFF1ZXN0MiIsIDEpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gdHJ1ZSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJSZWJvcm4gU2tlbGV0b24iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkxpdmluZyBab21iaWUiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkRlbW9uaWMgU291bCIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiUG9zZXNzZWQgTXVtbXkiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNjYxLCB2MTY2MiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE2NjI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgdjE2NjI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kICh2MTY2Mi5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxNjYyLk5hbWUgPT0gIlJlYm9ybiBTa2VsZXRvbiIpIG9yICh2MTY2Mi5OYW1lID09ICJMaXZpbmcgWm9tYmllIikgb3IgKHYxNjYyLk5hbWUgPT0gIkRlbW9uaWMgU291bCIpIG9yICh2MTY2Mi5OYW1lID09ICJQb3Nlc3NlZCBNdW1teSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiRGVtb25pYyBTb3VsIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNjYyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjIuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjYyLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjIuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjIuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjIuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTY2Mi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNjYyLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9Cb25lIG9yICh2MTY2Mi5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxNjYyLlBhcmVudCBvciAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJBYmFuZG9uUXVlc3QiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NDg4ID0gQ0ZyYW1lLm5ldygtIDk1MTUuNzUsIDE3NC44NTIxNzI4NTE1NjI1LCA2MDc5LjQwNjI1KTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b0JvbmVOb1F1ZXN0IHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBUd2Vlbih2NDg4KTsKICAgICAgICAgICAgICAgICAgICBpZiAoKHY0ODguUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDMpIHRoZW4KICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJSZWJvcm4gU2tlbGV0b24iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkxpdmluZyBab21iaWUiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkRlbW9uaWMgU291bCIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiUG9zZXNzZWQgTXVtbXkiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0MzYsIHYxNDM3IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDM3OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYxNDM3OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCAodjE0MzcuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxNDM3Lk5hbWUgPT0gIlJlYm9ybiBTa2VsZXRvbiIpIG9yICh2MTQzNy5OYW1lID09ICJMaXZpbmcgWm9tYmllIikgb3IgKHYxNDM3Lk5hbWUgPT0gIkRlbW9uaWMgU291bCIpIG9yICh2MTQzNy5OYW1lID09ICJQb3Nlc3NlZCBNdW1teSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDM3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDM3Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzcuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzcuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDM3Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzNy5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTQzNy5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTQzNy5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b0JvbmVOb1F1ZXN0IG9yICh2MTQzNy5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxNDM3LlBhcmVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjQ4OSA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlUmFuZG9tQm9uZSIsIHsKICAgICAgICBUaXRsZSA9ICJSYW5kb20gQm9uZXMiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY0ODk6T25DaGFuZ2VkKGZ1bmN0aW9uKHY1NzQpCiAgICAgICAgX0cuQXV0b1JhbmRvbUJvbmUgPSB2NTc0OwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVSYW5kb21Cb25lOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b1JhbmRvbUJvbmUgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjg0NCA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiQm9uZXMiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJCdXkiLAogICAgICAgICAgICAgICAgICAgIFszXSA9IDEsCiAgICAgICAgICAgICAgICAgICAgWzRdID0gMQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4NDQpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKaWYgU2VhMyB0aGVuCiAgICBsb2NhbCB2NDkwID0gdjE2Lk1haW46QWRkU2VjdGlvbigiQ2FrZSBQcmluY2UiKTsKICAgIGxvY2FsIHY0OTEgPSB2MTYuTWFpbjpBZGRQYXJhZ3JhcGgoewogICAgICAgIFRpdGxlID0gIlN0YXR1cyIsCiAgICAgICAgQ29udGVudCA9ICIiCiAgICB9KTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgKHN0cmluZy5sZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2FrZVByaW5jZVNwYXduZXIiKSkgPT0gODgpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NDkxOlNldERlc2MoIkxlZnQ6ICIgLi4gc3RyaW5nLnN1YihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDYWtlUHJpbmNlU3Bhd25lciIpLCAzOSwgNDEpIC4uICIiKTsKICAgICAgICAgICAgICAgIGVsc2VpZiAoc3RyaW5nLmxlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDYWtlUHJpbmNlU3Bhd25lciIpKSA9PSA4NykgdGhlbgogICAgICAgICAgICAgICAgICAgIHY0OTE6U2V0RGVzYygiQ8OybjogIiAuLiBzdHJpbmcuc3ViKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNha2VQcmluY2VTcGF3bmVyIiksIDM5LCA0MCkgLi4gIiIpOwogICAgICAgICAgICAgICAgZWxzZWlmIChzdHJpbmcubGVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNha2VQcmluY2VTcGF3bmVyIikpID09IDg2KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjQ5MTpTZXREZXNjKCJDw7JuOiAiIC4uIHN0cmluZy5zdWIoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2FrZVByaW5jZVNwYXduZXIiKSwgMzksIDM5KSAuLiAiICIpOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHY0OTE6U2V0RGVzYygiVMawIEzhu4duaCBCw6FuaCA6IOKche+4jyIpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjQ5MiA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlQ2FrZSIsIHsKICAgICAgICBUaXRsZSA9ICJBdXRvIENha2UgUHJpbmNlIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICBsb2NhbCB2NDkzID0gdHJ1ZTsKICAgIHY0OTI6T25DaGFuZ2VkKGZ1bmN0aW9uKHY1NzUpCiAgICAgICAgX0cuQ2FrZVByaW5jZSA9IHY1NzU7CiAgICAgICAgaWYgdjU3NSB0aGVuCiAgICAgICAgICAgIGlmIHY0OTMgdGhlbgogICAgICAgICAgICAgICAgdjQ5MyA9IGZhbHNlOwogICAgICAgICAgICAgICAgbG9jYWwgdjg5NSA9IENGcmFtZS5uZXcoLSAyMDAzLjkzMjg2MTMyODEyNSwgMzgwLjQ4MjQ1MjM5MjU3ODEsIC0gMTI1NjEuMDE4NTU0Njg3NSk7CiAgICAgICAgICAgICAgICBUd2Vlbih2ODk1KTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZWxzZQogICAgICAgICAgICB2NDkzID0gdHJ1ZTsKICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUNha2U6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5DYWtlUHJpbmNlIHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNha2UgUHJpbmNlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0MzgsIHYxNDM5IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDM5Lk5hbWUgPT0gIkNha2UgUHJpbmNlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQzOTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE0Mzk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxNDM5Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzkuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQzOS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0MzkuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQzOS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5DYWtlUHJpbmNlIG9yIG5vdCB2MTQzOS5QYXJlbnQgb3IgKHYxNDM5Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkNha2UgUHJpbmNlIFtMdi4gMjMwMF0gW1JhaWQgQm9zc10iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBQcmluY2UgW0x2LiAyMzAwXSBbUmFpZCBCb3NzXSIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuQ2FrZUxvYWYuQmlnTWlycm9yLk90aGVyLlRyYW5zcGFyZW5jeSA9PSAxKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNvb2tpZSBDcmFmdGVyIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYWtlIEd1YXJkIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJCYWtpbmcgU3RhZmYiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkhlYWQgQmFrZXIiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNzU0LCB2MTc1NSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxNzU1Lk5hbWUgPT0gIkNvb2tpZSBDcmFmdGVyIikgb3IgKHYxNzU1Lk5hbWUgPT0gIkNha2UgR3VhcmQiKSBvciAodjE3NTUuTmFtZSA9PSAiQmFraW5nIFN0YWZmIikgb3IgKHYxNzU1Lk5hbWUgPT0gIkhlYWQgQmFrZXIiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE3NTU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNzU1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTc1NS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzU1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzU1Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE3NTUuSGVhZC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE3NTUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNzU1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTc1NS5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNzU1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQ2FrZVByaW5jZSBvciBub3QgdjE3NTUuUGFyZW50IG9yICh2MTc1NS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3IgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkNha2VMb2FmLkJpZ01pcnJvci5PdGhlci5UcmFuc3BhcmVuY3kgPT0gMCkgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJDYWtlIFByaW5jZSBbTHYuIDIzMDBdIFtSYWlkIEJvc3NdIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYWtlIFByaW5jZSBbTHYuIDIzMDBdIFtSYWlkIEJvc3NdIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjQ5NCA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlRG91Z2hLaW5nIiwgewogICAgICAgIFRpdGxlID0gIkF1dG8gRG91Z2ggS2luZyIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjQ5NDpPbkNoYW5nZWQoZnVuY3Rpb24odjU3NikKICAgICAgICBfRy5Eb3VnaEtpbmcgPSB2NTc2OwogICAgICAgIGlmICh2NTc2ID09IGZhbHNlKSB0aGVuCiAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lKTsKICAgICAgICAgICAgd2FpdCgpOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVEb3VnaEtpbmc6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5Eb3VnaEtpbmcgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRG91Z2ggS2luZyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDQwLCB2MTQ0MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ0MS5OYW1lID09ICJEb3VnaCBLaW5nIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ0MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE0NDE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxNDQxLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDEuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0MS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDEuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTQ0MS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5Eb3VnaEtpbmcgb3Igbm90IHYxNDQxLlBhcmVudCBvciAodjE0NDEuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NDk1ID0gdjE2Lk1haW46QWRkVG9nZ2xlKCJUb2dnbGVTcGF3bkNha2UiLCB7CiAgICAgICAgVGl0bGUgPSAiU3Bhd20gQ2FrZSBQcmluY2UiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IHRydWUKICAgIH0pOwogICAgdjQ5NTpPbkNoYW5nZWQoZnVuY3Rpb24odjU3NykKICAgICAgICBfRy5TcGF3bkNha2VQcmluY2UgPSB2NTc3OwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVTcGF3bkNha2U6U2V0VmFsdWUodHJ1ZSk7CmVuZApzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5TcGF3bkNha2VQcmluY2UgdGhlbgogICAgICAgICAgICBsb2NhbCB2NjgxID0gewogICAgICAgICAgICAgICAgWzFdID0gIkNha2VQcmluY2VTcGF3bmVyIiwKICAgICAgICAgICAgICAgIFsyXSA9IHRydWUKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjY4MSkpOwogICAgICAgICAgICBsb2NhbCB2NjgxID0gewogICAgICAgICAgICAgICAgWzFdID0gIkNha2VQcmluY2VTcGF3bmVyIgogICAgICAgICAgICB9OwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NjgxKSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKaWYgU2VhMiB0aGVuCiAgICBsb2NhbCB2NDk2ID0gdjE2Lk1haW46QWRkU2VjdGlvbigiRWN0b3BsYXNtIEZhcm0iKTsKICAgIGxvY2FsIHY0OTcgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZVZhdENoYXRLaURpIiwgewogICAgICAgIFRpdGxlID0gIkF1dG8gRmFybSBFY3RvcGxhc20iLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY0OTc6T25DaGFuZ2VkKGZ1bmN0aW9uKHY1NzgpCiAgICAgICAgX0cuRWN0b3BsYXNtID0gdjU3ODsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlVmF0Q2hhdEtpRGk6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBfRy5FY3RvcGxhc20gdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNoaXAgRGVja2hhbmQiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNoaXAgRW5naW5lZXIiKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNoaXAgU3Rld2FyZCIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiU2hpcCBPZmZpY2VyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDQyLCB2MTQ0MyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE0NDMuTmFtZSA9PSAiU2hpcCBTdGV3YXJkIikgb3IgKHYxNDQzLk5hbWUgPT0gIlNoaXAgRW5naW5lZXIiKSBvciAodjE0NDMuTmFtZSA9PSAiU2hpcCBEZWNraGFuZCIpIG9yICgodjE0NDMuTmFtZSA9PSAiU2hpcCBPZmZpY2VyIikgYW5kIHYxNDQzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ0My5IdW1hbm9pZC5IZWFsdGggPiAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDQzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQzLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDMuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDMuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQzLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0My5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTQ0My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTQ0My5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuRWN0b3BsYXNtID09IGZhbHNlKSBvciBub3QgdjE0NDMuUGFyZW50IG9yICh2MTQ0My5IdW1hbm9pZC5IZWFsdGggPT0gMCkgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCh2MTQ0My5OYW1lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzMzQgPSAoVmVjdG9yMy5uZXcoOTA0LjQwNzIyNjU2MjUsIDE4MS4wNTc2NzgyMjI2NiwgMzMzNDEuMzg2NzE4NzUpIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTMzNCA+IDIwMDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldyg5MjMuMjEyNTI0NDE0MDYsIDEyNi45NzYwMDU1NTQyLCAzMjg1Mi44MzIwMzEyNSkpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg5MDQuNDA3MjI2NTYyNSwgMTgxLjA1NzY3ODIyMjY2LCAzMzM0MS4zODY3MTg3NSkpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKbG9jYWwgdjYwID0gdjE2Lk1haW46QWRkU2VjdGlvbigiQm9zcyIpOwppZiBTZWExIHRoZW4KICAgIHRhYmxlQm9zcyA9IHsKICAgICAgICAiVGhlIEdvcmlsbGEgS2luZyIsCiAgICAgICAgIkJvYmJ5IiwKICAgICAgICAiWWV0aSIsCiAgICAgICAgIk1vYiBMZWFkZXIiLAogICAgICAgICJWaWNlIEFkbWlyYWwiLAogICAgICAgICJXYXJkZW4iLAogICAgICAgICJDaGllZiBXYXJkZW4iLAogICAgICAgICJTd2FuIiwKICAgICAgICAiTWFnbWEgQWRtaXJhbCIsCiAgICAgICAgIkZpc2htYW4gTG9yZCIsCiAgICAgICAgIld5c3BlciIsCiAgICAgICAgIlRodW5kZXIgR29kIiwKICAgICAgICAiQ3lib3JnIiwKICAgICAgICAiU2FiZXIgRXhwZXJ0IgogICAgfTsKZWxzZWlmIFNlYTIgdGhlbgogICAgdGFibGVCb3NzID0gewogICAgICAgICJEaWFtb25kIiwKICAgICAgICAiSmVyZW15IiwKICAgICAgICAiRmFqaXRhIiwKICAgICAgICAiRG9uIFN3YW4iLAogICAgICAgICJTbW9rZSBBZG1pcmFsIiwKICAgICAgICAiQ3Vyc2VkIENhcHRhaW4iLAogICAgICAgICJEYXJrYmVhcmQiLAogICAgICAgICJPcmRlciIsCiAgICAgICAgIkF3YWtlbmVkIEljZSBBZG1pcmFsIiwKICAgICAgICAiVGlkZSBLZWVwZXIiCiAgICB9OwplbHNlaWYgU2VhMyB0aGVuCiAgICB0YWJsZUJvc3MgPSB7CiAgICAgICAgIlN0b25lIiwKICAgICAgICAiSHlkcmEgTGVhZGVyIiwKICAgICAgICAiS2lsbyBBZG1pcmFsIiwKICAgICAgICAiQ2FwdGFpbiBFbGVwaGFudCIsCiAgICAgICAgIkJlYXV0aWZ1bCBQaXJhdGUiLAogICAgICAgICJyaXBfaW5kcmEgVHJ1ZSBGb3JtIiwKICAgICAgICAiTG9uZ21hIiwKICAgICAgICAiU291bCBSZWFwZXIiLAogICAgICAgICJDYWtlIFF1ZWVuIgogICAgfTsKZW5kCmxvY2FsIHY2MSA9IHYxNi5NYWluOkFkZERyb3Bkb3duKCJEcm9wZG93bkJvc3MiLCB7CiAgICBUaXRsZSA9ICJTZWxlY3QgQm9zcyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgVmFsdWVzID0gdGFibGVCb3NzLAogICAgTXVsdGkgPSBmYWxzZSwKICAgIERlZmF1bHQgPSAxCn0pOwp2NjE6U2V0VmFsdWUoX0cuU2VsZWN0Qm9zcyk7CnY2MTpPbkNoYW5nZWQoZnVuY3Rpb24odjI1MykKICAgIF9HLlNlbGVjdEJvc3MgPSB2MjUzOwplbmQpOwpsb2NhbCB2NjIgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9GYXJtQm9zcyIsIHsKICAgIFRpdGxlID0gIkF1dG8gRmFybSBCb3NzIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY2MjpPbkNoYW5nZWQoZnVuY3Rpb24odjI1NCkKICAgIF9HLkF1dG9Cb3NzID0gdjI1NDsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9GYXJtQm9zczpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9Cb3NzIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKF9HLlNlbGVjdEJvc3MpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwMzQsIHYxMDM1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwMzUuTmFtZSA9PSBfRy5TZWxlY3RCb3NzKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwMzU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMDM1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTAzNS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzNS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzUuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwMzUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDM1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIsICJTaW11bGF0aW9uUmFkaXVzIiwgbWF0aC5odWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b0Jvc3Mgb3Igbm90IHYxMDM1LlBhcmVudCBvciAodjEwMzUuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKF9HLlNlbGVjdEJvc3MpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoX0cuU2VsZWN0Qm9zcykuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDUsIDEwLCA3KSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NjMgPSB2MTYuTWFpbjpBZGRTZWN0aW9uKCJNYXRlcmlhbCIpOwppZiBTZWExIHRoZW4KICAgIE1hdGVyaWFsTGlzdCA9IHsKICAgICAgICAiU2NyYXAgTWV0YWwiLAogICAgICAgICJMZWF0aGVyIiwKICAgICAgICAiQW5nZWwgV2luZ3MiLAogICAgICAgICJNYWdtYSBPcmUiLAogICAgICAgICJGaXNoIFRhaWwiCiAgICB9OwplbHNlaWYgU2VhMiB0aGVuCiAgICBNYXRlcmlhbExpc3QgPSB7CiAgICAgICAgIlNjcmFwIE1ldGFsIiwKICAgICAgICAiTGVhdGhlciIsCiAgICAgICAgIlJhZGlvYWN0aXZlIE1hdGVyaWFsIiwKICAgICAgICAiTXlzdGljIERyb3BsZXQiLAogICAgICAgICJNYWdtYSBPcmUiLAogICAgICAgICJWYW1waXJlIEZhbmciCiAgICB9OwplbHNlaWYgU2VhMyB0aGVuCiAgICBNYXRlcmlhbExpc3QgPSB7CiAgICAgICAgIlNjcmFwIE1ldGFsIiwKICAgICAgICAiTGVhdGhlciIsCiAgICAgICAgIkRlbW9uaWMgV2lzcCIsCiAgICAgICAgIkNvbmp1cmVkIENvY29hIiwKICAgICAgICAiRHJhZ29uIFNjYWxlIiwKICAgICAgICAiR3VucG93ZGVyIiwKICAgICAgICAiRmlzaCBUYWlsIiwKICAgICAgICAiTWluaSBUdXNrIiwKICAgICAgICAiSHlkcmEgRW5mb3JjZXIiLAogICAgICAgICJWZW5vbW91cyBBc3NhaWxhbnQiCiAgICB9OwplbmQKbG9jYWwgdjY0ID0gdjE2Lk1haW46QWRkRHJvcGRvd24oIkRyb3Bkb3duTWF0ZXJpYWwiLCB7CiAgICBUaXRsZSA9ICJTZWxlY3QgTWF0ZXJpYWwiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIFZhbHVlcyA9IE1hdGVyaWFsTGlzdCwKICAgIE11bHRpID0gZmFsc2UsCiAgICBEZWZhdWx0ID0gMQp9KTsKdjY0OlNldFZhbHVlKFNlbGVjdE1hdGVyaWFsKTsKdjY0Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjU1KQogICAgU2VsZWN0TWF0ZXJpYWwgPSB2MjU1OwplbmQpOwpsb2NhbCB2NjUgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZU1hdGVyaWFsIiwgewogICAgVGl0bGUgPSAiQXV0byBGYXJtIE1hdGVyaWFsIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY2NTpPbkNoYW5nZWQoZnVuY3Rpb24odjI1NikKICAgIF9HLkF1dG9NYXRlcmlhbCA9IHYyNTY7CiAgICBpZiAodjI1NiA9PSBmYWxzZSkgdGhlbgogICAgICAgIHdhaXQoKTsKICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgIHdhaXQoKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlTWF0ZXJpYWw6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9NYXRlcmlhbCB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIE1hdGVyaWFsTW9uKFNlbGVjdE1hdGVyaWFsKTsKICAgICAgICAgICAgICAgIFR3ZWVuKE1Qb3MpOwogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKE1Nb24pIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwMzYsIHYxMDM3IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDM3OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTAzNzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjEwMzcuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTAzNy5OYW1lID09IE1Nb24pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTAzNy5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDM3Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTAzNy5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDM3Lkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDM3Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDM3Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjEwMzcuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTAzNy5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvTWF0ZXJpYWwgb3Igbm90IHYxMDM3LlBhcmVudCBvciAodjEwMzcuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBmb3IgdjEwMzgsIHYxMDM5IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbJ19Xb3JsZE9yaWdpbiddLkVuZW15U3Bhd25zOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHYxMDM5Lk5hbWUsIE1vbikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2MTAzOS5Qb3NpdGlvbikuTWFnbml0dWRlID49IDEwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwMzkuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKaWYgU2VhMyB0aGVuCiAgICBsb2NhbCB2NDk4ID0gdjE2LlNlYTpBZGRTZWN0aW9uKCJLaXRzdW5lIElzbGFuZCBTdGF0dXMiKTsKICAgIGxvY2FsIHY0OTkgPSB2MTYuU2VhOkFkZFBhcmFncmFwaCh7CiAgICAgICAgVGl0bGUgPSAiIiwKICAgICAgICBDb250ZW50ID0gIiIKICAgIH0pOwogICAgZnVuY3Rpb24gVXBkYXRlS2l0c3VuZSgpCiAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIktpdHN1bmVJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIHY0OTk6U2V0RGVzYygiS2l0c3VuZSBJc2xhbmQgOiDinIXvuI8iKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIHY0OTk6U2V0RGVzYygiS2l0c3VuZSBJc2xhbmQgOiDinYzvuI8iKTsKICAgICAgICBlbmQKICAgIGVuZAogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgICAgICBVcGRhdGVLaXRzdW5lKCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQpOwogICAgbG9jYWwgdjUwMCA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVFc3BLaXRzdW5lIiwgewogICAgICAgIFRpdGxlID0gIkVzcCBLaXRzdW5lIGlzbGFuZCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUwMDpPbkNoYW5nZWQoZnVuY3Rpb24odjU3OSkKICAgICAgICBLaXRzdW5lSXNsYW5kRXNwID0gdjU3OTsKICAgICAgICB3aGlsZSBLaXRzdW5lSXNsYW5kRXNwIGRvCiAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgVXBkYXRlSXNsYW5kS2lzdW5lRVNQKCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUVzcEtpdHN1bmU6U2V0VmFsdWUoZmFsc2UpOwogICAgZnVuY3Rpb24gVXBkYXRlSXNsYW5kS2lzdW5lRVNQKCkKICAgICAgICBmb3IgdjY4MiwgdjgzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbJ19Xb3JsZE9yaWdpbiddLkxvY2F0aW9uczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBLaXRzdW5lSXNsYW5kRXNwIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAodjY4My5OYW1lID09ICJLaXRzdW5lIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY2ODM6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTUxOCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjY4Myk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUxOC5OYW1lID0gIk5hbWVFc3AiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MTguRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MTguU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTE4LkFkb3JuZWUgPSB2NjgzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MTguQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjE1MjQgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxNTE4KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTI0LkZvbnQgPSAiQ29kZSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUyNC5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MjQuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1MjQuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTI0LlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUyNC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTI0LlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTUyNC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoODAsIDI0NSwgMjQ1KTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjY4M1snTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gdjY4My5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY2ODMuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgTSIgOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiB2NjgzOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgICAgIHY2ODM6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKTpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAogICAgbG9jYWwgdjUwMSA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVUUEtpdHN1bmUiLCB7CiAgICAgICAgVGl0bGUgPSAiRmx5IHRvIEtpdHN1bmUgSXNsYW5kIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTAxOk9uQ2hhbmdlZChmdW5jdGlvbih2NTgwKQogICAgICAgIF9HLlR3ZWVuVG9LaXRzdW5lID0gdjU4MDsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlVFBLaXRzdW5lOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2NTgxOwogICAgICAgIHdoaWxlIG5vdCB2NTgxIGRvCiAgICAgICAgICAgIHY1ODEgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiS2l0c3VuZUlzbGFuZCIpOwogICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgZW5kCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLlR3ZWVuVG9LaXRzdW5lIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4NDUgPSB2NTgxOkZpbmRGaXJzdENoaWxkKCJTaHJpbmVBY3RpdmUiKTsKICAgICAgICAgICAgICAgIGlmIHY4NDUgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTMzNSwgdjEzMzYgaW4gcGFpcnModjg0NTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEzMzY6SXNBKCJCYXNlUGFydCIpIGFuZCB2MTMzNi5OYW1lOmZpbmQoIk5lb25TaHJpbmVQYXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMzM2LkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MDIgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlQ29sbGVjdEF6dXJlIiwgewogICAgICAgIFRpdGxlID0gIkF1dG8gQ29sbGVjdCBBenVyZSBFbWJlciIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUwMjpPbkNoYW5nZWQoZnVuY3Rpb24odjU4MikKICAgICAgICBfRy5Db2xsZWN0QXp1cmUgPSB2NTgyOwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVDb2xsZWN0QXp1cmU6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5Db2xsZWN0QXp1cmUgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIik6RmluZEZpcnN0Q2hpbGQoIkF0dGFjaGVkQXp1cmVFbWJlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpXYWl0Rm9yQ2hpbGQoIkVtYmVyVGVtcGxhdGUiKTpGaW5kRmlyc3RDaGlsZCgiUGFydCIpLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZAp2MTYuU2VhOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJBdXRvIFRyYWRlIEF6dXJlIEVtYmVyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6V2FpdEZvckNoaWxkKCJNb2R1bGVzIik6V2FpdEZvckNoaWxkKCJOZXQiKTpXYWl0Rm9yQ2hpbGQoIlJGL0tpdHN1bmVTdGF0dWVQcmF5Iik6SW52b2tlU2VydmVyKCk7CiAgICBlbmQKfSk7CmlmIFNlYTMgdGhlbgogICAgbG9jYWwgdjUwMyA9IHYxNi5TZWE6QWRkU2VjdGlvbigiU2VhIik7CiAgICBsb2NhbCB2NTA0ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik7CiAgICBsb2NhbCB2NTA1ID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIik7CiAgICBsb2NhbCB2NTA2ID0gZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik7CiAgICBsb2NhbCB2NTA3ID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTsKICAgIGxvY2FsIHY1MDggPSAzNTA7CiAgICBsb2NhbCB2NTA5ID0gdjE2LlNlYTpBZGRTbGlkZXIoIlNsaWRlclNwZWVkQm9hdCIsIHsKICAgICAgICBUaXRsZSA9ICJCb2F0IFNwZWVkIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSB2NTA4LAogICAgICAgIE1pbiA9IDAsCiAgICAgICAgTWF4ID0gMzUwLAogICAgICAgIFJvdW5kaW5nID0gMSwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHY1ODMpCiAgICAgICAgICAgIHY1MDggPSB2NTgzOwogICAgICAgIGVuZAogICAgfSk7CiAgICB2NTA5OlNldFZhbHVlKHY1MDgpOwogICAgbG9jYWwgdjUxMCA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJBdXRvRmluZFByZWhpc3RvcmljIiwgewogICAgICAgIFRpdGxlID0gIkF1dG8gRmluZCBQcmVoaXN0b3JpYyBJc2xhbmQiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHYxNy5BdXRvRmluZFByZWhpc3RvcmljOlNldFZhbHVlKGZhbHNlKTsKICAgIHY1MTA6T25DaGFuZ2VkKGZ1bmN0aW9uKHY1ODQpCiAgICAgICAgX0cuQXV0b0ZpbmRQcmVoaXN0b3JpYyA9IHY1ODQ7CiAgICBlbmQpOwogICAgbG9jYWwgdjUxMSA9IHt9OwogICAgbG9jYWwgdjUxMiA9IGZhbHNlOwogICAgbG9jYWwgdjUxMyA9IGZhbHNlOwogICAgdjUwNS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGlmIG5vdCBfRy5BdXRvRmluZFByZWhpc3RvcmljIHRoZW4KICAgICAgICAgICAgdjUxMyA9IGZhbHNlOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjU4NSA9IHY1MDQuTG9jYWxQbGF5ZXI7CiAgICAgICAgbG9jYWwgdjU4NiA9IHY1ODUuQ2hhcmFjdGVyOwogICAgICAgIGlmIChub3QgdjU4NiBvciBub3QgdjU4NjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSkgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgZnVuY3Rpb24gdjU4NygpCiAgICAgICAgICAgIGlmIHY1MTIgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdjUxMiA9IHRydWU7CiAgICAgICAgICAgIGZvciB2NzY5LCB2NzcwIGluIHBhaXJzKHY1MTEpIGRvCiAgICAgICAgICAgICAgICBpZiAodjc3MCBhbmQgdjc3MC5QYXJlbnQgYW5kICh2NzcwLk5hbWUgPT0gIlZlaGljbGVTZWF0IikgYW5kIG5vdCB2NzcwLk9jY3VwYW50KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4yKHY3NzAuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdjUxMiA9IGZhbHNlOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY1ODggPSB2NTg2Lkh1bWFub2lkOwogICAgICAgIGxvY2FsIHY1ODkgPSBmYWxzZTsKICAgICAgICBsb2NhbCB2NTkwID0gbmlsOwogICAgICAgIGZvciB2Njg0LCB2Njg1IGluIHBhaXJzKHY1MDcuQm9hdHM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgbG9jYWwgdjY4NiA9IHY2ODU6RmluZEZpcnN0Q2hpbGQoIlZlaGljbGVTZWF0Iik7CiAgICAgICAgICAgIGlmICh2Njg2IGFuZCAodjY4Ni5PY2N1cGFudCA9PSB2NTg4KSkgdGhlbgogICAgICAgICAgICAgICAgdjU4OSA9IHRydWU7CiAgICAgICAgICAgICAgICB2NTkwID0gdjY4NjsKICAgICAgICAgICAgICAgIHY1MTFbdjY4NS5OYW1lXSA9IHY2ODY7CiAgICAgICAgICAgIGVsc2VpZiAodjY4NiBhbmQgKHY2ODYuT2NjdXBhbnQgPT0gbmlsKSkgdGhlbgogICAgICAgICAgICAgICAgdjU4NygpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBpZiBub3QgdjU4OSB0aGVuCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICB2NTkwLk1heFNwZWVkID0gdjUwODsKICAgICAgICB2NTkwLkNGcmFtZSA9IENGcmFtZS5uZXcoVmVjdG9yMy5uZXcodjU5MC5Qb3NpdGlvbi5YLCB2NTkwLlBvc2l0aW9uLlksIHY1OTAuUG9zaXRpb24uWikpICogdjU5MC5DRnJhbWUuUm90YXRpb24gOwogICAgICAgIHY1MDY6U2VuZEtleUV2ZW50KHRydWUsICJXIiwgZmFsc2UsIGdhbWUpOwogICAgICAgIGZvciB2Njg3LCB2Njg4IGluIHBhaXJzKHY1MDcuQm9hdHM6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgdjY4ODpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgdjY4OC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGZvciB2Njg5LCB2NjkwIGluIHBhaXJzKHY1ODY6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgdjY5MDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgdjY5MC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY1OTMgPSB7CiAgICAgICAgICAgICJTaGlwd3JlY2tJc2xhbmQiLAogICAgICAgICAgICAiU2FuZElzbGFuZCIsCiAgICAgICAgICAgICJUcmVlSXNsYW5kIiwKICAgICAgICAgICAgIlRpbnlJc2xhbmQiLAogICAgICAgICAgICAiTXlzdGljSXNsYW5kIiwKICAgICAgICAgICAgIktpdHN1bmVJc2xhbmQiLAogICAgICAgICAgICAiRnJvemVuRGltZW5zaW9uIgogICAgICAgIH07CiAgICAgICAgZm9yIHY2OTEsIHY2OTIgaW4gaXBhaXJzKHY1OTMpIGRvCiAgICAgICAgICAgIGxvY2FsIHY2OTMgPSB2NTA3Lk1hcDpGaW5kRmlyc3RDaGlsZCh2NjkyKTsKICAgICAgICAgICAgaWYgKHY2OTMgYW5kIHY2OTM6SXNBKCJNb2RlbCIpKSB0aGVuCiAgICAgICAgICAgICAgICB2NjkzOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjU5NCA9IHY1MDcuTWFwOkZpbmRGaXJzdENoaWxkKCJQcmVoaXN0b3JpY0lzbGFuZCIpOwogICAgICAgIGlmIHY1OTQgdGhlbgogICAgICAgICAgICB2NTA2OlNlbmRLZXlFdmVudChmYWxzZSwgIlciLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgIF9HLkF1dG9GaW5kUHJlaGlzdG9yaWMgPSBmYWxzZTsKICAgICAgICAgICAgaWYgbm90IHY1MTMgdGhlbgogICAgICAgICAgICAgICAgdjE0Ok5vdGlmeSh7CiAgICAgICAgICAgICAgICAgICAgVGl0bGUgPSAiQmFuYW5hIENhdCBIdWIiLAogICAgICAgICAgICAgICAgICAgIENvbnRlbnQgPSAixJDhuqNvIER1bmcgTmhhbSBUw6xtIFRo4bqleSIsCiAgICAgICAgICAgICAgICAgICAgRHVyYXRpb24gPSAxMAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB2NTEzID0gdHJ1ZTsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTE0ID0gdjE2LlNlYTpBZGRUb2dnbGUoIkF1dG9GaW5kTWlyYWdlIiwgewogICAgICAgIFRpdGxlID0gIkF1dG8gRmluZCBNaXJhZ2UiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHYxNy5BdXRvRmluZE1pcmFnZTpTZXRWYWx1ZShmYWxzZSk7CiAgICB2NTE0Ok9uQ2hhbmdlZChmdW5jdGlvbih2NTk1KQogICAgICAgIF9HLkF1dG9GaW5kTWlyYWdlID0gdjU5NTsKICAgIGVuZCk7CiAgICBsb2NhbCB2NTExID0ge307CiAgICBsb2NhbCB2NTEyID0gZmFsc2U7CiAgICBsb2NhbCB2NTEzID0gZmFsc2U7CiAgICB2NTA1LlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgbm90IF9HLkF1dG9GaW5kTWlyYWdlIHRoZW4KICAgICAgICAgICAgdjUxMyA9IGZhbHNlOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjU5NiA9IHY1MDQuTG9jYWxQbGF5ZXI7CiAgICAgICAgbG9jYWwgdjU5NyA9IHY1OTYuQ2hhcmFjdGVyOwogICAgICAgIGlmIChub3QgdjU5NyBvciBub3QgdjU5NzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSkgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgZnVuY3Rpb24gdjU5OCgpCiAgICAgICAgICAgIGlmIHY1MTIgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdjUxMiA9IHRydWU7CiAgICAgICAgICAgIGZvciB2NzcxLCB2NzcyIGluIHBhaXJzKHY1MTEpIGRvCiAgICAgICAgICAgICAgICBpZiAodjc3MiBhbmQgdjc3Mi5QYXJlbnQgYW5kICh2NzcyLk5hbWUgPT0gIlZlaGljbGVTZWF0IikgYW5kIG5vdCB2NzcyLk9jY3VwYW50KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4yKHY3NzIuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdjUxMiA9IGZhbHNlOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY1OTkgPSB2NTk3Lkh1bWFub2lkOwogICAgICAgIGxvY2FsIHY2MDAgPSBmYWxzZTsKICAgICAgICBsb2NhbCB2NjAxID0gbmlsOwogICAgICAgIGZvciB2Njk0LCB2Njk1IGluIHBhaXJzKHY1MDcuQm9hdHM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgbG9jYWwgdjY5NiA9IHY2OTU6RmluZEZpcnN0Q2hpbGQoIlZlaGljbGVTZWF0Iik7CiAgICAgICAgICAgIGlmICh2Njk2IGFuZCAodjY5Ni5PY2N1cGFudCA9PSB2NTk5KSkgdGhlbgogICAgICAgICAgICAgICAgdjYwMCA9IHRydWU7CiAgICAgICAgICAgICAgICB2NjAxID0gdjY5NjsKICAgICAgICAgICAgICAgIHY1MTFbdjY5NS5OYW1lXSA9IHY2OTY7CiAgICAgICAgICAgIGVsc2VpZiAodjY5NiBhbmQgKHY2OTYuT2NjdXBhbnQgPT0gbmlsKSkgdGhlbgogICAgICAgICAgICAgICAgdjU5OCgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBpZiBub3QgdjYwMCB0aGVuCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgICAgICB2NjAxLk1heFNwZWVkID0gdjUwODsKICAgICAgICB2NjAxLkNGcmFtZSA9IENGcmFtZS5uZXcoVmVjdG9yMy5uZXcodjYwMS5Qb3NpdGlvbi5YLCB2NjAxLlBvc2l0aW9uLlksIHY2MDEuUG9zaXRpb24uWikpICogdjYwMS5DRnJhbWUuUm90YXRpb24gOwogICAgICAgIHY1MDY6U2VuZEtleUV2ZW50KHRydWUsICJXIiwgZmFsc2UsIGdhbWUpOwogICAgICAgIGZvciB2Njk3LCB2Njk4IGluIHBhaXJzKHY1MDcuQm9hdHM6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgdjY5ODpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgdjY5OC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGZvciB2Njk5LCB2NzAwIGluIHBhaXJzKHY1OTc6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgdjcwMDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgdjcwMC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY2MDQgPSB7CiAgICAgICAgICAgICJTaGlwd3JlY2tJc2xhbmQiLAogICAgICAgICAgICAiU2FuZElzbGFuZCIsCiAgICAgICAgICAgICJUcmVlSXNsYW5kIiwKICAgICAgICAgICAgIlRpbnlJc2xhbmQiLAogICAgICAgICAgICAiUHJlaGlzdG9yaWNJc2xhbmQiLAogICAgICAgICAgICAiS2l0c3VuZUlzbGFuZCIsCiAgICAgICAgICAgICJGcm96ZW5EaW1lbnNpb24iCiAgICAgICAgfTsKICAgICAgICBmb3IgdjcwMSwgdjcwMiBpbiBpcGFpcnModjYwNCkgZG8KICAgICAgICAgICAgbG9jYWwgdjcwMyA9IHY1MDcuTWFwOkZpbmRGaXJzdENoaWxkKHY3MDIpOwogICAgICAgICAgICBpZiAodjcwMyBhbmQgdjcwMzpJc0EoIk1vZGVsIikpIHRoZW4KICAgICAgICAgICAgICAgIHY3MDM6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NjA1ID0gdjUwNy5NYXA6RmluZEZpcnN0Q2hpbGQoIk15c3RpY0lzbGFuZCIpOwogICAgICAgIGlmIHY2MDUgdGhlbgogICAgICAgICAgICB2NTA2OlNlbmRLZXlFdmVudChmYWxzZSwgIlciLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgIF9HLkF1dG9GaW5kTWlyYWdlID0gZmFsc2U7CiAgICAgICAgICAgIGlmIG5vdCB2NTEzIHRoZW4KICAgICAgICAgICAgICAgIHYxNDpOb3RpZnkoewogICAgICAgICAgICAgICAgICAgIFRpdGxlID0gIkJhbmFuYSBDYXQgSHViIiwKICAgICAgICAgICAgICAgICAgICBDb250ZW50ID0gIsSQ4bqjbyBCw60g4bqobiBUw6xtIFRo4bqleSIsCiAgICAgICAgICAgICAgICAgICAgRHVyYXRpb24gPSAxMAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB2NTEzID0gdHJ1ZTsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTE1ID0gdjE2LlNlYTpBZGRUb2dnbGUoIkF1dG9GaW5kRnJvemVuIiwgewogICAgICAgIFRpdGxlID0gIkF1dG8gRmluZCBMZXZpYXRoYW4gSXNsYW5kIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2MTcuQXV0b0ZpbmRGcm96ZW46U2V0VmFsdWUoZmFsc2UpOwogICAgdjUxNTpPbkNoYW5nZWQoZnVuY3Rpb24odjYwNikKICAgICAgICBfRy5BdXRvRmluZEZyb3plbiA9IHY2MDY7CiAgICBlbmQpOwogICAgbG9jYWwgdjUxMSA9IHt9OwogICAgbG9jYWwgdjUxMiA9IGZhbHNlOwogICAgbG9jYWwgdjUxMyA9IGZhbHNlOwogICAgdjUwNS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGlmIG5vdCBfRy5BdXRvRmluZEZyb3plbiB0aGVuCiAgICAgICAgICAgIHY1MTMgPSBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY2MDcgPSB2NTA0LkxvY2FsUGxheWVyOwogICAgICAgIGxvY2FsIHY2MDggPSB2NjA3LkNoYXJhY3RlcjsKICAgICAgICBpZiAobm90IHY2MDggb3Igbm90IHY2MDg6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikpIHRoZW4KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIGZ1bmN0aW9uIHY2MDkoKQogICAgICAgICAgICBpZiB2NTEyIHRoZW4KICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHY1MTIgPSB0cnVlOwogICAgICAgICAgICBmb3Igdjc3Mywgdjc3NCBpbiBwYWlycyh2NTExKSBkbwogICAgICAgICAgICAgICAgaWYgKHY3NzQgYW5kIHY3NzQuUGFyZW50IGFuZCAodjc3NC5OYW1lID09ICJWZWhpY2xlU2VhdCIpIGFuZCBub3Qgdjc3NC5PY2N1cGFudCkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuMih2Nzc0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHY1MTIgPSBmYWxzZTsKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NjEwID0gdjYwOC5IdW1hbm9pZDsKICAgICAgICBsb2NhbCB2NjExID0gZmFsc2U7CiAgICAgICAgbG9jYWwgdjYxMiA9IG5pbDsKICAgICAgICBmb3IgdjcwNCwgdjcwNSBpbiBwYWlycyh2NTA3LkJvYXRzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGxvY2FsIHY3MDYgPSB2NzA1OkZpbmRGaXJzdENoaWxkKCJWZWhpY2xlU2VhdCIpOwogICAgICAgICAgICBpZiAodjcwNiBhbmQgKHY3MDYuT2NjdXBhbnQgPT0gdjYxMCkpIHRoZW4KICAgICAgICAgICAgICAgIHY2MTEgPSB0cnVlOwogICAgICAgICAgICAgICAgdjYxMiA9IHY3MDY7CiAgICAgICAgICAgICAgICB2NTExW3Y3MDUuTmFtZV0gPSB2NzA2OwogICAgICAgICAgICBlbHNlaWYgKHY3MDYgYW5kICh2NzA2Lk9jY3VwYW50ID09IG5pbCkpIHRoZW4KICAgICAgICAgICAgICAgIHY2MDkoKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgaWYgbm90IHY2MTEgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgdjYxMi5NYXhTcGVlZCA9IHY1MDg7CiAgICAgICAgdjYxMi5DRnJhbWUgPSBDRnJhbWUubmV3KFZlY3RvcjMubmV3KHY2MTIuUG9zaXRpb24uWCwgdjYxMi5Qb3NpdGlvbi5ZLCB2NjEyLlBvc2l0aW9uLlopKSAqIHY2MTIuQ0ZyYW1lLlJvdGF0aW9uIDsKICAgICAgICB2NTA2OlNlbmRLZXlFdmVudCh0cnVlLCAiVyIsIGZhbHNlLCBnYW1lKTsKICAgICAgICBmb3IgdjcwNywgdjcwOCBpbiBwYWlycyh2NTA3LkJvYXRzOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgIGlmIHY3MDg6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIHY3MDguQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBmb3IgdjcwOSwgdjcxMCBpbiBwYWlycyh2NjA4OkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgIGlmIHY3MTA6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIHY3MTAuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBsb2NhbCB2NjE1ID0gewogICAgICAgICAgICAiU2hpcHdyZWNrSXNsYW5kIiwKICAgICAgICAgICAgIlNhbmRJc2xhbmQiLAogICAgICAgICAgICAiVHJlZUlzbGFuZCIsCiAgICAgICAgICAgICJUaW55SXNsYW5kIiwKICAgICAgICAgICAgIk15c3RpY0lzbGFuZCIsCiAgICAgICAgICAgICJLaXRzdW5lSXNsYW5kIiwKICAgICAgICAgICAgIlByZWhpc3RvcmljSXNsYW5kIgogICAgICAgIH07CiAgICAgICAgZm9yIHY3MTEsIHY3MTIgaW4gaXBhaXJzKHY2MTUpIGRvCiAgICAgICAgICAgIGxvY2FsIHY3MTMgPSB2NTA3Lk1hcDpGaW5kRmlyc3RDaGlsZCh2NzEyKTsKICAgICAgICAgICAgaWYgKHY3MTMgYW5kIHY3MTM6SXNBKCJNb2RlbCIpKSB0aGVuCiAgICAgICAgICAgICAgICB2NzEzOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYxNiA9IHY1MDcuTWFwOkZpbmRGaXJzdENoaWxkKCJGcm96ZW5EaW1lbnNpb24iKTsKICAgICAgICBpZiB2NjE2IHRoZW4KICAgICAgICAgICAgdjUwNjpTZW5kS2V5RXZlbnQoZmFsc2UsICJXIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICBfRy5BdXRvRmluZEZyb3plbiA9IGZhbHNlOwogICAgICAgICAgICBpZiBub3QgdjUxMyB0aGVuCiAgICAgICAgICAgICAgICB2MTQ6Tm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICBUaXRsZSA9ICJCYW5hbmEgQ2F0IEh1YiIsCiAgICAgICAgICAgICAgICAgICAgQ29udGVudCA9ICLEkOG6o28gTGV2aWF0aGFuIFTDrG0gVGjhuqV5IiwKICAgICAgICAgICAgICAgICAgICBEdXJhdGlvbiA9IDEwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHY1MTMgPSB0cnVlOwogICAgICAgICAgICBlbmQKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MTYgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiQXV0b0NvbWVUaWtpIiwgewogICAgICAgIFRpdGxlID0gIkdvIEJhY2sgVG8gVGlraSBPdXRwb3N0IiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTE2Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjE3KQogICAgICAgIF9HLkF1dG9Db21lVGlraSA9IHY2MTc7CiAgICBlbmQpOwogICAgdjUwNS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGlmIG5vdCBfRy5BdXRvQ29tZVRpa2kgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYxOCA9IHY1MDQuTG9jYWxQbGF5ZXI7CiAgICAgICAgbG9jYWwgdjYxOSA9IHY2MTguQ2hhcmFjdGVyOwogICAgICAgIGlmIChub3QgdjYxOSBvciBub3QgdjYxOTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSkgdGhlbgogICAgICAgICAgICByZXR1cm47CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjYyMCA9IHY2MTkuSHVtYW5vaWQ7CiAgICAgICAgbG9jYWwgdjYyMSA9IG5pbDsKICAgICAgICBmb3IgdjcxNCwgdjcxNSBpbiBwYWlycyh2NTA3LkJvYXRzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGxvY2FsIHY3MTYgPSB2NzE1OkZpbmRGaXJzdENoaWxkKCJWZWhpY2xlU2VhdCIpOwogICAgICAgICAgICBpZiAodjcxNiBhbmQgKHY3MTYuT2NjdXBhbnQgPT0gdjYyMCkpIHRoZW4KICAgICAgICAgICAgICAgIHY2MjEgPSB2NzE2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGlmIHY2MjEgdGhlbgogICAgICAgICAgICB2NjIxLk1heFNwZWVkID0gdjUwODsKICAgICAgICAgICAgbG9jYWwgdjc3NiA9IENGcmFtZS5uZXcoLSAxNjIxNy43NTY4MzU5Mzc1LCA5LjEyNjc2MTQzNjQ2MjQwMiwgNDQ2LjA2NTM2ODY1MjM0Mzc1KTsKICAgICAgICAgICAgbG9jYWwgdjc3NyA9IHY2MjEuUG9zaXRpb247CiAgICAgICAgICAgIGxvY2FsIHY3NzggPSB2Nzc2LlBvc2l0aW9uOwogICAgICAgICAgICBsb2NhbCB2Nzc5ID0gKHY3NzggLSB2Nzc3KS51bml0OwogICAgICAgICAgICBsb2NhbCB2NzgwID0gdjc3OSAqIHY2MjEuTWF4U3BlZWQgKiB2NTA1LlJlbmRlclN0ZXBwZWQ6V2FpdCgpIDsKICAgICAgICAgICAgdjYyMS5DRnJhbWUgPSB2NjIxLkNGcmFtZSArIHY3ODAgOwogICAgICAgICAgICBsb2NhbCB2NzgyID0gQ0ZyYW1lLm5ldyh2Nzc3LCB2Nzc4KTsKICAgICAgICAgICAgdjYyMS5DRnJhbWUgPSBDRnJhbWUubmV3KHY2MjEuUG9zaXRpb24sIHY3NzgpOwogICAgICAgICAgICBpZiAoKHY2MjEuUG9zaXRpb24gLSB2Nzc4KS5tYWduaXR1ZGUgPCAxMjApIHRoZW4KICAgICAgICAgICAgICAgIF9HLkF1dG9Db21lVGlraSA9IGZhbHNlOwogICAgICAgICAgICAgICAgdjUwNjpTZW5kS2V5RXZlbnQoZmFsc2UsICJXIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTE3ID0gdjE2LlNlYTpBZGRUb2dnbGUoIkF1dG9Db21lSHlkcmEiLCB7CiAgICAgICAgVGl0bGUgPSAiR28gQmFjayBUbyBIeWRyYSBJc2xhbmQiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MTc6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MjIpCiAgICAgICAgX0cuQXV0b0NvbWVIeWRyYSA9IHY2MjI7CiAgICBlbmQpOwogICAgdjUwNS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGlmIG5vdCBfRy5BdXRvQ29tZUh5ZHJhIHRoZW4KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY2MjMgPSB2NTA0LkxvY2FsUGxheWVyOwogICAgICAgIGxvY2FsIHY2MjQgPSB2NjIzLkNoYXJhY3RlcjsKICAgICAgICBpZiAobm90IHY2MjQgb3Igbm90IHY2MjQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikpIHRoZW4KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY2MjUgPSB2NjI0Lkh1bWFub2lkOwogICAgICAgIGxvY2FsIHY2MjYgPSBuaWw7CiAgICAgICAgZm9yIHY3MTcsIHY3MTggaW4gcGFpcnModjUwNy5Cb2F0czpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBsb2NhbCB2NzE5ID0gdjcxODpGaW5kRmlyc3RDaGlsZCgiVmVoaWNsZVNlYXQiKTsKICAgICAgICAgICAgaWYgKHY3MTkgYW5kICh2NzE5Lk9jY3VwYW50ID09IHY2MjUpKSB0aGVuCiAgICAgICAgICAgICAgICB2NjI2ID0gdjcxOTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBpZiB2NjI2IHRoZW4KICAgICAgICAgICAgdjYyNi5NYXhTcGVlZCA9IHY1MDg7CiAgICAgICAgICAgIGxvY2FsIHY3ODQgPSBDRnJhbWUubmV3KDUxOTMuOTM3NSwgLSAwLjA0NjkwMjg5NDk3Mzc1NDg4LCAxNjMxLjU3ODM2OTE0MDYyNSk7CiAgICAgICAgICAgIGxvY2FsIHY3ODUgPSB2NjI2LlBvc2l0aW9uOwogICAgICAgICAgICBsb2NhbCB2Nzg2ID0gdjc4NC5Qb3NpdGlvbjsKICAgICAgICAgICAgbG9jYWwgdjc4NyA9ICh2Nzg2IC0gdjc4NSkudW5pdDsKICAgICAgICAgICAgbG9jYWwgdjc4OCA9IHY3ODcgKiB2NjI2Lk1heFNwZWVkICogdjUwNS5SZW5kZXJTdGVwcGVkOldhaXQoKSA7CiAgICAgICAgICAgIHY2MjYuQ0ZyYW1lID0gdjYyNi5DRnJhbWUgKyB2Nzg4IDsKICAgICAgICAgICAgbG9jYWwgdjc5MCA9IENGcmFtZS5uZXcodjc4NSwgdjc4Nik7CiAgICAgICAgICAgIHY2MjYuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyh2NjI2LlBvc2l0aW9uLCB2Nzg2KTsKICAgICAgICAgICAgaWYgKCh2NjI2LlBvc2l0aW9uIC0gdjc4NikubWFnbml0dWRlIDwgMTIwKSB0aGVuCiAgICAgICAgICAgICAgICBfRy5BdXRvQ29tZUh5ZHJhID0gZmFsc2U7CiAgICAgICAgICAgICAgICB2NTA2OlNlbmRLZXlFdmVudChmYWxzZSwgIlciLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIHYxNi5TZWE6QWRkQnV0dG9uKHsKICAgICAgICBUaXRsZSA9ICJUcmF2ZWwgdG8gSHVudGluZyBab25lIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDE2OTE3LjE1NDI5Njg3NSwgNy43NTc1OTYwMTU5MzAxNzYsIDUxMS44MjAzMTI1KSk7CiAgICAgICAgZW5kCiAgICB9KTsKICAgIGxvY2FsIHY1MTEgPSB7fTsKICAgIGxvY2FsIHY1MTggPSB7CiAgICAgICAgIkJlYXN0IEh1bnRlciIsCiAgICAgICAgIlNsZWlnaCIsCiAgICAgICAgIk1pcmFjbGUiLAogICAgICAgICJUaGUgU2VudGluZWwiLAogICAgICAgICJHdWFyZGlhbiIsCiAgICAgICAgIkxhbnRlcm4iLAogICAgICAgICJEaW5naHkiLAogICAgICAgICJQaXJhdGVTbG9vcCIsCiAgICAgICAgIlBpcmF0ZUJyaWdhZGUiLAogICAgICAgICJQaXJhdGVHcmFuZEJyaWdhZGUiLAogICAgICAgICJNYXJpbmVHcmFuZEJyaWdhZGUiLAogICAgICAgICJNYXJpbmVCcmlnYWRlIiwKICAgICAgICAiTWFyaW5lU2xvb3AiCiAgICB9OwogICAgbG9jYWwgdjUxOSA9IHYxNi5TZWE6QWRkRHJvcGRvd24oIkRyb3Bkb3duQm9hdCIsIHsKICAgICAgICBUaXRsZSA9ICJTZWxlY3QgQm9hdCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBWYWx1ZXMgPSB2NTE4LAogICAgICAgIE11bHRpID0gZmFsc2UsCiAgICAgICAgRGVmYXVsdCA9IDEKICAgIH0pOwogICAgdjUxOTpTZXRWYWx1ZShzZWxlY3RlZEJvYXQpOwogICAgdjUxOTpPbkNoYW5nZWQoZnVuY3Rpb24odjYyNykKICAgICAgICBzZWxlY3RlZEJvYXQgPSB2NjI3OwogICAgZW5kKTsKICAgIGxvY2FsIGZ1bmN0aW9uIHY1MjAodjYyOCkKICAgICAgICBsb2NhbCB2NjI5ID0gewogICAgICAgICAgICBbMV0gPSAiQnV5Qm9hdCIsCiAgICAgICAgICAgIFsyXSA9IHY2MjgKICAgICAgICB9OwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY2MjkpKTsKICAgICAgICB0YXNrLmRlbGF5KDIsIGZ1bmN0aW9uKCkKICAgICAgICAgICAgZm9yIHY3OTEsIHY3OTIgaW4gcGFpcnModjUwNy5Cb2F0czpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgaWYgKHY3OTI6SXNBKCJNb2RlbCIpIGFuZCAodjc5Mi5OYW1lID09IHY2MjgpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjg5NiA9IHY3OTI6RmluZEZpcnN0Q2hpbGQoIlZlaGljbGVTZWF0Iik7CiAgICAgICAgICAgICAgICAgICAgaWYgKHY4OTYgYW5kIG5vdCB2ODk2Lk9jY3VwYW50KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHY1MTFbdjYyOF0gPSB2ODk2OwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKICAgIGxvY2FsIGZ1bmN0aW9uIHY1MjEoKQogICAgICAgIGZvciB2NzIwLCB2NzIxIGluIHBhaXJzKHY1MTEpIGRvCiAgICAgICAgICAgIGlmICh2NzIxIGFuZCB2NzIxLlBhcmVudCBhbmQgKHY3MjEuTmFtZSA9PSAiVmVoaWNsZVNlYXQiKSBhbmQgbm90IHY3MjEuT2NjdXBhbnQpIHRoZW4KICAgICAgICAgICAgICAgIFR3ZWVuMih2NzIxLkNGcmFtZSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGZvciB2NzIyLCB2NzIzIGluIHBhaXJzKHY1MTEpIGRvCiAgICAgICAgICAgIGlmICh2NzIzIGFuZCB2NzIzLlBhcmVudCBhbmQgKHY3MjMuTmFtZSA9PSAiVmVoaWNsZVNlYXQiKSBhbmQgbm90IHY3MjMuT2NjdXBhbnQpIHRoZW4KICAgICAgICAgICAgICAgIHY1MTFbdjcyMl0gPSB2NzIzOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICB2MTYuU2VhOkFkZEJ1dHRvbih7CiAgICAgICAgVGl0bGUgPSAiQnV5IEJvYWQiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIHY1MjAoc2VsZWN0ZWRCb2F0KTsKICAgICAgICBlbmQKICAgIH0pOwogICAgdjE2LlNlYTpBZGRCdXR0b24oewogICAgICAgIFRpdGxlID0gIkZseSBUbyBNeSBCb2F0IiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgICAgICB2NTIxKCk7CiAgICAgICAgZW5kCiAgICB9KTsKICAgIGxvY2FsIHY1MjIgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlVGVycm9yc2hhcmsiLCB7CiAgICAgICAgVGl0bGUgPSAiQXR0YWNrIFRlcnJvcnNoYXJrIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTIyOk9uQ2hhbmdlZChmdW5jdGlvbih2NjMwKQogICAgICAgIF9HLkF1dG9UZXJyb3JzaGFyayA9IHY2MzA7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZVRlcnJvcnNoYXJrOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b1RlcnJvcnNoYXJrIHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlRlcnJvcnNoYXJrIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NDQsIHYxNDQ1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDQ1Lk5hbWUgPT0gIlRlcnJvcnNoYXJrIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ0NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE0NDU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxNDQ1Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQ1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDUuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQ1Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NDUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b1RlcnJvcnNoYXJrIG9yIG5vdCB2MTQ0NS5QYXJlbnQgb3IgKHYxNDQ1Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlRlcnJvcnNoYXJrIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlRlcnJvcnNoYXJrIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUyMyA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVQaXJhbmhhIiwgewogICAgICAgIFRpdGxlID0gIkF0dGFjayBQaXJhbmhhIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTIzOk9uQ2hhbmdlZChmdW5jdGlvbih2NjMxKQogICAgICAgIF9HLmZhcm1waXJhbnlhID0gdjYzMTsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlUGlyYW5oYTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLmZhcm1waXJhbnlhIHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlBpcmFuaGEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ0NiwgdjE0NDcgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NDcuTmFtZSA9PSAiUGlyYW5oYSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NDc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNDQ3OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTQ0Ny5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0Ny5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQ3Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ0Ny5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDQ3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLmZhcm1waXJhbnlhIG9yIG5vdCB2MTQ0Ny5QYXJlbnQgb3IgKHYxNDQ3Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlBpcmFuaGEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiUGlyYW5oYSIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MjQgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlU2hhcmsiLCB7CiAgICAgICAgVGl0bGUgPSAiQXR0YWNrIFNoYXJrIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTI0Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjMyKQogICAgICAgIF9HLkF1dG9TaGFyayA9IHY2MzI7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZVNoYXJrOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b1NoYXJrIHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNoYXJrIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NDgsIHYxNDQ5IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDQ5Lk5hbWUgPT0gIlNoYXJrIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ0OTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE0NDk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxNDQ5Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQ5Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NDkuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDQ5Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NDkuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5TaXQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9TaGFyayBvciBub3QgdjE0NDkuUGFyZW50IG9yICh2MTQ0OS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuQm9hdHMuUGlyYXRlR3JhbmRCcmlnYWRlLlZlaGljbGVTZWF0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMSwgMCkpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlRlcnJvcnNoYXJrIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJUZXJyb3JzaGFyayIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUyNSA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVGaXNoQ3JldyIsIHsKICAgICAgICBUaXRsZSA9ICJBdHRhY2sgRmlzaCBDcmV3IiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTI1Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjMzKQogICAgICAgIF9HLkF1dG9GaXNoQ3JldyA9IHY2MzM7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUZpc2hDcmV3OlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b0Zpc2hDcmV3IHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkZpc2ggQ3JldyBNZW1iZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ1MCwgdjE0NTEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NTEuTmFtZSA9PSAiRmlzaCBDcmV3IE1lbWJlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE0NTE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNDUxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTQ1MS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ1MS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDUxLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ1MS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDUxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuU2l0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvRmlzaENyZXcgb3Igbm90IHYxNDUxLlBhcmVudCBvciAodjE0NTEuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkJvYXRzLlBpcmF0ZUdyYW5kQnJpZ2FkZS5WZWhpY2xlU2VhdC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDEsIDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJGaXNoIENyZXcgTWVtYmVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJGaXNoIENyZXcgTWVtYmVyIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTI2ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVNoaXAiLCB7CiAgICAgICAgVGl0bGUgPSAiQXR0YWNrIFNoaXAiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MjY6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2MzQpCiAgICAgICAgX0cuU2hpcCA9IHY2MzQ7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZVNoaXA6U2V0VmFsdWUoZmFsc2UpOwogICAgZnVuY3Rpb24gQ2hlY2tQaXJhdGVCb2F0KCkKICAgICAgICBsb2NhbCB2NjM1ID0gewogICAgICAgICAgICAiUGlyYXRlR3JhbmRCcmlnYWRlIiwKICAgICAgICAgICAgIlBpcmF0ZUJyaWdhZGUiCiAgICAgICAgfTsKICAgICAgICBmb3IgdjcyNCwgdjcyNSBpbiBuZXh0LCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSBkbwogICAgICAgICAgICBpZiAodGFibGUuZmluZCh2NjM1LCB2NzI1Lk5hbWUpIGFuZCB2NzI1OkZpbmRGaXJzdENoaWxkKCJIZWFsdGgiKSBhbmQgKHY3MjUuSGVhbHRoLlZhbHVlID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgIHJldHVybiB2NzI1OwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5TaGlwIHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBDaGVja1BpcmF0ZUJvYXQoKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAzMiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMzIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzMzggPSBDaGVja1BpcmF0ZUJvYXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGF3bihUd2Vlbih2MTMzOC5FbmdpbmUuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAtIDIwLCAwKSksIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgQWltQm90U2tpbGxQb3NpdGlvbiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIC0gNSwgMCkgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgU2tpbGxhaW1ib3QgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b1NraWxsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCB2MTMzOCBvciBub3QgdjEzMzguUGFyZW50IG9yICh2MTMzOC5IZWFsdGguVmFsdWUgPD0gMCkgb3Igbm90IENoZWNrUGlyYXRlQm9hdCgpCiAgICAgICAgICAgICAgICAgICAgICAgIFNraWxsYWltYm90ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b1NraWxsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTI3ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZUdob3N0U2hpcCIsIHsKICAgICAgICBUaXRsZSA9ICJBdHRhY2sgR2hvc3QgU2hpcCIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUyNzpPbkNoYW5nZWQoZnVuY3Rpb24odjYzNikKICAgICAgICBfRy5HaG9zdFNoaXAgPSB2NjM2OwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVHaG9zdFNoaXA6U2V0VmFsdWUoZmFsc2UpOwogICAgZnVuY3Rpb24gQ2hlY2tQaXJhdGVCb2F0KCkKICAgICAgICBsb2NhbCB2NjM3ID0gewogICAgICAgICAgICAiRmlzaEJvYXQiCiAgICAgICAgfTsKICAgICAgICBmb3IgdjcyNiwgdjcyNyBpbiBuZXh0LCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSBkbwogICAgICAgICAgICBpZiAodGFibGUuZmluZCh2NjM3LCB2NzI3Lk5hbWUpIGFuZCB2NzI3OkZpbmRGaXJzdENoaWxkKCJIZWFsdGgiKSBhbmQgKHY3MjcuSGVhbHRoLlZhbHVlID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgIHJldHVybiB2NzI3OwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiBfRy5iamlyRmlzaEJvYXQgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIENoZWNrUGlyYXRlQm9hdCgpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDMyLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAzMiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTMzOSA9IENoZWNrUGlyYXRlQm9hdCgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYXduKFR3ZWVuKHYxMzM5LkVuZ2luZS5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIC0gMjAsIDApLCAxKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvU2tpbGwgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgU2tpbGxhaW1ib3QgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgQWltQm90U2tpbGxQb3NpdGlvbiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIC0gNSwgMCkgOwogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCB2MTMzOS5QYXJlbnQgb3IgKHYxMzM5LkhlYWx0aC5WYWx1ZSA8PSAwKSBvciBub3QgQ2hlY2tQaXJhdGVCb2F0KCkKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b1NraWxsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIFNraWxsYWltYm90ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLmJqaXJGaXNoQm9hdCB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgQ2hlY2tQaXJhdGVCb2F0KCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxVc2VyIik6Q2FwdHVyZUNvbnRyb2xsZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsVXNlciIpOkJ1dHRvbjFEb3duKFZlY3RvcjIubmV3KDEyODAsIDY3MikpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NTIsIHYxNDUzIGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjE0NTM6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ1My5Ub29sVGlwID09ICJNZWxlZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodjE0NTMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiQyIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NTQsIHYxNDU1IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjE0NTU6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ1NS5Ub29sVGlwID09ICJCbG94IEZydWl0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbCh2MTQ1NSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIlYiLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiViIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTQ1NiwgdjE0NTcgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2MTQ1NzpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDU3LlRvb2xUaXAgPT0gIlN3b3JkIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkOkVxdWlwVG9vbCh2MTQ1Nyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NTgsIHYxNDU5IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjE0NTk6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ1OS5Ub29sVGlwID09ICJHdW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6RXF1aXBUb29sKHYxNDU5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIyLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjAsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUyOCA9IHYxNi5NYWluOkFkZFNlY3Rpb24oIkVsaXRlIik7CiAgICBsb2NhbCB2NTI5ID0gdjE2Lk1haW46QWRkUGFyYWdyYXBoKHsKICAgICAgICBUaXRsZSA9ICJFbGl0ZSBTdGF0dXMiLAogICAgICAgIENvbnRlbnQgPSAiIgogICAgfSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkRpYWJsbyIpIG9yIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGVhbmRyZSIpIG9yIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVXJiYW4iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkRpYWJsbyIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGVhbmRyZSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiVXJiYW4iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIHY1Mjk6U2V0RGVzYygiRWxpdGUgQm9zczog4pyF77iPIHwgS2lsbGVkOiAgIiAuLiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJFbGl0ZUh1bnRlciIsICJQcm9ncmVzcyIpKTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB2NTI5OlNldERlc2MoIkVsaXRlIEJvc3M6IOKdjO+4jyB8IEtpbGxlZDogIiAuLiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJFbGl0ZUh1bnRlciIsICJQcm9ncmVzcyIpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kKTsKICAgIGxvY2FsIHY1MzAgPSB2MTYuTWFpbjpBZGRUb2dnbGUoIlRvZ2dsZUVsaXRlIiwgewogICAgICAgIFRpdGxlID0gIkF1dG8gRWxpdGUgSHVudGVyIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTMwOk9uQ2hhbmdlZChmdW5jdGlvbih2NjM4KQogICAgICAgIF9HLkF1dG9FbGl0ZSA9IHY2Mzg7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUVsaXRlOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvRWxpdGUgdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkVsaXRlSHVudGVyIik7CiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gdHJ1ZSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIkRpYWJsbyIpIG9yIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJEZWFuZHJlIikgb3Igc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuQ29udGFpbmVyLlF1ZXN0VGl0bGUuVGl0bGUuVGV4dCwgIlVyYmFuIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkRpYWJsbyIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRGVhbmRyZSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiVXJiYW4iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTY2MywgdjE2NjQgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTY2NDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE2NjQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxNjY0Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxNjY0Lk5hbWUgPT0gIkRpYWJsbyIpIG9yICh2MTY2NC5OYW1lID09ICJEZWFuZHJlIikgb3IgKHYxNjY0Lk5hbWUgPT0gIlVyYmFuIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4yKHYxNjY0Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjQuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjQuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjY0Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIChfRy5BdXRvRWxpdGUgPT0gZmFsc2UpIG9yICh2MTY2NC5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxNjY0LlBhcmVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGlhYmxvIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkRpYWJsbyIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiRGVhbmRyZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbjIoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJEZWFuZHJlIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJVcmJhbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbjIoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJVcmJhbiIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRWxpdGVIdW50ZXIiKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kCmlmIFNlYTMgdGhlbgogICAgbG9jYWwgdjUzMSA9IHYxNi5TZWE6QWRkU2VjdGlvbigiTWlyYWdlIElzbGFuZCIpOwogICAgbG9jYWwgdjUzMiA9IHYxNi5TZWE6QWRkUGFyYWdyYXBoKHsKICAgICAgICBUaXRsZSA9ICJTdGF0dXMiLAogICAgICAgIENvbnRlbnQgPSAiIgogICAgfSk7CiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCB2NzkzID0gZ2FtZTpHZXRTZXJ2aWNlKCJMaWdodGluZyIpLlNreS5Nb29uVGV4dHVyZUlkOwogICAgICAgICAgICAgICAgaWYgKHY3OTMgPT0gImh0dHA6Ly93d3cucm9ibG94LmNvbS9hc3NldC8/aWQ9OTcwOTE0OTQzMSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBGdWxsTW9vblN0YXR1cyA9ICIxMDAlIjsKICAgICAgICAgICAgICAgIGVsc2VpZiAodjc5MyA9PSAiaHR0cDovL3d3dy5yb2Jsb3guY29tL2Fzc2V0Lz9pZD05NzA5MTQ5MDUyIikgdGhlbgogICAgICAgICAgICAgICAgICAgIEZ1bGxNb29uU3RhdHVzID0gIjc1JSI7CiAgICAgICAgICAgICAgICBlbHNlaWYgKHY3OTMgPT0gImh0dHA6Ly93d3cucm9ibG94LmNvbS9hc3NldC8/aWQ9OTcwOTE0MzczMyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBGdWxsTW9vblN0YXR1cyA9ICI1MCUiOwogICAgICAgICAgICAgICAgZWxzZWlmICh2NzkzID09ICJodHRwOi8vd3d3LnJvYmxveC5jb20vYXNzZXQvP2lkPTk3MDkxNTA0MDEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgRnVsbE1vb25TdGF0dXMgPSAiMjUlIjsKICAgICAgICAgICAgICAgIGVsc2VpZiAodjc5MyA9PSAiaHR0cDovL3d3dy5yb2Jsb3guY29tL2Fzc2V0Lz9pZD05NzA5MTQ5NjgwIikgdGhlbgogICAgICAgICAgICAgICAgICAgIEZ1bGxNb29uU3RhdHVzID0gIjE1JSI7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgRnVsbE1vb25TdGF0dXMgPSAiMCUiOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZS5Xb3Jrc3BhY2UuTWFwOkZpbmRGaXJzdENoaWxkKCJNeXN0aWNJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgTWlyYWdlU3RhdHVzID0gIuKche+4jyI7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgTWlyYWdlU3RhdHVzID0gIuKdjO+4jyI7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgICAgIHY1MzI6U2V0RGVzYygiTWlyYWdlOiAiIC4uIE1pcmFnZVN0YXR1cyAuLiAiIHwgRnVsbCBNb29uOiAiIC4uIEZ1bGxNb29uU3RhdHVzKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZCk7CiAgICB2MTYuU2VhOkFkZEJ1dHRvbih7CiAgICAgICAgVGl0bGUgPSAiRmx5IFRvIFRoZSBIaWdoIE1vdW50YWluIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgICAgICBUd2VlblRvSGlnaGVzdFBvaW50KCk7CiAgICAgICAgZW5kCiAgICB9KTsKICAgIGZ1bmN0aW9uIFR3ZWVuVG9IaWdoZXN0UG9pbnQoKQogICAgICAgIGxvY2FsIHY2MzkgPSBnZXRIaWdoZXN0UG9pbnQoKTsKICAgICAgICBpZiB2NjM5IHRoZW4KICAgICAgICAgICAgVHdlZW4yKHY2MzkuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAyMTEuODgsIDApKTsKICAgICAgICBlbmQKICAgIGVuZAogICAgZnVuY3Rpb24gZ2V0SGlnaGVzdFBvaW50KCkKICAgICAgICBpZiBub3QgZ2FtZS5Xb3Jrc3BhY2UuTWFwOkZpbmRGaXJzdENoaWxkKCJNeXN0aWNJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIHJldHVybiBuaWw7CiAgICAgICAgZW5kCiAgICAgICAgZm9yIHY3MjgsIHY3MjkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuTXlzdGljSXNsYW5kOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgIGlmIHY3Mjk6SXNBKCJNZXNoUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIGlmICh2NzI5Lk1lc2hJZCA9PSAicmJ4YXNzZXRpZDovLzgzMTkwMjc2OTUxOTE0IikgdGhlbiAtLXRoYXkgaWQg4bqjbmggdsOgbwogICAgICAgICAgICAgICAgICAgIHJldHVybiB2NzI5OwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZApsb2NhbCB2NjYgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlVHBBZHZhbmNlZCIsIHsKICAgIFRpdGxlID0gIkZseSBUbyBBZHZhbmNlZCBGcnVpdCBEZWFsZXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjY2Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjU3KQogICAgX0cuQXV0b1RwQWR2YW5jZWQgPSB2MjU3OwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvVHBBZHZhbmNlZCB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3MzAgPSBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLk5QQ3M6RmluZEZpcnN0Q2hpbGQoIkFkdmFuY2VkIEZydWl0IERlYWxlciIpOwogICAgICAgICAgICBpZiAodjczMCBhbmQgdjczMDpJc0EoIk1vZGVsIikpIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4NTYgPSB2NzMwLlByaW1hcnlQYXJ0IGFuZCB2NzMwLlByaW1hcnlQYXJ0LlBvc2l0aW9uIDsKICAgICAgICAgICAgICAgIGlmIHY4NTYgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KHY4NTYpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NjcgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlVHdlZW5HZWFyIiwgewogICAgVGl0bGUgPSAiRmx5IFRvIEdlYXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjY3Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjU4KQogICAgX0cuVHdlZW5Ub0dlYXIgPSB2MjU4OwplbmQpOwp2MTcuVG9nZ2xlVHdlZW5HZWFyOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5Ud2VlblRvR2VhciB0aGVuCiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiTXlzdGljSXNsYW5kIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTA0MCwgdjEwNDEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuTXlzdGljSXNsYW5kOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYxMDQxOklzQSgiTWVzaFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNDEuTWF0ZXJpYWwgPT0gRW51bS5NYXRlcmlhbC5OZW9uKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4yKHYxMDQxLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2NjggPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlbG9ja21vb24iLCB7CiAgICBUaXRsZSA9ICJMb29rIE1vb24iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjY4Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjU5KQogICAgX0cuQXV0b0xvY2tNb29uID0gdjI1OTsKZW5kKTsKdjE3LlRvZ2dsZWxvY2ttb29uOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvTG9ja01vb24gdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjc5NCA9IGdhbWUuTGlnaHRpbmc6R2V0TW9vbkRpcmVjdGlvbigpOwogICAgICAgICAgICAgICAgbG9jYWwgdjc5NSA9IGdhbWUuV29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lLnAgKyAodjc5NCAqIDEwMCkgOwogICAgICAgICAgICAgICAgZ2FtZS5Xb3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUgPSBDRnJhbWUubG9va0F0KGdhbWUuV29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lLnAsIHY3OTUpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b0xvY2tNb29uIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1FOkZpcmVTZXJ2ZXIoIkFjdGl2YXRlQWJpbGl0eSIpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY2OSA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvU2FiZXIiLCB7CiAgICBUaXRsZSA9ICJBdXRvIFNhYmVyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY2OTpPbkNoYW5nZWQoZnVuY3Rpb24odjI2MCkKICAgIF9HLkF1dG9fU2FiZXIgPSB2MjYwOwplbmQpOwp2MTcuVG9nZ2xlQXV0b1NhYmVyOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBpZiAoX0cuQXV0b19TYWJlciBhbmQgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlID49IDIwMCkpIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkp1bmdsZS5GaW5hbC5QYXJ0LlRyYW5zcGFyZW5jeSA9PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkp1bmdsZS5RdWVzdFBsYXRlcy5Eb29yLlRyYW5zcGFyZW5jeSA9PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoQ0ZyYW1lLm5ldygtIDE2MTIuNTU4ODQsIDM2Ljk3NzQxMzIsIDE0OC43MTk1NDMsIDAuMzcwOTEyNzksIDMuMDcxNzE1ZS05LCAtIDAuOTI4NjY3NzI0LCAzLjk3MDk5NWUtOCwgMSwgMS45MTY3OTM1ZS04LCAwLjkyODY2NzcyNCwgLSA0LjM5ODY5OGUtOCwgMC4zNzA5MTI3OSkuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkp1bmdsZS5RdWVzdFBsYXRlcy5QbGF0ZTEuQnV0dG9uLkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLlBsYXRlMi5CdXR0b24uQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5KdW5nbGUuUXVlc3RQbGF0ZXMuUGxhdGUzLkJ1dHRvbi5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkp1bmdsZS5RdWVzdFBsYXRlcy5QbGF0ZTQuQnV0dG9uLkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSnVuZ2xlLlF1ZXN0UGxhdGVzLlBsYXRlNS5CdXR0b24uQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDE2MTIuNTU4ODQsIDM2Ljk3NzQxMzIsIDE0OC43MTk1NDMsIDAuMzcwOTEyNzksIDMuMDcxNzE1ZS05LCAtIDAuOTI4NjY3NzI0LCAzLjk3MDk5NWUtOCwgMSwgMS45MTY3OTM1ZS04LCAwLjkyODY2NzcyNCwgLSA0LjM5ODY5OGUtOCwgMC4zNzA5MTI3OSkpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkRlc2VydC5CdXJuLlBhcnQuVHJhbnNwYXJlbmN5ID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJUb3JjaCIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlRvcmNoIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbCgiVG9yY2giKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoMTExNC42MTQ3NSwgNS4wNDY3OTcyOCwgNDM1MC4yMjgwMywgLSAwLjY0ODQ2NjU4NywgLSAxLjI4Nzk5MDllLTksIDAuNzYxMjQzMTA1LCAtIDUuNzA2NTI5ZS0xMCwgMSwgMS4yMDU4NDU0ZS05LCAtIDAuNzYxMjQzMTA1LCAzLjQ3NTQ0ODhlLTEwLCAtIDAuNjQ4NDY2NTg3KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxNjEwLjAwNzU3LCAxMS41MDQ5ODU4LCAxNjQuMDAxNTg3LCAwLjk4NDgwNzU1MSwgLSAwLjE2NzcyMjI4NSwgLSAwLjA0NDk4MTgxNDksIDAuMTczNjQ5NDMsIDAuOTUxMjQ0MjM1LCAwLjI1NDkxMjE5OCwgMC4wMDAwMzQyMzcyOCwgLSAwLjI1ODg1MDUxNSwgMC45NjU5MTc0MDgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwgIlNpY2tNYW4iKSB+PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiR2V0Q3VwIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC41KTsKICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJDdXAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwgIkZpbGxDdXAiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuQ3VwKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsICJTaWNrTWFuIik7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwgIlJpY2hTb24iKSA9PSBuaWwpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiUHJvUXVlc3RQcm9ncmVzcyIsICJSaWNoU29uIik7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwgIlJpY2hTb24iKSA9PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIk1vYiBMZWFkZXIiKSBvciBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIk1vYiBMZWFkZXIiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDI5NjcuNTk1MjEsIC0gNC45MTA4OTgyMSwgNTMyOC43MDcwMywgMC4zNDIyMDg1NjQsIC0gMC4wMjI3ODQ5MDU1LCAwLjkzOTM0NzgwNCwgMC4wMjUxNjAzODE2LCAwLjk5OTU2OTcxNCwgMC4wMTUwNzk2MTY2LCAtIDAuOTM5Mjg3MTI2LCAwLjAxODQ3Mzk3MzUsIDAuMzQyNjM0NTU5KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE3OTksIHYxODAwIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTgwMC5OYW1lID09ICJNb2IgTGVhZGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIk1vYiBMZWFkZXIgW0x2LiAxMjBdIFtCb3NzXSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTgwMDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjE4MDA6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxODAwLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODAwLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwMC5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwMC5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE4MDAuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKHYxODAwLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgX0cuQXV0b19TYWJlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIk1vYiBMZWFkZXIiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIk1vYiBMZWFkZXIiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQcm9RdWVzdFByb2dyZXNzIiwgIlJpY2hTb24iKSA9PSAxKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiUmljaFNvbiIpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbCgiUmVsaWMiKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTQwNC45MTUwNCwgMjkuOTc3MzI3MywgMy44MDU5ODExNiwgMC44NzY1MTQ0OTQsIDUuNjY5MDY4OGUtOSwgMC40ODEzNzU0NTYsIDIuNTM4NTJlLTgsIDEsIC0gNS43OTk5NTZlLTgsIC0gMC40ODEzNzU0NTYsIDYuMzA1NzI2NGUtOCwgMC44NzY1MTQ0OTQpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJTYWJlciBFeHBlcnQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlNhYmVyIEV4cGVydCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDYwLCB2MTQ2MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDYxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTQ2MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE0NjEuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ2MS5OYW1lID09ICJTYWJlciBFeHBlcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDYxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjEuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDYxLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjEuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjEuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjEuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNDYxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE0NjEuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICh2MTQ2MS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IF9HLkF1dG9fU2FiZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDYxLkh1bWFub2lkLkhlYWx0aCA8PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlByb1F1ZXN0UHJvZ3Jlc3MiLCAiUGxhY2VSZWxpYyIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjcwID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9Qb2xlVjEiLCB7CiAgICBUaXRsZSA9ICJBdXRvIFBvbGUgVjEiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjcwOk9uQ2hhbmdlZChmdW5jdGlvbih2MjYxKQogICAgX0cuQXV0b19Qb2xlVjEgPSB2MjYxOwplbmQpOwp2MTcuVG9nZ2xlQXV0b1BvbGVWMTpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHY3MSA9IENGcmFtZS5uZXcoLSA3NzQ4LjAxODU1NDY4NzUsIDU2MDYuODA2MTUyMzQzNzUsIC0gMjMwNS44OTg2ODE2NDA2MjUpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX1BvbGVWMSB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiVGh1bmRlciBHb2QiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDQyLCB2MTA0MyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDQzLk5hbWUgPT0gIlRodW5kZXIgR29kIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMDQzOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTA0MzpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjEwNDMuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDMuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQzLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQzLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTA0My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19Qb2xlVjEgb3Igbm90IHYxMDQzLlBhcmVudCBvciAodjEwNDMuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2NzEuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDE1MDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2NzEpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gNzc0OC4wMTg1NTQ2ODc1LCA1NjA2LjgwNjE1MjM0Mzc1LCAtIDIzMDUuODk4NjgxNjQwNjI1KSk7CiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIlRodW5kZXIgR29kIikgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGh1bmRlciBHb2QiKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY3MiA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvU2F3IiwgewogICAgVGl0bGUgPSAiQXV0byBTaGFyayBTYXciLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjcyOk9uQ2hhbmdlZChmdW5jdGlvbih2MjYyKQogICAgX0cuQXV0b19TYXcgPSB2MjYyOwplbmQpOwp2MTcuVG9nZ2xlQXV0b1NhdzpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHY3MSA9IENGcmFtZS5uZXcoLSA2OTAuMzMwODEwNTQ2ODgsIDE1LjA5NDI1MTYzMjY5LCAxNTgyLjIzODAzNzEwOTQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX1NhdyB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiVGhlIFNhdyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwNDQsIHYxMDQ1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNDUuTmFtZSA9PSAiVGhlIFNhdyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA0NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjEwNDU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxMDQ1Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQ1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0NS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0NS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwNDUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fU2F3IG9yIG5vdCB2MTA0NS5QYXJlbnQgb3IgKHYxMDQ1Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjcxLlBvc2l0aW9uKS5NYWduaXR1ZGUgPCAxNTAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odjcxKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDY5MC4zMzA4MTA1NDY4OCwgMTUuMDk0MjUxNjMyNjksIDE1ODIuMjM4MDM3MTA5NCkpOwogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJUaGUgU2F3IikgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiVGhlIFNhdyIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjczID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9XYXJkZW4iLCB7CiAgICBUaXRsZSA9ICJBdXRvIFdhcmRlbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NzM6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNjMpCiAgICBfRy5BdXRvX1dhcmRlbiA9IHYyNjM7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvV2FyZGVuOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjc0ID0gQ0ZyYW1lLm5ldyg1MTg2LjE0Njk3MjY1NjI1LCAyNC44NjY4NDIyNjk4OTc0NiwgODMyLjE4ODUzNzU5NzY1NjIpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX1dhcmRlbiB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2hpZWYgV2FyZGVuIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTA0NiwgdjEwNDcgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA0Ny5OYW1lID09ICJDaGllZiBXYXJkZW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNDc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMDQ3OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTA0Ny5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0Ny5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDcuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNDcuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDQ3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX1dhcmRlbiBvciBub3QgdjEwNDcuUGFyZW50IG9yICh2MTA0Ny5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHY3NC5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMTUwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY3NCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNTE4Ni4xNDY5NzI2NTYyNSwgMjQuODY2ODQyMjY5ODk3NDYsIDgzMi4xODg1Mzc1OTc2NTYyKSk7CiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkNoaWVmIFdhcmRlbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkNoaWVmIFdhcmRlbiIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKaWYgU2VhMyB0aGVuCiAgICBsb2NhbCB2NTMzID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUhhbGxvdyIsIHsKICAgICAgICBUaXRsZSA9ICJIYWxsb3cgU2N5dGhlIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTMzOk9uQ2hhbmdlZChmdW5jdGlvbih2NjQwKQogICAgICAgIEF1dG9IYWxsb3dTeWN0aGUgPSB2NjQwOwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVIYWxsb3c6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBBdXRvSGFsbG93U3ljdGhlIHRoZW4KICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNvdWwgUmVhcGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NjIsIHYxNDYzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjE0NjMuTmFtZSwgIlNvdWwgUmVhcGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2My5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NjMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2My5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWUuUGxheWVycy5Mb2NhbFBsYXllciwgIlNpbXVsYXRpb25SYWRpdXMiLCBtYXRoLmh1Z2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICh2MTQ2My5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3IgKEF1dG9IYWxsb3dTeWN0aGUgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiSGFsbG93IEVzc2VuY2UiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkhhbGxvdyBFc3NlbmNlIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gODkzMi4zMjIyNjU2MjUsIDE0Ni44MzE1NDI5Njg3NSwgNjA2Mi41NTA3ODEyNSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoQ0ZyYW1lLm5ldygtIDg5MzIuMzIyMjY1NjI1LCAxNDYuODMxNTQyOTY4NzUsIDYwNjIuNTUwNzgxMjUpLlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gOAogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbCgiSGFsbG93IEVzc2VuY2UiKTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJTb3VsIFJlYXBlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJTb3VsIFJlYXBlciIpLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgQXV0b0hhbGxvd1N5Y3RoZSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2ODU3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJCb25lcyIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkJ1eSIsCiAgICAgICAgICAgICAgICAgICAgWzNdID0gMSwKICAgICAgICAgICAgICAgICAgICBbNF0gPSAxCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjg1NykpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CiAgICBsb2NhbCB2NTM0ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZVlhbWEiLCB7CiAgICAgICAgVGl0bGUgPSAiWWFtYSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUzNDpPbkNoYW5nZWQoZnVuY3Rpb24odjY0MSkKICAgICAgICBfRy5BdXRvWWFtYSA9IHY2NDE7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZVlhbWE6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvWWFtYSB0aGVuCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRWxpdGVIdW50ZXIiLCAiUHJvZ3Jlc3MiKSA+PSAzMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLldhdGVyZmFsbC5TZWFsZWRLYXRhbmEuSGFuZGxlLkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgIHVudGlsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJZYW1hIikgb3Igbm90IF9HLkF1dG9ZYW1hCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUzNSA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVUdXNoaXRhIiwgewogICAgICAgIFRpdGxlID0gIlR1c2hpdGEiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1MzU6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2NDIpCiAgICAgICAgQXV0b1R1c2hpdGEgPSB2NjQyOwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVUdXNoaXRhOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgQXV0b1R1c2hpdGEgdGhlbgogICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJMb25nbWEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMzQwLCB2MTM0MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTM0MS5OYW1lID09ICgiTG9uZ21hIiBvciAodjEzNDEuTmFtZSA9PSAiTG9uZ21hIikpKSBhbmQgKHYxMzQxLkh1bWFub2lkLkhlYWx0aCA+IDApIGFuZCB2MTM0MTpJc0EoIk1vZGVsIikgYW5kIHYxMzQxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTM0MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKFNlbGVjdFdlYXBvbikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTM0MS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM0MS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM0MS5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQxLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDEuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDEuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMzQxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBBdXRvVHVzaGl0YSBvciBub3QgdjEzNDEuUGFyZW50IG9yICh2MTM0MS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEwMjM4Ljg3NTk3NjU2MywgMzg5Ljc5MTI5MDI4MzIsIC0gOTU0OS43OTM5NDUzMTI1KSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwogICAgbG9jYWwgdjUzNiA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVIb2x5IiwgewogICAgICAgIFRpdGxlID0gIkxpZ2h0IFRoZSBIb2x5IFRvcmNoIiwKICAgICAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgICAgIERlZmF1bHQgPSBmYWxzZQogICAgfSk7CiAgICB2NTM2Ok9uQ2hhbmdlZChmdW5jdGlvbih2NjQzKQogICAgICAgIF9HLkF1dG9fSG9seV9Ub3JjaCA9IHY2NDM7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUhvbHk6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvX0hvbHlfVG9yY2ggdGhlbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEwNzUyLCA0MTcsIC0gOTM2NikpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fSG9seV9Ub3JjaCBvciAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KC0gMTA3NTIsIDQxNywgLSA5MzY2KSkuTWFnbml0dWRlIDw9IDEwKQogICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDExNjcyLCAzMzQsIC0gOTQ3NCkpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fSG9seV9Ub3JjaCBvciAoKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFZlY3RvcjMubmV3KC0gMTE2NzIsIDMzNCwgLSA5NDc0KSkuTWFnbml0dWRlIDw9IDEwKQogICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEyMTMyLCA1MjEsIC0gMTA2NTUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX0hvbHlfVG9yY2ggb3IgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygtIDEyMTMyLCA1MjEsIC0gMTA2NTUpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTMzMzYsIDQ4NiwgLSA2OTg1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19Ib2x5X1RvcmNoIG9yICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoLSAxMzMzNiwgNDg2LCAtIDY5ODUpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTM0ODksIDMzMiwgLSA3OTI1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19Ib2x5X1RvcmNoIG9yICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoLSAxMzQ4OSwgMzMyLCAtIDc5MjUpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZApsb2NhbCB2NzUgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b0NhbnZhbmRlciIsIHsKICAgIFRpdGxlID0gIkF1dG8gQ2FudmFuZGVyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY3NTpPbkNoYW5nZWQoZnVuY3Rpb24odjI2NCkKICAgIF9HLkF1dG9fQ2FudmFuZGVyID0gdjI2NDsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9DYW52YW5kZXI6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2NzEgPSBDRnJhbWUubmV3KDUzMTEuMDc0MjE4NzUsIDQyNi4wMjQzODM1NDQ5MjE5LCAxNjUuMTI3NjI0NTExNzE4NzUpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX0NhbnZhbmRlciB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQmVhdXRpZnVsIFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwNDgsIHYxMDQ5IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNDkuTmFtZSA9PSAiQmVhdXRpZnVsIFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA0OTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjEwNDk6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxMDQ5Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDQ5Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0OS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA0OS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwNDkuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fQ2FudmFuZGVyIG9yIG5vdCB2MTA0OS5QYXJlbnQgb3IgKHYxMDQ5Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjcxLlBvc2l0aW9uKS5NYWduaXR1ZGUgPCAxNTAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odjcxKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg1MzExLjA3NDIxODc1LCA0MjYuMDI0MzgzNTQ0OTIxOSwgMTY1LjEyNzYyNDUxMTcxODc1KSk7CiAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkJlYXV0aWZ1bCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJCZWF1dGlmdWwgUGlyYXRlIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NzYgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b011c2tldGVlckhhdCIsIHsKICAgIFRpdGxlID0gIkF1dG8gTXVza2V0ZWVyIEhhdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2NzY6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNjUpCiAgICBfRy5BdXRvX011c2tldGVlckhhdCA9IHYyNjU7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvTXVza2V0ZWVySGF0OlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoMC4xKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvX011c2tldGVlckhhdCB0aGVuCiAgICAgICAgICAgICAgICBpZiAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWUgPj0gMTgwMCkgYW5kIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDaXRpemVuUXVlc3RQcm9ncmVzcyIpLktpbGxlZEJhbmRpdHMgPT0gZmFsc2UpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJGb3Jlc3QgUGlyYXRlIikgYW5kIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICI1MCIpIGFuZCAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZSA9PSB0cnVlKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkZvcmVzdCBQaXJhdGUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE1NTksIHYxNTYwIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTU2MC5OYW1lID09ICJGb3Jlc3QgUGlyYXRlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTYwLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNTYwLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTU2MC5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9zTW9uID0gdjE1NjAuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNTYwLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9fTXVza2V0ZWVySGF0ID09IGZhbHNlKSBvciBub3QgdjE1NjAuUGFyZW50IG9yICh2MTU2MC5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3IgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMzIwNi40NTIxNDg0MzgsIDQyNS44OTE5OTgyOTEwMiwgLSA3OTY0LjU1MzcxMDkzNzUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTI0NDMuODY3MTg3NSwgMzMyLjQwMzk2MTE4MTY0LCAtIDc2NzUuNDg5MjU3ODEyNSkpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKFZlY3RvcjMubmV3KC0gMTI0NDMuODY3MTg3NSwgMzMyLjQwMzk2MTE4MTY0LCAtIDc2NzUuNDg5MjU3ODEyNSkgLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDMwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdGFydFF1ZXN0IiwgIkNpdGl6ZW5RdWVzdCIsIDEpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWUgPj0gMTgwMCkgYW5kIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDaXRpemVuUXVlc3RQcm9ncmVzcyIpLktpbGxlZEJvc3MgPT0gZmFsc2UpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgYW5kIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJDYXB0YWluIEVsZXBoYW50IikgYW5kIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlID09IHRydWUpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2FwdGFpbiBFbGVwaGFudCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTY2NSwgdjE2NjYgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNjY2Lk5hbWUgPT0gIkNhcHRhaW4gRWxlcGhhbnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9sZENGcmFtZUVsZXBoYW50ID0gdjE2NjYuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjYuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NjYuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE2NjYuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjY2Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjY2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gT2xkQ0ZyYW1lRWxlcGhhbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9fTXVza2V0ZWVySGF0ID09IGZhbHNlKSBvciAodjE2NjYuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTY2Ni5QYXJlbnQgb3IgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEzMzc0Ljg4OTY0ODQzOCwgNDIxLjI3NzUyNjg1NTQ3LCAtIDgyMjUuMjA4OTg0Mzc1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEyNDQzLjg2NzE4NzUsIDMzMi40MDM5NjExODE2NCwgLSA3Njc1LjQ4OTI1NzgxMjUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChDRnJhbWUubmV3KC0gMTI0NDMuODY3MTg3NSwgMzMyLjQwMzk2MTE4MTY0LCAtIDc2NzUuNDg5MjU3ODEyNSkuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDQpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNpdGl6ZW5RdWVzdFByb2dyZXNzIiwgIkNpdGl6ZW4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlID49IDE4MDApIGFuZCAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2l0aXplblF1ZXN0UHJvZ3Jlc3MiLCAiQ2l0aXplbiIpID09IDIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEyNTEyLjEzODY3MTg3NSwgMzQwLjM5Mjc5MTc0ODA1LCAtIDk4NzIuODIwMzEyNSkpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKbG9jYWwgdjc3ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9PYnNlcnZhdGlvblYyIiwgewogICAgVGl0bGUgPSAiQXV0byBPYnNlcnZhdGlvbiBWMiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2Nzc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNjYpCiAgICBfRy5BdXRvX09ic2VydmF0aW9uVjIgPSB2MjY2OwplbmQpOwp2MTcuVG9nZ2xlQXV0b09ic2VydmF0aW9uVjI6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9fT2JzZXJ2YXRpb25WMiB0aGVuCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ2l0aXplblF1ZXN0UHJvZ3Jlc3MiLCAiQ2l0aXplbiIpID09IDMpIHRoZW4KICAgICAgICAgICAgICAgICAgICBfRy5BdXRvX011c2tldGVlckhhdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQmFuYW5hIikgYW5kIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJBcHBsZSIpIGFuZCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUGluZWFwcGxlIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTI0NDQuNzg1MTU2MjUsIDMzMi40MDM5NjExODE2NCwgLSA3NjczLjE4MDY2NDA2MjUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fT2JzZXJ2YXRpb25WMiBvciAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoLSAxMjQ0NC43ODUxNTYyNSwgMzMyLjQwMzk2MTE4MTY0LCAtIDc2NzMuMTgwNjY0MDYyNSkpLk1hZ25pdHVkZSA8PSAxMCkKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDaXRpemVuUXVlc3RQcm9ncmVzcyIsICJDaXRpemVuIik7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRnJ1aXQgQm93bCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiRnJ1aXQgQm93bCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEwOTIwLjEyNSwgNjI0LjIwMjc1ODc4OTA2LCAtIDEwMjY2Ljk5NTExNzE4OCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19PYnNlcnZhdGlvblYyIG9yICgoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBWZWN0b3IzLm5ldygtIDEwOTIwLjEyNSwgNjI0LjIwMjc1ODc4OTA2LCAtIDEwMjY2Ljk5NTExNzE4OCkpLk1hZ25pdHVkZSA8PSAxMCkKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJLZW5UYWxrMiIsICJTdGFydCIpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJLZW5UYWxrMiIsICJCdXkiKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTU2MSwgdjE1NjIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTU2Mi5OYW1lID09ICJBcHBsZSIpIG9yICh2MTU2Mi5OYW1lID09ICJCYW5hbmEiKSBvciAodjE1NjIuTmFtZSA9PSAiUGluZWFwcGxlIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTU2Mi5IYW5kbGUuQ0ZyYW1lID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAxLCAxMCkgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCwgdjE1NjIuSGFuZGxlLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgX0cuQXV0b19NdXNrZXRlZXJIYXQgPSB0cnVlOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjc4ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9SYWluYm93SGFraSIsIHsKICAgIFRpdGxlID0gIkF1dG8gUmFpbmJvdyBIYWtpIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY3ODpPbkNoYW5nZWQoZnVuY3Rpb24odjI2NykKICAgIF9HLkF1dG9fUmFpbmJvd0hha2kgPSB2MjY3OwplbmQpOwp2MTcuVG9nZ2xlQXV0b1JhaW5ib3dIYWtpOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoMC4xKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvX1JhaW5ib3dIYWtpIHRoZW4KICAgICAgICAgICAgICAgIGlmIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5WaXNpYmxlIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTE4OTIuMDcwMzEyNSwgOTMwLjU3NjcyMTE5MTQxLCAtIDg3NjAuMTU5MTc5Njg3NSkpOwogICAgICAgICAgICAgICAgICAgIGlmICgoVmVjdG9yMy5uZXcoLSAxMTg5Mi4wNzAzMTI1LCA5MzAuNTc2NzIxMTkxNDEsIC0gODc2MC4xNTkxNzk2ODc1KSAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMzApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJIb3JuZWRNYW4iLCAiQmV0Iik7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgYW5kIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJTdG9uZSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJTdG9uZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNTYzLCB2MTU2NCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTU2NC5OYW1lID09ICJTdG9uZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbGRDRnJhbWVSYWluYm93ID0gdjE1NjQuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNTY0Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1NjQuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTY0Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gT2xkQ0ZyYW1lUmFpbmJvdzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1NjQuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19SYWluYm93SGFraSBvciAodjE1NjQuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTU2NC5QYXJlbnQgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMDg2LjExNjIxLCAzOC44NDI1OTAzLCA2NzY4LjcxNDM2KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUgYW5kIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJIeWRyYSBMZWFkZXIiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiSHlkcmEgTGVhZGVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE2NjksIHYxNjcwIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNjcwLk5hbWUgPT0gIkh5ZHJhIExlYWRlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbGRDRnJhbWVSYWluYm93ID0gdjE2NzAuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNjcwLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NzAuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjcwLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gT2xkQ0ZyYW1lUmFpbmJvdzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NzAuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19SYWluYm93SGFraSBvciAodjE2NzAuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTY3MC5QYXJlbnQgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNTcxMy45ODg3NywgNjAxLjkyMjk3NCwgMjAyLjc1MTI1MSkpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJLaWxvIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJLaWxvIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTc2MiwgdjE3NjMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE3NjMuTmFtZSA9PSAiS2lsbyBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9sZENGcmFtZVJhaW5ib3cgPSB2MTc2My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE3NjMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc2My5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE3NjMuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzYzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gT2xkQ0ZyYW1lUmFpbmJvdzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX1JhaW5ib3dIYWtpIG9yICh2MTc2My5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxNzYzLlBhcmVudCBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygyODc3LjYxNzQzLCA0MjMuNTU4Njg1LCAtIDcyMDcuMzEwMDYpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiBzdHJpbmcuZmluZChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5RdWVzdC5Db250YWluZXIuUXVlc3RUaXRsZS5UaXRsZS5UZXh0LCAiQ2FwdGFpbiBFbGVwaGFudCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkNhcHRhaW4gRWxlcGhhbnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTc3NCwgdjE3NzUgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE3NzUuTmFtZSA9PSAiQ2FwdGFpbiBFbGVwaGFudCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbGRDRnJhbWVSYWluYm93ID0gdjE3NzUuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNzc1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE3NzUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNzc1Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc3NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IE9sZENGcmFtZVJhaW5ib3c7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b19SYWluYm93SGFraSBvciAodjE3NzUuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIG5vdCB2MTc3NS5QYXJlbnQgb3Igbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LlZpc2libGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMzQ4NS4wMjgzLCAzMzEuNzA5MjU5LCAtIDgwMTIuNDg3MykpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLlBsYXllckd1aS5NYWluLlF1ZXN0LkNvbnRhaW5lci5RdWVzdFRpdGxlLlRpdGxlLlRleHQsICJCZWF1dGlmdWwgUGlyYXRlIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQmVhdXRpZnVsIFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxODAyLCB2MTgwMyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTgwMy5OYW1lID09ICJCZWF1dGlmdWwgUGlyYXRlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9sZENGcmFtZVJhaW5ib3cgPSB2MTgwMy5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE4MDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwMy5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDMuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODAzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gT2xkQ0ZyYW1lUmFpbmJvdzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5BdXRvX1JhaW5ib3dIYWtpIG9yICh2MTgwMy5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxODAzLlBhcmVudCBvciBub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUXVlc3QuVmlzaWJsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg1MzEyLjM1OTg2MzI4MTMsIDIwLjE0MTIwMTAxOTI4NywgLSAxMC4xNTg1Mzg4MTgzNTkpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTE4OTIuMDcwMzEyNSwgOTMwLjU3NjcyMTE5MTQxLCAtIDg3NjAuMTU5MTc5Njg3NSkpOwogICAgICAgICAgICAgICAgICAgIGlmICgoVmVjdG9yMy5uZXcoLSAxMTg5Mi4wNzAzMTI1LCA5MzAuNTc2NzIxMTkxNDEsIC0gODc2MC4xNTkxNzk2ODc1KSAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMzApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJIb3JuZWRNYW4iLCAiQmV0Iik7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2NzkgPSB2MTYuSVRNOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1NrdWxsR3VpdGFyIiwgewogICAgVGl0bGUgPSAiQXV0byBTa3VsbCBHdWl0YXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjc5Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjY4KQogICAgX0cuQXV0b19Ta3VsbEd1aXRhciA9IHYyNjg7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvU2t1bGxHdWl0YXI6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9fU2t1bGxHdWl0YXIgdGhlbgogICAgICAgICAgICAgICAgaWYgKEdldFdlYXBvbkludmVudG9yeSgiU2t1bGwgR3VpdGFyIikgPT0gZmFsc2UpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoKENGcmFtZS5uZXcoLSA5NjgxLjQ1ODk4NDM3NSwgNi4xMzk4ODA2NTcxOTYwNDUsIDYzNDEuMzcyMDcwMzEyNSkuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDUwMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5OUENzOkZpbmRGaXJzdENoaWxkKCJTa2VsZXRvbiBNYWNoaW5lIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigic291bEd1aXRhckJ1eSIsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLkNhbmRsZTEuVHJhbnNwYXJlbmN5ID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5QbGFjYXJkMS5MZWZ0LlBhcnQuVHJhbnNwYXJlbmN5ID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBRdWVzdDIgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA4NzYyLjY5MTQwNjI1LCAxNzYuODQ3ODM5MzU1NDY4NzUsIDYxNzEuMzA3NjE3MTg3NSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICgoQ0ZyYW1lLm5ldygtIDg3NjIuNjkxNDA2MjUsIDE3Ni44NDc4MzkzNTU0Njg3NSwgNjE3MS4zMDc2MTcxODc1KS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMykgb3Igbm90IF9HLkF1dG9fU2t1bGxHdWl0YXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlBsYWNhcmQ3LkxlZnQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5QbGFjYXJkNi5MZWZ0LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uUGxhY2FyZDUuTGVmdC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlBsYWNhcmQ0LlJpZ2h0LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uUGxhY2FyZDMuTGVmdC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdLlBsYWNhcmQyLlJpZ2h0LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uUGxhY2FyZDEuUmlnaHQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXS5UYWJsZXQuU2VnbWVudDE6RmluZEZpcnN0Q2hpbGQoIkNsaWNrRGV0ZWN0b3IiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQxOkZpbmRGaXJzdENoaWxkKCJDbGlja0RldGVjdG9yIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBRdWVzdDQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA5NTUzLjU5ODYzMjgxMjUsIDY1LjYyMzM4MjU2ODM1OTM4LCA2MDQxLjU4ODM3ODkwNjI1KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICgoQ0ZyYW1lLm5ldygtIDk1NTMuNTk4NjMyODEyNSwgNjUuNjIzMzgyNTY4MzU5MzgsIDYwNDEuNTg4Mzc4OTA2MjUpLlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAzKSBvciBub3QgX0cuQXV0b19Ta3VsbEd1aXRhcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDMuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQzLkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQ0LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDQuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0NC5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQ2LkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0Ni5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQ2LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDguQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl1bIkxhYiBQdXp6bGUiXS5Db2xvckZsb29yLk1vZGVsLlBhcnQ4LkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiSGF1bnRlZCBDYXN0bGUiXVsiTGFiIFB1enpsZSJdLkNvbG9yRmxvb3IuTW9kZWwuUGFydDEwLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0MTAuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0MTAuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJIYXVudGVkIENhc3RsZSJdWyJMYWIgUHV6emxlIl0uQ29sb3JGbG9vci5Nb2RlbC5QYXJ0MTAuQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBRdWVzdDMgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTlBDczpGaW5kRmlyc3RDaGlsZCgiR2hvc3QiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNzk4ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWzFdID0gIkd1aXRhclB1enpsZVByb2dyZXNzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsyXSA9ICJHaG9zdCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjE3OTgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJMaXZpbmcgWm9tYmllIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE4MDQsIHYxODA1IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTgwNTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCB2MTgwNTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgKHYxODA1Lkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxODA1Lk5hbWUgPT0gIkxpdmluZyBab21iaWUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwNS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDUuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwNS5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwNS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgwNS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MDUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAyMCwgMCkgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTAxNjAuNzg3MTA5Mzc1LCAxMzguNjYxNjk3Mzg3Njk1MywgNTk1NS4wMzA3NjE3MTg3NSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxVc2VyIik6Q2FwdHVyZUNvbnRyb2xsZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsVXNlciIpOkJ1dHRvbjFEb3duKFZlY3RvcjIubmV3KDEyODAsIDY3MikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEwMTYwLjc4NzEwOTM3NSwgMTM4LjY2MTY5NzM4NzY5NTMsIDU5NTUuMDMwNzYxNzE4NzUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgc3RyaW5nLmZpbmQoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiZ3JhdmVzdG9uZUV2ZW50IiwgMiksICJFcnJvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA4NjUzLjIwNjA1NDY4NzUsIDE0MC45ODQ4Nzg1NDAwMzkwNiwgNjE2MC4wMzMyMDMxMjUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIHN0cmluZy5maW5kKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoImdyYXZlc3RvbmVFdmVudCIsIDIpLCAiTm90aGluZyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKCJXYWl0IEZ1bGwgTW9vbiIpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJncmF2ZXN0b25lRXZlbnQiLCAyLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gOTY4MS40NTg5ODQzNzUsIDYuMTM5ODgwNjU3MTk2MDQ1LCA2MzQxLjM3MjA3MDMxMjUpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY4MCA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvQnVkZHkiLCB7CiAgICBUaXRsZSA9ICJBdXRvIEJ1ZGR5IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY4MDpPbkNoYW5nZWQoZnVuY3Rpb24odjI2OSkKICAgIF9HLkF1dG9fQnVkZHkgPSB2MjY5OwplbmQpOwp2MTcuVG9nZ2xlQXV0b0J1ZGR5OlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjgxID0gQ0ZyYW1lLm5ldygtIDczMS4yMDM0MzAxNzU3ODEyLCAzODEuNTY1ODg3NDUxMTcxOSwgLSAxMTE5OC40OTUxMTcxODc1KTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19CdWRkeSB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBRdWVlbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwNTAsIHYxMDUxIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNTEuTmFtZSA9PSAiQ2FrZSBRdWVlbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTA1MTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgdjEwNTE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHYxMDUxLkh1bWFub2lkLkhlYWx0aCA+IDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDUxLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA1MS5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA1MS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwNTEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fQnVkZHkgb3Igbm90IHYxMDUxLlBhcmVudCBvciAodjEwNTEuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2ODEuUG9zaXRpb24pLk1hZ25pdHVkZSA8IDE1MDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2Vlbih2ODEpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gNzMxLjIwMzQzMDE3NTc4MTIsIDM4MS41NjU4ODc0NTExNzE5LCAtIDExMTk4LjQ5NTExNzE4NzUpKTsKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBRdWVlbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkNha2UgUXVlZW4iKS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMiwgMjAsIDIpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY4MiA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvRHVhbEthdGFuYSIsIHsKICAgIFRpdGxlID0gIkF1dG8gQ0RLIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY4MjpPbkNoYW5nZWQoZnVuY3Rpb24odjI3MCkKICAgIF9HLkF1dG9fRHVhbEthdGFuYSA9IHYyNzA7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvRHVhbEthdGFuYTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b19EdWFsS2F0YW5hIHRoZW4KICAgICAgICAgICAgICAgIGlmIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJUdXNoaXRhIikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJUdXNoaXRhIikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiWWFtYSIpIG9yIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiWWFtYSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlR1c2hpdGEiKSBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlR1c2hpdGEiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlR1c2hpdGEiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woIlR1c2hpdGEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJZYW1hIikgb3IgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJZYW1hIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJZYW1hIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJZYW1hIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkxvYWRJdGVtIiwgIlR1c2hpdGEiKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b19EdWFsS2F0YW5hIHRoZW4KICAgICAgICAgICAgICAgIGlmIChHZXRNYXRlcmlhbCgiQWx1Y2FyZCBGcmFnbWVudCIpID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlByb2dyZXNzIiwgIkV2aWwiKTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJTdGFydFRyaWFsIiwgIkV2aWwiKTsKICAgICAgICAgICAgICAgIGVsc2VpZiAoR2V0TWF0ZXJpYWwoIkFsdWNhcmQgRnJhZ21lbnQiKSA9PSAxKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJQcm9ncmVzcyIsICJFdmlsIik7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiU3RhcnRUcmlhbCIsICJFdmlsIik7CiAgICAgICAgICAgICAgICBlbHNlaWYgKEdldE1hdGVyaWFsKCJBbHVjYXJkIEZyYWdtZW50IikgPT0gMikgdGhlbgogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiUHJvZ3Jlc3MiLCAiRXZpbCIpOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlN0YXJ0VHJpYWwiLCAiRXZpbCIpOwogICAgICAgICAgICAgICAgZWxzZWlmIChHZXRNYXRlcmlhbCgiQWx1Y2FyZCBGcmFnbWVudCIpID09IDMpIHRoZW4KICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8yID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlByb2dyZXNzIiwgIkdvb2QiKTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJTdGFydFRyaWFsIiwgIkdvb2QiKTsKICAgICAgICAgICAgICAgIGVsc2VpZiAoR2V0TWF0ZXJpYWwoIkFsdWNhcmQgRnJhZ21lbnQiKSA9PSA0KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8zID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJQcm9ncmVzcyIsICJHb29kIik7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiU3RhcnRUcmlhbCIsICJHb29kIik7CiAgICAgICAgICAgICAgICBlbHNlaWYgKEdldE1hdGVyaWFsKCJBbHVjYXJkIEZyYWdtZW50IikgPT0gNSkgdGhlbgogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfWWFtYV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1lhbWFfMyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIEF1dG9fUXVlc3RfVHVzaGl0YV8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBBdXRvX1F1ZXN0X1R1c2hpdGFfMyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiUHJvZ3Jlc3MiLCAiR29vZCIpOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlN0YXJ0VHJpYWwiLCAiR29vZCIpOwogICAgICAgICAgICAgICAgZWxzZWlmIChHZXRNYXRlcmlhbCgiQWx1Y2FyZCBGcmFnbWVudCIpID09IDYpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDdXJzZWQgU2tlbGV0b24gQm9zcyBbTHYuIDIwMjVdIFtCb3NzXSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuUmVwbGljYXRlZFN0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoIkN1cnNlZCBTa2VsZXRvbiBCb3NzIFtMdi4gMjAyNV0gW0Jvc3NdIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9ZYW1hXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b19RdWVzdF9UdXNoaXRhXzMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ3Vyc2VkIFNrZWxldG9uIEJvc3MgW0x2LiAyMDI1XSBbQm9zc10iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkN1cnNlZCBTa2VsZXRvbiBbTHYuIDIyMDBdIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTg0MiwgdjE4NDMgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTg0My5OYW1lID09ICJDdXJzZWQgU2tlbGV0b24gQm9zcyIpIG9yICh2MTg0My5OYW1lID09ICJDdXJzZWQgU2tlbGV0b24iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE4NDMuSHVtYW5vaWQuSGVhbHRoID4gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFN3b3JkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxODQzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogcG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODQzLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4NDMuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4NDMuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxODQzLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTg0My5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyaW5nbW9iID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTg0My5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTg0My5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKChDRnJhbWUubmV3KC0gMTIzNjEuNzA2MDU0Njg3NSwgNjAzLjM1NDc5NzM2MzI4MTIsIC0gNjU1MC41MzQxNzk2ODc1KS5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDREtRdWVzdCIsICJQcm9ncmVzcyIsICJHb29kIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNES1F1ZXN0IiwgIlByb2dyZXNzIiwgIkV2aWwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDEyMzYxLjcwNjA1NDY4NzUsIDYwMy4zNTQ3OTczNjMyODEyLCAtIDY1NTAuNTM0MTc5Njg3NSkpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTIyNTMuNTQxOTkyMTg3NSwgNTk4Ljg5OTk2MzM3ODkwNjIsIC0gNjU0Ni44Mzg4NjcxODc1KSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTIzNjEuNzA2MDU0Njg3NSwgNjAzLjM1NDc5NzM2MzI4MTIsIC0gNjU1MC41MzQxNzk2ODc1KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBBdXRvX1F1ZXN0X1lhbWFfMSB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiTXl0aG9sb2dpY2FsIFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwNTIsIHYxMDUzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjEwNTMuTmFtZSA9PSAiTXl0aG9sb2dpY2FsIFBpcmF0ZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTA1My4KSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDAsIC0gMikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9fRHVhbEthdGFuYSA9PSBmYWxzZSkgb3IgKEF1dG9fUXVlc3RfWWFtYV8xID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ0RLUXVlc3QiLCAiU3RhcnRUcmlhbCIsICJFdmlsIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSAxMzQ1MS40NjQ4NDM3NSwgNTQzLjcxMjg5MDYyNSwgLSA2OTYxLjAwMjkyOTY4NzUpKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgQXV0b19RdWVzdF9ZYW1hXzIgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY4NTgsIHY4NTkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjg1OTpGaW5kRmlyc3RDaGlsZCgiSGF6ZUVTUCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjg1OS5IYXplRVNQLlNpemUgPSBVRGltMi5uZXcoNTAsIDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICB2ODU5LkhhemVFU1AuTWF4RGlzdGFuY2UgPSAiaW5mIjsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZm9yIHY4NjAsIHY4NjEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgdjg2MTpGaW5kRmlyc3RDaGlsZCgiSGF6ZUVTUCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjg2MS5IYXplRVNQLlNpemUgPSBVRGltMi5uZXcoNTAsIDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICB2ODYxLkhhemVFU1AuTWF4RGlzdGFuY2UgPSAiaW5mIjsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgZm9yIHY3MzEsIHY3MzIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICBpZiAoQXV0b19RdWVzdF9ZYW1hXzIgYW5kIHY3MzI6RmluZEZpcnN0Q2hpbGQoIkhhemVFU1AiKSBhbmQgKCh2NzMyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBGYXJtUG9zc0VzcC5Qb3NpdGlvbikubWFnbml0dWRlIDw9IDMwMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICB2NzMyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gRmFybVBvc3NFc3A7CiAgICAgICAgICAgICAgICAgICAgdjczMi5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB2NzMyLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgIGlmIG5vdCB2NzMyLkh1bWFub2lkUm9vdFBhcnQ6RmluZEZpcnN0Q2hpbGQoIkJvZHlWZWxvY2l0eSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwNTggPSBJbnN0YW5jZS5uZXcoIkJvZHlWZWxvY2l0eSIsIHY3MzIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMDU4Lk1heEZvcmNlID0gVmVjdG9yMy5uZXcoMSwgMSwgMSkgKiBtYXRoLmh1Z2UgOwogICAgICAgICAgICAgICAgICAgICAgICB2MTA1OC5WZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsIDAsIDApOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgQXV0b19RdWVzdF9ZYW1hXzIgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBmb3Igdjg2NSwgdjg2NiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODY2OkZpbmRGaXJzdENoaWxkKCJIYXplRVNQIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjg2Ni5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAyMDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjg2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFN3b3JkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2ODY2Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODY2Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NjYuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NjYuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODY2Lkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjg2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjg2Ni5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjg2Ni5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHY4NjYuSHVtYW5vaWQuSGVhbHRoIDw9IDApIGFuZCB2ODY2Lkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY4NjYuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIChfRy5BdXRvX0R1YWxLYXRhbmEgPT0gZmFsc2UpIG9yIChBdXRvX1F1ZXN0X1lhbWFfMiA9PSBmYWxzZSkgb3Igbm90IHY4NjYuUGFyZW50IG9yICh2ODY2Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3Qgdjg2NjpGaW5kRmlyc3RDaGlsZCgiSGF6ZUVTUCIpCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjEzNDIsIHYxMzQzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjEzNDM6RmluZEZpcnN0Q2hpbGQoIkhhemVFU1AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTM0My5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAyMDAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMzQzLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lTW9uICogQ0ZyYW1lLm5ldygyLCAyMCwgMikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEzNDMuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDIsIDIwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBBdXRvX1F1ZXN0X1lhbWFfMyB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiSGFsbG93IEVzc2VuY2UiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIkhhdW50ZWQgQ2FzdGxlIl0uU3VtbW9uZXIuRGV0ZWN0aW9uLkNGcmFtZSk7CiAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIkhlbGxEaW1lbnNpb24iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ3Vyc2VkIFNrZWxldG9uIFtMdi4gMjIwMF0iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkN1cnNlZCBTa2VsZXRvbiBbTHYuIDIyMDBdIFtCb3NzXSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiSGVsbCdzIE1lc3NlbmdlciBbTHYuIDIyMDBdIFtCb3NzXSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE2NDEsIHYxNjQyIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjE2NDIuTmFtZSA9PSAiQ3Vyc2VkIFNrZWxldG9uIikgb3IgKHYxNjQyLk5hbWUgPT0gIkN1cnNlZCBTa2VsZXRvbiIpIG9yICh2MTY0Mi5OYW1lID09ICJIZWxsJ3MgTWVzc2VuZ2VyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNjQyLkh1bWFub2lkLkhlYWx0aCA+IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU3dvcmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNjQyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY0Mi5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY0Mi5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NDIuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY0Mi5IdW1hbm9pZC5XYWxrU3BlZWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjQyLkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTY0Mi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb25GYXJtID0gdjE2NDIuTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTY0Mi5IdW1hbm9pZC5IZWFsdGggPD0gMCkgYW5kIHYxNjQyLkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjQyLkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICh2MTY0Mi5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxNjQyLlBhcmVudCBvciAoQXV0b19RdWVzdF9ZYW1hXzMgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5IZWxsRGltZW5zaW9uLlRvcmNoMS5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW0oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSGVsbERpbWVuc2lvbi5Ub3JjaDIuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkhlbGxEaW1lbnNpb24uVG9yY2gzLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5IZWxsRGltZW5zaW9uLkV4aXQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9fRHVhbEthdGFuYSA9PSBmYWxzZSkgb3IgKEF1dG9fUXVlc3RfWWFtYV8zID09IGZhbHNlKSBvciAoR2V0TWF0ZXJpYWwoIkFsdWNhcmQgRnJhZ21lbnQiKSA9PSAzKQogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNvdWwgUmVhcGVyIikgb3IgZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgiU291bCBSZWFwZXIgW0x2LiAyMTAwXSBbUmFpZCBCb3NzXSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJTb3VsIFJlYXBlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNjcxLCB2MTY3MiBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTY3Mi5OYW1lID09ICJTb3VsIFJlYXBlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE2NzIuSHVtYW5vaWQuSGVhbHRoID4gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNjcyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9fRHVhbEthdGFuYSA9PSBmYWxzZSkgb3IgKEF1dG9fUXVlc3RfWWFtYV8zID09IGZhbHNlKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiSGVsbERpbWVuc2lvbiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gOTU3MC4wMzMyMDMxMjUsIDMxNS45MzQ2OTIzODI4MTI1LCA2NzI2Ljg5MzA2NjQwNjI1KSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQm9uZXMiLCAiQnV5IiwgMSwgMSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBBdXRvX1F1ZXN0X1R1c2hpdGFfMSB0aGVuCiAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA5NTQ2Ljk5MDIzNDM3NSwgMjEuMTM5ODkyNTc4MTI1LCA0Njg2LjExNDI1NzgxMjUpKTsKICAgICAgICAgICAgd2FpdCg1KTsKICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDYxMjAuMDU3NjE3MTg3NSwgMTYuNDU1NzgwMDI5Mjk2ODc1LCAtIDIyNTAuNjk3MjY1NjI1KSk7CiAgICAgICAgICAgIHdhaXQoNSk7CiAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA5NTMzLjIzOTI1NzgxMjUsIDcuMjU0NDQ1NTUyODI1OTI4LCAtIDgzNzIuNjk5MjE4NzUpKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBBdXRvX1F1ZXN0X1R1c2hpdGFfMiB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmICgoQ0ZyYW1lLm5ldygtIDU1MzkuMzExNTIzNDM3NSwgMzEzLjgwMDUzNzEwOTM3NSwgLSAyOTcyLjM3MjMxNDQ1MzEyNSkuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSA1MDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEwNjEsIHYxMDYyIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXV0b19RdWVzdF9UdXNoaXRhXzIgYW5kIHYxMDYyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYxMDYyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCAodjEwNjIuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjEwNjIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMjAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTd29yZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxMDYyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNjIuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDYyLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNjIuSHVtYW5vaWQuSnVtcFBvd2VyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNjIuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEwNjIuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTA2Mi5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxMDYyLk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTA2Mi5IdW1hbm9pZC5IZWFsdGggPD0gMCkgYW5kIHYxMDYyLkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA2Mi5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICh2MTA2Mi5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxMDYyLlBhcmVudCBvciAoQXV0b19RdWVzdF9UdXNoaXRhXzIgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDU1NDUuMTI0MDIzNDM3NSwgMzEzLjgwMDUzNzEwOTM3NSwgLSAyOTc2LjYxNjQ1NTA3ODEyNSkpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgQXV0b19RdWVzdF9UdXNoaXRhXzMgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYWtlIFF1ZWVuIikgb3IgZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgiQ2FrZSBRdWVlbiBbTHYuIDIxNzVdIFtCb3NzXSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJDYWtlIFF1ZWVuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE0NjQsIHYxNDY1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDY1Lk5hbWUgPT0gIkNha2UgUXVlZW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDY1Lkh1bWFub2lkLkhlYWx0aCA+IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU3dvcmQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NjUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2NS5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2NS5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjUuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNDY1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNDY1Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxNDY1Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxNDY1Lkh1bWFub2lkLkhlYWx0aCA8PSAwKSBhbmQgdjE0NjUuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2NS5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKF9HLkF1dG9fRHVhbEthdGFuYSA9PSBmYWxzZSkgb3IgKEF1dG9fUXVlc3RfVHVzaGl0YV8zID09IGZhbHNlKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiSGVhdmVubHlEaW1lbnNpb24iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDcwOS4zMTMyOTM0NTcwMzEyLCAzODEuNjAwNTg1OTM3NSwgLSAxMTAxMS4zOTY0ODQzNzUpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiSGVhdmVubHlEaW1lbnNpb24iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ3Vyc2VkIFNrZWxldG9uIFtMdi4gMjIwMF0iKSBvciBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIkN1cnNlZCBTa2VsZXRvbiBbTHYuIDIyMDBdIFtCb3NzXSIpIG9yIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiSGVhdmVuJ3MgR3VhcmRpYW4gW0x2LiAyMjAwXSBbQm9zc10iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNjUwLCB2MTY1MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxNjUxLk5hbWUgPT0gIkN1cnNlZCBTa2VsZXRvbiIpIG9yICh2MTY1MS5OYW1lID09ICJDdXJzZWQgU2tlbGV0b24iKSBvciAodjE2NTEuTmFtZSA9PSAiSGVhdmVuJ3MgR3VhcmRpYW4iKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE2NTEuSHVtYW5vaWQuSGVhbHRoID4gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTd29yZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE2NTEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjUxLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjUxLkh1bWFub2lkUm9vdFBhcnQuVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY1MS5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjUxLkh1bWFub2lkLldhbGtTcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NTEuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNjUxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTY1MS5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHYxNjUxLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBhbmQgdjE2NTEuSHVtYW5vaWQ6RmluZEZpcnN0Q2hpbGQoIkFuaW1hdG9yIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2NTEuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgKHYxNjUxLkh1bWFub2lkLkhlYWx0aCA8PSAwKSBvciBub3QgdjE2NTEuUGFyZW50IG9yIChBdXRvX1F1ZXN0X1R1c2hpdGFfMyA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCg1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkhlYXZlbmx5RGltZW5zaW9uLlRvcmNoMS5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSGVhdmVubHlEaW1lbnNpb24uVG9yY2gyLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5IZWF2ZW5seURpbWVuc2lvbi5Ub3JjaDMuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkhlYXZlbmx5RGltZW5zaW9uLkV4aXQuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fRHVhbEthdGFuYSBvciBub3QgQXV0b19RdWVzdF9UdXNoaXRhXzMgb3IgKEdldE1hdGVyaWFsKCJBbHVjYXJkIEZyYWdtZW50IikgPT0gNikKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmlmIFNlYTIgdGhlbgogICAgbG9jYWwgdjUzNyA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVGYWN0b3J5IiwgewogICAgICAgIFRpdGxlID0gIkF1dG8gRmFjdG9yeSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUzNzpPbkNoYW5nZWQoZnVuY3Rpb24odjY0NCkKICAgICAgICBfRy5GYWN0b3J5ID0gdjY0NDsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlRmFjdG9yeTpTZXRWYWx1ZShmYWxzZSk7CiAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkZhY3RvcnkgdGhlbgogICAgICAgICAgICAgICAgaWYgZ2FtZS5Xb3Jrc3BhY2UuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiQ29yZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjEzNDQsIHYxMzQ1IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTM0NS5OYW1lID09ICJDb3JlIikgYW5kICh2MTM0NS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNDQ4LjQ2NzU2LCAxOTkuMzU2NzgxLCAtIDQ0MS4zODkyNTIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5GYWN0b3J5IG9yICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoNDQ4LjQ2NzU2LCAxOTkuMzU2NzgxLCAtIDQ0MS4zODkyNTIpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTM0NS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDUuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDUuSHVtYW5vaWRSb290UGFydC5UcmFuc3BhcmVuY3kgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMzQ1Lkh1bWFub2lkLkp1bXBQb3dlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDUuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTM0NS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYXJtUG9zID0gdjEzNDUuSHVtYW5vaWRSb290UGFydC5DRnJhbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uRmFybSA9IHYxMzQ1Lk5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgdjEzNDUuUGFyZW50IG9yICh2MTM0NS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3IgKF9HLkZhY3RvcnkgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZWxzZWlmIGdhbWUuUmVwbGljYXRlZFN0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoIkNvcmUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoNDQ4LjQ2NzU2LCAxOTkuMzU2NzgxLCAtIDQ0MS4zODkyNTIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgIHVudGlsIG5vdCBfRy5GYWN0b3J5IG9yICgoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gVmVjdG9yMy5uZXcoNDQ4LjQ2NzU2LCAxOTkuMzU2NzgxLCAtIDQ0MS4zODkyNTIpKS5NYWduaXR1ZGUgPD0gMTApCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQKbG9jYWwgdjgzID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9GYXJtU3dhbiIsIHsKICAgIFRpdGxlID0gIkF1dG8gU3dhbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2ODM6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzEpCiAgICBfRy5BdXRvX0Zhcm1Td2FuID0gdjI3MTsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9GYXJtU3dhbjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b0Zhcm1Td2FuIHRoZW4KICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgiRG9uIFN3YW4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxMDYzLCB2MTA2NCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2MTA2NC5OYW1lID09ICJEb24gU3dhbiIpIGFuZCAodjEwNjQuSHVtYW5vaWQuSGVhbHRoID4gMCkgYW5kIHYxMDY0OklzQSgiTW9kZWwiKSBhbmQgdjEwNjQ6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMDY0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKFNlbGVjdFdlYXBvbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMDY0Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTA2NC5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjEwNjQuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsIChfRy5BdXRvRmFybVN3YW4gPT0gZmFsc2UpIG9yICh2MTA2NC5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygyMjg0LjkxMjEwOTM3NSwgMTUuNTM3NjY2MzIwODAxLCA5MDUuNDgyOTEwMTU2MjUpKTsKICAgICAgICAgICAgICAgICAgICB1bnRpbCAoKENGcmFtZS5uZXcoMjI4NC45MTIxMDkzNzUsIDE1LjUzNzY2NjMyMDgwMSwgOTA1LjQ4MjkxMDE1NjI1KS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNCkgb3IgKF9HLkF1dG9GYXJtU3dhbiA9PSBmYWxzZSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHY4NCA9IHYxNi5JVE06QWRkVG9nZ2xlKCJUb2dnbGVBdXRvUmVuZ29rdSIsIHsKICAgIFRpdGxlID0gIlJlbmdva3UiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjg0Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjcyKQogICAgX0cuQXV0b19SZWdva3UgPSB2MjcyOwplbmQpOwp2MTcuVG9nZ2xlQXV0b1Jlbmdva3U6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIF9HLkF1dG9fUmVnb2t1IHRoZW4KICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiSGlkZGVuIEtleSIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGlkZGVuIEtleSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgRXF1aXBUb29sKCJIaWRkZW4gS2V5Iik7CiAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldyg2NTcxLjEyMDExNzE4NzUsIDI5OS4yMzAyODU2NDQ1MywgLSA2OTY3Ljg0MTc5Njg3NSkpOwogICAgICAgICAgICAgICAgZWxzZWlmIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIlNub3cgTHVya2VyIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJBcmN0aWMgV2FycmlvciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDY2LCB2MTQ2NyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgodjE0NjcuTmFtZSA9PSAiU25vdyBMdXJrZXIiKSBvciAodjE0NjcuTmFtZSA9PSAiQXJjdGljIFdhcnJpb3IiKSkgYW5kICh2MTQ2Ny5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjcuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjcuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNTAsIDUwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRmFybVBvcyA9IHYxNDY3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTQ2Ny5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNDY3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkhpZGRlbiBLZXkiKSBvciAoX0cuQXV0b19SZWdva3UgPT0gZmFsc2UpIG9yIG5vdCB2MTQ2Ny5QYXJlbnQgb3IgKHYxNDY3Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KDU0MzkuNzE2Nzk2ODc1LCA4NC40MjA5NDQyMTM4NjcsIC0gNjcxNS4xNjM1NzQyMTg4KSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwppZiAoU2VhMiBvciBTZWEzKSB0aGVuCiAgICBsb2NhbCB2NTM4ID0gdjE2LklUTTpBZGRUb2dnbGUoIlRvZ2dsZUhha2lDb2xvciIsIHsKICAgICAgICBUaXRsZSA9ICJCdXkgSGFraSBDb2xvciIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjUzODpPbkNoYW5nZWQoZnVuY3Rpb24odjY0NSkKICAgICAgICBfRy5BdXRvX0J1eV9FbmNoYW5jZW1lbnQgPSB2NjQ1OwogICAgZW5kKTsKICAgIHYxNy5Ub2dnbGVIYWtpQ29sb3I6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBfRy5BdXRvX0J1eV9FbmNoYW5jZW1lbnQgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjg2NyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiQ29sb3JzRGVhbGVyIiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiMiIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODY3KSk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kCmlmIFNlYTIgdGhlbgogICAgbG9jYWwgdjUzOSA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlU3dvcmRMZW5nZW5kIiwgewogICAgICAgIFRpdGxlID0gIkF1dG8gQnV5IExlbmdlbmRhcnkgU3dvcmQiLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgRGVmYXVsdCA9IGZhbHNlCiAgICB9KTsKICAgIHY1Mzk6T25DaGFuZ2VkKGZ1bmN0aW9uKHY2NDYpCiAgICAgICAgX0cuQnV5TGVuZ2VuZFN3b3JkID0gdjY0NjsKICAgIGVuZCk7CiAgICB2MTcuVG9nZ2xlU3dvcmRMZW5nZW5kOlNldFZhbHVlKGZhbHNlKTsKICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgKF9HLkJ1eUxlbmdlbmRTd29yZCBvciBUcmlwbGVfQSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY4OTcgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMZWdlbmRhcnlTd29yZERlYWxlciIsCiAgICAgICAgICAgICAgICAgICAgICAgIFsyXSA9ICIyIgogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjg5NykpOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kKTsKZW5kCmlmIFNlYTIgdGhlbgogICAgbG9jYWwgdjU0MCA9IHYxNi5NYWluOkFkZFRvZ2dsZSgiVG9nZ2xlRXZvUmFjZSIsIHsKICAgICAgICBUaXRsZSA9ICJBdXRvIFVwZ3JhZGUgUmFjZSBWMiIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBEZWZhdWx0ID0gZmFsc2UKICAgIH0pOwogICAgdjU0MDpPbkNoYW5nZWQoZnVuY3Rpb24odjY0NykKICAgICAgICBfRy5BdXRvRXZvUmFjZSA9IHY2NDc7CiAgICBlbmQpOwogICAgdjE3LlRvZ2dsZUV2b1JhY2U6U2V0VmFsdWUoZmFsc2UpOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgd2hpbGUgd2FpdCgwLjEpIGRvCiAgICAgICAgICAgICAgICBpZiBfRy5BdXRvRXZvUmFjZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZTpGaW5kRmlyc3RDaGlsZCgiRXZvbHZlZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFsY2hlbWlzdCIsICIxIikgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDI3NzkuODM1MjEsIDcyLjk2NjE0MDcsIC0gMzU3NC4wMjAwMiwgLSAwLjczMDQ4NDkwMywgNi4zOTAxNDFlLTgsIC0gMC42ODI5Mjg4NiwgMy41OTk2MzIyZS04LCAxLCA1LjUwNjY3MDNlLTgsIDAuNjgyOTI4ODYsIDEuNTY0MjQ2N2UtOCwgLSAwLjczMDQ4NDkwMykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChWZWN0b3IzLm5ldygtIDI3NzkuODM1MjEsIDcyLjk2NjE0MDcsIC0gMzU3NC4wMjAwMikgLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDQpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuMyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWxjaGVtaXN0IiwgIjIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFsY2hlbWlzdCIsICIxIikgPT0gMSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAxIikgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAxIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5GbG93ZXIxLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAyIikgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5GbG93ZXIyLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIChub3QgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAzIikgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZsb3dlciAzIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJab21iaWUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE4MzQsIHYxODM1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTgzNS5OYW1lID09ICJab21iaWUiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b0hha2koKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE4MzUuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE4MzUuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTgzNS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhcm1Qb3MgPSB2MTgzNS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vbkZhcm0gPSB2MTgzNS5OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJpbmdtb2IgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmxvd2VyIDMiKSBvciBub3QgdjE4MzUuUGFyZW50IG9yICh2MTgzNS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3IgKF9HLkF1dG9Fdm9SYWNlID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmluZ21vYiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoLSA1Njg1LjkyMzMzOTg0MzgsIDQ4LjQ4MDEyNTQyNzI0NiwgLSA4NTMuMjM3MjQzNjUyMzQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkFsY2hlbWlzdCIsICIxIikgPT0gMikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQWxjaGVtaXN0IiwgIjMiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZCk7CmVuZApsb2NhbCB2ODUgPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9UIiwgewogICAgVGl0bGUgPSAiQXV0byBUdXJuIE9uIFJhY2UgVjMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjg1Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjczKQogICAgX0cuQXV0b1QgPSB2MjczOwplbmQpOwp2MTcuVG9nZ2xlQXV0b1Q6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9UIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1FOkZpcmVTZXJ2ZXIoIkFjdGl2YXRlQWJpbGl0eSIpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY4NiA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1kiLCB7CiAgICBUaXRsZSA9ICJBdXRvIFR1cm4gT24gUmFjZSBWNCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2ODY6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzQpCiAgICBfRy5BdXRvWSA9IHYyNzQ7CmVuZCk7CnYxNy5Ub2dnbGVBdXRvWTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b1kgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJZIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAiWSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2ODcgPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9LZW4iLCB7CiAgICBUaXRsZSA9ICJBdXRvIEtlbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2ODc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzUpCiAgICBfRy5BdXRvS2VuID0gdjI3NTsKICAgIGlmIHYyNzUgdGhlbgogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1FOkZpcmVTZXJ2ZXIoIktlbiIsIHRydWUpOwogICAgZWxzZQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1FOkZpcmVTZXJ2ZXIoIktlbiIsIGZhbHNlKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlQXV0b0tlbjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b0tlbiB0aGVuCiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRTpGaXJlU2VydmVyKCJLZW4iLCB0cnVlKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2ODggPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZVNhdmVTcGF3biIsIHsKICAgIFRpdGxlID0gIkF1dG8gU2F2ZSBTcGF3bSBQb2ludCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2ODg6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzYpCiAgICBfRy5TYXZlU3Bhd24gPSB2Mjc2OwogICAgaWYgdjI3NiB0aGVuCiAgICAgICAgbG9jYWwgdjY0OCA9IHsKICAgICAgICAgICAgWzFdID0gIlNldFNwYXduUG9pbnQiCiAgICAgICAgfTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NjQ4KSk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZVNhdmVTcGF3bjpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuU2F2ZVNwYXduIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY3OTcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIlNldFNwYXduUG9pbnQiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjc5NykpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY4OSA9IHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5VdGlsLkNhbWVyYVNoYWtlcik7CnY4OTpTdG9wKCk7CmxvY2FsIHY5MCA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlQnJpbmdNb2IiLCB7CiAgICBUaXRsZSA9ICJCcmluZyBNb2IiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSB0cnVlCn0pOwp2OTA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyNzcpCiAgICBfRy5CcmluZ01vYiA9IHYyNzc7CmVuZCk7CnYxNy5Ub2dnbGVCcmluZ01vYjpTZXRWYWx1ZSh0cnVlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBmb3IgdjczMywgdjczNCBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgIGlmIChfRy5CcmluZ01vYiBhbmQgYnJpbmdtb2IpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoKHY3MzQuTmFtZSA9PSBNb25GYXJtKSBhbmQgdjczNDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWQiKSBhbmQgKHY3MzQuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY3MzQuTmFtZSA9PSAiRmFjdG9yeSBTdGFmZiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodjczNC5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gRmFybVBvcy5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwMDAwMDAwMDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWRSb290UGFydC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gRmFybVBvczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2NzM0Lkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmICh2NzM0Lk5hbWUgPT0gTW9uRmFybSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2NzM0Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBGYXJtUG9zLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMTAwMDAwMDAwMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBGYXJtUG9zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZFJvb3RQYXJ0LlRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZC5KdW1wUG93ZXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2NzM0Lkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZC5BbmltYXRvcjpEZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjczNC5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2NzM0LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY3MzQuSHVtYW5vaWQ6Q2hhbmdlU3RhdGUoMTQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWUuUGxheWVycy5Mb2NhbFBsYXllciwgIlNpbXVsYXRpb25SYWRpdXMiLCBtYXRoLmh1Z2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjkxID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVSZW1vdmVOb3RpZnkiLCB7CiAgICBUaXRsZSA9ICJSZW1vdmUgTm90aWZ5IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnY5MTpPbkNoYW5nZWQoZnVuY3Rpb24odjI3OCkKICAgIFJlbW92ZU5vdGlmeSA9IHYyNzg7CmVuZCk7CnYxNy5Ub2dnbGVSZW1vdmVOb3RpZnk6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBSZW1vdmVOb3RpZnkgdGhlbgogICAgICAgICAgICBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk5vdGlmaWNhdGlvbnMuRW5hYmxlZCA9IGZhbHNlOwogICAgICAgIGVsc2UKICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLlBsYXllckd1aS5Ob3RpZmljYXRpb25zLkVuYWJsZWQgPSB0cnVlOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY5MiA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlV2hpdGUiLCB7CiAgICBUaXRsZSA9ICJXaGl0ZSBTY3JlZW4iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjkyOk9uQ2hhbmdlZChmdW5jdGlvbih2Mjc5KQogICAgX0cuV2hpdGVTY3JlZW4gPSB2Mjc5OwogICAgaWYgKF9HLldoaXRlU2NyZWVuID09IHRydWUpIHRoZW4KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKTpTZXQzZFJlbmRlcmluZ0VuYWJsZWQoZmFsc2UpOwogICAgZWxzZWlmIChfRy5XaGl0ZVNjcmVlbiA9PSBmYWxzZSkgdGhlbgogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpOlNldDNkUmVuZGVyaW5nRW5hYmxlZCh0cnVlKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlV2hpdGU6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2OTMgPSB2MTYuU2V0dGluZzpBZGRTZWN0aW9uKCJTa2lsbCIpOwpsb2NhbCB2OTQgPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZVoiLCB7CiAgICBUaXRsZSA9ICJaIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gdHJ1ZQp9KTsKdjk0Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjgwKQogICAgU2tpbGxaID0gdjI4MDsKZW5kKTsKdjE3LlRvZ2dsZVo6U2V0VmFsdWUodHJ1ZSk7CmxvY2FsIHY5NSA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlWCIsIHsKICAgIFRpdGxlID0gIlgiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSB0cnVlCn0pOwp2OTU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYyODEpCiAgICBTa2lsbFggPSB2MjgxOwplbmQpOwp2MTcuVG9nZ2xlWDpTZXRWYWx1ZSh0cnVlKTsKbG9jYWwgdjk2ID0gdjE2LlNldHRpbmc6QWRkVG9nZ2xlKCJUb2dnbGVDIiwgewogICAgVGl0bGUgPSAiQyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IHRydWUKfSk7CnY5NjpPbkNoYW5nZWQoZnVuY3Rpb24odjI4MikKICAgIFNraWxsQyA9IHYyODI7CmVuZCk7CnYxNy5Ub2dnbGVDOlNldFZhbHVlKHRydWUpOwpsb2NhbCB2OTcgPSB2MTYuU2V0dGluZzpBZGRUb2dnbGUoIlRvZ2dsZVYiLCB7CiAgICBUaXRsZSA9ICJWIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gdHJ1ZQp9KTsKdjk3Ok9uQ2hhbmdlZChmdW5jdGlvbih2MjgzKQogICAgU2tpbGxWID0gdjI4MzsKZW5kKTsKdjE3LlRvZ2dsZVY6U2V0VmFsdWUodHJ1ZSk7CmxvY2FsIHY5OCA9IHYxNi5TZXR0aW5nOkFkZFRvZ2dsZSgiVG9nZ2xlRiIsIHsKICAgIFRpdGxlID0gIkYiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjk4Ok9uQ2hhbmdlZChmdW5jdGlvbih2Mjg0KQogICAgU2tpbGxGID0gdjI4NDsKZW5kKTsKdjE3LlRvZ2dsZUY6U2V0VmFsdWUodHJ1ZSk7CmxvY2FsIHY5OSA9IHYxNi5TdGF0dXM6QWRkUGFyYWdyYXBoKHsKICAgIFRpdGxlID0gIkluZm9ybWF0aW9uIiwKICAgIENvbnRlbnQgPSAi4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBXG4iIC4uICJOYW1lIDogIiAuLiBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuRGlzcGxheU5hbWUgLi4gIiAoQCIgLi4gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUgLi4gIilcbiIgLi4gIkxldmVsIDogIiAuLiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5EYXRhLkxldmVsLlZhbHVlIC4uICJcbiIgLi4gIkJlbGkgOiAiIC4uIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuQmVsaS5WYWx1ZSAuLiAiXG4iIC4uICJGcmFnbWVudHMgOiAiIC4uIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuRnJhZ21lbnRzLlZhbHVlIC4uICJcbiIgLi4gIldhbnRlZCBCZWxpIDogIiAuLiBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5sZWFkZXJzdGF0c1siQm91bnR5L0hvbm9yIl0uVmFsdWUgLi4gIlxuIiAuLiAiSFA6ICIgLi4gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggLi4gIi8iIC4uIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuTWF4SGVhbHRoIC4uICJcbiIgLi4gIkVuZXJneSA6ICIgLi4gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5FbmVyZ3kuVmFsdWUgLi4gIi8iIC4uIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuRW5lcmd5Lk1heFZhbHVlIC4uICJcbiIgLi4gIlJhY2UgOiAiIC4uIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSAuLiAiXG4iIC4uICJGcnVpdCA6ICIgLi4gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5EZXZpbEZydWl0LlZhbHVlIC4uICJcbiIgLi4gIuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSIKfSk7CmxvY2FsIHYxMDAgPSB2MTYuU3RhdHVzOkFkZFBhcmFncmFwaCh7CiAgICBUaXRsZSA9ICJUaW1lIiwKICAgIENvbnRlbnQgPSAiIgp9KTsKbG9jYWwgZnVuY3Rpb24gdjEwMSgpCiAgICBsb2NhbCB2Mjg1ID0gb3MuZGF0ZSgiKnQiKTsKICAgIGxvY2FsIHYyODYgPSB2Mjg1LmhvdXIgJSAyNCA7CiAgICBsb2NhbCB2Mjg3ID0gKCh2Mjg2IDwgMTIpIGFuZCAiQU0iKSBvciAiUE0iIDsKICAgIGxvY2FsIHYyODggPSBzdHJpbmcuZm9ybWF0KCIlMDJpOiUwMmk6JTAyaSAlcyIsICgodjI4NiAtIDEpICUgMTIpICsgMSwgdjI4NS5taW4sIHYyODUuc2VjLCB2Mjg3KTsKICAgIGxvY2FsIHYyODkgPSBzdHJpbmcuZm9ybWF0KCIlMDJkLyUwMmQvJTA0ZCIsIHYyODUuZGF5LCB2Mjg1Lm1vbnRoLCB2Mjg1LnllYXIpOwogICAgbG9jYWwgdjI5MCA9IGdhbWU6R2V0U2VydmljZSgiTG9jYWxpemF0aW9uU2VydmljZSIpOwogICAgbG9jYWwgdjI5MSA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOwogICAgbG9jYWwgdjI5MiA9IHYyOTEuTG9jYWxQbGF5ZXI7CiAgICBsb2NhbCB2MjkzID0gdjI5Mi5OYW1lOwogICAgbG9jYWwgdjI5NCA9ICJVbmtub3duIjsKICAgIGxvY2FsIHYyOTUsIHYyOTYgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgcmV0dXJuIHYyOTA6R2V0Q291bnRyeVJlZ2lvbkZvclBsYXllckFzeW5jKHYyOTIpOwogICAgZW5kKTsKICAgIGlmIHYyOTUgdGhlbgogICAgICAgIHYyOTQgPSB2Mjk2OwogICAgZW5kCiAgICB2MTAwOlNldERlc2ModjI4OSAuLiAiLSIgLi4gdjI4OCAuLiAiIFsgIiAuLiB2Mjk0IC4uICIgXSIpOwplbmQKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdHJ1ZSBkbwogICAgICAgIHYxMDEoKTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5SZW5kZXJTdGVwcGVkOldhaXQoKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2MTAyID0gdjE2LlN0YXR1czpBZGRQYXJhZ3JhcGgoewogICAgVGl0bGUgPSAiU2VydmVyIHRpbWUiLAogICAgQ29udGVudCA9ICIiCn0pOwpsb2NhbCBmdW5jdGlvbiB2MTAzKCkKICAgIGxvY2FsIHYyOTcgPSBtYXRoLmZsb29yKHdvcmtzcGFjZS5EaXN0cmlidXRlZEdhbWVUaW1lICsgMC41KTsKICAgIGxvY2FsIHYyOTggPSBtYXRoLmZsb29yKHYyOTcgLyAoNjAgXiAyKSkgJSAyNCA7CiAgICBsb2NhbCB2Mjk5ID0gbWF0aC5mbG9vcih2Mjk3IC8gNjApICUgNjAgOwogICAgbG9jYWwgdjMwMCA9IHYyOTcgJSA2MCA7CiAgICB2MTAyOlNldERlc2Moc3RyaW5nLmZvcm1hdCgiJTAyZCBUaeG6v25nLSUwMmQgUGjDunQtJTAyZCBHacOieSIsIHYyOTgsIHYyOTksIHYzMDApKTsKZW5kCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgcGNhbGwodjEwMyk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjEwNCA9IHYxNi5TdGF0dXM6QWRkUGFyYWdyYXBoKHsKICAgIFRpdGxlID0gIkZyb3plbiBEaW1lbnNpb24iLAogICAgQ29udGVudCA9ICIiCn0pOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwOkZpbmRGaXJzdENoaWxkKCJGcm96ZW5EaW1lbnNpb24iKSB0aGVuCiAgICAgICAgICAgICAgICB2MTA0OlNldERlc2MoIuKchSIpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB2MTA0OlNldERlc2MoIuKdjCIpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHYxMDUgPSB2MTYuU3RhdHVzOkFkZElucHV0KCJJbnB1dCIsIHsKICAgIFRpdGxlID0gIlNlcnZlciBJRCIsCiAgICBEZWZhdWx0ID0gIiIsCiAgICBQbGFjZWhvbGRlciA9ICIiLAogICAgTnVtZXJpYyA9IGZhbHNlLAogICAgRmluaXNoZWQgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odjMwMSkKICAgICAgICBfRy5Kb2IgPSB2MzAxOwogICAgZW5kCn0pOwp2MTYuU3RhdHVzOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJKb2luIFNlcnZlciBJRCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKTpUZWxlcG9ydFRvUGxhY2VJbnN0YW5jZShnYW1lLnBsYWNlSWQsIF9HLkpvYiwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyKTsKICAgIGVuZAp9KTsKdjE2LlN0YXR1czpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQ29weSBTZXJ2ZXIgSUQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIHNldGNsaXBib2FyZCh0b3N0cmluZyhnYW1lLkpvYklkKSk7CiAgICBlbmQKfSk7CmxvY2FsIHYxMDYgPSB2MTYuU3RhdHVzOkFkZFRvZ2dsZSgiTXlUb2dnbGUiLCB7CiAgICBUaXRsZSA9ICJTcGFtIEpvaW4gU2VydmVyIElEIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEwNjpPbkNoYW5nZWQoZnVuY3Rpb24odjMwMikKICAgIF9HLkpvaW4gPSB2MzAyOwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5Kb2luIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKTpUZWxlcG9ydFRvUGxhY2VJbnN0YW5jZShnYW1lLnBsYWNlSWQsIF9HLkpvYiwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyKTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTA3ID0gdjE2LlN0YXRzOkFkZFRvZ2dsZSgiVG9nZ2xlTWVsZWUiLCB7CiAgICBUaXRsZSA9ICJNZWxlZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTA3Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzAzKQogICAgX0cuQXV0b19TdGF0c19NZWxlZSA9IHYzMDM7CmVuZCk7CnYxNy5Ub2dnbGVNZWxlZTpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxMDggPSB2MTYuU3RhdHM6QWRkVG9nZ2xlKCJUb2dnbGVEZSIsIHsKICAgIFRpdGxlID0gIkRlZmVuc2UiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEwODpPbkNoYW5nZWQoZnVuY3Rpb24odjMwNCkKICAgIF9HLkF1dG9fU3RhdHNfRGVmZW5zZSA9IHYzMDQ7CmVuZCk7CnYxNy5Ub2dnbGVEZTpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxMDkgPSB2MTYuU3RhdHM6QWRkVG9nZ2xlKCJUb2dnbGVTd29yZCIsIHsKICAgIFRpdGxlID0gIlN3b3JkIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMDk6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMDUpCiAgICBfRy5BdXRvX1N0YXRzX1N3b3JkID0gdjMwNTsKZW5kKTsKdjE3LlRvZ2dsZVN3b3JkOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjExMCA9IHYxNi5TdGF0czpBZGRUb2dnbGUoIlRvZ2dsZUd1biIsIHsKICAgIFRpdGxlID0gIkd1biIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTEwOk9uQ2hhbmdlZChmdW5jdGlvbih2MzA2KQogICAgX0cuQXV0b19TdGF0c19HdW4gPSB2MzA2OwplbmQpOwp2MTcuVG9nZ2xlR3VuOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjExMSA9IHYxNi5TdGF0czpBZGRUb2dnbGUoIlRvZ2dsZUZydWl0IiwgewogICAgVGl0bGUgPSAiRnJ1aXQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjExMTpPbkNoYW5nZWQoZnVuY3Rpb24odjMwNykKICAgIF9HLkF1dG9fU3RhdHNfRGV2aWxfRnJ1aXQgPSB2MzA3OwplbmQpOwp2MTcuVG9nZ2xlRnJ1aXQ6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX1N0YXRzX0RldmlsX0ZydWl0IHRoZW4KICAgICAgICAgICAgbG9jYWwgdjczNyA9IHsKICAgICAgICAgICAgICAgIFsxXSA9ICJBZGRQb2ludCIsCiAgICAgICAgICAgICAgICBbMl0gPSAiRGVtb24gRnJ1aXQiLAogICAgICAgICAgICAgICAgWzNdID0gMwogICAgICAgICAgICB9OwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NzM3KSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19TdGF0c19HdW4gdGhlbgogICAgICAgICAgICBsb2NhbCB2NzM4ID0gewogICAgICAgICAgICAgICAgWzFdID0gIkFkZFBvaW50IiwKICAgICAgICAgICAgICAgIFsyXSA9ICJHdW4iLAogICAgICAgICAgICAgICAgWzNdID0gMwogICAgICAgICAgICB9OwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NzM4KSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19TdGF0c19Td29yZCB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3MzkgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiQWRkUG9pbnQiLAogICAgICAgICAgICAgICAgWzJdID0gIlN3b3JkIiwKICAgICAgICAgICAgICAgIFszXSA9IDMKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjczOSkpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9fU3RhdHNfRGVmZW5zZSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3NDAgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiQWRkUG9pbnQiLAogICAgICAgICAgICAgICAgWzJdID0gIkRlZmVuc2UiLAogICAgICAgICAgICAgICAgWzNdID0gMwogICAgICAgICAgICB9OwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2NzQwKSk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b19TdGF0c19NZWxlZSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHY3NDEgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiQWRkUG9pbnQiLAogICAgICAgICAgICAgICAgWzJdID0gIk1lbGVlIiwKICAgICAgICAgICAgICAgIFszXSA9IDMKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjc0MSkpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxMTIgPSB7fTsKZm9yIHYzMDgsIHYzMDkgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgIHRhYmxlLmluc2VydCh2MTEyLCB2MzA5Lk5hbWUpOwplbmQKbG9jYWwgdjExMyA9IHYxNi5QbGF5ZXI6QWRkRHJvcGRvd24oIlNlbGVjdGVkUGx5IiwgewogICAgVGl0bGUgPSAiU2VsZWN0IFBsYXllciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgVmFsdWVzID0gdjExMiwKICAgIE11bHRpID0gZmFsc2UsCiAgICBEZWZhdWx0ID0gMQp9KTsKdjExMzpTZXRWYWx1ZShfRy5TZWxlY3RQbHkpOwp2MTEzOk9uQ2hhbmdlZChmdW5jdGlvbih2MzEwKQogICAgX0cuU2VsZWN0UGx5ID0gdjMxMDsKZW5kKTsKdjE2LlBsYXllcjpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiTG9hZCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgdGFibGUuY2xlYXIodjExMik7CiAgICAgICAgZm9yIHY1NDEsIHY1NDIgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHYxMTIsIHY1NDIuTmFtZSk7CiAgICAgICAgZW5kCiAgICBlbmQKfSk7CmxvY2FsIHYxMTQgPSB2MTYuUGxheWVyOkFkZFRvZ2dsZSgiVG9nZ2xlVGVsZXBvcnQiLCB7CiAgICBUaXRsZSA9ICJUUCBUbyBQbGF5ZXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjExNDpPbkNoYW5nZWQoZnVuY3Rpb24odjMxMSkKICAgIF9HLlRlbGVwb3J0UGx5ID0gdjMxMTsKICAgIGlmICh2MzExID09IGZhbHNlKSB0aGVuCiAgICAgICAgd2FpdCgpOwogICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgVHdlZW4yKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSk7CiAgICAgICAgd2FpdCgpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVUZWxlcG9ydDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLlRlbGVwb3J0UGx5IHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgaWYgZ2FtZS5QbGF5ZXJzOkZpbmRGaXJzdENoaWxkKF9HLlNlbGVjdFBseSkgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuMihnYW1lLlBsYXllcnNbX0cuU2VsZWN0UGx5XS5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjU2ID0gdjE2LlBsYXllcjpBZGRTZWN0aW9uKCJPdGhlciIpOwpsb2NhbCB2MTE1ID0gdjE2LlBsYXllcjpBZGRUb2dnbGUoIlRvZ2dsZU5vQ2xpcCIsIHsKICAgIFRpdGxlID0gIk5vY2xpcCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IHRydWUKfSk7CnYxMTU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMTIpCiAgICBfRy5MT2YgPSB2MzEyOwplbmQpOwp2MTcuVG9nZ2xlTm9DbGlwOlNldFZhbHVlKHRydWUpOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuTE9mIHRoZW4KICAgICAgICAgICAgICAgIGZvciB2ODY4LCB2ODY5IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiB2ODY5OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHY4NjkuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQpOwplbmQpOwpsb2NhbCB2MTE2ID0gdjE2LlBsYXllcjpBZGRUb2dnbGUoIlRvZ2dsZVdhbGtvbldhdGVyIiwgewogICAgVGl0bGUgPSAiV2FsayBPbiBXYXRlciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IHRydWUKfSk7CnYxMTY6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMTMpCiAgICBfRy5XYWxrb25XYXRlciA9IHYzMTM7CmVuZCk7CnYxNy5Ub2dnbGVXYWxrb25XYXRlcjpTZXRWYWx1ZSh0cnVlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLldhbGtvbldhdGVyIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJXYXRlckJhc2UtUGxhbmUiXS5TaXplID0gVmVjdG9yMy5uZXcoMTAwMCwgMTEyLCAxMDAwKTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXBbIldhdGVyQmFzZS1QbGFuZSJdLlNpemUgPSBWZWN0b3IzLm5ldygxMDAwLCA4MCwgMTAwMCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjExNyA9IHYxNi5QbGF5ZXI6QWRkVG9nZ2xlKCJUb2dnbGVFbmFibGVQdnAiLCB7CiAgICBUaXRsZSA9ICJFbmFibGUgUFZQIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMTc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMTQpCiAgICBfRy5FbmFibGVkUHZQID0gdjMxNDsKZW5kKTsKdjE3LlRvZ2dsZUVuYWJsZVB2cDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuRW5hYmxlZFB2UCB0aGVuCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uUHZwRGlzYWJsZWQuVmlzaWJsZSA9PSB0cnVlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRW5hYmxlUHZwIik7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2MTE4ID0gdjE2LlRlbGVwb3J0OkFkZFNlY3Rpb24oIlNlYSIpOwpsb2NhbCB2MTE5ID0gdjE2LlRlbGVwb3J0OkFkZFRvZ2dsZSgiVG9nZ2xlQXV0b1NlYTIiLCB7CiAgICBUaXRsZSA9ICJBdXRvIFNlYSAyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMTk6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMTUpCiAgICBfRy5BdXRvX1NlYTIgPSB2MzE1OwplbmQpOwp2MTcuVG9nZ2xlQXV0b1NlYTI6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX1NlYTIgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCB2ODAwID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5MZXZlbC5WYWx1ZTsKICAgICAgICAgICAgICAgIGlmICgodjgwMCA+PSA3MDApIGFuZCBXb3JsZDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwLkljZS5Eb29yLkNhbkNvbGxpZGUgPT0gZmFsc2UpIGFuZCAoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSWNlLkRvb3IuVHJhbnNwYXJlbmN5ID09IDEpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzQ2ID0gQ0ZyYW1lLm5ldyg0ODQ5LjI5ODgzLCA1LjY1MTM4MTQ5LCA3MTkuNjExODc3KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2MTM0Nik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHVudGlsICgodjEzNDYuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDMpIG9yIChfRy5BdXRvX1NlYTIgPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS4xKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiRHJlc3Nyb3NhUXVlc3RQcm9ncmVzcyIsICJEZXRlY3RpdmUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woIktleSIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoMTM0Ny43MTI0LCAzNy4zNzUxNjAyLCAtIDEzMjUuNjQ4OCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoKFZlY3RvcjMubmV3KDEzNDcuNzEyNCwgMzcuMzc1MTYwMiwgLSAxMzI1LjY0ODgpIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAzKSBvciAoX0cuQXV0b19TZWEyID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuNSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICgoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuSWNlLkRvb3IuQ2FuQ29sbGlkZSA9PSBmYWxzZSkgYW5kIChnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcC5JY2UuRG9vci5UcmFuc3BhcmVuY3kgPT0gMSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJJY2UgQWRtaXJhbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTY4MCwgdjE2ODEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNjgxLk5hbWUgPT0gIkljZSBBZG1pcmFsIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90IHYxNjgxLkh1bWFub2lkLkhlYWx0aCA8PSAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE2ODE6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxNjgxOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kICh2MTY4MS5IdW1hbm9pZC5IZWFsdGggPiAwKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9sZENGcmFtZVNlY29uZCA9IHYxNjgxLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoX0cuRmFzdF9EZWxheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY4MS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2ODEuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2ODEuSGVhZC5DYW5Db2xsaWRlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjgxLkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUwLCA1MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTY4MS5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IE9sZENGcmFtZVNlY29uZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE2ODEuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9fU2VhMiBvciBub3QgdjE2ODEuUGFyZW50IG9yICh2MTY4MS5IdW1hbm9pZC5IZWFsdGggPD0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJUcmF2ZWxEcmVzc3Jvc2EiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpGaW5kRmlyc3RDaGlsZCgiSWNlIEFkbWlyYWwiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIkljZSBBZG1pcmFsIikuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDUsIDEwLCA3KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjEyMCA9IHYxNi5UZWxlcG9ydDpBZGRUb2dnbGUoIlRvZ2dsZUF1dG9TZWEzIiwgewogICAgVGl0bGUgPSAiQXV0byBTZWEgMyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTIwOk9uQ2hhbmdlZChmdW5jdGlvbih2MzE2KQogICAgX0cuQXV0b19TZWEzID0gdjMxNjsKZW5kKTsKdjE3LlRvZ2dsZUF1dG9TZWEzOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b1NlYTMgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBpZiAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuTGV2ZWwuVmFsdWUgPj0gMTUwMCkgYW5kIFdvcmxkMikgdGhlbgogICAgICAgICAgICAgICAgICAgIF9HLkF1dG9MZXZlbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlc1snQ29tbUZfJ106SW52b2tlU2VydmVyKCJaUXVlc3RQcm9ncmVzcyIsICJHZW5lcmFsIikgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMTkyNi4zMjIxNDM1NTQ3LCAxMi44MTk4NTE4NzUzMDUsIDE3MzguMzA5MjA0MTAxNikpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKENGcmFtZS5uZXcoLSAxOTI2LjMyMjE0MzU1NDcsIDEyLjgxOTg1MTg3NTMwNSwgMTczOC4zMDkyMDQxMDE2KS5Qb3NpdGlvbiAtIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMTApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlpRdWVzdFByb2dyZXNzIiwgIkJlZ2luIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuOCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgicmlwX2luZHJhIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNTc4LCB2MTU3OSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE1NzkuTmFtZSA9PSAicmlwX2luZHJhIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbGRDRnJhbWVUaGlyZCA9IHYxNTc5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNTc5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lICogUG9zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTc5Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gT2xkQ0ZyYW1lVGhpcmQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTU3OS5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg1MCwgNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNTc5Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE1NzkuSHVtYW5vaWQuV2Fsa1NwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF0dGFja05vQ29vbERvd24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlRyYXZlbFpvdSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCAoX0cuQXV0b1NlYTMgPT0gZmFsc2UpIG9yICh2MTU3OS5IdW1hbm9pZC5IZWFsdGggPD0gMCkgb3Igbm90IHYxNTc5LlBhcmVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAobm90IGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuRW5lbWllczpGaW5kRmlyc3RDaGlsZCgicmlwX2luZHJhIikgYW5kICgoQ0ZyYW1lLm5ldygtIDI2ODgwLjkzMzU5Mzc1LCAyMi44NDg1NTQ2MTEyMDYsIDQ3My4xODk1MTQxNjAxNikuUG9zaXRpb24gLSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDEwMDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbihDRnJhbWUubmV3KC0gMjY4ODAuOTMzNTkzNzUsIDIyLjg0ODU1NDYxMTIwNiwgNDczLjE4OTUxNDE2MDE2KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKdjE2LlRlbGVwb3J0OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJTZWEgMSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiVHJhdmVsTWFpbiIpOwogICAgZW5kCn0pOwp2MTYuVGVsZXBvcnQ6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlNlYSAyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJUcmF2ZWxEcmVzc3Jvc2EiKTsKICAgIGVuZAp9KTsKdjE2LlRlbGVwb3J0OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJTZWEgMyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiVHJhdmVsWm91Iik7CiAgICBlbmQKfSk7CmxvY2FsIHY1NiA9IHYxNi5UZWxlcG9ydDpBZGRTZWN0aW9uKCJJc2xhbmQiKTsKaWYgU2VhMSB0aGVuCiAgICBJc2xhbmRMaXN0ID0gewogICAgICAgICJXaW5kTWlsbCIsCiAgICAgICAgIk1hcmluZSIsCiAgICAgICAgIk1pZGRsZSBUb3duIiwKICAgICAgICAiSnVuZ2xlIiwKICAgICAgICAiUGlyYXRlIFZpbGxhZ2UiLAogICAgICAgICJEZXNlcnQiLAogICAgICAgICJTbm93IElzbGFuZCIsCiAgICAgICAgIk1hcmluZUZvcmQiLAogICAgICAgICJDb2xvc3NldW0iLAogICAgICAgICJTa3kgSXNsYW5kIDEiLAogICAgICAgICJTa3kgSXNsYW5kIDIiLAogICAgICAgICJTa3kgSXNsYW5kIDMiLAogICAgICAgICJQcmlzb24iLAogICAgICAgICJNYWdtYSBWaWxsYWdlIiwKICAgICAgICAiVW5kZXIgV2F0ZXIgSXNsYW5kIiwKICAgICAgICAiRm91bnRhaW4gQ2l0eSIsCiAgICAgICAgIlNoYW5rIFJvb20iLAogICAgICAgICJNb2IgSXNsYW5kIgogICAgfTsKZWxzZWlmIFNlYTIgdGhlbgogICAgSXNsYW5kTGlzdCA9IHsKICAgICAgICAiVGhlIENhZmUiLAogICAgICAgICJGcmlzdCBTcG90IiwKICAgICAgICAiRGFyayBBcmVhIiwKICAgICAgICAiRmxhbWluZ28gTWFuc2lvbiIsCiAgICAgICAgIkZsYW1pbmdvIFJvb20iLAogICAgICAgICJHcmVlbiBab25lIiwKICAgICAgICAiRmFjdG9yeSIsCiAgICAgICAgIkNvbG9zc3VpbSIsCiAgICAgICAgIlpvbWJpZSBJc2xhbmQiLAogICAgICAgICJUd28gU25vdyBNb3VudGFpbiIsCiAgICAgICAgIlB1bmsgSGF6YXJkIiwKICAgICAgICAiQ3Vyc2VkIFNoaXAiLAogICAgICAgICJJY2UgQ2FzdGxlIiwKICAgICAgICAiRm9yZ290dGVuIElzbGFuZCIsCiAgICAgICAgIlVzc29wIElzbGFuZCIsCiAgICAgICAgIk1pbmkgU2t5IElzbGFuZCIKICAgIH07CmVsc2VpZiBTZWEzIHRoZW4KICAgIElzbGFuZExpc3QgPSB7CiAgICAgICAgIk1hbnNpb24iLAogICAgICAgICJQb3J0IFRvd24iLAogICAgICAgICJHcmVhdCBUcmVlIiwKICAgICAgICAiQ2FzdGxlIE9uIFRoZSBTZWEiLAogICAgICAgICJNaW5pU2t5IiwKICAgICAgICAiSHlkcmEgSXNsYW5kIiwKICAgICAgICAiRmxvYXRpbmcgVHVydGxlIiwKICAgICAgICAiSGF1bnRlZCBDYXN0bGUiLAogICAgICAgICJJY2UgQ3JlYW0gSXNsYW5kIiwKICAgICAgICAiUGVhbnV0IElzbGFuZCIsCiAgICAgICAgIkNha2UgSXNsYW5kIiwKICAgICAgICAiQ29jb2EgSXNsYW5kIiwKICAgICAgICAiQ2FuZHkgSXNsYW5kIiwKICAgICAgICAiVGlraSBPdXRwb3N0IgogICAgfTsKZW5kCmxvY2FsIHYxMjEgPSB2MTYuVGVsZXBvcnQ6QWRkRHJvcGRvd24oIkRyb3Bkb3duSXNsYW5kIiwgewogICAgVGl0bGUgPSAiU2VsZWN0IElzbGFuZCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgVmFsdWVzID0gSXNsYW5kTGlzdCwKICAgIE11bHRpID0gZmFsc2UsCiAgICBEZWZhdWx0ID0gMQp9KTsKdjEyMTpTZXRWYWx1ZShfRy5TZWxlY3RJc2xhbmQpOwp2MTIxOk9uQ2hhbmdlZChmdW5jdGlvbih2MzE3KQogICAgX0cuU2VsZWN0SXNsYW5kID0gdjMxNzsKZW5kKTsKdjE2LlRlbGVwb3J0OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJUZWxlcG9ydCBUbyBJc2xhbmQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIldpbmRNaWxsIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg5NzkuNzk4OTUwMTk1MzEsIDE2LjUxNjYxMzAwNjU5MiwgMTQyOS4wNDY2MzA4NTk0KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIk1hcmluZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAyNTY2LjQyOTY4NzUsIDYuODU1NjY4MDY3OTMyMSwgMjA0NS4yNTYxMDM1MTU2KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIk1pZGRsZSBUb3duIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDY5MC4zMzA4MTA1NDY4OCwgMTUuMDk0MjUxNjMyNjksIDE1ODIuMjM4MDM3MTA5NCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJKdW5nbGUiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTYxMi43OTU3NzYzNjcyLCAzNi44NTIwODEyOTg4MjgsIDE0OS4xMjg0MzMyMjc1NCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJQaXJhdGUgVmlsbGFnZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxMTgxLjMwOTMyNjE3MTksIDQuNzUxNDkwNTkyOTU2NSwgMzgwMy41NDU2NTQyOTY5KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkRlc2VydCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoOTQ0LjE1Nzg5Nzk0OTIyLCAyMC45MTk3MjkyMzI3ODgsIDQzNzMuMzAwMjkyOTY4OCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJTbm93IElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMTM0Ny44MDY3NjI2OTUzLCAxMDQuNjY4MDYwMzAyNzMsIC0gMTMxOS43MzcwNjA1NDY5KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIk1hcmluZUZvcmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNDkxNC44MjEyODkwNjI1LCA1MC45NjM2MjY4NjE1NzIsIDQyODEuMDI3ODMyMDMxMykpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJDb2xvc3NldW0iKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTQyNy42MjAzNjEzMjgxLCA3LjI4ODEwNzg3MjAwOTMsIC0gMjc5Mi43NzIyMTY3OTY5KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlNreSBJc2xhbmQgMSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA0ODY5LjEwMjUzOTA2MjUsIDczMy40NjA1MTAyNTM5MSwgLSAyNjY3LjAxODA2NjQwNjMpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiU2t5IElzbGFuZCAyIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDQ2MDcuODIyNzUsIDg3Mi41NDI0OCwgLSAxNjY3LjU1Njg4KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlNreSBJc2xhbmQgMyIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA3ODk0LjYxNzY3NTc4MTMsIDU1NDcuMTQxNjAxNTYyNSwgLSAzODAuMjkxMTk4NzMwNDcpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiUHJpc29uIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg0ODc1LjMzMDA3ODEyNSwgNS42NTE5ODE4MzA1OTY5LCA3MzQuODUwMjE5NzI2NTYpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiTWFnbWEgVmlsbGFnZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA1MjQ3LjcxNjMwODU5MzgsIDEyLjg4MzkzNDAyMDk5NiwgODUwNC45Njg3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJVbmRlciBXYXRlciBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDYxMTYzLjg1MTU2MjUsIDExLjY3OTY4NzUsIDE4MTkuNzg0MTc5Njg3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJGb3VudGFpbiBDaXR5IikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg1MTI3LjEyODQxNzk2ODgsIDU5LjUwMTM2NTY2MTYyMSwgNDEwNS40NDU4MDA3ODEzKSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlNoYW5rIFJvb20iKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMTQ0Mi4xNjU1MywgMjkuODc4ODI2MSwgLSAyOC4zNTQ3NDc4KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIk1vYiBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMjg1MC4yMDA2OCwgNy4zOTIyNDc2OCwgNTM1NC45OTI2OCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJUaGUgQ2FmZSIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSAyODEuOTM3MDcyNzUzOTA2MjUsIDMwNi4xMzA2MTUyMzQzNzUsIDYwOS4yODAwMjkyOTY4NzUpKTsKICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDM4MC40NzkyNzg1NjQ0NSwgNzcuMjIwMzkwMzE5ODI0LCAyNTUuODI1NTAwNDg4MjgpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiRnJpc3QgU3BvdCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxMS4zMTE0NTU3MjY2MjQsIDI5LjI3NjczMzM5ODQzOCwgMjc3MS41MjI0NjA5Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkRhcmsgQXJlYSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMzc4MC4wMzAyNzM0Mzc1LCAyMi42NTIxNjQ0NTkyMjksIC0gMzQ5OC41ODU5Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkZsYW1pbmdvIE1hbnNpb24iKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gMjgxLjkzNzA3Mjc1MzkwNjI1LCAzMDYuMTMwNjE1MjM0Mzc1LCA2MDkuMjgwMDI5Mjk2ODc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkZsYW1pbmdvIFJvb20iKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDIyODQuOTEyMTA5Mzc1LCAxNS4xNTIwMzQ3NTk1MjE0ODQsIDkwNS40ODI5MTAxNTYyNSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJHcmVlbiBab25lIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDI0NDguNTMwMDI5Mjk2OSwgNzMuMDE2MTA1NjUxODU1LCAtIDMyMTAuNjMwNjE1MjM0NCkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJGYWN0b3J5IikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg0MjQuMTI2OTgzNjQyNTgsIDIxMS4xNjE3MTI2NDY0OCwgLSA0MjcuNTQwNDk2ODI2MTcpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiQ29sb3NzdWltIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDE1MDMuNjIyNDM2NTIzNCwgMjE5Ljc5NTYyMzc3OTMsIDEzNjkuMzEwMTgwNjY0MSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJab21iaWUgSXNsYW5kIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDU2MjIuMDMzMjAzMTI1LCA0OTIuMTk2MDQ0OTIxODgsIC0gNzgxLjc4NTUyMjQ2MDk0KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlR3byBTbm93IE1vdW50YWluIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg3NTMuMTQyODgzMzAwNzgsIDQwOC4yMzU1OTU3MDMxMywgLSA1Mjc0LjYxNDc0NjA5MzgpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiUHVuayBIYXphcmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNjEyNy42NTQyOTY4NzUsIDE1Ljk1MTc2MjE5OTQwMiwgLSA1MDQwLjI4NjEzMjgxMjUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiQ3Vyc2VkIFNoaXAiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDkyMy40MDE5Nzc1MzkwNiwgMTI1LjA1NzEyODkwNjI1LCAzMjg4NS44NzUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiSWNlIENhc3RsZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNjE0OC40MTE2MjEwOTM4LCAyOTQuMzg2ODcxMzM3ODksIC0gNjc0MS4xMTY2OTkyMTg4KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkZvcmdvdHRlbiBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMzAzMi43NjQxNjAxNTYzLCAzMTcuODk2NzI4NTE1NjMsIC0gMTAwNzUuMzczMDQ2ODc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIlVzc29wIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNDgxNi44NjE4MTY0MDYzLCA4LjQ1OTk4ODU5NDA1NTIsIDI4NjMuODE5NTgwMDc4MSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJNaW5pIFNreSBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMjg4Ljc0MDYwMDU4NTk0LCA0OTMyNi4zMTY0MDYyNSwgLSAzNTI0OC41OTM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJHcmVhdCBUcmVlIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyNjgxLjI3MzY4MTY0MDYsIDE2ODIuODA5MjA0MTAxNiwgLSA3MTkwLjk4NTM1MTU2MjUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiQ2FzdGxlIE9uIFRoZSBTZWEiKSB0aGVuCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KC0gNTA3NS41MDkyNzczNDM3NSwgMzE0LjUxNTUwMjkyOTY4NzUsIC0gMzE1MC4wMjI0NjA5Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIk1pbmlTa3kiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gMjYwLjY1NTU3ODYxMzI4LCA0OTMyNS44MDQ2ODc1LCAtIDM1MjUzLjU3MDMxMjUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiUG9ydCBUb3duIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDI5MC43Mzc2NzA4OTg0Mzc1LCA2LjcyOTk1MjgxMjE5NDgyNCwgNTM0My41NTM3MTA5Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkh5ZHJhIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNTY2MS41MzIyMjY1NjI1LCAxMDEzLjA5MDc1OTI3NzM0MzgsIC0gMzM0Ljk2NDk5NjMzNzg5MDYpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiRmxvYXRpbmcgVHVydGxlIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDEzMjc0LjUyODMyMDMxMywgNTMxLjgyMDczOTc0NjA5LCAtIDc1NzkuMjIyNjU2MjUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiTWFuc2lvbiIpIHRoZW4KICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSAxMjQ2OC41MzgwODU5Mzc1LCAzNzUuMDA5NDI5OTMxNjQwNiwgLSA3NTU0LjYyNTQ4ODI4MTI1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkNhc3RsZSBPbiBUaGUgU2VhIikgdGhlbgogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDUwNzUuNTA5Mjc3MzQzNzUsIDMxNC41MTU1MDI5Mjk2ODc1LCAtIDMxNTAuMDIyNDYwOTM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJIYXVudGVkIENhc3RsZSIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA5NTE1LjM3MjA3MDMxMjUsIDE2NC4wMDYyNDA4NDQ3MywgNTc4Ni4wNjEwMzUxNTYyKSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkljZSBDcmVhbSBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gOTAyLjU2ODE3NjI2OTUzLCA3OS45MzIwNDQ5ODI5MSwgLSAxMDk4OC44NDc2NTYyNSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJQZWFudXQgSXNsYW5kIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDIwNjIuNzQ3NTU4NTkzOCwgNTAuNDczODkyMjExOTE0LCAtIDEwMjMyLjU2ODM1OTM3NSkpOwogICAgICAgIGVsc2VpZiAoX0cuU2VsZWN0SXNsYW5kID09ICJDYWtlIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxODg0Ljc3NDc4MDI3MzQzNzUsIDE5LjMyNzUyNjA5MjUyOTI5NywgLSAxMTY2Ni44OTc0NjA5Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkNvY29hIElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoODcuOTQyNzY0MjgyMjI2NTYsIDczLjU1NDUxMjAyMzkyNTc4LCAtIDEyMzE5LjQ2NDg0Mzc1KSk7CiAgICAgICAgZWxzZWlmIChfRy5TZWxlY3RJc2xhbmQgPT0gIkNhbmR5IElzbGFuZCIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSAxMDE0LjQyNDE5NDMzNTkzNzUsIDE0OS4xMTA2ODcyNTU4NTkzOCwgLSAxNDU1NS45NjI4OTA2MjUpKTsKICAgICAgICBlbHNlaWYgKF9HLlNlbGVjdElzbGFuZCA9PSAiVGlraSBPdXRwb3N0IikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygtIDE2NTQyLjQ0NzI2NTYyNSwgNTUuNjg2MzI4ODg3OTM5NDUsIDEwNDQuNDE2NTAzOTA2MjUpKTsKICAgICAgICBlbmQKICAgIGVuZAp9KTsKdjE2LlRlbGVwb3J0OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJTdG9wIFRlbGVwb3J0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBDYW5jZWxUd2VlbigpOwogICAgZW5kCn0pOwp2MTYuVmlzdWFsOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJGYWtlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2MzE4ID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXI7CiAgICAgICAgbG9jYWwgdjMxOSA9IHJlcXVpcmUoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLk5vdGlmaWNhdGlvbik7CiAgICAgICAgbG9jYWwgdjMyMCA9IHYzMTg6V2FpdEZvckNoaWxkKCJEYXRhIik7CiAgICAgICAgbG9jYWwgdjMyMSA9IHJlcXVpcmUoZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZTpXYWl0Rm9yQ2hpbGQoIkVYUEZ1bmN0aW9uIikpOwogICAgICAgIGxvY2FsIHYzMjIgPSByZXF1aXJlKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5FZmZlY3QuQ29udGFpbmVyLkxldmVsVXApOwogICAgICAgIGxvY2FsIHYzMjMgPSByZXF1aXJlKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5VdGlsLlNvdW5kKTsKICAgICAgICBsb2NhbCB2MzI0ID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlV0aWwuU291bmQuU3RvcmFnZS5PdGhlcjpGaW5kRmlyc3RDaGlsZCgiTGV2ZWxVcF9Qcm94eSIpIG9yIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5VdGlsLlNvdW5kLlN0b3JhZ2UuT3RoZXI6RmluZEZpcnN0Q2hpbGQoIkxldmVsVXAiKSA7CiAgICAgICAgZnVuY3Rpb24gdjEyOSh2NTQzKQogICAgICAgICAgICBsb2NhbCB2NTQ0ID0gdjU0MzsKICAgICAgICAgICAgd2hpbGUgdHJ1ZSBkbwogICAgICAgICAgICAgICAgbG9jYWwgdjY0OSwgdjY1MCA9IHN0cmluZy5nc3ViKHY1NDQsICJeKC0/JWQrKSglZCVkJWQpIiwgIiUxLCUyIik7CiAgICAgICAgICAgICAgICB2NTQ0ID0gdjY0OTsKICAgICAgICAgICAgICAgIGlmICh2NjUwID09IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgICAgcmV0dXJuIHY1NDQ7CiAgICAgICAgZW5kCiAgICAgICAgdjMxOS5uZXcoIjxDb2xvcj1ZZWxsb3c+UVVFU1QgQ09NUExFVEVEITxDb2xvcj0vPiIpOkRpc3BsYXkoKTsKICAgICAgICB2MzE5Lm5ldygiRWFybmVkPENvbG9yPVllbGxvdz45LDk5OSw5OTksOTk5LDk5OSBFeHAuPENvbG9yPS8+KCtOb25lKSIpOkRpc3BsYXkoKTsKICAgICAgICB2MzE5Lm5ldygiRWFybmVkPENvbG9yPUdyZWVuPiQ5LDk5OSw5OTksOTk5LDk5OTxDb2xvcj0vPiIpOkRpc3BsYXkoKTsKICAgICAgICB2MzE4LkRhdGEuRXhwLlZhbHVlID0gOTk5OTk5OTk5OTk5OwogICAgICAgIHYzMTguRGF0YS5CZWxpLlZhbHVlID0gdjMxOC5EYXRhLkJlbGkuVmFsdWUgKyA5OTk5OTk5OTk5OTkgOwogICAgICAgIGRlbGF5ID0gMDsKICAgICAgICBjb3VudCA9IDA7CiAgICAgICAgd2hpbGUgKHYzMTguRGF0YS5FeHAuVmFsdWUgLSB2MzIxKHYzMjAuTGV2ZWwuVmFsdWUpKSA+IDAgZG8KICAgICAgICAgICAgdjMxOC5EYXRhLkV4cC5WYWx1ZSA9IHYzMTguRGF0YS5FeHAuVmFsdWUgLSB2MzIxKHYzMjAuTGV2ZWwuVmFsdWUpIDsKICAgICAgICAgICAgdjMxOC5EYXRhLkxldmVsLlZhbHVlID0gdjMxOC5EYXRhLkxldmVsLlZhbHVlICsgMSA7CiAgICAgICAgICAgIHYzMTguRGF0YS5Qb2ludHMuVmFsdWUgPSB2MzE4LkRhdGEuUG9pbnRzLlZhbHVlICsgMyA7CiAgICAgICAgICAgIHYzMjIoewogICAgICAgICAgICAgICAgdjMxOAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdjMyMy5QbGF5KHYzMjMsIHYzMjQuVmFsdWUpOwogICAgICAgICAgICB2MzE5Lm5ldygiPENvbG9yPUdyZWVuPkxFVkVMIFVQITxDb2xvcj0vPigiIC4uIHYzMTguRGF0YS5MZXZlbC5WYWx1ZSAuLiAiKSIpOkRpc3BsYXkoKTsKICAgICAgICAgICAgY291bnQgPSBjb3VudCArIDEgOwogICAgICAgICAgICBpZiAoY291bnQgPj0gNSkgdGhlbgogICAgICAgICAgICAgICAgZGVsYXkgPSB0aWNrKCk7CiAgICAgICAgICAgICAgICBjb3VudCA9IDA7CiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCn0pOwp2MTYuVmlzdWFsOkFkZElucHV0KCJJbnB1dF9MZXZlbCIsIHsKICAgIFRpdGxlID0gIkxldmVsIiwKICAgIERlZmF1bHQgPSAiIiwKICAgIFBsYWNlaG9sZGVyID0gIi4uLiIsCiAgICBOdW1lcmljID0gZmFsc2UsCiAgICBGaW5pc2hlZCA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2MzI3KQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpWydMb2NhbFBsYXllciddLkRhdGEuTGV2ZWwuVmFsdWUgPSB0b251bWJlcih2MzI3KTsKICAgIGVuZAp9KTsKdjE2LlZpc3VhbDpBZGRJbnB1dCgiSW5wdXRfRVhQIiwgewogICAgVGl0bGUgPSAiRVhQIiwKICAgIERlZmF1bHQgPSAiIiwKICAgIFBsYWNlaG9sZGVyID0gIi4uLiIsCiAgICBOdW1lcmljID0gZmFsc2UsCiAgICBGaW5pc2hlZCA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2MzI5KQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpWydMb2NhbFBsYXllciddLkRhdGEuRXhwLlZhbHVlID0gdG9udW1iZXIodjMyOSk7CiAgICBlbmQKfSk7CnYxNi5WaXN1YWw6QWRkSW5wdXQoIklucHV0X0JlbGkiLCB7CiAgICBUaXRsZSA9ICJCZWxpIiwKICAgIERlZmF1bHQgPSAiIiwKICAgIFBsYWNlaG9sZGVyID0gIi4uLiIsCiAgICBOdW1lcmljID0gZmFsc2UsCiAgICBGaW5pc2hlZCA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2MzMxKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpWydMb2NhbFBsYXllciddLkRhdGEuQmVsaS5WYWx1ZSA9IHRvbnVtYmVyKHYzMzEpOwogICAgZW5kCn0pOwp2MTYuVmlzdWFsOkFkZElucHV0KCJJbnB1dF9GcmFnbWVudHMiLCB7CiAgICBUaXRsZSA9ICJGcmFnbWVudHMiLAogICAgRGVmYXVsdCA9ICIiLAogICAgUGxhY2Vob2xkZXIgPSAiLi4uIiwKICAgIE51bWVyaWMgPSBmYWxzZSwKICAgIEZpbmlzaGVkID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYzMzMpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIilbJ0xvY2FsUGxheWVyJ10uRGF0YS5GcmFnbWVudHMuVmFsdWUgPSB0b251bWJlcih2MzMzKTsKICAgIGVuZAp9KTsKbG9jYWwgdjEyMiA9IGdhbWUuUmVwbGljYXRlZFN0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoIlJlbW90ZXMiKS5Db21tRl86SW52b2tlU2VydmVyKCJHZXRGcnVpdHMiKTsKVGFibGVfRGV2aWxGcnVpdFNuaXBlciA9IHt9OwpTaG9wRGV2aWxTZWxsID0ge307CmZvciB2MzM1LCB2MzM2IGluIG5leHQsIHYxMjIgZG8KICAgIHRhYmxlLmluc2VydChUYWJsZV9EZXZpbEZydWl0U25pcGVyLCB2MzM2Lk5hbWUpOwogICAgaWYgdjMzNi5PblNhbGUgdGhlbgogICAgICAgIHRhYmxlLmluc2VydChTaG9wRGV2aWxTZWxsLCB2MzM2Lk5hbWUpOwogICAgZW5kCmVuZApfRy5TZWxlY3RGcnVpdCA9ICJEcmFnb24tRHJhZ29uIjsKX0cuUGVybWFuZW50RnJ1aXQgPSAiRHJhZ29uLURyYWdvbiI7Cl9HLkF1dG9CdXlGcnVpdFNuaXBlciA9IGZhbHNlOwpfRy5BdXRvU3dpdGNoUGVybWFuZW50RnJ1aXQgPSBmYWxzZTsKbG9jYWwgdjEyMyA9IHYxNi5GcnVpdDpBZGREcm9wZG93bigiRHJvcGRvd25GcnVpdCIsIHsKICAgIFRpdGxlID0gIlNlbGVjdCBGcnVpdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgVmFsdWVzID0gVGFibGVfRGV2aWxGcnVpdFNuaXBlciwKICAgIE11bHRpID0gZmFsc2UsCiAgICBEZWZhdWx0ID0gMQp9KTsKdjEyMzpTZXRWYWx1ZShfRy5TZWxlY3RGcnVpdCk7CnYxMjM6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzMzcpCiAgICBfRy5TZWxlY3RGcnVpdCA9IHYzMzc7CmVuZCk7CmxvY2FsIHYxMTEgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVGcnVpdCIsIHsKICAgIFRpdGxlID0gIkJ1eSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTExOk9uQ2hhbmdlZChmdW5jdGlvbih2MzM4KQogICAgaWYgdjMzOCB0aGVuCiAgICAgICAgX0cuQXV0b0J1eUZydWl0U25pcGVyID0gdHJ1ZTsKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkdldEZydWl0cyIpOwogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJQdXJjaGFzZVJhd0ZydWl0IiwgX0cuU2VsZWN0RnJ1aXQsIGZhbHNlKTsKICAgICAgICBlbmQpOwogICAgICAgIF9HLkF1dG9CdXlGcnVpdFNuaXBlciA9IGZhbHNlOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVGcnVpdDpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHYxMjQgPSB2MTYuRnJ1aXQ6QWRkRHJvcGRvd24oIkRyb3Bkb3duUGVybWFuZW50RnJ1aXQiLCB7CiAgICBUaXRsZSA9ICJTZWxlY3QgUGVybWFuZW50IEZydWl0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZXMgPSBUYWJsZV9EZXZpbEZydWl0U25pcGVyLAogICAgTXVsdGkgPSBmYWxzZSwKICAgIERlZmF1bHQgPSAxCn0pOwp2MTI0OlNldFZhbHVlKF9HLlBlcm1hbmVudEZydWl0KTsKdjEyNDpPbkNoYW5nZWQoZnVuY3Rpb24odjMzOSkKICAgIF9HLlBlcm1hbmVudEZydWl0ID0gdjMzOTsKZW5kKTsKbG9jYWwgdjEyNSA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZVBlcm1hbmVudEZydWl0IiwgewogICAgVGl0bGUgPSAiVXNlIFBlcm1hbmVudCBGcnVpdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTI1Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzQwKQogICAgaWYgdjM0MCB0aGVuCiAgICAgICAgX0cuQXV0b1N3aXRjaFBlcm1hbmVudEZydWl0ID0gdHJ1ZTsKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGxvY2FsIHY3NDIgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSAiU3dpdGNoRnJ1aXQiLAogICAgICAgICAgICAgICAgWzJdID0gX0cuUGVybWFuZW50RnJ1aXQKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjc0MikpOwogICAgICAgIGVuZCk7CiAgICAgICAgX0cuQXV0b1N3aXRjaFBlcm1hbmVudEZydWl0ID0gZmFsc2U7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZVBlcm1hbmVudEZydWl0OlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjEyNiA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZVN0b3JlIiwgewogICAgVGl0bGUgPSAiU3RvcmUgRnJ1aXQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEyNjpPbkNoYW5nZWQoZnVuY3Rpb24odjM0MSkKICAgIF9HLkF1dG9TdG9yZUZydWl0ID0gdjM0MTsKZW5kKTsKdjE3LlRvZ2dsZVN0b3JlOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvU3RvcmVGcnVpdCB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIF9HLkF1dG9TdG9yZUZydWl0IHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJCb21iIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkJvbWIgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkJvbWItQm9tYiIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCb21iIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNwaWtlIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwaWtlIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJTcGlrZS1TcGlrZSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcGlrZSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJDaG9wIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkNob3AgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkNob3AtQ2hvcCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCbGFkZSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTcHJpbmcgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3ByaW5nIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJTcHJpbmctU3ByaW5nIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwcmluZyBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJSb2NrZXQgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiS2lsbyBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiUm9ja2V0LVJvY2tldCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJLaWxvIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlNtb2tlIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNtb2tlIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJTbW9rZS1TbW9rZSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTbW9rZSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTcGluIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwaW4gRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIlNwaW4tU3BpbiIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcGluIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkZsYW1lIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkZsYW1lIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJGbGFtZS1GbGFtZSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJGbGFtZSBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJGYWxjb24gRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRmFsY29uIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJGYWxjb24iLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiYWxjb24gRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSWNlIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkljZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiSWNlLUljZSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJJY2UgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU2FuZCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTYW5kIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJTYW5kLVNhbmQiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU2FuZCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJEYXJrIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRhcmsgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkRhcmstRGFyayIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEYXJrIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkdob3N0IEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlJldml2ZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiR2hvc3QtR2hvc3QiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUmV2aXZlIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkRpYW1vbmQgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRGlhbW9uZCBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiRGlhbW9uZC1EaWFtb25kIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRpYW1vbmQgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTGlnaHQgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTGlnaHQgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkxpZ2h0LUxpZ2h0IiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkxpZ2h0IEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkxvdmUgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTG92ZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiTG92ZS1Mb3ZlIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkxvdmUgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUnViYmVyIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlJ1YmJlciBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiUnViYmVyLVJ1YmJlciIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJSdWJiZXIgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQmFycmllciBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCYXJyaWVyIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJCYXJyaWVyLUJhcnJpZXIiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQmFycmllciBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJNYWdtYSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJNYWdtYSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiTWFnbWEtTWFnbWEiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTWFnbWEgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUG9ydGFsIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlBvcnRhbCBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiRG9vci1Eb29yIiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlBvcnRhbCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJRdWFrZSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJRdWFrZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiUXVha2UtUXVha2UiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUXVha2UgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQnVkZGhhIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkJ1ZGRoYSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1ZGRoYSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJCdWRkaGEgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiU3BpZGVyIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwaWRlciBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiU3BpZGVyLVNwaWRlciIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJTcGlkZXIgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQmlyZDogUGhvZW5peCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQaG9lbml4IEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJQaG9lbml4IiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlBob2VuaXggRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUnVtYmxlIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlJ1bWJsZSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiUnVtYmxlLVJ1bWJsZSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJSdW1ibGUgRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiUGFpbiBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJQYWluIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJQYWluLVBhaW4iLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUGFpbiBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJHcmF2aXR5IEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkdyYXZpdHkgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkdyYXZpdHktR3Jhdml0eSIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJHcmF2aXR5IEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkRvdWdoIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkRvdWdoIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJEb3VnaC1Eb3VnaCIsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEb3VnaCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTaGFkb3cgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU2hhZG93IEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJTaGFkb3ctU2hhZG93IiwgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNoYWRvdyBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJWZW5vbSBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJWZW5vbSBGcnVpdCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlN0b3JlRnJ1aXQiLCAiVmVub20tVmVub20iLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiVmVub20gRnJ1aXQiKSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQ29udHJvbCBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJDb250cm9sIEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJDb250cm9sLUNvbnRyb2wiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiQ29udHJvbCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTcGlyaXQgRnJ1aXQiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3Bpcml0IEZydWl0IikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJTb3VsLVNvdWwiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiU3Bpcml0IEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkRyYWdvbiBGcnVpdCIpIG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkJhY2twYWNrOkZpbmRGaXJzdENoaWxkKCJEcmFnb24gRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTdG9yZUZydWl0IiwgIkRyYWdvbi1EcmFnb24iLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiRHJhZ29uIEZydWl0IikpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJMZW9wYXJkIEZydWl0Iikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIkxlb3BhcmQgRnJ1aXQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU3RvcmVGcnVpdCIsICJMZW9wYXJkLUxlb3BhcmQiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTGVvcGFyZCBGcnVpdCIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgICAgICB3YWl0KCk7CiAgICBlbmQKZW5kKTsKbG9jYWwgdjEyNyA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZVJhbmRvbUZydWl0IiwgewogICAgVGl0bGUgPSAiUmFuZG9tIEZydWl0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMjc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNDIpCiAgICBfRy5SYW5kb21fQXV0byA9IHYzNDI7CmVuZCk7CnYxNy5Ub2dnbGVSYW5kb21GcnVpdDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuUmFuZG9tX0F1dG8gdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ291c2luIiwgIkJ1eSIpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CmxvY2FsIHYxMjggPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVDb2xsZWN0VFAiLCB7CiAgICBUaXRsZSA9ICJHZXQgRnJ1aXQgKFRQKSIsCiAgICBEZXNjcmlwdGlvbiA9ICJSaXNrIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEyODpPbkNoYW5nZWQoZnVuY3Rpb24odjM0MykKICAgIF9HLkNvbGxlY3RGcnVpdFRQID0gdjM0MzsKZW5kKTsKdjE3LlRvZ2dsZUNvbGxlY3RUUDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkNvbGxlY3RGcnVpdFRQIHRoZW4KICAgICAgICAgICAgZm9yIHY4MDEsIHY4MDIgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgIGlmIHN0cmluZy5maW5kKHY4MDIuTmFtZSwgIkZydWl0IikgdGhlbgogICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSB2ODAyLkhhbmRsZS5DRnJhbWU7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjEyOSA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZUNvbGxlY3QiLCB7CiAgICBUaXRsZSA9ICJHZXQgRnJ1aXQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEyOTpPbkNoYW5nZWQoZnVuY3Rpb24odjM0NCkKICAgIF9HLlR3ZWVuZnJ1aXQgPSB2MzQ0OwplbmQpOwp2MTcuVG9nZ2xlQ29sbGVjdDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLlR3ZWVuZnJ1aXQgdGhlbgogICAgICAgICAgICBmb3IgdjgwMywgdjgwNCBpbiBwYWlycyhnYW1lLldvcmtzcGFjZTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgaWYgc3RyaW5nLmZpbmQodjgwNC5OYW1lLCAiRnJ1aXQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4odjgwNC5IYW5kbGUuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2NTYgPSB2MTYuRnJ1aXQ6QWRkU2VjdGlvbigiRXNwIik7CmxvY2FsIHYxMzAgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVFc3BQbGF5ZXIiLCB7CiAgICBUaXRsZSA9ICJQbGF5ZXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEzMDpPbkNoYW5nZWQoZnVuY3Rpb24odjM0NSkKICAgIEVTUFBsYXllciA9IHYzNDU7CiAgICBVcGRhdGVQbGF5ZXJDaGFtcygpOwplbmQpOwp2MTcuVG9nZ2xlRXNwUGxheWVyOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjEzMSA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZUVzcEZydWl0IiwgewogICAgVGl0bGUgPSAiRnJ1aXQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEzMTpPbkNoYW5nZWQoZnVuY3Rpb24odjM0NikKICAgIERldmlsRnJ1aXRFU1AgPSB2MzQ2OwogICAgd2hpbGUgRGV2aWxGcnVpdEVTUCBkbwogICAgICAgIHdhaXQoKTsKICAgICAgICBVcGRhdGVEZXZpbENoYW1zKCk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZUVzcEZydWl0OlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjEzMiA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZUVzcElzbGFuZCIsIHsKICAgIFRpdGxlID0gIklzbGFuZCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTMyOk9uQ2hhbmdlZChmdW5jdGlvbih2MzQ3KQogICAgSXNsYW5kRVNQID0gdjM0NzsKICAgIHdoaWxlIElzbGFuZEVTUCBkbwogICAgICAgIHdhaXQoKTsKICAgICAgICBVcGRhdGVJc2xhbmRFU1AoKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlRXNwSXNsYW5kOlNldFZhbHVlKGZhbHNlKTsKbG9jYWwgdjEzMyA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZUVzcEZsb3dlciIsIHsKICAgIFRpdGxlID0gIkZsb3dlciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTMzOk9uQ2hhbmdlZChmdW5jdGlvbih2MzQ4KQogICAgRmxvd2VyRVNQID0gdjM0ODsKICAgIFVwZGF0ZUZsb3dlckNoYW1zKCk7CmVuZCk7CnYxNy5Ub2dnbGVFc3BGbG93ZXI6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBGbG93ZXJFU1AgdGhlbgogICAgICAgICAgICBVcGRhdGVGbG93ZXJDaGFtcygpOwogICAgICAgIGVuZAogICAgICAgIGlmIERldmlsRnJ1aXRFU1AgdGhlbgogICAgICAgICAgICBVcGRhdGVEZXZpbENoYW1zKCk7CiAgICAgICAgZW5kCiAgICAgICAgaWYgQ2hlc3RFU1AgdGhlbgogICAgICAgICAgICBVcGRhdGVDaGVzdENoYW1zKCk7CiAgICAgICAgZW5kCiAgICAgICAgaWYgRVNQUGxheWVyIHRoZW4KICAgICAgICAgICAgVXBkYXRlUGxheWVyQ2hhbXMoKTsKICAgICAgICBlbmQKICAgICAgICBpZiBSZWFsRnJ1aXRFU1AgdGhlbgogICAgICAgICAgICBVcGRhdGVSZWFsRnJ1aXRDaGFtcygpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxMzQgPSB2MTYuRnJ1aXQ6QWRkVG9nZ2xlKCJUb2dnbGVFc3BSZWFsRnJ1aXQiLCB7CiAgICBUaXRsZSA9ICJSZWFsIEZydWl0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMzQ6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNDkpCiAgICBSZWFsRnJ1aXRFc3AgPSB2MzQ5OwogICAgd2hpbGUgUmVhbEZydWl0RXNwIGRvCiAgICAgICAgd2FpdCgpOwogICAgICAgIFVwZGF0ZVJlYWxGcnVpdEVzcCgpOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVFc3BSZWFsRnJ1aXQ6U2V0VmFsdWUoZmFsc2UpOwpmdW5jdGlvbiBVcGRhdGVSZWFsRnJ1aXRFc3AoKQogICAgZm9yIHY1NDgsIHY1NDkgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuQXBwbGVTcGF3bmVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjU0OTpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICAgIGlmIFJlYWxGcnVpdEVzcCB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3QgdjU0OS5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDY2ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NTQ5LkhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgdjEwNjYuTmFtZSA9ICJOYW1lRXNwIiAuLiBOdW1iZXIgOwogICAgICAgICAgICAgICAgICAgIHYxMDY2LkV4dGVudHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICB2MTA2Ni5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgIHYxMDY2LkFkb3JuZWUgPSB2NTQ5LkhhbmRsZTsKICAgICAgICAgICAgICAgICAgICB2MTA2Ni5BbHdheXNPblRvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEwNzMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIsIHYxMDY2KTsKICAgICAgICAgICAgICAgICAgICB2MTA3My5Gb250ID0gRW51bS5Gb250LkdvdGhhbVNlbWlib2xkOwogICAgICAgICAgICAgICAgICAgIHYxMDczLkZvbnRTaXplID0gIlNpemUxNCI7CiAgICAgICAgICAgICAgICAgICAgdjEwNzMuVGV4dFdyYXBwZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHYxMDczLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwNzMuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIjsKICAgICAgICAgICAgICAgICAgICB2MTA3My5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMTsKICAgICAgICAgICAgICAgICAgICB2MTA3My5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMC41OwogICAgICAgICAgICAgICAgICAgIHYxMDczLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMDczLlRleHQgPSB2NTQ5Lk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY1NDkuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjU0OS5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjU0OS5OYW1lIC4uICIgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjU0OS5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjU0OS5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjU0OS5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgZm9yIHY1NTAsIHY1NTEgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuUGluZWFwcGxlU3Bhd25lcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY1NTE6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICBpZiBSZWFsRnJ1aXRFc3AgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IHY1NTEuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTA4NSA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjU1MS5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgIHYxMDg1Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICB2MTA4NS5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjEwODUuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICB2MTA4NS5BZG9ybmVlID0gdjU1MS5IYW5kbGU7CiAgICAgICAgICAgICAgICAgICAgdjEwODUuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMDkyID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTA4NSk7CiAgICAgICAgICAgICAgICAgICAgdjEwOTIuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICB2MTA5Mi5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgIHYxMDkyLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB2MTA5Mi5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMDkyLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgdjEwOTIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgdjEwOTIuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICB2MTA5Mi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAxNzQsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMDkyLlRleHQgPSB2NTUxLk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY1NTEuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjU1MS5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjU1MS5OYW1lIC4uICIgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjU1MS5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjU1MS5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjU1MS5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgZm9yIHY1NTIsIHY1NTMgaW4gcGFpcnMoZ2FtZS5Xb3Jrc3BhY2UuQmFuYW5hU3Bhd25lcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY1NTM6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICBpZiBSZWFsRnJ1aXRFc3AgdGhlbgogICAgICAgICAgICAgICAgaWYgbm90IHY1NTMuSGFuZGxlOkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIiAuLiBOdW1iZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEwNCA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgdjU1My5IYW5kbGUpOwogICAgICAgICAgICAgICAgICAgIHYxMTA0Lk5hbWUgPSAiTmFtZUVzcCIgLi4gTnVtYmVyIDsKICAgICAgICAgICAgICAgICAgICB2MTEwNC5FeHRlbnRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMSwgMCk7CiAgICAgICAgICAgICAgICAgICAgdjExMDQuU2l6ZSA9IFVEaW0yLm5ldygxLCAyMDAsIDEsIDMwKTsKICAgICAgICAgICAgICAgICAgICB2MTEwNC5BZG9ybmVlID0gdjU1My5IYW5kbGU7CiAgICAgICAgICAgICAgICAgICAgdjExMDQuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTExID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCB2MTEwNCk7CiAgICAgICAgICAgICAgICAgICAgdjExMTEuRm9udCA9IEVudW0uRm9udC5Hb3RoYW1TZW1pYm9sZDsKICAgICAgICAgICAgICAgICAgICB2MTExMS5Gb250U2l6ZSA9ICJTaXplMTQiOwogICAgICAgICAgICAgICAgICAgIHYxMTExLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB2MTExMS5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMTExLlRleHRZQWxpZ25tZW50ID0gIlRvcCI7CiAgICAgICAgICAgICAgICAgICAgdjExMTEuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgdjExMTEuVGV4dFN0cm9rZVRyYW5zcGFyZW5jeSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICB2MTExMS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjUxLCAyNTUsIDApOwogICAgICAgICAgICAgICAgICAgIHYxMTExLlRleHQgPSB2NTUzLk5hbWUgLi4gIiBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY1NTMuSGFuZGxlLlBvc2l0aW9uKS5NYWduaXR1ZGUgLyAzKSAuLiAiIERpc3RhbmNlIiA7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjU1My5IYW5kbGVbIk5hbWVFc3AiIC4uIE51bWJlciBdLlRleHRMYWJlbC5UZXh0ID0gdjU1My5OYW1lIC4uICIgIiAuLiB2MjAoKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uIC0gdjU1My5IYW5kbGUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgRGlzdGFuY2UiIDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlaWYgdjU1My5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcikgdGhlbgogICAgICAgICAgICAgICAgdjU1My5IYW5kbGU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiIC4uIE51bWJlcik6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQKbG9jYWwgdjEzNSA9IHYxNi5GcnVpdDpBZGRUb2dnbGUoIlRvZ2dsZUlzbGFuZE1pcmFnZUVzcCIsIHsKICAgIFRpdGxlID0gIk1pcmFnZSBJc2xhbmQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEzNTpPbkNoYW5nZWQoZnVuY3Rpb24odjM1MCkKICAgIElzbGFuZE1pcmFnZUVzcCA9IHYzNTA7CiAgICB3aGlsZSBJc2xhbmRNaXJhZ2VFc3AgZG8KICAgICAgICB3YWl0KCk7CiAgICAgICAgVXBkYXRlSXNsYW5kTWlyYWdlRXNwKCk7CiAgICBlbmQKZW5kKTsKdjE3LlRvZ2dsZUlzbGFuZE1pcmFnZUVzcDpTZXRWYWx1ZShmYWxzZSk7CmZ1bmN0aW9uIGlzbmlsKHYzNTEpCiAgICByZXR1cm4gdjM1MSA9PSBuaWwgOwplbmQKbG9jYWwgZnVuY3Rpb24gdjIwKHYzNTIpCiAgICByZXR1cm4gbWF0aC5mbG9vcih0b251bWJlcih2MzUyKSArIDAuNSk7CmVuZApOdW1iZXIgPSBtYXRoLnJhbmRvbSgxLCAxMDAwMDAwKTsKZnVuY3Rpb24gVXBkYXRlSXNsYW5kTWlyYWdlRXNwKCkKICAgIGZvciB2NTU0LCB2NTU1IGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIilbJ19Xb3JsZE9yaWdpbiddLkxvY2F0aW9uczpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgTWlyYWdlSXNsYW5kRVNQIHRoZW4KICAgICAgICAgICAgICAgIGlmICh2NTU1Lk5hbWUgPT0gIk1pcmFnZSBJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHY1NTU6RmluZEZpcnN0Q2hpbGQoIk5hbWVFc3AiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzQ3ID0gSW5zdGFuY2UubmV3KCJCaWxsYm9hcmRHdWkiLCB2NTU1KTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDcuTmFtZSA9ICJOYW1lRXNwIjsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDcuRXh0ZW50c09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTM0Ny5TaXplID0gVURpbTIubmV3KDEsIDIwMCwgMSwgMzApOwogICAgICAgICAgICAgICAgICAgICAgICB2MTM0Ny5BZG9ybmVlID0gdjU1NTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNDcuQWx3YXlzT25Ub3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTM1MyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgdjEzNDcpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTM1My5Gb250ID0gRW51bS5Gb250LkNvZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzUzLkZvbnRTaXplID0gRW51bS5Gb250U2l6ZS5TaXplMTQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzUzLlRleHRXcmFwcGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNTMuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNTMuVGV4dFlBbGlnbm1lbnQgPSBFbnVtLlRleHRZQWxpZ25tZW50LlRvcDsKICAgICAgICAgICAgICAgICAgICAgICAgdjEzNTMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzUzLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjU7CiAgICAgICAgICAgICAgICAgICAgICAgIHYxMzUzLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgMjQ1LCAyNDUpOwogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdjU1NVsnTmFtZUVzcCddLlRleHRMYWJlbC5UZXh0ID0gdjU1NS5OYW1lIC4uICIgICBcbiIgLi4gdjIwKChnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIHY1NTUuUG9zaXRpb24pLk1hZ25pdHVkZSAvIDMpIC4uICIgTSIgOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiB2NTU1OkZpbmRGaXJzdENoaWxkKCJOYW1lRXNwIikgdGhlbgogICAgICAgICAgICAgICAgdjU1NTpGaW5kRmlyc3RDaGlsZCgiTmFtZUVzcCIpOkRlc3Ryb3koKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQKbG9jYWwgdjEzNiA9IHsKICAgICJGbGFtZSIsCiAgICAiSWNlIiwKICAgICJRdWFrZSIsCiAgICAiTGlnaHQiLAogICAgIkRhcmsiLAogICAgIlNwaWRlciIsCiAgICAiUnVtYmxlIiwKICAgICJNYWdtYSIsCiAgICAiQnVkZGhhIiwKICAgICJTYW5kIiwKICAgICJQaG9lbml4IiwKICAgICJEb3VnaCIKfTsKbG9jYWwgdjEzNyA9IHYxNi5SYWlkOkFkZERyb3Bkb3duKCJEcm9wZG93blJhaWQiLCB7CiAgICBUaXRsZSA9ICJTZWxlY3QgQ2hpcCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgVmFsdWVzID0gdjEzNiwKICAgIE11bHRpID0gZmFsc2UsCiAgICBEZWZhdWx0ID0gMQp9KTsKdjEzNzpTZXRWYWx1ZShTZWxlY3RDaGlwKTsKdjEzNzpPbkNoYW5nZWQoZnVuY3Rpb24odjM1MykKICAgIFNlbGVjdENoaXAgPSB2MzUzOwplbmQpOwpsb2NhbCB2MTM4ID0gdjE2LlJhaWQ6QWRkVG9nZ2xlKCJUb2dnbGVCdXkiLCB7CiAgICBUaXRsZSA9ICJCdXkgQ2hpcCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTM4Ok9uQ2hhbmdlZChmdW5jdGlvbih2MzU0KQogICAgX0cuQXV0b19CdXlfQ2hpcHNfRHVuZ2VvbiA9IHYzNTQ7CmVuZCk7CnYxNy5Ub2dnbGVCdXk6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvX0J1eV9DaGlwc19EdW5nZW9uIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbG9jYWwgdjgwNSA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiUmFpZHNOcGMiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJTZWxlY3QiLAogICAgICAgICAgICAgICAgICAgIFszXSA9IFNlbGVjdENoaXAKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA1KSk7CiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjEzOSA9IHYxNi5SYWlkOkFkZFRvZ2dsZSgiVG9nZ2xlU3RhcnQiLCB7CiAgICBUaXRsZSA9ICJBdXRvIFN0YXJ0IFJhaWQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjEzOTpPbkNoYW5nZWQoZnVuY3Rpb24odjM1NSkKICAgIF9HLkF1dG9fU3RhcnRSYWlkID0gdjM1NTsKZW5kKTsKdjE3LlRvZ2dsZVN0YXJ0OlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvX1N0YXJ0UmFpZCB0aGVuCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIilbJ0xvY2FsUGxheWVyJ10uUGxheWVyR3VpLk1haW4uVGltZXIuVmlzaWJsZSA9PSBmYWxzZSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIChub3QgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKVsnX1dvcmxkT3JpZ2luJ10uTG9jYXRpb25zOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgMSIpIGFuZCAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIlNwZWNpYWwgTWljcm9jaGlwIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJTcGVjaWFsIE1pY3JvY2hpcCIpKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBpZiBTZWEyIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNjQzOC43MzUzNSwgMjUwLjY0NTM1NSwgLSA0NTAxLjUwNjg0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTU0NyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMV0gPSAiU2V0U3Bhd25Qb2ludCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2MTU0NykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuQ2lyY2xlSXNsYW5kLlJhaWRTdW1tb24yLkJ1dHRvbi5NYWluLkNsaWNrRGV0ZWN0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgU2VhMyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygtIDUwNzUuNTA5Mjc3MzQzNzUsIDMxNC41MTU1MDI5Mjk2ODc1LCAtIDMxNTAuMDIyNDYwOTM3NSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA1MDE3LjQwODY5LCAzMTQuODQ0MDU1LCAtIDI4MjMuMDEyNywgLSAwLjkyNTc0MzgxOCwgNC40ODIxNzVlLTgsIC0gMC4zNzgxNTEyMzgsIDQuNTU1MDMxNWUtOSwgMSwgMS4wNzM3NzU2ZS03LCAwLjM3ODE1MTIzOCwgOS43NjgxNjJlLTgsIC0gMC45MjU3NDM4MTgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxNjU2ID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsxXSA9ICJTZXRTcGF3blBvaW50IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHYxNjU2KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcFsiQm9hdCBDYXN0bGUiXS5SYWlkU3VtbW9uMi5CdXR0b24uTWFpbi5DbGlja0RldGVjdG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwpsb2NhbCB2MTQwID0gdjE2LlJhaWQ6QWRkVG9nZ2xlKCJUb2dnbGVOZXh0SXNsYW5kIiwgewogICAgVGl0bGUgPSAiQXV0byBGYXJtIFJhaWQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE0MDpPbkNoYW5nZWQoZnVuY3Rpb24odjM1NikKICAgIEF1dG9OZXh0SXNsYW5kID0gdjM1NjsKICAgIGlmIG5vdCB2MzU2IHRoZW4KICAgICAgICBfRy5BdXRvTmVhciA9IGZhbHNlOwogICAgZW5kCmVuZCk7CnYxNy5Ub2dnbGVOZXh0SXNsYW5kOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgbG9jYWwgdjM1NyA9IHt9OwogICAgd2hpbGUgdGFzay53YWl0KCkgZG8KICAgICAgICBpZiBBdXRvTmV4dElzbGFuZCB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDYgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOwogICAgICAgICAgICAgICAgaWYgKHY4MDYgYW5kIHY4MDY6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIHY5MDAgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpWydfV29ybGRPcmlnaW4nXS5Mb2NhdGlvbnM7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjkwMSA9IHY4MDYuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICBpZiAoKCh2OTAxIC0gVmVjdG9yMy5uZXcoLSA2NDM4LjczNTM1LCAyNTAuNjQ1MzU1LCAtIDQ1MDEuNTA2ODQpKS5NYWduaXR1ZGUgPCAxKSBvciAoKHY5MDEgLSBWZWN0b3IzLm5ldygtIDUwMTcuNDA4NjksIDMxNC44NDQwNTUsIC0gMjgyMy4wMTI3KSkuTWFnbml0dWRlIDwgMSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjM1NyA9IHt9OwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGlmIHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCAxIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBfRy5BdXRvTmVhciA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgaWYgKHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCAyIikgYW5kIG5vdCB2MzU3WyJJc2xhbmQgMiJdKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCAyIikuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjM1N1siSXNsYW5kIDIiXSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9OZXh0SXNsYW5kID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b05leHRJc2xhbmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAodjkwMDpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDMiKSBhbmQgbm90IHYzNTdbIklzbGFuZCAzIl0pIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjkwMDpGaW5kRmlyc3RDaGlsZCgiSXNsYW5kIDMiKS5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB2MzU3WyJJc2xhbmQgMyJdID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b05leHRJc2xhbmQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvTmV4dElzbGFuZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICh2OTAwOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgNCIpIGFuZCBub3QgdjM1N1siSXNsYW5kIDQiXSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUd2Vlbih2OTAwOkZpbmRGaXJzdENoaWxkKCJJc2xhbmQgNCIpLkNGcmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHYzNTdbIklzbGFuZCA0Il0gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBBdXRvTmV4dElzbGFuZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9OZXh0SXNsYW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCA1IikgYW5kIG5vdCB2MzU3WyJJc2xhbmQgNSJdKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHY5MDA6RmluZEZpcnN0Q2hpbGQoIklzbGFuZCA1IikuQ0ZyYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgdjM1N1siSXNsYW5kIDUiXSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9OZXh0SXNsYW5kID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0b05leHRJc2xhbmQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjE0MSA9IHYxNi5SYWlkOkFkZFRvZ2dsZSgiVG9nZ2xlQXdha2UiLCB7CiAgICBUaXRsZSA9ICJBdXRvIEF3YWtlbmluZyBGcnVpdCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTQxOk9uQ2hhbmdlZChmdW5jdGlvbih2MzU4KQogICAgQXV0b0F3YWtlbkFiaWxpdGllcyA9IHYzNTg7CmVuZCk7CnYxNy5Ub2dnbGVBd2FrZTpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgaWYgQXV0b0F3YWtlbkFiaWxpdGllcyB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkF3YWtlbmVyIiwgIkF3YWtlbiIpOwogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNDIgPSB2MTYuUmFpZDpBZGRUb2dnbGUoIlRvZ2dsZUdldEZydWl0IiwgewogICAgVGl0bGUgPSAiR2l2ZSBVcCBOb3JtYWwgRnJ1aXTigJQ+UmFpZCBDaGlwIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNDI6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNTkpCiAgICBfRy5BdXRvZnJ1aXQgPSB2MzU5OwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIF9HLkF1dG9mcnVpdCB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJSb2NrZXQtUm9ja2V0IgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIlNwaW4tU3BpbiIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJDaG9wLUNob3AiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiU3ByaW5nLVNwcmluZyIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJCb21iLUJvbWIiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiU21va2UtU21va2UiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiU3Bpa2UtU3Bpa2UiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiRmxhbWUtRmxhbWUiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiRmFsY29uLUZhbGNvbiIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJJY2UtSWNlIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIlNhbmQtU2FuZCIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2ODA3KSk7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODA3ID0gewogICAgICAgICAgICAgICAgICAgIFsxXSA9ICJMb2FkRnJ1aXQiLAogICAgICAgICAgICAgICAgICAgIFsyXSA9ICJEYXJrLURhcmsiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiR2hvc3QtR2hvc3QiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiRGlhbW9uZC1EaWFtb25kIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIkxpZ2h0LUxpZ2h0IgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgICAgIGxvY2FsIHY4MDcgPSB7CiAgICAgICAgICAgICAgICAgICAgWzFdID0gIkxvYWRGcnVpdCIsCiAgICAgICAgICAgICAgICAgICAgWzJdID0gIlJ1YmJlci1SdWJiZXIiCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjgwNykpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgwNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSAiTG9hZEZydWl0IiwKICAgICAgICAgICAgICAgICAgICBbMl0gPSAiQmFycmllci1CYXJyaWVyIgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHY4MDcpKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKTsKICAgIGVuZAplbmQpOwppZiBTZWEyIHRoZW4KICAgIHYxNi5SYWlkOkFkZEJ1dHRvbih7CiAgICAgICAgVGl0bGUgPSAiRmx5IFRvIFRoZSBSYWlkIFJvb20iLAogICAgICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICAgICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KC0gNjQzOC43MzUzNSwgMjUwLjY0NTM1NSwgLSA0NTAxLjUwNjg0KSk7CiAgICAgICAgZW5kCiAgICB9KTsKZWxzZWlmIFNlYTMgdGhlbgogICAgdjE2LlJhaWQ6QWRkQnV0dG9uKHsKICAgICAgICBUaXRsZSA9ICJGbHkgVG8gVGhlIFJhaWQgUm9vbSIsCiAgICAgICAgRGVzY3JpcHRpb24gPSAiIiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoLSA1MDc1LjUwOTI3NzM0Mzc1LCAzMTQuNTE1NTAyOTI5Njg3NSwgLSAzMTUwLjAyMjQ2MDkzNzUpKTsKICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoLSA1MDE3LjQwODY5LCAzMTQuODQ0MDU1LCAtIDI4MjMuMDEyNywgLSAwLjkyNTc0MzgxOCwgNC40ODIxNzVlLTgsIC0gMC4zNzgxNTEyMzgsIDQuNTU1MDMxNWUtOSwgMSwgMS4wNzM3NzU2ZS03LCAwLjM3ODE1MTIzOCwgOS43NjgxNjJlLTgsIC0gMC45MjU3NDM4MTgpKTsKICAgICAgICBlbmQKICAgIH0pOwplbmQKbG9jYWwgdjU2ID0gdjE2LlJhaWQ6QWRkU2VjdGlvbigiTGF3Iik7CmxvY2FsIHYxNDMgPSB2MTYuUmFpZDpBZGRUb2dnbGUoIlRvZ2dsZUxhdyIsIHsKICAgIFRpdGxlID0gIkF1dG8gUmFpZCBMb3cgKEZ1bGx5KSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTQzOk9uQ2hhbmdlZChmdW5jdGlvbih2MzYwKQogICAgQXV0b19MYXcgPSB2MzYwOwplbmQpOwp2MTcuVG9nZ2xlTGF3OlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgICAgICBpZiBBdXRvX0xhdyB0aGVuCiAgICAgICAgICAgICAgICBpZiAobm90IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiTWljcm9jaGlwIikgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTWljcm9jaGlwIikgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIk9yZGVyIikgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIk9yZGVyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJNaWNyb2NoaXAiLCAiMSIpOwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCAiTWljcm9jaGlwIiwgIjIiKTsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCk7CmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgQXV0b19MYXcgdGhlbgogICAgICAgICAgICAgICAgaWYgKG5vdCBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6RmluZEZpcnN0Q2hpbGQoIk9yZGVyIikgYW5kIG5vdCBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIk9yZGVyIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJNaWNyb2NoaXAiKSBvciBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiTWljcm9jaGlwIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZmlyZWNsaWNrZGV0ZWN0b3IoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuQ2lyY2xlSXNsYW5kLlJhaWRTdW1tb24uQnV0dG9uLk1haW4uQ2xpY2tEZXRlY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGlmIChnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6RmluZEZpcnN0Q2hpbGQoIk9yZGVyIikgb3IgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJPcmRlciIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5FbmVtaWVzOkZpbmRGaXJzdENoaWxkKCJPcmRlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxNDY4LCB2MTQ2OSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTQ2OS5OYW1lID09ICJPcmRlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdChfRy5GYXN0X0RlbGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXR0YWNrTm9Db29sRG93bigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcXVpcFRvb2woU2VsZWN0V2VhcG9uKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjE0NjkuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBQb3MpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTQ2OS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE0NjkuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IHYxNDY5LlBhcmVudCBvciAodjE0NjkuSHVtYW5vaWQuSGVhbHRoIDw9IDApIG9yIChBdXRvX0xhdyA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpOkZpbmRGaXJzdENoaWxkKCJPcmRlciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDYyMTcuMjAyMTQ4NDM3NSwgMjguMDQ3NjQ1NTY4ODQ4LCAtIDUwNTMuMTM1NzQyMTg3NSkpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKTsKZW5kKTsKdjE2LlJhY2U6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlRlbXBsZSBPZiBUaW1lIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJyZXF1ZXN0RW50cmFuY2UiLCBWZWN0b3IzLm5ldygyODI4Ni4zNTU0Njg3NSwgMTQ4OTUuMzAxNzU3ODEyNSwgMTAyLjYyNDY5NDgyNDIxODc1KSk7CiAgICBlbmQKfSk7CnYxNi5SYWNlOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJBdXRvIFB1bGwgTGV2ZXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDI4Mjg2LjM1NTQ2ODc1LCAxNDg5NS4zMDE3NTc4MTI1LCAxMDIuNjI0Njk0ODI0MjE4NzUpKTsKICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyODU3NS4xODE2NDA2MjUsIDE0OTM2LjYyNzkyOTY4NzUsIDcyLjMxNjM2ODEwMzAyNzM0KSk7CiAgICBlbmQKfSk7CnYxNi5SYWNlOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJUUCBCdXkgR2VhciBOUEMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDI4Mjg2LjM1NTQ2ODc1LCAxNDg5NS4zMDE3NTc4MTI1LCAxMDIuNjI0Njk0ODI0MjE4NzUpKTsKICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyODk4MS41NTI3MzQzNzUsIDE0ODg4LjQyNjc1NzgxMjUsIC0gMTIwLjI0NTg0OTYwOTM3NSkpOwogICAgZW5kCn0pOwpsb2NhbCB2NTYgPSB2MTYuUmFjZTpBZGRTZWN0aW9uKCJSYWNlIik7CnYxNi5SYWNlOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJSYWNlIERvb3IiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDI4Mjg2LjM1NTQ2ODc1LCAxNDg5NS4zMDE3NTc4MTI1LCAxMDIuNjI0Njk0ODI0MjE4NzUpKTsKICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJIdW1hbiIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMjkyMjEuODIyMjY1NjI1LCAxNDg5MC45NzU1ODU5Mzc1LCAtIDIwNS45OTExNDk5MDIzNDM3NSkpOwogICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJTa3lwaWVhIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyODk2MC4xNTgyMDMxMjUsIDE0OTE5LjYyNDAyMzQzNzUsIDIzNS4wMzk0ODk3NDYwOTM3NSkpOwogICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJGaXNobWFuIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyODIzMS4xNzU3ODEyNSwgMTQ4OTAuOTc1NTg1OTM3NSwgLSAyMTEuNjQxNzM4ODkxNjAxNTYpKTsKICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiQ3lib3JnIikgdGhlbgogICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldygyODUwMi42ODE2NDA2MjUsIDE0ODk1Ljk3NTU4NTkzNzUsIC0gNDIzLjcyNzkzNTc5MTAxNTYpKTsKICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiR2hvdWwiKSB0aGVuCiAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KDI4Njc0LjI0NDE0MDYyNSwgMTQ4OTAuNjc2NzU3ODEyNSwgNDQ1LjQzMTA2MDc5MTAxNTYpKTsKICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiTWluayIpIHRoZW4KICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoMjkwMTIuMzQxNzk2ODc1LCAxNDg5MC45NzU1ODU5Mzc1LCAtIDM4MC4xNDkyNjE0NzQ2MDk0KSk7CiAgICAgICAgZW5kCiAgICBlbmQKfSk7CmxvY2FsIHYxNDQgPSB2MTYuUmFjZTpBZGRUb2dnbGUoIlRvZ2dsZUh1bWFuYW5kZ2hvdWwiLCB7CiAgICBUaXRsZSA9ICJPdmVyY29tZSBDaGFsbGVuZ2VzIFtIdW1hbi9HaG91bF0iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE0NDpPbkNoYW5nZWQoZnVuY3Rpb24odjM2MSkKICAgIEtpbGxBdXJhID0gdjM2MTsKZW5kKTsKdjE3LlRvZ2dsZUh1bWFuYW5kZ2hvdWw6U2V0VmFsdWUoZmFsc2UpOwpsb2NhbCB2MTQ1ID0gdjE2LlJhY2U6QWRkVG9nZ2xlKCJUb2dnbGVBdXRvdHJpYWwiLCB7CiAgICBUaXRsZSA9ICJPdmVyY29tZSBDaGFsbGVuZ2VzIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNDU6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNjIpCiAgICBfRy5BdXRvUXVlc3RSYWNlID0gdjM2MjsKZW5kKTsKdjE3LlRvZ2dsZUF1dG90cmlhbDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgaWYgX0cuQXV0b1F1ZXN0UmFjZSB0aGVuCiAgICAgICAgICAgICAgICBpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJIdW1hbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjExMjMsIHYxMTI0IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMTI0OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTEyNDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjExMjQuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTEyNC5IdW1hbm9pZC5IZWFsdGggPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTEyNC5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9RdWVzdFJhY2Ugb3Igbm90IHYxMTI0LlBhcmVudCBvciAodjExMjQuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJTa3lwaWVhIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTQ3MCwgdjE0NzEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXAuU2t5VHJpYWwuTW9kZWw6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNDcxLk5hbWUgPT0gInNub3dpc2xhbmRfQ3lsaW5kZXIuMDgxIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgQlRQWih2MTQ3MS5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDAsIDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiRmlzaG1hbiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjE1ODIsIHYxNTgzIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuU2VhQmVhc3RzLlNlYUJlYXN0MTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE1ODMuTmFtZSA9PSAiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNTgzLkNGcmFtZSAqIFBvcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE3NDYsIHYxNzQ3IGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYxNzQ3OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNzQ3LlRvb2xUaXAgPT0gIk1lbGVlIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodjE3NDcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTc0OCwgdjE3NDkgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjE3NDk6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE3NDkuVG9vbFRpcCA9PSAiQmxveCBGcnVpdCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQ6RXF1aXBUb29sKHYxNzQ5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCAxMjIsIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgwLjIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMCwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgOTksIGZhbHNlLCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KGZhbHNlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjE3NTAsIHYxNzUxIGluIHBhaXJzKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYxNzUxOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNzUxLlRvb2xUaXAgPT0gIlN3b3JkIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodjE3NTEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB2MTc1MiwgdjE3NTMgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjE3NTM6SXNBKCJUb29sIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE3NTMuVG9vbFRpcCA9PSAiR3VuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZDpFcXVpcFRvb2wodjE3NTMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDEyMiwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQodHJ1ZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgMTIwLCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMC4yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCA5OSwgZmFsc2UsIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsIDk5LCBmYWxzZSwgZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkRhdGEuUmFjZS5WYWx1ZSA9PSAiQ3lib3JnIikgdGhlbgogICAgICAgICAgICAgICAgICAgIFR3ZWVuKENGcmFtZS5uZXcoMjg2NTQsIDE0ODk4Ljc4MzIsIC0gMzAsIDEsIDAsIDAsIDAsIDEsIDAsIDAsIDAsIDEpKTsKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJHaG91bCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBmb3IgdjE3NjQsIHYxNzY1IGluIHBhaXJzKGdhbWUuV29ya3NwYWNlLkVuZW1pZXM6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxNzY1OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpIGFuZCB2MTc2NTpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIGFuZCAodjE3NjUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc2NS5IdW1hbm9pZC5IZWFsdGggPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTc2NS5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IF9HLkF1dG9RdWVzdFJhY2Ugb3Igbm90IHYxNzY1LlBhcmVudCBvciAodjE3NjUuSHVtYW5vaWQuSGVhbHRoIDw9IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpOwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2VpZiAoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuRGF0YS5SYWNlLlZhbHVlID09ICJNaW5rIikgdGhlbgogICAgICAgICAgICAgICAgICAgIGZvciB2MTc5MCwgdjE3OTEgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodjE3OTEuTmFtZSA9PSAiU3RhcnRQb2ludCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuKHYxNzkxLkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMTAsIDApKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2MTQ2ID0gdjE2LlJhY2U6QWRkVG9nZ2xlKCJUb2dnbGVLaWxsVHJpYWwiLCB7CiAgICBUaXRsZSA9ICJLaWxsIFRyaWFsIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNDY6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNjMpCiAgICBfRy5BdXRvS2lsbFRyaWFsID0gdjM2MzsKZW5kKTsKdjE3LlRvZ2dsZUtpbGxUcmlhbDpTZXRWYWx1ZShmYWxzZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgX0cuQXV0b0tpbGxUcmlhbCB0aGVuCiAgICAgICAgICAgICAgICBmb3Igdjg3MCwgdjg3MSBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2ODcxLk5hbWUgYW5kICh2ODcxLk5hbWUgfj0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUpIGFuZCAoKHY4NzEuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAxMDApKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ODcxLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPiAwKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KF9HLkZhc3RfRGVsYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVxdWlwVG9vbChTZWxlY3RXZWFwb24pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4odjg3MS5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDAsIDUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODcxLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODcxLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlNpemUgPSBWZWN0b3IzLm5ldyg2MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdHRhY2tOb0Nvb2xEb3duKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgX0cuQXV0b0tpbGxUcmlhbCBvciBub3Qgdjg3MS5QYXJlbnQgb3IgKHY4NzEuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHY1NiA9IHYxNi5SYWNlOkFkZFNlY3Rpb24oIiIpOwpsb2NhbCB2MTQ3ID0gdjE2LlJhY2U6QWRkVG9nZ2xlKCJUb2dnbGVGYXJtUmFjZSIsIHsKICAgIFRpdGxlID0gIkZhcm0gUmFjZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwpsb2NhbCB2MTQ4ID0gZmFsc2U7CnYxNDc6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzNjQpCiAgICB2MTQ4ID0gdjM2NDsKZW5kKTsKdjE3LlRvZ2dsZUZhcm1SYWNlOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgdjE0OCB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlJhY2VUcmFuc2Zvcm1lZCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5SYWNlVHJhbnNmb3JtZWQuVmFsdWUgPT0gdHJ1ZSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBfRy5BdXRvQm9uZU5vUXVlc3QgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgVHdlZW4oQ0ZyYW1lLm5ldygtIDk2OTguNDczNjMyODEyNSwgNDQ1LjA5NDQyMTM4NjcxODc1LCA2NTQ1Ljg1MjUzOTA2MjUpKTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUmFjZVRyYW5zZm9ybWVkLlZhbHVlID09IGZhbHNlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIF9HLkF1dG9Cb25lTm9RdWVzdCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiWSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKTpTZW5kS2V5RXZlbnQoZmFsc2UsICJZIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBfRy5BdXRvQm9uZU5vUXVlc3QgPSBmYWxzZTsKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTQ5ID0gdjE2LlJhY2U6QWRkVG9nZ2xlKCJUb2dnbGVVcGdyYWRlIiwgewogICAgVGl0bGUgPSAiQnV5IEdlYXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE0OTpPbkNoYW5nZWQoZnVuY3Rpb24odjM2NSkKICAgIF9HLkF1dG9VcGdyYWRlID0gdjM2NTsKICAgIGlmIF9HLkF1dG9VcGdyYWRlIHRoZW4KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJVcGdyYWRlUmFjZSIsICJCdXkiKTsKICAgIGVuZAplbmQpOwp2MTcuVG9nZ2xlVXBncmFkZTpTZXRWYWx1ZShmYWxzZSk7CmxvY2FsIHY1NiA9IHYxNi5TaG9wOkFkZFNlY3Rpb24oIkhha2kiKTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkdlcHBvIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlIYWtpIiwgIkdlcHBvIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJCdXNvIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlIYWtpIiwgIkJ1c28iKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlNvcnUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUhha2kiLCAiU29ydSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiS2VuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJLZW5UYWxrIiwgIkJ1eSIpOwogICAgZW5kCn0pOwpsb2NhbCB2NTYgPSB2MTYuU2hvcDpBZGRTZWN0aW9uKCJLaeG6v20iKTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkN1dGxhc3MiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiQ3V0bGFzcyIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiS2F0YW5hIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIkthdGFuYSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiSXJvbiBNYWNlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIklyb24gTWFjZSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiRHVlbCBLYXRhbmEiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiRHVlbCBLYXRhbmEiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlRyaXBsZSBLYXRhbmEiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiVHJpcGxlIEthdGFuYSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiUGlwZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJQaXBlIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJEdWFsLUhlYWRlZCBCbGFkZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJEdWFsLUhlYWRlZCBCbGFkZSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQmlzZW50byIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJCaXNlbnRvIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJTb3VsIENhbmUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiU291bCBDYW5lIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJQb2xlIFYyIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiVGh1bmRlckdvZFRhbGsiKTsKICAgIGVuZAp9KTsKbG9jYWwgdjU2ID0gdjE2LlNob3A6QWRkU2VjdGlvbigiVsO1Iik7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJCbGFjayBMZWciLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUJsYWNrTGVnIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJFbGVjdHJvIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlFbGVjdHJvIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJGaXNobWFuIEthcmF0ZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RmlzaG1hbkthcmF0ZSIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiRHJhZ29uIENsYXciLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCAiRHJhZ29uQ2xhdyIsICIxIik7CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJEcmFnb25DbGF3IiwgIjIiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlN1cGVyaHVtYW4iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eVN1cGVyaHVtYW4iKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkRlYXRoIFN0ZXAiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eURlYXRoU3RlcCIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiU2hhcmttYW4gS2FyYXRlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlTaGFya21hbkthcmF0ZSIsIHRydWUpOwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eVNoYXJrbWFuS2FyYXRlIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJFbGVjdHJpYyBDbGF3IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlFbGVjdHJpY0NsYXciKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkRyYWdvbiBUYWxvbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5RHJhZ29uVGFsb24iKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkdvZGh1bWFuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlHb2RodW1hbiIpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiU2FuZ3VpbmUgQXJ0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlTYW5ndWluZUFydCIpOwogICAgZW5kCn0pOwpsb2NhbCB2NTYgPSB2MTYuU2hvcDpBZGRTZWN0aW9uKCJPdGhlciIpOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiUmVzZXQgU3RhdHMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCAiUmVmdW5kIiwgIjEiKTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwgIlJlZnVuZCIsICIyIik7CiAgICBlbmQKfSk7CnYxNi5TaG9wOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJSYW5kb20gUmFjZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJSZXJvbGwiLCAiMSIpOwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJsYWNrYmVhcmRSZXdhcmQiLCAiUmVyb2xsIiwgIjIiKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkNoYW5nZSBUbyBHaG91bCBSYWNlIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2MzY2ID0gewogICAgICAgICAgICBbMV0gPSAiRWN0b3BsYXNtIiwKICAgICAgICAgICAgWzJdID0gIkNoYW5nZSIsCiAgICAgICAgICAgIFszXSA9IDQKICAgICAgICB9OwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHYzNjYpKTsKICAgIGVuZAp9KTsKdjE2LlNob3A6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkNoYW5nZSBUbyBDeWJvcmcgUmFjZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgdjM2NyA9IHsKICAgICAgICAgICAgWzFdID0gIkN5Ym9yZ1RyYWluZXIiLAogICAgICAgICAgICBbMl0gPSAiQnV5IgogICAgICAgIH07CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjM2NykpOwogICAgZW5kCn0pOwp2MTYuU2hvcDpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQ2hhbmdlIHRvIERyYWNvIiwKICAgIERlc2NyaXB0aW9uID0gIlNlYSAzIE9ubHkiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNTY2MS41MzIyMjY1NjI1LCAxMDEzLjA5MDc1OTI3NzM0MzgsIC0gMzM0Ljk2NDk5NjMzNzg5MDYpKTsKICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg1ODE0LjQyNzI0NjA5Mzc1LCAxMjA4LjMyNjc4MjIyNjU2MjUsIDg4NC41Nzg1NTIyNDYwOTM4KSk7CiAgICAgICAgbG9jYWwgdjM2OCA9IFZlY3RvcjMubmV3KDU4MTQuNDI3MjQ2MDkzNzUsIDEyMDguMzI2NzgyMjI2NTYyNSwgODg0LjU3ODU1MjI0NjA5MzgpOwogICAgICAgIGxvY2FsIHYzNjkgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI7CiAgICAgICAgbG9jYWwgdjM3MCA9IHYzNjkuQ2hhcmFjdGVyIG9yIHYzNjkuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpIDsKICAgICAgICByZXBlYXQKICAgICAgICAgICAgd2FpdCgpOwogICAgICAgIHVudGlsICh2MzcwLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2MzY4KS5NYWduaXR1ZGUgPCAxCiAgICAgICAgbG9jYWwgdjM3MSA9IHsKICAgICAgICAgICAgWzFdID0gewogICAgICAgICAgICAgICAgTlBDID0gIkRyYWdvbiBXaXphcmQiLAogICAgICAgICAgICAgICAgQ29tbWFuZCA9ICJEcmFnb25SYWNlIgogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuTW9kdWxlcy5OZXQ6RmluZEZpcnN0Q2hpbGQoIlJGL0ludGVyYWN0RHJhZ29uUXVlc3QiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKHYzNzEpKTsKICAgIGVuZAp9KTsKdjE2Lk1pc2M6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlJlam9pbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKTpUZWxlcG9ydChnYW1lLlBsYWNlSWQsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyKTsKICAgIGVuZAp9KTsKdjE2Lk1pc2M6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkhvcCBTZXJ2ZXIiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIEhvcCgpOwogICAgZW5kCn0pOwpmdW5jdGlvbiBIb3AoKQogICAgbG9jYWwgdjM3MiA9IGdhbWUuUGxhY2VJZDsKICAgIGxvY2FsIHYzNzMgPSB7fTsKICAgIGxvY2FsIHYzNzQgPSAiIjsKICAgIGxvY2FsIHYzNzUgPSBvcy5kYXRlKCIhKnQiKS5ob3VyOwogICAgbG9jYWwgdjM3NiA9IGZhbHNlOwogICAgZnVuY3Rpb24gVFBSZXR1cm5lcigpCiAgICAgICAgbG9jYWwgdjU1NjsKICAgICAgICBpZiAodjM3NCA9PSAiIikgdGhlbgogICAgICAgICAgICB2NTU2ID0gZ2FtZS5IdHRwU2VydmljZTpKU09ORGVjb2RlKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9nYW1lcy5yb2Jsb3guY29tL3YxL2dhbWVzLyIgLi4gdjM3MiAuLiAiL3NlcnZlcnMvUHVibGljP3NvcnRPcmRlcj1Bc2MmbGltaXQ9MTAwIikpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgdjU1NiA9IGdhbWUuSHR0cFNlcnZpY2U6SlNPTkRlY29kZShnYW1lOkh0dHBHZXQoImh0dHBzOi8vZ2FtZXMucm9ibG94LmNvbS92MS9nYW1lcy8iIC4uIHYzNzIgLi4gIi9zZXJ2ZXJzL1B1YmxpYz9zb3J0T3JkZXI9QXNjJmxpbWl0PTEwMCZjdXJzb3I9IiAuLiB2Mzc0KSk7CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgdjU1NyA9ICIiOwogICAgICAgIGlmICh2NTU2Lm5leHRQYWdlQ3Vyc29yIGFuZCAodjU1Ni5uZXh0UGFnZUN1cnNvciB+PSAibnVsbCIpIGFuZCAodjU1Ni5uZXh0UGFnZUN1cnNvciB+PSBuaWwpKSB0aGVuCiAgICAgICAgICAgIHYzNzQgPSB2NTU2Lm5leHRQYWdlQ3Vyc29yOwogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHY1NTggPSAwOwogICAgICAgIGZvciB2NjUxLCB2NjUyIGluIHBhaXJzKHY1NTYuZGF0YSkgZG8KICAgICAgICAgICAgbG9jYWwgdjY1MyA9IHRydWU7CiAgICAgICAgICAgIHY1NTcgPSB0b3N0cmluZyh2NjUyLmlkKTsKICAgICAgICAgICAgaWYgKHRvbnVtYmVyKHY2NTIubWF4UGxheWVycykgPiB0b251bWJlcih2NjUyLnBsYXlpbmcpKSB0aGVuCiAgICAgICAgICAgICAgICBmb3Igdjg3Miwgdjg3MyBpbiBwYWlycyh2MzczKSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2NTU4IH49IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHY1NTcgPT0gdG9zdHJpbmcodjg3MykpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY2NTMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICh0b251bWJlcih2Mzc1KSB+PSB0b251bWJlcih2ODczKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTQ3MiA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYzNzMgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh2MzczLCB2Mzc1KTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICB2NTU4ID0gdjU1OCArIDEgOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBpZiAodjY1MyA9PSB0cnVlKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHYzNzMsIHY1NTcpOwogICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKTpUZWxlcG9ydFRvUGxhY2VJbnN0YW5jZSh2MzcyLCB2NTU3LCBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIpOwogICAgICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgICBmdW5jdGlvbiB2MTE4KCkKICAgICAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgVFBSZXR1cm5lcigpOwogICAgICAgICAgICAgICAgaWYgKHYzNzQgfj0gIiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUUFJldHVybmVyKCk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQKICAgIGVuZAogICAgdjExOCgpOwplbmQKbG9jYWwgdjU2ID0gdjE2Lk1pc2M6QWRkU2VjdGlvbigiVGVhbSIpOwp2MTYuTWlzYzpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiUGlyYXRlcyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU2V0VGVhbSIsICJQaXJhdGVzIik7CiAgICBlbmQKfSk7CnYxNi5NaXNjOkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJNYXJpbmVzIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJTZXRUZWFtIiwgIk1hcmluZXMiKTsKICAgIGVuZAp9KTsKbG9jYWwgdjU2ID0gdjE2Lk1pc2M6QWRkU2VjdGlvbigiQ29kZSIpOwpsb2NhbCB2MTUwID0gewogICAgIktJVFRfUkVTRVQiLAogICAgIlN1YjJVbmNsZUtpemFydSIsCiAgICAiU1VCMkdBTUVSUk9CT1RfUkVTRVQxIiwKICAgICJTdWIyRmVyOTk5IiwKICAgICJFbnl1X2lzX1BybyIsCiAgICAiSkNXSyIsCiAgICAiU3RhcmNvZGVIRU8iLAogICAgIk1hZ2ljQnVzIiwKICAgICJLaXR0R2FtaW5nIiwKICAgICJTdWIyQ2FwdGFpbk1hdWkiLAogICAgIlN1YjJPZmZpY2FsTm9vYmllIiwKICAgICJUaGVHcmVhdEFjZSIsCiAgICAiU3ViMk5vb2JNYXN0ZXIxMjMiLAogICAgIlN1YjJEYWlncm9jayIsCiAgICAiQXhpb3JlIiwKICAgICJTdHJhd0hhdE1haW5lIiwKICAgICJUYW50YWlHYW1pbmciLAogICAgIkJsdXh4eSIsCiAgICAiU1VCMkdBTUVSUk9CT1RfRVhQMSIsCiAgICAiQ2hhbmRsZXIiLAogICAgIk5PTU9SRUhBQ0siLAogICAgIkJBTkVYUExPSVQiLAogICAgIldpbGREYXJlcyIsCiAgICAiQm9zc0J1aWxkIiwKICAgICJHZXRQcmFua2VkIiwKICAgICJFQVJOX0ZSVUlUUyIsCiAgICAiRklHSFQ0RlJVSVQiLAogICAgIk5PRVhQTE9JVEVSIiwKICAgICJOT09CMkFETUlOIiwKICAgICJDT0RFU0xJREUiLAogICAgIkFETUlOSEFDS0VEIiwKICAgICJBRE1JTkRBUkVTIiwKICAgICJmcnVpdGNvbmNlcHRzIiwKICAgICJrcmF6eWRhcmVzIiwKICAgICJUUklQTEVBQlVTRSIsCiAgICAiU0VBVFJPTExJTkciLAogICAgIjI0Tk9BRE1JTiIsCiAgICAiUkVXQVJERlVOIiwKICAgICJORVdUUk9MTCIsCiAgICAiZnVkZDEwX3YyIiwKICAgICJGdWRkMTAiLAogICAgIkJpZ25ld3MiLAogICAgIlNFQ1JFVF9BRE1JTiIKfTsKdjE2Lk1pc2M6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlJlZGVlbSBBbGwgQ29kZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZm9yIHY1NTksIHY1NjAgaW4gaXBhaXJzKHYxNTApIGRvCiAgICAgICAgICAgIFJlZGVlbUNvZGUodjU2MCk7CiAgICAgICAgZW5kCiAgICBlbmQKfSk7CmZ1bmN0aW9uIFJlZGVlbUNvZGUodjM3NykKICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLlJlZGVlbTpJbnZva2VTZXJ2ZXIodjM3Nyk7CmVuZApsb2NhbCB2NTYgPSB2MTYuTWlzYzpBZGRTZWN0aW9uKCJUaXRsZXMiKTsKdjE2Lk1pc2M6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlRpdGxlcyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgdjM3OCA9IHsKICAgICAgICAgICAgWzFdID0gImdldFRpdGxlcyIKICAgICAgICB9OwogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHYzNzgpKTsKICAgICAgICBnYW1lLlBsYXllcnMubG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uVGl0bGVzLlZpc2libGUgPSB0cnVlOwogICAgZW5kCn0pOwpsb2NhbCB2NTYgPSB2MTYuTWlzYzpBZGRTZWN0aW9uKCJBd2FrZW5pbmciKTsKdjE2Lk1pc2M6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkF3YWtlbmluZyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuUGxheWVyR3VpLk1haW4uQXdha2VuaW5nVG9nZ2xlci5WaXNpYmxlID0gdHJ1ZTsKICAgIGVuZAp9KTsKbG9jYWwgdjU2ID0gdjE2Lk1pc2M6QWRkU2VjdGlvbigiTWlzYyIpOwpsb2NhbCB2MTUxID0gdjE2Lk1pc2M6QWRkVG9nZ2xlKCJUb2dnbGVSZWpvaW4iLCB7CiAgICBUaXRsZSA9ICJSZWpvaW4iLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSB0cnVlCn0pOwp2MTUxOk9uQ2hhbmdlZChmdW5jdGlvbih2MzgxKQogICAgX0cuQXV0b1Jlam9pbiA9IHYzODE7CmVuZCk7CnYxNy5Ub2dnbGVSZWpvaW46U2V0VmFsdWUodHJ1ZSk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9SZWpvaW4gdGhlbgogICAgICAgICAgICBnZXRnZW52KCkucmVqb2luID0gZ2FtZTpHZXRTZXJ2aWNlKCJDb3JlR3VpIikuUm9ibG94UHJvbXB0R3VpLnByb21wdE92ZXJsYXkuQ2hpbGRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKHY4MDgpCiAgICAgICAgICAgICAgICBpZiAoKHY4MDguTmFtZSA9PSAiRXJyb3JQcm9tcHQiKSBhbmQgdjgwODpGaW5kRmlyc3RDaGlsZCgiTWVzc2FnZUFyZWEiKSBhbmQgdjgwOC5NZXNzYWdlQXJlYTpGaW5kRmlyc3RDaGlsZCgiRXJyb3JGcmFtZSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKTpUZWxlcG9ydChnYW1lLlBsYWNlSWQpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjU2ID0gdjE2Lk1pc2M6QWRkU2VjdGlvbigiRm9nIik7CmxvY2FsIGZ1bmN0aW9uIHYxNTIoKQogICAgbG9jYWwgdjM4MiA9IGdhbWU6R2V0U2VydmljZSgiTGlnaHRpbmciKTsKICAgIGlmIHYzODI6RmluZEZpcnN0Q2hpbGQoIkJhc2VBdG1vc3BoZXJlIikgdGhlbgogICAgICAgIHYzODIuQmFzZUF0bW9zcGhlcmU6RGVzdHJveSgpOwogICAgZW5kCiAgICBpZiB2MzgyOkZpbmRGaXJzdENoaWxkKCJTZWFUZXJyb3JDQyIpIHRoZW4KICAgICAgICB2MzgyLlNlYVRlcnJvckNDOkRlc3Ryb3koKTsKICAgIGVuZAogICAgaWYgdjM4MjpGaW5kRmlyc3RDaGlsZCgiTGlnaHRpbmdMYXllcnMiKSB0aGVuCiAgICAgICAgaWYgdjM4Mi5MaWdodGluZ0xheWVyczpGaW5kRmlyc3RDaGlsZCgiQXRtb3NwaGVyZSIpIHRoZW4KICAgICAgICAgICAgdjM4Mi5MaWdodGluZ0xheWVycy5BdG1vc3BoZXJlOkRlc3Ryb3koKTsKICAgICAgICBlbmQKICAgICAgICB3YWl0KCk7CiAgICAgICAgaWYgdjM4Mi5MaWdodGluZ0xheWVyczpGaW5kRmlyc3RDaGlsZCgiRGFya0ZvZyIpIHRoZW4KICAgICAgICAgICAgdjM4Mi5MaWdodGluZ0xheWVycy5EYXJrRm9nOkRlc3Ryb3koKTsKICAgICAgICBlbmQKICAgIGVuZAogICAgdjM4Mi5Gb2dFbmQgPSAxMDAwMDA7CmVuZAp2MTYuTWlzYzpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiVGjhu6ljIFThu4luaCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgdjE1MigpOwogICAgZW5kCn0pOwpsb2NhbCB2MTUzID0gdjE2Lk1pc2M6QWRkVG9nZ2xlKCJUb2dnbGVBbnRpQmFuZCIsIHsKICAgIFRpdGxlID0gIkFudGkgQmFuIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gdHJ1ZQp9KTsKdjE1MzpPbkNoYW5nZWQoZnVuY3Rpb24odjM4NCkKICAgIF9HLkFudGlCYW5kID0gdjM4NDsKZW5kKTsKbG9jYWwgdjE1NCA9IHsKICAgIDE3ODg0ODgxLAogICAgMTIwMTczNjA0LAogICAgOTEyMzQ4Cn07CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkFudGlCYW5kIHRoZW4KICAgICAgICAgICAgZm9yIHY4MDksIHY4MTAgaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0UGxheWVycygpKSBkbwogICAgICAgICAgICAgICAgaWYgdGFibGUuZmluZCh2MTU0LCB2ODEwLlVzZXJJZCkgdGhlbgogICAgICAgICAgICAgICAgICAgIEhvcCgpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHY1NiA9IHYxNi5TZWE6QWRkU2VjdGlvbigiTGV2aWF0aGFuIik7CnYxNi5TZWE6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkJ1eSBMZXZpYXRoYW4gQ2hpcCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiSW5mb0xldmlhdGhhbiIsICIyIik7CiAgICBlbmQKfSk7CmxvY2FsIHYxNTUgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlVFBGcm96ZW5EaW1lbnNpb24iLCB7CiAgICBUaXRsZSA9ICJGbHkgVG8gRnJvemVuIERpbWVuc2lvbiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTU1Ok9uQ2hhbmdlZChmdW5jdGlvbih2Mzg1KQogICAgX0cuVHdlZW5Ub0Zyb3plbkRpbWVuc2lvbiA9IHYzODU7CmVuZCk7CnYxNTU6U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBsb2NhbCB2Mzg2OwogICAgd2hpbGUgbm90IHYzODYgZG8KICAgICAgICB2Mzg2ID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIkZyb3plbkRpbWVuc2lvbiIpOwogICAgICAgIHdhaXQoKTsKICAgIGVuZAogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuVHdlZW5Ub0Zyb3plbkRpbWVuc2lvbiB0aGVuCiAgICAgICAgICAgIGlmIHYzODYgdGhlbgogICAgICAgICAgICAgICAgVHdlZW4odjM4Ni5DRnJhbWUpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwppZiBTZWEzIHRoZW4KICAgIGxvY2FsIHY1NjEgPSB2MTYuU2VhOkFkZFBhcmFncmFwaCh7CiAgICAgICAgVGl0bGUgPSAiTGV2aWF0aGFuIENoaXAgU3RhdHVzIiwKICAgICAgICBDb250ZW50ID0gIiIKICAgIH0pOwogICAgc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgICAgICBsb2NhbCB2ODExID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiSW5mb0xldmlhdGhhbiIsICIxIik7CiAgICAgICAgICAgICAgICBpZiAodjgxMSA9PSA1KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjU2MTpTZXREZXNjKCJMZXZpYXRoYW4gSXMgT3V0IFRoZXJlIik7CiAgICAgICAgICAgICAgICBlbHNlaWYgKHY4MTEgPT0gMCkgdGhlbgogICAgICAgICAgICAgICAgICAgIHY1NjE6U2V0RGVzYygiSSBEb24ndCBLbm93Iik7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdjU2MTpTZXREZXNjKCJNdWE6ICIgLi4gdG9zdHJpbmcodjgxMSkpOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCk7CiAgICBlbmQpOwplbmQKbG9jYWwgdjE1NiA9IHYxNi5TZWE6QWRkU2VjdGlvbigiRHJhY28iKTsKbG9jYWwgdjE1NyA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVCbGF6ZUVtYmVyIiwgewogICAgVGl0bGUgPSAiQXV0byBCbGF6ZSBFbWJlciIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTU3Ok9uQ2hhbmdlZChmdW5jdGlvbih2Mzg3KQogICAgX0cuQXV0b0JsYXplRW1iZXIgPSB2Mzg3OwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvQmxhemVFbWJlciB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKTpXYWl0Rm9yQ2hpbGQoIk1vZHVsZXMiKTpXYWl0Rm9yQ2hpbGQoIk5ldCIpOldhaXRGb3JDaGlsZCgiUkUvRHJhZ29uRG9qb0VtYmVyIik6RmlyZVNlcnZlcigpOwogICAgICAgICAgICBlbmQpOwogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNTggPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlUmVjZWl2ZVF1ZXN0IiwgewogICAgVGl0bGUgPSAiR2V0IEJsYXplIEVtYmVyIFF1ZXN0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNTg6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzODgpCiAgICBfRy5BdXRvUmVjZWl2ZVF1ZXN0ID0gdjM4ODsKICAgIGlmIF9HLkF1dG9SZWNlaXZlUXVlc3QgdGhlbgogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoInJlcXVlc3RFbnRyYW5jZSIsIFZlY3RvcjMubmV3KDU2NjEuNTMyMjI2NTYyNSwgMTAxMy4wOTA3NTkyNzczNDM4LCAtIDMzNC45NjQ5OTYzMzc4OTA2KSk7CiAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcoNTgxNC40MjcyNDYwOTM3NSwgMTIwOC4zMjY3ODIyMjY1NjI1LCA4ODQuNTc4NTUyMjQ2MDkzOCkpOwogICAgICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjg3NCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgWzFdID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29udGV4dCA9ICJSZXF1ZXN0UXVlc3QiCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Nb2R1bGVzLk5ldDpGaW5kRmlyc3RDaGlsZCgiUkYvRHJhZ29uSHVudGVyIik6SW52b2tlU2VydmVyKHVucGFjayh2ODc0KSk7CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjg3NSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgWzFdID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29udGV4dCA9ICJDaGVjayIKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjg3NiA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Nb2R1bGVzLk5ldDpGaW5kRmlyc3RDaGlsZCgiUkYvRHJhZ29uSHVudGVyIik6SW52b2tlU2VydmVyKHVucGFjayh2ODc1KSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKTsKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHYxNTkgPSB2MTYuU2VhOkFkZFBhcmFncmFwaCh7CiAgICBUaXRsZSA9ICJCbGF6ZSBFbWJlciBRdWVzdCBTdGF0dXMiLAogICAgQ29udGVudCA9ICIiCn0pOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGxvY2FsIHY2NTQgPSB7CiAgICAgICAgICAgICAgICBbMV0gPSB7CiAgICAgICAgICAgICAgICAgICAgQ29udGV4dCA9ICJDaGVjayIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgbG9jYWwgdjY1NSA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Nb2R1bGVzLk5ldDpGaW5kRmlyc3RDaGlsZCgiUkYvRHJhZ29uSHVudGVyIik6SW52b2tlU2VydmVyKHVucGFjayh2NjU0KSk7CiAgICAgICAgICAgIGlmICh0eXBlb2YodjY1NSkgPT0gInRhYmxlIikgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY4NzcsIHY4NzggaW4gcGFpcnModjY1NSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiAodjg3OCA9PSAiRGVmZWF0IDMgVmVub21vdXMgQXNzYWlsYW50cyBvbiBIeWRyYSBJc2xhbmQuIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2MTU5OlNldERlc2MoIkRlZmVhdCAzIFZlbm9tb3VzIEFzc2FpbGFudHMgb24gSHlkcmEgSXNsYW5kLiIpOwogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAodjg3OCA9PSAiRGVmZWF0IDMgSHlkcmEgRW5mb3JjZXJzIG9uIEh5ZHJhIElzbGFuZC4iKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHYxNTk6U2V0RGVzYygiRGVmZWF0IDMgSHlkcmEgRW5mb3JjZXJzIG9uIEh5ZHJhIElzbGFuZC4iKTsKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKHY4NzggPT0gIkRlc3Ryb3kgMTAgdHJlZXMgb24gSHlkcmEgSXNsYW5kLiIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgdjE1OTpTZXREZXNjKCJEZXN0cm95IDEwIHRyZWVzIG9uIEh5ZHJhIElzbGFuZC4iKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBwcmludCh2NjU1KTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2MTYwID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZUh5ZHJhVHJlZSIsIHsKICAgIFRpdGxlID0gIkRlc3Ryb3kgdHJlZXMgYXQgSHlkcmEgSXNsYW5kIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNjA6T25DaGFuZ2VkKGZ1bmN0aW9uKHYzODkpCiAgICBfRy5BdXRvSHlkcmFUcmVlID0gdjM4OTsKZW5kKTsKbG9jYWwgZnVuY3Rpb24gdjE2MSh2MzkwKQogICAgbG9jYWwgdjM5MSA9IGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOwogICAgdjM5MTpTZW5kS2V5RXZlbnQodHJ1ZSwgdjM5MCwgZmFsc2UsIGdhbWUpOwogICAgdjM5MTpTZW5kS2V5RXZlbnQoZmFsc2UsIHYzOTAsIGZhbHNlLCBnYW1lKTsKZW5kCmxvY2FsIGZ1bmN0aW9uIHYxNjIodjM5MikKICAgIGxvY2FsIHYzOTMgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI7CiAgICBsb2NhbCB2Mzk0ID0gdjM5My5CYWNrcGFjazsKICAgIGZvciB2NTYyLCB2NTYzIGluIHBhaXJzKHYzOTQ6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiAodjU2MzpJc0EoIlRvb2wiKSBhbmQgKHY1NjMuVG9vbFRpcCA9PSB2MzkyKSkgdGhlbgogICAgICAgICAgICB2NTYzLlBhcmVudCA9IHYzOTMuQ2hhcmFjdGVyOwogICAgICAgICAgICBmb3IgdjgxMiwgdjgxMyBpbiBpcGFpcnMoewogICAgICAgICAgICAgICAgIloiLAogICAgICAgICAgICAgICAgIlgiLAogICAgICAgICAgICAgICAgIkMiLAogICAgICAgICAgICAgICAgIlYiLAogICAgICAgICAgICAgICAgIkYiCiAgICAgICAgICAgIH0pIGRvCiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgdjE2MSh2ODEzKTsKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB2NTYzLlBhcmVudCA9IHYzOTQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGVuZAogICAgZW5kCmVuZApsb2NhbCB2MTYzID0gewogICAgQ0ZyYW1lLm5ldyg1Mjg4LjYxOTYyODkwNjI1LCAxMDA1LjQwMDAyNDQxNDA2MjUsIDM5Mi40MzAxMTQ3NDYwOTM3NSksCiAgICBDRnJhbWUubmV3KDUzNDMuMzk0NTMxMjUsIDEwMDQuMTk5ODkwMTM2NzE4OCwgMzYxLjA2ODc1NjEwMzUxNTYpLAogICAgQ0ZyYW1lLm5ldyg1MjM1Ljc4NTY0NDUzMTI1LCAxMDA0LjE5OTg5MDEzNjcxODgsIDQzMS40NTMwOTQ0ODI0MjE5KSwKICAgIENGcmFtZS5uZXcoNTMyMS4zMDYxNTIzNDM3NSwgMTAwNC4xOTk4OTAxMzY3MTg4LCA0NDAuODk1MTQxNjAxNTYyNSksCiAgICBDRnJhbWUubmV3KDUyNTguOTY0ODQzNzUsIDEwMDQuMTk5ODkwMTM2NzE4OCwgMzQ1LjUwNTI0OTAyMzQzNzUpCn07CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9IeWRyYVRyZWUgdGhlbgogICAgICAgICAgICBBdXRvSGFraSgpOwogICAgICAgICAgICBmb3IgdjgxNCwgdjgxNSBpbiBpcGFpcnModjE2MykgZG8KICAgICAgICAgICAgICAgIGlmIG5vdCBfRy5BdXRvSHlkcmFUcmVlIHRoZW4KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgVHdlZW4yKHY4MTUpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICAgICAgbG9jYWwgdjgxNiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI7CiAgICAgICAgICAgICAgICBpZiAodjgxNiBhbmQgdjgxNjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjkwMiA9ICh2ODE2Lkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSB2ODE1LlBvc2l0aW9uKS5NYWduaXR1ZGU7CiAgICAgICAgICAgICAgICAgICAgaWYgKHY5MDIgPD0gMSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB2MTYyKCJNZWxlZSIpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTYyKCJTd29yZCIpOwogICAgICAgICAgICAgICAgICAgICAgICB2MTYyKCJHdW4iKTsKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwp2MTU2OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJUZWxlcG9ydCBUbyBEcmFnb24gRG9qbyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigicmVxdWVzdEVudHJhbmNlIiwgVmVjdG9yMy5uZXcoNTY2MS41MzIyMjY1NjI1LCAxMDEzLjA5MDc1OTI3NzM0MzgsIC0gMzM0Ljk2NDk5NjMzNzg5MDYpKTsKICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyg1ODE0LjQyNzI0NjA5Mzc1LCAxMjA4LjMyNjc4MjIyNjU2MjUsIDg4NC41Nzg1NTIyNDYwOTM4KSk7CiAgICBlbmQKfSk7CnYxNTY6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkNyYWZ0IFZvbGNhbmljIE1hZ25ldCIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgdjM5NSA9IHsKICAgICAgICAgICAgWzFdID0gIkNyYWZ0SXRlbSIsCiAgICAgICAgICAgIFsyXSA9ICJDcmFmdCIsCiAgICAgICAgICAgIFszXSA9ICJWb2xjYW5pYyBNYWduZXQiCiAgICAgICAgfTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2Mzk1KSk7CiAgICBlbmQKfSk7CmxvY2FsIHYxNjQgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlQ29sbGVjdEZpcmVGbG93ZXJzIiwgewogICAgVGl0bGUgPSAiQ29sbGVjdCBGaXJlIEZsb3dlcnMiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE2NDpPbkNoYW5nZWQoZnVuY3Rpb24odjM5NikKICAgIF9HLkF1dG9Db2xsZWN0RmlyZUZsb3dlcnMgPSB2Mzk2OwplbmQpOwpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvQ29sbGVjdEZpcmVGbG93ZXJzIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjc0NyA9IHdvcmtzcGFjZTpGaW5kRmlyc3RDaGlsZCgiRmlyZUZsb3dlcnMiKTsKICAgICAgICAgICAgaWYgdjc0NyB0aGVuCiAgICAgICAgICAgICAgICBmb3IgdjkwMywgdjkwNCBpbiBwYWlycyh2NzQ3OkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY5MDQ6SXNBKCJNb2RlbCIpIGFuZCB2OTA0LlByaW1hcnlQYXJ0KSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzY3ID0gdjkwNC5QcmltYXJ5UGFydC5Qb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjEzNjggPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb247CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMzY5ID0gKHYxMzY3IC0gdjEzNjgpLk1hZ25pdHVkZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYxMzY5IDw9IDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudCh0cnVlLCAiRSIsIGZhbHNlLCBnYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQoMS41KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuMihDRnJhbWUubmV3KHYxMzY3KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNjUgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlV2hpdGVCZWx0IiwgewogICAgVGl0bGUgPSAiQXRvIFdoaXRlIEJlbHQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE2NTpPbkNoYW5nZWQoZnVuY3Rpb24odjM5NykKICAgIF9HLkF1dG9MZXZlbCA9IHYzOTc7CiAgICBpZiB2Mzk3IHRoZW4KICAgICAgICBsb2NhbCB2NjU2ID0gewogICAgICAgICAgICBbMV0gPSB7CiAgICAgICAgICAgICAgICBOUEMgPSAiRG9qbyBUcmFpbmVyIiwKICAgICAgICAgICAgICAgIENvbW1hbmQgPSAiUmVxdWVzdFF1ZXN0IgogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuTW9kdWxlcy5OZXQ6RmluZEZpcnN0Q2hpbGQoIlJGL0ludGVyYWN0RHJhZ29uUXVlc3QiKTpJbnZva2VTZXJ2ZXIodW5wYWNrKHY2NTYpKTsKICAgICAgICBzcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIF9HLkF1dG9MZXZlbCBkbwogICAgICAgICAgICAgICAgbG9jYWwgdjgxNyA9IHsKICAgICAgICAgICAgICAgICAgICBbMV0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIE5QQyA9ICJEb2pvIFRyYWluZXIiLAogICAgICAgICAgICAgICAgICAgICAgICBDb21tYW5kID0gIkNsYWltUXVlc3QiCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5Nb2R1bGVzLk5ldDpGaW5kRmlyc3RDaGlsZCgiUkYvSW50ZXJhY3REcmFnb25RdWVzdCIpOkludm9rZVNlcnZlcih1bnBhY2sodjgxNykpOwogICAgICAgICAgICAgICAgd2FpdCgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpOwogICAgZW5kCmVuZCk7CmxvY2FsIHYxNjYgPSB2MTYuU2VhOkFkZFBhcmFncmFwaCh7CiAgICBUaXRsZSA9ICJEcmFjbyBSYWNlIiwKICAgIENvbnRlbnQgPSAiIgp9KTsKbG9jYWwgdjE2NyA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVUcmlhbFRlbGVwb3J0IiwgewogICAgVGl0bGUgPSAiRmx5IFRvIFRyaWFsIERvb3IiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE2NzpPbkNoYW5nZWQoZnVuY3Rpb24odjM5OCkKICAgIF9HLkF1dG9UcmlhbFRlbGVwb3J0ID0gdjM5ODsKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b1RyaWFsVGVsZXBvcnQgdGhlbgogICAgICAgICAgICBsb2NhbCB2NzQ4ID0gd29ya3NwYWNlLk1hcC5QcmVoaXN0b3JpY0lzbGFuZDpGaW5kRmlyc3RDaGlsZCgiVHJpYWxUZWxlcG9ydCIpOwogICAgICAgICAgICBpZiAodjc0OCBhbmQgdjc0ODpJc0EoIlBhcnQiKSkgdGhlbgogICAgICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcodjc0OC5Qb3NpdGlvbikpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpOwpsb2NhbCB2MTY4ID0gdjE2LlNlYTpBZGRTZWN0aW9uKCJQcmVoaXN0b3JpYyBJc2xhbmQiKTsKbG9jYWwgdjE2OSA9IHYxNi5TZWE6QWRkUGFyYWdyYXBoKHsKICAgIFRpdGxlID0gIlByZWhpc3RvcmljIElzbGFuZCBTdGF0dXMiLAogICAgQ29udGVudCA9ICIiCn0pOwpzcGF3bihmdW5jdGlvbigpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgICAgIGlmIGdnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLk1hcDpGaW5kRmlyc3RDaGlsZCgiUHJlaGlzdG9yaWNJc2xhbmQiKSB0aGVuCiAgICAgICAgICAgICAgICB2MTY5OlNldERlc2MoIlByZWhpc3RvcmljIElzbGFuZDog4pyF77iPIik7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHYxNjk6U2V0RGVzYygiUHJlaGlzdG9yaWMgSXNsYW5kOiDinYzvuI8iKTsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpOwplbmQpOwpsb2NhbCB2MTcwID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVRQVm9sY2FubyIsIHsKICAgIFRpdGxlID0gIkZseSBUbyBQcmVoaXN0b3JpYyBJc2xhbmQiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE3MDpPbkNoYW5nZWQoZnVuY3Rpb24odjM5OSkKICAgIF9HLlR3ZWVuVG9QcmVoaXN0b3JpYyA9IHYzOTk7CmVuZCk7CnYxNy5Ub2dnbGVUUFZvbGNhbm86U2V0VmFsdWUoZmFsc2UpOwpzcGF3bihmdW5jdGlvbigpCiAgICBsb2NhbCB2NDAwOwogICAgd2hpbGUgbm90IHY0MDAgZG8KICAgICAgICB2NDAwID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIlByZWhpc3RvcmljSXNsYW5kIik7CiAgICAgICAgd2FpdCgpOwogICAgZW5kCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5Ud2VlblRvUHJlaGlzdG9yaWMgdGhlbgogICAgICAgICAgICBsb2NhbCB2NzQ5ID0gZ2FtZTpHZXRTZXJ2aWNlKCJXb3Jrc3BhY2UiKS5NYXA6RmluZEZpcnN0Q2hpbGQoIlByZWhpc3RvcmljSXNsYW5kIik7CiAgICAgICAgICAgIGlmIHY3NDkgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjg3OSA9IHY3NDk6RmluZEZpcnN0Q2hpbGQoIkNvcmUiKSBhbmQgdjc0OS5Db3JlOkZpbmRGaXJzdENoaWxkKCJQcmVoaXN0b3JpY1JlbGljIikgOwogICAgICAgICAgICAgICAgbG9jYWwgdjg4MCA9IHY4NzkgYW5kIHY4Nzk6RmluZEZpcnN0Q2hpbGQoIlNrdWxsIikgOwogICAgICAgICAgICAgICAgaWYgdjg4MCB0aGVuCiAgICAgICAgICAgICAgICAgICAgVHdlZW4yKENGcmFtZS5uZXcodjg4MC5Qb3NpdGlvbikpOwogICAgICAgICAgICAgICAgICAgIF9HLlR3ZWVuVG9QcmVoaXN0b3JpYyA9IGZhbHNlOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNzEgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlRGVmZW5kVm9sY2FubyIsIHsKICAgIFRpdGxlID0gIlNhZmUiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE3MTpPbkNoYW5nZWQoZnVuY3Rpb24odjQwMSkKICAgIF9HLkF1dG9EZWZlbmRWb2xjYW5vID0gdjQwMTsKZW5kKTsKbG9jYWwgdjEwNyA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVNZWxlZSIsIHsKICAgIFRpdGxlID0gIlVzZSBNZWxlZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTA3Ok9uQ2hhbmdlZChmdW5jdGlvbih2NDAyKQogICAgX0cuVXNlTWVsZWUgPSB2NDAyOwplbmQpOwpsb2NhbCB2MTA5ID0gdjE2LlNlYTpBZGRUb2dnbGUoIlRvZ2dsZVN3b3JkIiwgewogICAgVGl0bGUgPSAiVXNlIFN3b3JkIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxMDk6T25DaGFuZ2VkKGZ1bmN0aW9uKHY0MDMpCiAgICBfRy5Vc2VTd29yZCA9IHY0MDM7CmVuZCk7CmxvY2FsIHYxMTAgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlR3VuIiwgewogICAgVGl0bGUgPSAiVXNlIEd1biIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTEwOk9uQ2hhbmdlZChmdW5jdGlvbih2NDA0KQogICAgX0cuVXNlR3VuID0gdjQwNDsKZW5kKTsKbG9jYWwgZnVuY3Rpb24gdjE3Mih2NDA1KQogICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsIHY0MDUsIGZhbHNlLCBnYW1lKTsKICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgdjQwNSwgZmFsc2UsIGdhbWUpOwplbmQKbG9jYWwgZnVuY3Rpb24gdjE3MygpCiAgICBsb2NhbCB2NDA2ID0gZ2FtZS5Xb3Jrc3BhY2UuTWFwLlByZWhpc3RvcmljSXNsYW5kLkNvcmU6RmluZEZpcnN0Q2hpbGQoIkludGVyaW9yTGF2YSIpOwogICAgaWYgKHY0MDYgYW5kIHY0MDY6SXNBKCJNb2RlbCIpKSB0aGVuCiAgICAgICAgdjQwNjpEZXN0cm95KCk7CiAgICBlbmQKICAgIGxvY2FsIHY0MDcgPSBnYW1lLldvcmtzcGFjZS5NYXA6RmluZEZpcnN0Q2hpbGQoIlByZWhpc3RvcmljSXNsYW5kIik7CiAgICBpZiB2NDA3IHRoZW4KICAgICAgICBmb3Igdjc1MCwgdjc1MSBpbiBwYWlycyh2NDA3OkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgIGlmICh2NzUxOklzQSgiUGFydCIpIGFuZCB2NzUxLk5hbWU6bG93ZXIoKTpmaW5kKCJsYXZhIikpIHRoZW4KICAgICAgICAgICAgICAgIHY3NTE6RGVzdHJveSgpOwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgbG9jYWwgdjQwOCA9IGdhbWUuV29ya3NwYWNlLk1hcDpGaW5kRmlyc3RDaGlsZCgiUHJlaGlzdG9yaWNJc2xhbmQiKTsKICAgIGlmIHY0MDggdGhlbgogICAgICAgIGZvciB2NzUyLCB2NzUzIGluIHBhaXJzKHY0MDg6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgaWYgdjc1MzpJc0EoIk1vZGVsIikgdGhlbgogICAgICAgICAgICAgICAgZm9yIHY5MDUsIHY5MDYgaW4gcGFpcnModjc1MzpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgICAgICAgICAgIGlmICh2OTA2OklzQSgiTWVzaFBhcnQiKSBhbmQgdjkwNi5OYW1lOmxvd2VyKCk6ZmluZCgibGF2YSIpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHY5MDY6RGVzdHJveSgpOwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZApsb2NhbCBmdW5jdGlvbiB2MTc0KCkKICAgIGxvY2FsIHY0MDkgPSBnYW1lLldvcmtzcGFjZS5NYXAuUHJlaGlzdG9yaWNJc2xhbmQuQ29yZS5Wb2xjYW5vUm9ja3M7CiAgICBmb3IgdjU2NCwgdjU2NSBpbiBwYWlycyh2NDA5OkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjU2NTpJc0EoIk1vZGVsIikgdGhlbgogICAgICAgICAgICBsb2NhbCB2NzU0ID0gdjU2NTpGaW5kRmlyc3RDaGlsZCgidm9sY2Fub3JvY2siKTsKICAgICAgICAgICAgaWYgKHY3NTQgYW5kIHY3NTQ6SXNBKCJNZXNoUGFydCIpKSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2ODgxID0gdjc1NC5Db2xvcjsKICAgICAgICAgICAgICAgIGlmICgodjg4MSA9PSBDb2xvcjMuZnJvbVJHQigxODUsIDUzLCA1NikpIG9yICh2ODgxID09IENvbG9yMy5mcm9tUkdCKDE4NSwgNTMsIDU3KSkpIHRoZW4KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdjc1NDsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIG5pbDsKZW5kCmxvY2FsIGZ1bmN0aW9uIHYxNjIodjQxMCkKICAgIGxvY2FsIHY0MTEgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXI7CiAgICBsb2NhbCB2NDEyID0gdjQxMS5CYWNrcGFjazsKICAgIGZvciB2NTY2LCB2NTY3IGluIHBhaXJzKHY0MTI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiAodjU2NzpJc0EoIlRvb2wiKSBhbmQgKHY1NjcuVG9vbFRpcCA9PSB2NDEwKSkgdGhlbgogICAgICAgICAgICB2NTY3LlBhcmVudCA9IHY0MTEuQ2hhcmFjdGVyOwogICAgICAgICAgICBmb3IgdjgxOCwgdjgxOSBpbiBpcGFpcnMoewogICAgICAgICAgICAgICAgIloiLAogICAgICAgICAgICAgICAgIlgiLAogICAgICAgICAgICAgICAgIkMiLAogICAgICAgICAgICAgICAgIlYiLAogICAgICAgICAgICAgICAgIkYiCiAgICAgICAgICAgIH0pIGRvCiAgICAgICAgICAgICAgICB3YWl0KCk7CiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgdjE3Mih2ODE5KTsKICAgICAgICAgICAgICAgIGVuZCk7CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICB2NTY3LlBhcmVudCA9IHY0MTI7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGVuZAogICAgZW5kCmVuZApzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBfRy5BdXRvRGVmZW5kVm9sY2FubyB0aGVuCiAgICAgICAgICAgIEF1dG9IYWtpKCk7CiAgICAgICAgICAgIHBjYWxsKHYxNzMpOwogICAgICAgICAgICBsb2NhbCB2NzU3ID0gdjE3NCgpOwogICAgICAgICAgICBpZiB2NzU3IHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHY4ODIgPSBDRnJhbWUubmV3KHY3NTcuUG9zaXRpb24gKyBWZWN0b3IzLm5ldygwLCAwLCAwKSk7CiAgICAgICAgICAgICAgICBUd2VlbjIodjg4Mik7CiAgICAgICAgICAgICAgICBsb2NhbCB2ODgzID0gdjc1Ny5Db2xvcjsKICAgICAgICAgICAgICAgIGlmICgodjg4MyB+PSBDb2xvcjMuZnJvbVJHQigxODUsIDUzLCA1NikpIGFuZCAodjg4MyB+PSBDb2xvcjMuZnJvbVJHQigxODUsIDUzLCA1NykpKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdjc1NyA9IHYxNzQoKTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEyNSA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEyNiA9ICgodjExMjUgLSB2NzU3LlBvc2l0aW9uKSAtIFZlY3RvcjMubmV3KDAsIDAsIDApKS5NYWduaXR1ZGU7CiAgICAgICAgICAgICAgICAgICAgaWYgKHYxMTI2IDw9IDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgX0cuVXNlTWVsZWUgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2MigiTWVsZWUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLlVzZVN3b3JkIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxNjIoIlN3b3JkIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBpZiBfRy5Vc2VHdW4gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjE2MigiR3VuIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIF9HLlR3ZWVuVG9QcmVoaXN0b3JpYyA9IGZhbHNlOwogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIF9HLlR3ZWVuVG9QcmVoaXN0b3JpYyA9IHRydWU7CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCk7CmxvY2FsIHYxNzUgPSB2MTYuU2VhOkFkZFRvZ2dsZSgiVG9nZ2xlS2lsbEF1cmEiLCB7CiAgICBUaXRsZSA9ICJBdHRhY2sgR29sZW1zIEF1cmEiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSBmYWxzZQp9KTsKdjE3NTpPbkNoYW5nZWQoZnVuY3Rpb24odjQxMykKICAgIEtpbGxBdXJhID0gdjQxMzsKZW5kKTsKdjE3LlRvZ2dsZUtpbGxBdXJhOlNldFZhbHVlKGZhbHNlKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgS2lsbEF1cmEgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBmb3Igdjg4NCwgdjg4NSBpbiBwYWlycyhnYW1lLldvcmtzcGFjZS5FbmVtaWVzOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgKHY4ODU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHY4ODU6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSBhbmQgKHY4ODUuSHVtYW5vaWQuSGVhbHRoID4gMCkpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODg1Lkh1bWFub2lkLkhlYWx0aCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ODg1Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgS2lsbEF1cmEgb3Igbm90IHY4ODUuUGFyZW50IG9yICh2ODg1Lkh1bWFub2lkLkhlYWx0aCA8PSAwKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCk7CiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjE3NiA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVDb2xsZWN0Qm9uZSIsIHsKICAgIFRpdGxlID0gIkNvbGxlY3QgQm9uZSIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IGZhbHNlCn0pOwp2MTc2Ok9uQ2hhbmdlZChmdW5jdGlvbih2NDE0KQogICAgX0cuQXV0b0NvbGxlY3RCb25lID0gdjQxNDsKZW5kKTsKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgaWYgX0cuQXV0b0NvbGxlY3RCb25lIHRoZW4KICAgICAgICAgICAgZm9yIHY4MjAsIHY4MjEgaW4gcGFpcnMod29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICBpZiAodjgyMTpJc0EoIkJhc2VQYXJ0IikgYW5kICh2ODIxLk5hbWUgPT0gIkRpbm9Cb25lIikpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbjIoQ0ZyYW1lLm5ldyh2ODIxLlBvc2l0aW9uKSk7CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKbG9jYWwgdjE3NyA9IHYxNi5TZWE6QWRkVG9nZ2xlKCJUb2dnbGVDb2xsZWN0RWdnIiwgewogICAgVGl0bGUgPSAiQ29sbGVjdCBEcmFnb24gRWdnIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UKfSk7CnYxNzc6T25DaGFuZ2VkKGZ1bmN0aW9uKHY0MTUpCiAgICBfRy5BdXRvQ29sbGVjdEVnZyA9IHY0MTU7CmVuZCk7CnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHdhaXQoKSBkbwogICAgICAgIGlmIF9HLkF1dG9Db2xsZWN0RWdnIHRoZW4KICAgICAgICAgICAgbG9jYWwgdjc1OCA9IHdvcmtzcGFjZS5NYXAuUHJlaGlzdG9yaWNJc2xhbmQuQ29yZS5TcGF3bmVkRHJhZ29uRWdnczpHZXRDaGlsZHJlbigpOwogICAgICAgICAgICBpZiAoIyB2NzU4ID4gMCkgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdjg4NiA9IHY3NThbbWF0aC5yYW5kb20oMSwgIyB2NzU4KV07CiAgICAgICAgICAgICAgICBpZiAodjg4NjpJc0EoIk1vZGVsIikgYW5kIHY4ODYuUHJpbWFyeVBhcnQpIHRoZW4KICAgICAgICAgICAgICAgICAgICBUd2VlbjIodjg4Ni5QcmltYXJ5UGFydC5DRnJhbWUpOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTI3ID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uOwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHYxMTI4ID0gdjg4Ni5QcmltYXJ5UGFydC5Qb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MTEyOSA9ICh2MTEyNyAtIHYxMTI4KS5NYWduaXR1ZGU7CiAgICAgICAgICAgICAgICAgICAgaWYgKHYxMTI5IDw9IDEpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIik6U2VuZEtleUV2ZW50KHRydWUsICJFIiwgZmFsc2UsIGdhbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDEuNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiVmlydHVhbElucHV0TWFuYWdlciIpOlNlbmRLZXlFdmVudChmYWxzZSwgIkUiLCBmYWxzZSwgZ2FtZSk7CiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKTsKCgoKCi0tID09PT09PT09PT09PT09PT09IFNBRkUgTUVOVSBUT0dHTEUgKFJJR0hUU0hJRlQpID09PT09PT09PT09PT09PT09Ci0tIE5vbi1kZXN0cnVjdGl2ZSB0b2dnbGU6IG9ubHkgaGlkZXMvc2hvd3MgU2NyZWVuR3VpIGluc3RlYWQgb2YgRGVzdHJveSgpCmxvY2FsIFVJUyA9IGdhbWU6R2V0U2VydmljZSgiVXNlcklucHV0U2VydmljZSIpCgpsb2NhbCBmdW5jdGlvbiBmaW5kTWFpbkd1aSgpCiAgICAtLSBUcnkgQ29yZUd1aSBmaXJzdCAoY29tbW9uIGZvciBVSSBsaWJzKQogICAgZm9yIF8sdiBpbiBpcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJDb3JlR3VpIik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2OklzQSgiU2NyZWVuR3VpIikgdGhlbgogICAgICAgICAgICByZXR1cm4gdgogICAgICAgIGVuZAogICAgZW5kCiAgICAtLSBGYWxsYmFjayB0byBQbGF5ZXJHdWkKICAgIGxvY2FsIHBnID0gUGxheWVycy5Mb2NhbFBsYXllcjpGaW5kRmlyc3RDaGlsZCgiUGxheWVyR3VpIikKICAgIGlmIHBnIHRoZW4KICAgICAgICBmb3IgXyx2IGluIGlwYWlycyhwZzpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBpZiB2OklzQSgiU2NyZWVuR3VpIikgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuIHYKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiBuaWwKZW5kCgpsb2NhbCBNYWluR3VpID0gZmluZE1haW5HdWkoKQpsb2NhbCBWaXNpYmxlID0gdHJ1ZQoKVUlTLklucHV0QmVnYW46Q29ubmVjdChmdW5jdGlvbihpbnB1dCwgZ3ApCiAgICBpZiBncCB0aGVuIHJldHVybiBlbmQKICAgIGlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLlJpZ2h0U2hpZnQgdGhlbgogICAgICAgIFZpc2libGUgPSBub3QgVmlzaWJsZQogICAgICAgIGlmIE1haW5HdWkgdGhlbgogICAgICAgICAgICBNYWluR3VpLkVuYWJsZWQgPSBWaXNpYmxlCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKQotLSA9PT09PT09PT09PT09PT09PSBFTkQgTUVOVSBUT0dHTEUgPT09PT09PT09PT09PT09PT0KCgoKLS0gPT09PT09PT09PT09PT09PT0gRlVMTCBUT0dHTEUgRklYID09PT09PT09PT09PT09PT09CmxvY2FsIFVJUyA9IGdhbWU6R2V0U2VydmljZSgiVXNlcklucHV0U2VydmljZSIpCmxvY2FsIENvcmVHdWkgPSBnYW1lOkdldFNlcnZpY2UoIkNvcmVHdWkiKQpsb2NhbCBQbGF5ZXJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgbHAgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCgpsb2NhbCBHVUlfTkFNRSA9ICJCTl9UT0dHTEVfR1VJIgppZiBDb3JlR3VpOkZpbmRGaXJzdENoaWxkKEdVSV9OQU1FKSB0aGVuCiAgICBDb3JlR3VpW0dVSV9OQU1FXTpEZXN0cm95KCkKZW5kCgpsb2NhbCBTY3JlZW5HdWkgPSBJbnN0YW5jZS5uZXcoIlNjcmVlbkd1aSIpClNjcmVlbkd1aS5OYW1lID0gR1VJX05BTUUKU2NyZWVuR3VpLlJlc2V0T25TcGF3biA9IGZhbHNlClNjcmVlbkd1aS5QYXJlbnQgPSBDb3JlR3VpCgpsb2NhbCBUb2dnbGVCdG4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQpUb2dnbGVCdG4uU2l6ZSA9IFVEaW0yLmZyb21PZmZzZXQoNTAsNTApClRvZ2dsZUJ0bi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLDEwLDAuNSwtMjUpClRvZ2dsZUJ0bi5UZXh0ID0gIuKJoSIKVG9nZ2xlQnRuLlRleHRTY2FsZWQgPSB0cnVlClRvZ2dsZUJ0bi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC4yClRvZ2dsZUJ0bi5QYXJlbnQgPSBTY3JlZW5HdWkKCmxvY2FsIGZ1bmN0aW9uIGZpbmRNYWluKCkKICAgIGZvciBfLHYgaW4gcGFpcnMoU2NyZWVuR3VpOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgaWYgdjpJc0EoIkZyYW1lIikgYW5kIHYuTmFtZTpsb3dlcigpOmZpbmQoIm1haW4iKSB0aGVuCiAgICAgICAgICAgIHJldHVybiB2CiAgICAgICAgZW5kCiAgICBlbmQKZW5kCgpsb2NhbCBvcGVuZWQgPSB0cnVlCmxvY2FsIGZ1bmN0aW9uIHNldFZpc2libGUoc3RhdGUpCiAgICBsb2NhbCBtYWluID0gZmluZE1haW4oKQogICAgaWYgbWFpbiB0aGVuCiAgICAgICAgbWFpbi5WaXNpYmxlID0gc3RhdGUKICAgIGVuZAplbmQKClRvZ2dsZUJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIG9wZW5lZCA9IG5vdCBvcGVuZWQKICAgIHNldFZpc2libGUob3BlbmVkKQplbmQpCgpVSVMuSW5wdXRCZWdhbjpDb25uZWN0KGZ1bmN0aW9uKGlucHV0LCBncCkKICAgIGlmIGdwIHRoZW4gcmV0dXJuIGVuZAogICAgaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuUmlnaHRDb250cm9sIHRoZW4KICAgICAgICBvcGVuZWQgPSBub3Qgb3BlbmVkCiAgICAgICAgc2V0VmlzaWJsZShvcGVuZWQpCiAgICBlbmQKZW5kKQoKdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoMikgZG8KICAgICAgICBpZiBub3QgU2NyZWVuR3VpLlBhcmVudCB0aGVuCiAgICAgICAgICAgIFNjcmVlbkd1aS5QYXJlbnQgPSBDb3JlR3VpCiAgICAgICAgICAgIHNldFZpc2libGUob3BlbmVkKQogICAgICAgIGVuZCAKICAgIGVuZAogIGVuZCkKLS0gPT09PT09PT09PT09PT09PT0gRU5EIFRPR0dMRSBGSVggPT09PT09PT09PT09PT09PT0KIA=="
local function d(s)
    local b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
    s = s:gsub('[^'..b..'=]', '')
    return (s:gsub('.', function(x)
        if x == '=' then return '' end
        local r,f='',(b:find(x)-1)
        for i=6,1,-1 do
            r=r..(f%2^i - f%2^(i-1) > 0 and '1' or '0')
        end
        return r
    end):gsub('%d%d%d?%d?%d?%d?%d?%d?', function(x)
        if #x ~= 8 then return '' end
        local c=0
        for i=1,8 do
            if x:sub(i,i)=='1' then c=c + 2^(8-i) end
        end
        return string.char(c)
    end))
end

local src = d(b64)
local f = loadstring(src)
if not f then error("Decode failed") end
return f()
